"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[733],{9112:(Oe,ee,n)=>{n.d(ee,{M:()=>m});var e=n(9067),f=n(8081),b=n(5581);const m=(...u)=>(0,e._U)((0,f.Dv)(b._8.appConfig,...u))},8961:(Oe,ee,n)=>{n.d(ee,{Z:()=>b});var e=n(8081),f=n(9067);const b=m=>{const u=m===e.Mv.audio,E=u?e.Hx:e.k0,w=(0,f._U)(E.selectedItem),Z=(0,f._U)(E.selection),W=(0,f._U)(E.list),ne=(0,f.cw)(),te=u?ne.audioPlaylist:ne.videoPlaylist;return{active:w,hasNext:Z.hasNext,hasPrevious:Z.hasPrevious,actions:te,list:W}}},9121:(Oe,ee,n)=>{n.d(ee,{VK:()=>H,nN:()=>X,l0:()=>oe.l});var e=n(8160),f=n(5836),b=n(9067),m=n(8081),u=n(108),E=n.n(u),w=Object.defineProperty,Z=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,te=(v,c,g)=>c in v?w(v,c,{enumerable:!0,configurable:!0,writable:!0,value:g}):v[c]=g,N=(v,c)=>{for(var g in c||(c={}))W.call(c,g)&&te(v,g,c[g]);if(Z)for(var g of Z(c))ne.call(c,g)&&te(v,g,c[g]);return v},h=(v,c,g)=>(te(v,typeof c!="symbol"?c+"":c,g),g);const se=v=>JSON.stringify(v,(c,g)=>g===void 0?null:g);class ce{constructor(){h(this,"init",(c="")=>{this.initialized||(this.pusher=new(E())({npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"vscode",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/usr/local/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/",npm_package_dependencies_react_virtualized_auto_sizer:"^1.0.7",npm_package_dependencies__100mslive_react_icons:"0.8.3",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.78.0",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_react_intersection_observer:"^9.4.3",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",ZDOTDIR:"/Users/macbook",npm_package_dependencies_uuid:"^8.3.2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",USER:"macbook",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.76.0",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",COMMAND_MODE:"unix2003",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies__100mslive_hms_noise_suppression:"0.9.3",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.tJiuoSH8nu/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x1",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.8.3",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/yarn--1684819888085-0.5786261786208151:/Users/macbook/Downloads/100ms-web-main/node_modules/.bin:/Users/macbook/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/Library/Apple/usr/bin:/Library/Frameworks/Mono.framework/Versions/Current/Commands:/Users/macbook/Documents/flutter/bin:/Users/macbook/Documents/flutter/bin",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies_zipyai:"^1.3.24",npm_package_dependencies__emoji_mart_react:"^1.0.1",LaunchInstanceID:"E4FED9CE-D764-4E76-8C1A-952A493E16D7",_:"/Users/macbook/Downloads/100ms-web-main/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/macbook",npm_package_browserslist_production_1:"not dead",PWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.8.3",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"fr_FR.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.11.3",npm_package_resolutions_loader_utils:"^2.0.4",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",VSCODE_INJECTION:"1",npm_package_devDependencies_autoprefixer:"^10.4.2",HOME:"/Users/macbook",SHLVL:"2",npm_package_dependencies_react_window:"^1.8.7",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_hls_js:"^1.3.0",npm_package_dependencies__100mslive_hls_player:"0.1.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"macbook",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",npm_lifecycle_script:"webpack --node-env production",VSCODE_GIT_IPC_HANDLE:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/vscode-git-73afa0f49e.sock",npm_package_dependencies_react:"^18.1.0",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v18.8.0 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",SECURITYSESSIONID:"186a3",npm_package_devDependencies_css_loader:"^6.5.1",npm_package_dependencies_react_draggable:"^4.4.5",COLORTERM:"truecolor",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/johanna-videoconf-559.app.100ms.live/"}.REACT_APP_PUSHER_APP_KEY,{cluster:"ap2",authEndpoint:{npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"vscode",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/usr/local/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/",npm_package_dependencies_react_virtualized_auto_sizer:"^1.0.7",npm_package_dependencies__100mslive_react_icons:"0.8.3",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.78.0",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_react_intersection_observer:"^9.4.3",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",ZDOTDIR:"/Users/macbook",npm_package_dependencies_uuid:"^8.3.2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",USER:"macbook",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.76.0",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",COMMAND_MODE:"unix2003",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies__100mslive_hms_noise_suppression:"0.9.3",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.tJiuoSH8nu/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x1",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.8.3",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/yarn--1684819888085-0.5786261786208151:/Users/macbook/Downloads/100ms-web-main/node_modules/.bin:/Users/macbook/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/Library/Apple/usr/bin:/Library/Frameworks/Mono.framework/Versions/Current/Commands:/Users/macbook/Documents/flutter/bin:/Users/macbook/Documents/flutter/bin",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies_zipyai:"^1.3.24",npm_package_dependencies__emoji_mart_react:"^1.0.1",LaunchInstanceID:"E4FED9CE-D764-4E76-8C1A-952A493E16D7",_:"/Users/macbook/Downloads/100ms-web-main/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/macbook",npm_package_browserslist_production_1:"not dead",PWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.8.3",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"fr_FR.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.11.3",npm_package_resolutions_loader_utils:"^2.0.4",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",VSCODE_INJECTION:"1",npm_package_devDependencies_autoprefixer:"^10.4.2",HOME:"/Users/macbook",SHLVL:"2",npm_package_dependencies_react_window:"^1.8.7",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_hls_js:"^1.3.0",npm_package_dependencies__100mslive_hls_player:"0.1.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"macbook",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",npm_lifecycle_script:"webpack --node-env production",VSCODE_GIT_IPC_HANDLE:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/vscode-git-73afa0f49e.sock",npm_package_dependencies_react:"^18.1.0",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v18.8.0 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",SECURITYSESSIONID:"186a3",npm_package_devDependencies_css_loader:"^6.5.1",npm_package_dependencies_react_draggable:"^4.4.5",COLORTERM:"truecolor",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/johanna-videoconf-559.app.100ms.live/"}.REACT_APP_PUSHER_AUTHENDPOINT}),this.channel=this.pusher.subscribe(`private-${c}`),this.channel.bind("pusher:subscription_succeeded",this.resendLastEvents),console.log("Whiteboard initialized communication through Pusher"),this.initialized=!0)}),h(this,"storeEvent",(c,g)=>{this.lastMessage[c]=N({eventName:c},g)}),h(this,"getStoredEvent",c=>this.lastMessage[c]),h(this,"broadcastEvent",(c,g={})=>{var P;this.storeEvent(c,g),(P=this.channel)==null||P.trigger(`client-${c}`,se(N({eventName:c},g)))}),h(this,"subscribe",(c,g)=>{var P,T;return(P=this.channel)==null||P.bind(`client-${c}`,R=>this.storeEvent(c,R)),(T=this.channel)==null||T.bind(`client-${c}`,g),()=>{var R;(R=this.channel)==null||R.unbind(`client-${c}`,g)}}),h(this,"resendLastEvents",()=>{var c;for(const g in this.lastMessage)this.lastMessage[g]&&((c=this.channel)==null||c.trigger(`client-${g}`,this.lastMessage[g]))}),this.initialized=!1,this.lastMessage={}}}const x=new ce,J={STATE_CHANGE:"state-change",CURRENT_STATE:"current-state",REQUEST_STATE:"request-state"};var oe=n(802);const me=()=>{const{amIWhiteboardOwner:v}=(0,oe.l)();return{shouldRequestState:(0,b._U)((0,m._u)(850)),amIWhiteboardOwner:v}};function G(v){const[c,g]=(0,e.useState)(null),[P,T]=(0,e.useState)(!1),{amIWhiteboardOwner:R,shouldRequestState:I}=me(),Y=(0,e.useRef)(new Map),Q=(0,e.useRef)(new Map),K=(0,e.useCallback)(()=>({shapes:Y.current?Object.fromEntries(Y.current):{},bindings:Q.current?Object.fromEntries(Q.current):{}}),[]),le=(0,e.useCallback)(()=>{R&&P&&x.broadcastEvent(J.CURRENT_STATE,K())},[R,P,K]),he=(0,e.useCallback)(({shapes:q,bindings:ve,merge:ye=!0})=>{if(!!(q&&ve))if(ye){const Ce=Y.current,ge=Q.current;if(!(Ce&&ge))return;Object.entries(q).forEach(([Me,ke])=>{ke?Ce.set(ke.id,ke):Ce.delete(Me)}),Object.entries(ve).forEach(([Me,ke])=>{ke?ge.set(ke.id,ke):ge.delete(Me)})}else Y.current=new Map(Object.entries(q)),Q.current=new Map(Object.entries(ve))},[]),De=(0,e.useCallback)(q=>{c?.replacePageContent(q.shapes,q.bindings,{})},[c]),Re=(0,e.useCallback)(q=>{if(!q)return;const{shapes:ve,bindings:ye,eventName:Ce}=q;he({shapes:ve,bindings:ye,merge:Ce===J.STATE_CHANGE}),De(K())},[De,K,he]),L=(0,e.useCallback)(()=>{!P||(R?(Re(x.getStoredEvent(J.CURRENT_STATE)),le()):I&&x.broadcastEvent(J.REQUEST_STATE))},[P,R,I,Re,le]),Pe=(0,e.useCallback)(q=>{q.loadRoom(v),q.pause(),g(q)},[v]),xe=(0,e.useCallback)((q,ve,ye,Ce)=>{he({shapes:ve,bindings:ye}),x.broadcastEvent(J.STATE_CHANGE,{shapes:ve,bindings:ye}),De(K())},[he,De,K]);return(0,e.useEffect)(()=>{if(!c)return;const q=[];let ve=!0;function ye(){ve&&(q.push(x.subscribe(J.STATE_CHANGE,Re)),q.push(x.subscribe(J.CURRENT_STATE,Re)),q.push(x.subscribe(J.REQUEST_STATE,le)),T(!0))}return x.init(v),ye(),L(),()=>{ve=!1,q.forEach(Ce=>Ce())}},[c,v,L,le,Re]),(0,e.useEffect)(()=>()=>{P&&!I&&(console.log("Whiteboard unmount storing",K()),x.storeEvent(J.CURRENT_STATE,K()))},[P,I,K]),{onMount:Pe,onChangePage:xe}}var de=Object.defineProperty,O=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,$=(v,c,g)=>c in v?de(v,c,{enumerable:!0,configurable:!0,writable:!0,value:g}):v[c]=g,B=(v,c)=>{for(var g in c||(c={}))M.call(c,g)&&$(v,g,c[g]);if(O)for(var g of O(c))S.call(c,g)&&$(v,g,c[g]);return v};const X=e.memo(({roomId:v})=>{const c=G(v);return e.createElement(f.Dr,B({autofocus:!0,disableAssets:!0,showSponsorLink:!1,showPages:!1,showMenu:!1},c))});var ae=n(9168),D=n(455),ue=n(7777),V=n(6773),F=n(2383),A=n(5581),z=n(8160);const H=()=>{const{whiteboardEnabled:v,whiteboardOwner:c,amIWhiteboardOwner:g,toggleWhiteboard:P}=(0,oe.l)(),T=(0,V.ZP)(),R=(0,b._U)(m.fo),I=(0,F.N3)(A.ql.WHITEBOARD);return!v||R===T||!I?null:z.createElement(D.u,{title:`${c?g?"Stop whiteboard":"Can't stop whiteboard":"Start whiteboard"}`,key:"whiteboard"},z.createElement(ue.Z,{onClick:P,active:!c,disabled:c&&!g,"data-testid":"white_board_btn"},z.createElement(ae.Z,null)))}},3053:(Oe,ee,n)=>{n.d(ee,{$:()=>E});var e=n(8160),f=n(6939),b=n(8485),m=n(8721);const u=n.p+"static/media/first_person.0917322d0bba25059a53.png",E=e.memo(()=>e.createElement(f.x,{css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",backgroundImage:`url(${u})`,backgroundSize:"cover",backgroundRepeat:"no-repeat","@md":{w:"100%",maxWidth:"unset"}},"data-testid":"first_person_img"},e.createElement(b.k,{align:"center",direction:"column",css:{position:"absolute",w:"100%",top:"33.33%",left:0,textAlign:"center"}},e.createElement(m.x,{color:"white",variant:"h4",css:{"@md":{fontSize:"$md"}}},"Welcome!"),e.createElement(m.x,{color:"white",variant:"h6",css:{mt:"$4","@md":{fontSize:"$sm"}}},"You\u2019re the first one here."),e.createElement(m.x,{color:"white",variant:"h6",css:{mt:"$2","@md":{fontSize:"$sm"}}},"Sit back and relax till the others join."))))},9990:(Oe,ee,n)=>{n.d(ee,{Nc:()=>de,iS:()=>G});var e=n(8160),f=n(8081),b=n(9067),m=n(6905),u=n(4817),E=n(8338),w=n(4053),Z=n(4334),W=n(7506),ne=n(8651),te=n(6939),N=n(8485),h=n(8721),se=n(5861),ce=n(8961);const x=({type:O,duration:M})=>{const S=O===f.Mv.audio?f.Hx:f.k0,$=(0,b._U)(S.progress),B=(0,b.cw)(),X=O===f.Mv.audio?B.audioPlaylist:B.videoPlaylist;return M?e.createElement(ne.i,{step:1,value:[$],onValueChange:ae=>{X.seekTo(ae[0]*.01*M)}}):null},J=({type:O,onToggle:M})=>{var S,$;const X=O===f.Mv.audio?f.Hx:f.k0,ae=(0,b._U)(X.selectedItem);return ae?e.createElement(te.x,{css:{mt:"$8"}},e.createElement(N.k,{justify:"between",css:{w:"100%"}},e.createElement(te.x,null,e.createElement(h.x,{variant:"md"},ae.name),((S=ae.metadata)==null?void 0:S.description)&&e.createElement(h.x,{variant:"xs"},($=ae.metadata)==null?void 0:$.description)),e.createElement(se.h,{onClick:M,css:{alignSelf:"center"},"data-testid":"playlist_collapse_btn"},e.createElement(m.Z,null)))):null},oe=({type:O,css:M={}})=>{const{active:S,hasNext:$,hasPrevious:B,actions:X}=(0,ce.Z)(O);return S?e.createElement(N.k,{justify:"center",css:M},e.createElement(se.h,{disabled:!B,onClick:()=>{X.playPrevious()},"data-testid":"playlist_prev_btn"},e.createElement(u.Z,null)),e.createElement(se.h,{onClick:()=>{S.playing?X.pause():X.play(S.id)},"data-testid":"playlist_play_pause_btn"},S.playing?e.createElement(E.Z,{width:32,height:32}):e.createElement(w.Z,{width:32,height:32})),e.createElement(se.h,{disabled:!$,onClick:()=>{X.playNext()},"data-testid":"playlist_next_btn"},e.createElement(Z.Z,null))):null},me=()=>{const O=(0,b.cw)(),M=(0,b._U)(f.k0.volume),S=(0,b._U)(f.k0.selectedItem),$=(0,b._U)(f.Oq),B=(0,b._U)((0,f.n2)($?.id)),X=(0,b._U)((0,f.BF)(B?.id)),ae=S?M:X;return e.createElement(N.k,{align:"center",css:{color:"$white"}},e.createElement(W.Z,null),e.createElement(ne.i,{css:{mx:"$4",w:"$20"},min:0,max:100,step:1,value:[Math.floor(ae??100)],onValueChange:D=>{const ue=D[0];S?O.videoPlaylist.setVolume(ue):B&&O.setVolume(ue,B.id)},thumbStyles:{w:"$6",h:"$6"}}))},G=({onToggle:O})=>{const{active:M}=(0,ce.Z)(f.Mv.audio);return M?e.createElement(te.x,{css:{p:"$8",borderTop:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(oe,{type:f.Mv.audio}),e.createElement(x,{type:f.Mv.audio,duration:M.duration}),e.createElement(J,{type:f.Mv.audio,onToggle:O})):null},de=({children:O})=>{const{active:M}=(0,ce.Z)(f.Mv.video);return e.createElement(te.x,{css:{p:"$8",mt:"-$24",w:"100%",zIndex:1,"@lg":{mt:0,p:"$6"}}},M&&e.createElement(x,{type:f.Mv.video,duration:M.duration}),e.createElement(N.k,{align:"center",justify:"between"},e.createElement(me,null),M&&e.createElement(oe,{css:{flex:"1 1 0"}}),O))}},9477:(Oe,ee,n)=>{n.d(ee,{Z:()=>me});var e=n(8160),f=n(8379),b=n(8523),m=n.n(b),u=n(9067),E=n(8081),w=n(6532),Z=n(7854),W=n(1280),ne=n(4299),te=n(3074),N=n(3844),h=n(6567),se=n(6773),ce=n(5581);const x={position:"unset",width:"100%",textAlign:"center",transform:"none",mt:"$2",flexShrink:0},J=({peerId:G,width:de="100%",height:O="100%"})=>{const M=(0,u._U)(E.I3)===G,S=(0,u._U)((0,E.K6)(G)),$=(0,u._U)((0,E.Nm)(G)),B=(0,se.L3)(ce.JZ.isAudioOnly),X=(0,se.tQ)(),[ae,D]=(0,e.useState)(!1),ue=(0,se.L3)(ce.JZ.showStatsOnTiles),V=(0,N.O)({peerName:$.name,isLocal:!1,track:S}),F=(0,e.useRef)(null),[A,z]=(0,e.useState)(!1),H=(0,f.Z)(F,A,{onClose:()=>z(!1)}),v=m().isEnabled,c=(0,u._U)((0,E.Qq)($?.id));return e.createElement(W.i.Root,{css:{width:de,height:O},"data-testid":"screenshare_tile"},$?e.createElement(W.i.Container,{transparentBg:!0,ref:F,css:{flexDirection:"column"},onMouseEnter:()=>D(!0),onMouseLeave:()=>{D(!1)}},ue?e.createElement(ne.q8,{audioTrackID:c?.id,videoTrackID:S?.id,peerID:G,isLocal:M}):null,v&&!X?e.createElement(W.i.FullScreenButton,{onClick:()=>z(!A)},H?e.createElement(w.Z,null):e.createElement(Z.Z,null)):null,S?e.createElement(te.n,{screenShare:!0,mirror:$.isLocal&&S?.source==="regular",attach:!B,trackId:S.id}):null,e.createElement(W.i.Info,{css:x},V),ae&&!X&&!$?.isLocal?e.createElement(h.Z,{isScreenshare:!0,peerID:$?.id,audioTrackID:c?.id,videoTrackID:S?.id}):null):null)},me=e.memo(J)},6567:(Oe,ee,n)=>{n.d(ee,{Z:()=>z});var e=n(8160),f=n(9067),b=n(8081),m=n(4866),u=n(4896),E=n(3191),w=n(1401),Z=n(4328),W=n(8111),ne=n(7923),te=n(6548),N=n(8981),h=n(7506),se=n(9540),ce=n(4685),x=n(8414),J=n(8485),oe=n(6939),me=n(8651),G=n(8721),de=n(7097),O=n(6773),M=n(395),S=n(4791),$=n(2383),B=n(5581),X=(H,v,c)=>new Promise((g,P)=>{var T=Y=>{try{I(c.next(Y))}catch(Q){P(Q)}},R=Y=>{try{I(c.throw(Y))}catch(Q){P(Q)}},I=Y=>Y.done?g(Y.value):Promise.resolve(Y.value).then(T,R);I((c=c.apply(H,v)).next())});const ae=({trackId:H,videoTrackID:v,audioTrackID:c})=>H&&(v&&v===H||c&&c===H),D=({audioTrackID:H,videoTrackID:v})=>{const c=(0,f.cw)(),g=(0,f._U)((0,b.$8)(B.H3.SPOTLIGHT)),P=ae({trackId:g,videoTrackID:v,audioTrackID:H}),T=R=>c.sessionStore.set(B.H3.SPOTLIGHT,R).catch(I=>de.y.addToast({title:I.description}));return e.createElement(x.R.ItemButton,{onClick:()=>P?T():T(v||H)},e.createElement(E.Z,null),e.createElement("span",null,P?"Remove from Spotlight":"Spotlight Tile for everyone"))},ue=({audioTrackID:H,videoTrackID:v})=>{const[c,g]=(0,O.$h)(B._8.pinnedTrackId),P=ae({trackId:c,videoTrackID:v,audioTrackID:H});return e.createElement(e.Fragment,null,e.createElement(x.R.ItemButton,{onClick:()=>P?g():g(v||H)},e.createElement(w.Z,null),e.createElement("span",null,`${P?"Unpin":"Pin"}`," Tile for myself")))},V={npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"vscode",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/usr/local/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/",npm_package_dependencies_react_virtualized_auto_sizer:"^1.0.7",npm_package_dependencies__100mslive_react_icons:"0.8.3",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.78.0",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_react_intersection_observer:"^9.4.3",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",ZDOTDIR:"/Users/macbook",npm_package_dependencies_uuid:"^8.3.2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",USER:"macbook",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.76.0",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",COMMAND_MODE:"unix2003",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies__100mslive_hms_noise_suppression:"0.9.3",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.tJiuoSH8nu/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x1",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.8.3",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/yarn--1684819888085-0.5786261786208151:/Users/macbook/Downloads/100ms-web-main/node_modules/.bin:/Users/macbook/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/Library/Apple/usr/bin:/Library/Frameworks/Mono.framework/Versions/Current/Commands:/Users/macbook/Documents/flutter/bin:/Users/macbook/Documents/flutter/bin",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies_zipyai:"^1.3.24",npm_package_dependencies__emoji_mart_react:"^1.0.1",LaunchInstanceID:"E4FED9CE-D764-4E76-8C1A-952A493E16D7",_:"/Users/macbook/Downloads/100ms-web-main/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/macbook",npm_package_browserslist_production_1:"not dead",PWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.8.3",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"fr_FR.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.11.3",npm_package_resolutions_loader_utils:"^2.0.4",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",VSCODE_INJECTION:"1",npm_package_devDependencies_autoprefixer:"^10.4.2",HOME:"/Users/macbook",SHLVL:"2",npm_package_dependencies_react_window:"^1.8.7",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_hls_js:"^1.3.0",npm_package_dependencies__100mslive_hls_player:"0.1.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"macbook",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",npm_lifecycle_script:"webpack --node-env production",VSCODE_GIT_IPC_HANDLE:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/vscode-git-73afa0f49e.sock",npm_package_dependencies_react:"^18.1.0",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v18.8.0 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",SECURITYSESSIONID:"186a3",npm_package_devDependencies_css_loader:"^6.5.1",npm_package_dependencies_react_draggable:"^4.4.5",COLORTERM:"truecolor",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/johanna-videoconf-559.app.100ms.live/"}.REACT_APP_ENV==="qa",F=({audioTrackID:H,videoTrackID:v,peerID:c,isScreenshare:g=!1})=>{var P,T;const[R,I]=(0,e.useState)(!1),Y=(0,f.cw)(),K=(0,f._U)(b.I3)===c,{removeOthers:le}=(0,f._U)(b.AI),{isAudioEnabled:he,isVideoEnabled:De,setVolume:Re,toggleAudio:L,toggleVideo:Pe,volume:xe}=(0,m.T)(H,v),{sendEvent:q}=(0,u.j)({type:B.fU}),ve=((P=(0,f._U)((0,b.t$)(c)))==null?void 0:P.id)===v,Ce=(0,f._U)(b.m8).uiMode==="inset",Me=(0,$.N3)(B.ql.PIN_TILE)&&(H||v&&ve)&&!Ce,ke=(0,f._U)((0,b.M)(v)),He=!((T=ke?.layerDefinitions)!=null&&T.length)||ke.degraded||!ke.enabled;return(0,M.M)({open:R,name:"TileMenu"}),!(le||L||Pe||Re||Me)&&He||Ce&&K?null:e.createElement(x.R.Root,{open:R,onOpenChange:I},e.createElement(x.R.Trigger,{"data-testid":"participant_menu_btn",onClick:Le=>Le.stopPropagation()},e.createElement(Z.Z,null)),e.createElement(x.R.Content,{side:"top",align:"end"},K?Me&&e.createElement(e.Fragment,null,e.createElement(ue,{audioTrackID:H,videoTrackID:v}),V&&e.createElement(D,{audioTrackID:H,videoTrackID:v})):e.createElement(e.Fragment,null,Pe?e.createElement(x.R.ItemButton,{onClick:Pe,"data-testid":De?"mute_video_participant_btn":"unmute_video_participant_btn"},De?e.createElement(W.Z,null):e.createElement(ne.Z,null),e.createElement("span",null,`${De?"Mute":"Request Unmute"}`)):null,L?e.createElement(x.R.ItemButton,{onClick:L,"data-testid":De?"mute_audio_participant_btn":"unmute_audio_participant_btn"},he?e.createElement(te.Z,null):e.createElement(N.Z,null),e.createElement("span",null,`${he?"Mute":"Request Unmute"}`)):null,H?e.createElement(x.R.VolumeItem,{"data-testid":"participant_volume_slider"},e.createElement(J.k,{align:"center",gap:1},e.createElement(h.Z,null),e.createElement(oe.x,{as:"span",css:{ml:"$4"}},"Volume (",xe,")")),e.createElement(me.i,{css:{my:"0.5rem"},step:5,value:[xe],onValueChange:Le=>Re(Le[0])})):null,Me&&e.createElement(e.Fragment,null,e.createElement(ue,{audioTrackID:H,videoTrackID:v}),V&&e.createElement(D,{audioTrackID:H,videoTrackID:v})),e.createElement(A,{trackId:v}),le?e.createElement(x.R.RemoveItem,{onClick:()=>X(void 0,null,function*(){try{yield Y.removePeer(c,"")}catch{}}),"data-testid":"remove_participant_btn"},e.createElement(se.Z,null),e.createElement("span",null,"Remove Participant")):null,le&&g?e.createElement(x.R.RemoveItem,{onClick:()=>q({})},e.createElement(ce.Z,null),e.createElement("span",null,"Stop Screenshare")):null)))},A=({trackId:H})=>{var v;const c=(0,f._U)((0,b.M)(H)),g=(0,f.cw)(),P=(0,S.s)();if(!((v=c?.layerDefinitions)!=null&&v.length)||c.degraded||!c.enabled)return null;const T=c.layerDefinitions.find(R=>R.layer===c.layer);return e.createElement(e.Fragment,null,e.createElement(x.R.ItemButton,{css:{color:"$textMedEmp",cursor:"default"}},"Select maximum resolution"),c.layerDefinitions.map(R=>e.createElement(x.R.ItemButton,{key:R.layer,onClick:()=>X(void 0,null,function*(){yield g.setPreferredLayer(H,R.layer)}),css:{justifyContent:"space-between",bg:c.preferredLayer===R.layer?P:void 0,"&:hover":{bg:c.preferredLayer===R.layer?P:void 0}}},e.createElement(G.x,{as:"span",css:{textTransform:"capitalize",mr:"$2",fontWeight:c.preferredLayer===R.layer?"$semiBold":"$regular"}},R.layer),e.createElement(G.x,{as:"span",variant:"xs",css:{color:"$textMedEmp"}},R.resolution.width,"x",R.resolution.height))),e.createElement(x.R.ItemButton,null,e.createElement(G.x,{as:"span",variant:"xs",css:{color:"$textMedEmp"}},"Currently streaming:",e.createElement(G.x,{as:"span",variant:"xs",css:{fontWeight:"$semiBold",textTransform:"capitalize",color:"$textMedEmp",ml:"$2"}},T?e.createElement(e.Fragment,null,c.layer," (",T.resolution.width,"x",T.resolution.height,")"):"-"))))},z=F},8051:(Oe,ee,n)=>{n.d(ee,{Z:()=>de});var e=n(8160),f=n(9067),b=n(8081),m=n(871),u=n(9314),E=n(8613),w=n(8534),Z=n(4718),W=n(3385),ne=n(4674);const te=({page:O,setPage:M,numPages:S})=>{const $=O===0,B=O===S-1,X=()=>{M(Math.min(O+1,S-1))},ae=()=>{M(Math.max(O-1,0))};return e.createElement(ne.I.Root,null,e.createElement(ne.I.Chevron,{disabled:$,onClick:ae},e.createElement(Z.Z,{width:16,height:16,style:{cursor:$?"not-allowed":"pointer"}})),e.createElement(ne.I.Dots,null,[...Array(S)].map((D,ue)=>e.createElement(ne.I.Dot,{key:ue,active:O===ue,onClick:()=>M(ue)}))),e.createElement(ne.I.Chevron,{disabled:B,onClick:X},e.createElement(W.Z,{width:16,height:16,style:{cursor:B?"not-allowed":"pointer"}})))};var N=n(9477),h=n(8329),se=n(9112),ce=n(6773),x=n(5581);const J=({maxTileCount:O,peers:M,maxColCount:S,maxRowCount:$,includeScreenShareForPeer:B})=>{const{aspectRatio:X}=(0,u.Fg)(),ae=(0,se.M)("headlessConfig","tileOffset"),D=(0,ce.tQ)(),ue=(0,ce.L3)(x.JZ.hideLocalVideo),V=(0,f._U)(b.I3);ue&&M.length>1&&(M=me(M,V));const{ref:F,pagesWithTiles:A}=(0,m.i)({peers:M,maxTileCount:O,maxColCount:S,maxRowCount:$,includeScreenShareForPeer:B,aspectRatio:X,offsetY:G({isHeadless:D,tileOffset:ae})}),[z,H]=(0,e.useState)(0);return(0,e.useEffect)(()=>{z>=A.length&&H(0)},[A.length,z]),e.createElement(E.d.Root,{ref:F},e.createElement(E.d.Container,null,A&&A.length>0?A.map((v,c)=>e.createElement(E.d.View,{key:c,css:{left:(0,w.I)(c,z),transition:"left 0.3s ease-in-out"}},v.map(g=>{var P,T,R,I;return g.width===0||g.height===0?null:((P=g.track)==null?void 0:P.source)==="screen"?e.createElement(N.Z,{key:g.track.id,width:g.width,height:g.height,peerId:g.peer.id}):e.createElement(h.Z,{key:((T=g.track)==null?void 0:T.id)||g.peer.id,width:g.width,height:g.height,peerId:(R=g.peer)==null?void 0:R.id,trackId:(I=g.track)==null?void 0:I.id,visible:c===z})}))):null),!D&&A.length>1?e.createElement(te,{page:z,setPage:H,numPages:A.length}):null)},oe=e.memo(J);function me(O,M){const S=O;let $=!1;O=[];for(let B=0;B<S.length;B++)S[B].id===M?$=!0:O.push(S[B]);return $||(O=S),O}const G=({tileOffset:O,isHeadless:M})=>!M||isNaN(Number(O))?32:Number(O),de=oe},8329:(Oe,ee,n)=>{n.d(ee,{Z:()=>ue});var e=n(8160),f=n(8081),b=n(9067),m=n(8981),u=n(3712),E=n(4593),w=n(5470),Z=n(1280),W=n(4299),ne=n(3074),te=n(1959),N=n(2173),h=n(3844),se=n(6567),ce=n(9112),x=n(6773),J=n(5581),oe=Object.defineProperty,me=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,O=(V,F,A)=>F in V?oe(V,F,{enumerable:!0,configurable:!0,writable:!0,value:A}):V[F]=A,M=(V,F)=>{for(var A in F||(F={}))G.call(F,A)&&O(V,A,F[A]);if(me)for(var A of me(F))de.call(F,A)&&O(V,A,F[A]);return V};const S=({peerId:V,trackId:F,width:A,height:z,visible:H=!0,objectFit:v="cover",rootCSS:c={},containerCSS:g={}})=>{const P=F?(0,f.GP)(F):(0,f.t$)(V),T=(0,b._U)(P),R=(0,b._U)((0,f.I_)(V)),I=(0,b._U)((0,f.L6)(V)),Y=(0,b._U)(f.I3),Q=(0,x.L3)(J.JZ.isAudioOnly),K=(0,x.L3)(J.JZ.mirrorLocalVideo),le=(0,x.L3)(J.JZ.showStatsOnTiles),he=(0,x.tQ)(),De=!(0,b._U)((0,f.xn)(V)),Re=!T?.enabled,[L,Pe]=(0,e.useState)(!1),xe=(0,w.W)(I?.id),q=T?.degraded,ve=Y===V,ye=(0,h.O)({peerName:R,track:T,isLocal:ve}),Ce=(0,e.useCallback)(Le=>{Pe(Le.type==="mouseenter")},[]),ge=(0,ce.M)("headlessConfig"),Me=he&&ge?.hideTileName,ke=z>=180&&A>=180,He=(0,e.useMemo)(()=>{if(!(!A||!z))return A<=150||z<=150?"small":A<=300||z<=300?"medium":"large"},[A,z]);return e.createElement(Z.i.Root,{css:M({width:A,height:z,padding:D({isHeadless:he,tileOffset:ge?.tileOffset,hideAudioLevel:ge?.hideAudioLevel}),visibility:H?"visible":"hidden"},c),"data-testid":`participant_tile_${R}`},R!==void 0?e.createElement(Z.i.Container,{onMouseEnter:Ce,onMouseLeave:Ce,ref:he&&ge?.hideAudioLevel?void 0:xe,noRadius:he&&Number(ge?.tileOffset)===0,css:g},le&&ke?e.createElement(W.q8,{audioTrackID:I?.id,videoTrackID:T?.id,peerID:V,isLocal:ve}):null,T?e.createElement(ne.n,{trackId:T?.id,attach:ve?void 0:!Q,mirror:K&&V===Y&&T?.source==="regular"&&T?.facingMode!=="environment",degraded:q,noRadius:he&&Number(ge?.tileOffset)===0,"data-testid":"participant_video_tile",css:{objectFit:v}}):null,Re||q||!ve&&Q?e.createElement(Z.i.AvatarContainer,null,e.createElement(te.q,{name:R||"","data-testid":"participant_avatar_icon",size:He})):null,ae({hideTileAudioMute:ge?.hideTileAudioMute,isHeadless:he,isAudioMuted:De})?e.createElement(Z.i.AudioIndicator,{"data-testid":"participant_audio_mute_icon",size:A&&z&&(A<180||z<180)?"small":"medium"},e.createElement(m.Z,null)):null,L&&!he?e.createElement(se.Z,{peerID:V,audioTrackID:I?.id,videoTrackID:T?.id}):null,e.createElement(B,{peerId:V}),e.createElement(N.Z,{hideLabel:Me,name:ye,isTile:!0,peerId:V,width:A})):null)},$={top:"$4",left:"$4"},B=({peerId:V})=>{const F=(0,b._U)((0,f.cH)(V)),A=F?.isHandRaised||!1,z=F?.isBRBOn||!1;return e.createElement(e.Fragment,null,A?e.createElement(Z.i.AttributeBox,{css:$,"data-testid":"raiseHand_icon_onTile"},e.createElement(u.Z,{width:40,height:40})):null,z?e.createElement(Z.i.AttributeBox,{css:$,"data-testid":"brb_icon_onTile"},e.createElement(E.Z,{width:40,height:40})):null)},X=e.memo(S),ae=({hideTileAudioMute:V,isHeadless:F,isAudioMuted:A})=>F?A&&!V:A,D=({isHeadless:V,tileOffset:F,hideAudioLevel:A})=>{if(!(!V||isNaN(Number(F))))return Number(F)===0?A?0:3:void 0},ue=X},512:(Oe,ee,n)=>{n.r(ee),n.d(ee,{default:()=>_s});var e=n(8160),f=n(5396),b=n(3738),m=n(9067),u=n(8081),E=n(8485),w=n(6939),Z=n(5374),W=n(9660),ne=n(6395),te=n(1554),N=n(6773),h=n(5581),se=n(8160);const ce=({showStats:a})=>{const s=(0,m._U)(u.BK);return se.createElement(E.k,{css:{size:"100%","@lg":{flexDirection:"column"}}},se.createElement(x,null),se.createElement(te.O,{peers:s,showStatsOnTiles:a}))},x=()=>{const{amIScreenSharing:a,toggleScreenShare:s}=(0,W.N)(ne.m),[t,r]=(0,N.$h)(h._8.embedConfig),[i,l]=(0,e.useState)(!1),_=(0,e.useRef)(!1),p=t.url,o=(0,e.useRef)(),d=(0,e.useCallback)(()=>{p&&r({url:""})},[p,r]);return(0,e.useEffect)(()=>{t.shareScreen&&!a&&!i&&!_.current&&(_.current=!0,s({forceCurrentTab:!0,cropElement:o.current}).then(()=>{l(!0)}).catch(d).finally(()=>{_.current=!1}))},[]),(0,e.useEffect)(()=>(i&&!a&&d(),()=>{i&&a&&(d(),s())}),[i,a,d,s]),se.createElement(w.x,{ref:o,css:{mx:"$8",flex:"3 1 0","@lg":{flex:"2 1 0",display:"flex",alignItems:"center"}}},se.createElement("iframe",{src:p,title:p,style:{width:"100%",height:"100%",border:0},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture fullscreen",referrerPolicy:"no-referrer"}))},J=ce;var oe=n(6938),me=n.n(oe),G=n(32),de=n(9290),O=n(3053),M=n(8329),S=n(2383);const $=({roleMap:a,roleName:s,isMobile:t})=>{const r=a[s],{width:i,height:l}=r.publishParams.video;return t?l/i:i/l};function B(){var a;const s=(0,m._U)(u.LY),t=(0,m._U)(u.UP),r=(0,G.Z)(de.vc.media.md),i=(0,G.Z)(de.vc.media.ls),l=(0,m._U)(u.cD),_=(0,S.dP)();let p=[],o=[];if(_){const k=((a=_[t.roleName])==null?void 0:a.split(","))||[];for(const y of s)k.includes(y.roleName)?p.push(y):o.push(y);p.length===0&&o.length>0&&(p=o,o=[])}else p=s;const d=o.length>0&&(r||i);return e.createElement(e.Fragment,null,e.createElement(w.x,{css:{display:"grid",gridTemplateColumns:o.length>0?"3fr 1fr":"100%",gridTemplateRows:"1fr",gap:"$8",px:"$10",size:"100%","@md":{gridTemplateColumns:"1fr",gridTemplateRows:o.length>0?"3fr 1fr":"100%"}}},e.createElement(E.k,{align:"center",justify:"center",css:{size:"100%",gap:"$8",flexWrap:"wrap",placeContent:"center",minHeight:0,minWidth:0,"@lg":{flexFlow:"column"},"@ls":{flexFlow:"row"}}},p.length>0?p.map(k=>e.createElement(M.Z,{key:k.videoTrack||k.id,peerId:k.id,trackId:k.videoTrack,rootCSS:{aspectRatio:$({roleMap:l,roleName:k.roleName,isMobile:r}),padding:0,height:"100%",maxWidth:"100%",minWidth:0,minHeight:0,flex:s.length===1?void 0:"1 1 0",display:"flex",alignItems:"center","@lg":{display:"block",padding:"0 !important",width:"100%"}},objectFit:"contain"})):e.createElement(O.$,null)),o.length>0&&e.createElement(E.k,{align:"center",justify:"center",css:{size:"100%",gap:"$4",flexFlow:"row wrap",placeContent:"center"}},(d?[...o,t]:o).map((k,y,U)=>e.createElement(M.Z,{key:k.videoTrack||k.id,peerId:k.id,trackId:k.videoTrack,rootCSS:{aspectRatio:$({roleMap:l,roleName:k.roleName,isMobile:!1}),flexBasis:"100%","@ls":{aspectRatio:1,flexBasis:"calc(50% - $4)"},"@md":{aspectRatio:1,flexBasis:U.length<4?"calc(50% - $4)":"calc(33% - $4)"},"@sm":{flexBasis:U.length<=4?"calc(50% - $4)":"calc(33% - $4)"},padding:0},objectFit:"contain"})))),!d&&e.createElement(X,{roleMap:l,isMobile:r,isLandscape:i}))}const X=({isMobile:a,roleMap:s,isLandscape:t})=>{const r=(0,m._U)(u.UP),i=(0,m._U)((0,u.EP)(h._8.sidePane)),l=$({roleMap:s,roleName:r.roleName,isMobile:a});let _=180,p=_*l;t&&p>240&&(p=240,_=p/l);const o=(0,e.useRef)(null);return(0,e.useEffect)(()=>{if(!o.current||!window.ResizeObserver)return;const d=o.current,k=new ResizeObserver(y=>{y.forEach(U=>{U.target===d.parentElement&&(d.style.transform="translate(0,0)")})});return k.observe(d.parentElement),()=>{d?.parentElement&&k?.unobserve(d.parentElement),k?.disconnect()}},[]),e.createElement(me(),{bounds:"parent",nodeRef:o},e.createElement(w.x,{ref:o,css:{position:"absolute",bottom:0,right:i?"$100":"$10",mr:i?"$14":0,boxShadow:"0 0 8px 0 rgba(0,0,0,0.3)",zIndex:10,aspectRatio:l,h:_}},e.createElement(M.Z,{peerId:r.id,trackid:r.videoTrack,rootCSS:{size:"100%",padding:0},containerCSS:{bg:"$surfaceDefault"},width:p,height:_})))};var ae=n(5211),D=n(8721);const ue=e.memo(({message:a})=>e.createElement(w.x,{css:{overflow:"hidden",w:"96%",maxWidth:"96%",h:"100%",m:"auto",background:"$surfaceDefault",borderRadius:"$3"},"data-testid":"non_publisher_view"},e.createElement(E.k,{align:"center",direction:"column",css:{w:"$96",textAlign:"center",margin:"auto",h:"100%",justifyContent:"center",gap:"$8"}},e.createElement(ae.Z,{color:"#C3D0E5",width:"80px",height:"80px"}),e.createElement(E.k,{direction:"column",css:{w:"$80",p:"$1",gap:"$4"}},e.createElement(D.x,{color:"white",variant:"h6",css:{"@md":{fontSize:"$md"}}},a),e.createElement(D.x,{color:"$textMedEmp",css:{mt:"$4","@md":{fontSize:"$sm"}}},"Please go to dashboard and reconfigure role settings or contact the role admin."))))),V=a=>(0,m._U)((0,u.Dv)(h._8.appLayout,a)),F=()=>{var a;const s=V("center")||[],t=V("sidepane")||[],r=(0,N.L3)(h.JZ.maxTileCount),i=(0,m._U)(u.BK),l=(0,m._U)(u.cD),_=(0,m._U)(u.I3),p=i.filter(C=>s.includes(C.roleName)),o=i.filter(C=>t.includes(C.roleName)),d=(0,m._U)(u.Gb),k=(0,m._U)((0,u.kD)(d.subscribeParams.subscribeToRoles||[])),[y,U]=(0,e.useState)("");(0,e.useEffect)(()=>{var C;const Ee=i.some(be=>{var Se;return be.roleName&&l[be.roleName]?!!((Se=l[be.roleName].publishParams)!=null&&Se.allowed.length):!0}),pe=k.some(be=>{var Se;return be.roleName&&l[be.roleName]?!!((Se=l[be.roleName].publishParams)!=null&&Se.allowed.length):!0});Ee?(C=d.subscribeParams.subscribeToRoles)!=null&&C.length?U(pe?"":"This role subscribed to roles is not publishing"):U("This role isn't subscribed to any role"):U("None of the roles can publish video, audio or screen")},[(a=d.subscribeParams.subscribeToRoles)==null?void 0:a.length,i,k,l]);let j=p.length>0&&o.length>0;if(p.length===0){const C=i.length===1&&i[0].id===_,Ee=o.length===0;j=C||Ee}return e.createElement(E.k,{css:{size:"100%"},direction:{"@initial":"row","@md":"column"}},y?e.createElement(ue,{message:y}):e.createElement(e.Fragment,null,e.createElement(te.m,{peers:j?p:i,maxTileCount:r,allowRemoteMute:!1,hideSidePane:!j,totalPeers:i.length}),j&&e.createElement(te.O,{peers:o,totalPeers:i.length})))};var A=n(535),z=n(2671),H=n(8647);const v=e.memo(()=>e.createElement(w.x,{css:{overflow:"hidden",w:"96%",maxWidth:"96%",h:"100%",m:"auto",background:"$surfaceDefault",borderRadius:"$3"},"data-testid":"waiting_view"},e.createElement(E.k,{align:"center",direction:"column",css:{w:"$96",textAlign:"center",margin:"auto",h:"100%",justifyContent:"center",gap:"$8"}},e.createElement(H.Z,{width:"80px",height:"80px"}),e.createElement(E.k,{direction:"column",css:{w:"$80",p:"$1",gap:"$4"}},e.createElement(D.x,{color:"white",variant:"h6",css:{"@md":{fontSize:"$md"}}},"Please wait"),e.createElement(D.x,{color:"$textMedEmp",css:{mt:"$4","@md":{fontSize:"$sm"}}},"Sit back and relax till others let you join.")))));var c=n(9121),g=n(9112);const P=e.lazy(()=>n.e(421).then(n.bind(n,9421))),T=e.lazy(()=>n.e(566).then(n.bind(n,3566))),R=e.lazy(()=>n.e(507).then(n.bind(n,507))),I=e.lazy(()=>n.e(41).then(n.bind(n,3379))),Y=()=>{const a=(0,m._U)(u.fo),s=(0,N.xL)(),t=(0,m._U)(u.pk),r=(0,m._U)(u.Vq),i=(0,m._U)(u.Oq),{whiteboardOwner:l}=(0,c.l0)(),_=(0,m._U)(u.ln),p=(0,m._U)(u.m8).uiMode,o=(0,m.cw)(),d=(0,N.tQ)(),k=(0,g.M)("headlessConfig","uiMode"),{uiViewMode:y,isAudioOnly:U}=(0,N.L3)(),j=(0,N.ZP)(),C=(0,N.xJ)(),Ee=(0,N.PS)();if((0,e.useEffect)(()=>{if(!_)return;const be=JSON.parse({npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"vscode",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/usr/local/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/",npm_package_dependencies_react_virtualized_auto_sizer:"^1.0.7",npm_package_dependencies__100mslive_react_icons:"0.8.3",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.78.0",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_react_intersection_observer:"^9.4.3",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",ZDOTDIR:"/Users/macbook",npm_package_dependencies_uuid:"^8.3.2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",USER:"macbook",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.76.0",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",COMMAND_MODE:"unix2003",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies__100mslive_hms_noise_suppression:"0.9.3",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.tJiuoSH8nu/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x1",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.8.3",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/yarn--1684819888085-0.5786261786208151:/Users/macbook/Downloads/100ms-web-main/node_modules/.bin:/Users/macbook/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/Library/Apple/usr/bin:/Library/Frameworks/Mono.framework/Versions/Current/Commands:/Users/macbook/Documents/flutter/bin:/Users/macbook/Documents/flutter/bin",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies_zipyai:"^1.3.24",npm_package_dependencies__emoji_mart_react:"^1.0.1",LaunchInstanceID:"E4FED9CE-D764-4E76-8C1A-952A493E16D7",_:"/Users/macbook/Downloads/100ms-web-main/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/macbook",npm_package_browserslist_production_1:"not dead",PWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.8.3",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"fr_FR.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.11.3",npm_package_resolutions_loader_utils:"^2.0.4",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",VSCODE_INJECTION:"1",npm_package_devDependencies_autoprefixer:"^10.4.2",HOME:"/Users/macbook",SHLVL:"2",npm_package_dependencies_react_window:"^1.8.7",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_hls_js:"^1.3.0",npm_package_dependencies__100mslive_hls_player:"0.1.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"macbook",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",npm_lifecycle_script:"webpack --node-env production",VSCODE_GIT_IPC_HANDLE:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/vscode-git-73afa0f49e.sock",npm_package_dependencies_react:"^18.1.0",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v18.8.0 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",SECURITYSESSIONID:"186a3",npm_package_devDependencies_css_loader:"^6.5.1",npm_package_dependencies_react_draggable:"^4.4.5",COLORTERM:"truecolor",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/johanna-videoconf-559.app.100ms.live/"}.REACT_APP_AUDIO_PLAYLIST||"[]"),Se=JSON.parse({npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"vscode",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/usr/local/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/",npm_package_dependencies_react_virtualized_auto_sizer:"^1.0.7",npm_package_dependencies__100mslive_react_icons:"0.8.3",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.78.0",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_react_intersection_observer:"^9.4.3",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",ZDOTDIR:"/Users/macbook",npm_package_dependencies_uuid:"^8.3.2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",USER:"macbook",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.76.0",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",COMMAND_MODE:"unix2003",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies__100mslive_hms_noise_suppression:"0.9.3",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.tJiuoSH8nu/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x1",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.8.3",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/yarn--1684819888085-0.5786261786208151:/Users/macbook/Downloads/100ms-web-main/node_modules/.bin:/Users/macbook/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/Library/Apple/usr/bin:/Library/Frameworks/Mono.framework/Versions/Current/Commands:/Users/macbook/Documents/flutter/bin:/Users/macbook/Documents/flutter/bin",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies_zipyai:"^1.3.24",npm_package_dependencies__emoji_mart_react:"^1.0.1",LaunchInstanceID:"E4FED9CE-D764-4E76-8C1A-952A493E16D7",_:"/Users/macbook/Downloads/100ms-web-main/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/macbook",npm_package_browserslist_production_1:"not dead",PWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.8.3",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"fr_FR.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.11.3",npm_package_resolutions_loader_utils:"^2.0.4",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",VSCODE_INJECTION:"1",npm_package_devDependencies_autoprefixer:"^10.4.2",HOME:"/Users/macbook",SHLVL:"2",npm_package_dependencies_react_window:"^1.8.7",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_hls_js:"^1.3.0",npm_package_dependencies__100mslive_hls_player:"0.1.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"macbook",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",npm_lifecycle_script:"webpack --node-env production",VSCODE_GIT_IPC_HANDLE:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/vscode-git-73afa0f49e.sock",npm_package_dependencies_react:"^18.1.0",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v18.8.0 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",SECURITYSESSIONID:"186a3",npm_package_devDependencies_css_loader:"^6.5.1",npm_package_dependencies_react_draggable:"^4.4.5",COLORTERM:"truecolor",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/johanna-videoconf-559.app.100ms.live/"}.REACT_APP_VIDEO_PLAYLIST||"[]");Se.length>0&&o.videoPlaylist.setList(Se),be.length>0&&o.audioPlaylist.setList(be),o.sessionStore.observe([h.H3.PINNED_MESSAGE,h.H3.SPOTLIGHT])},[_,o]),!a)return null;let pe;return a===j?pe=T:a===C?pe=v:Ee?pe=J:l?pe=P:p==="inset"?pe=B:(t&&t.id!==r?.id||i)&&!U?pe=A.Z:s?pe=I:y===h.FU||d&&k===h.FU?pe=R:pe=F,e.createElement(e.Suspense,{fallback:e.createElement(Z.Z,null)},e.createElement(E.k,{css:{size:"100%",position:"relative"}},e.createElement(pe,null),e.createElement(z.Z,null)))};var Q=n(510),K=n(455),le=n(1458),he=n(6722),De=n(8287),Re=n(9057),L=n(9024),Pe=n(7777),xe=n(9990);function q(a){if(!a)return"";let s=Math.floor(a/60);s<10&&(s=`0${String(s)}`);let t=Math.floor(a%60);return t<10&&(t=`0${String(t)}`),`${s}:${t}`}const ve=e.memo(({name:a,metadata:s,duration:t,selected:r,onClick:i})=>e.createElement(L.L.Item,{css:{flexDirection:"column",alignItems:"flex-start",h:"$18",p:"$8","&:hover":{cursor:"pointer",bg:"$menuBg"},"&:focus-visible":{bg:"$menuBg"}},onClick:i},e.createElement(E.k,{align:"center",justify:"between",css:{width:"100%",minHeight:0}},e.createElement(D.x,{variant:"md",css:{color:r?"$brandDefault":"$textPrimary"}},a),e.createElement(D.x,{variant:"xs"},q(t))),s?.description&&e.createElement(D.x,{variant:"xs",css:{mt:"$4"}},s?.description)));var ye=n(8961),Ce=Object.defineProperty,ge=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,rn=(a,s,t)=>s in a?Ce(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,Un=(a,s)=>{for(var t in s||(s={}))He.call(s,t)&&rn(a,t,s[t]);if(ke)for(var t of ke(s))Le.call(s,t)&&rn(a,t,s[t]);return a},Nn=(a,s)=>ge(a,Me(s)),cn=(a,s,t)=>new Promise((r,i)=>{var l=o=>{try{p(t.next(o))}catch(d){i(d)}},_=o=>{try{p(t.throw(o))}catch(d){i(d)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,_);p((t=t.apply(a,s)).next())});const $n=({type:a,actions:s})=>e.createElement(e.Fragment,null,e.createElement(D.x,{as:"label",htmlFor:`${a}PlaylistBrowse`,variant:"sm",css:{cursor:"pointer",mr:"$2"}},"Browse"),e.createElement("input",{type:"file",id:`${a}PlaylistBrowse`,accept:a===u.Mv.audio?"audio/*":"video/*",onChange:t=>{const r=t.target.files[0],i=r.lastModified;s.setList([{type:a,id:i,name:r.name,url:URL.createObjectURL(r)}]),s.play(i)},style:{display:"none"}})),dn=({type:a})=>{const s=a===u.Mv.audio,{active:t,list:r,actions:i}=(0,ye.Z)(a),[l,_]=(0,e.useState)(!1),[p,o]=(0,e.useState)(!1),d=(0,m._U)(u.xf),k=(0,S.N3)(s?h.ql.AUDIO_PLAYLIST:h.ql.VIDEO_PLAYLIST);return!d.screen||r.length===0||!k?null:e.createElement(e.Fragment,null,e.createElement(L.L.Root,{open:l,onOpenChange:_},e.createElement(L.L.Trigger,{asChild:!0,"data-testid":a===u.Mv.audio?"audio_playlist":"video_playlist"},e.createElement(Pe.Z,{active:!t},e.createElement(K.u,{title:s?"Audio Playlist":"Video Playlist"},e.createElement(w.x,null,s?e.createElement(he.Z,null):e.createElement(De.Z,null))))),e.createElement(L.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"unset",width:"$60",p:"$0",bg:"$bgSecondary",border:"1px solid $menuBg"}},e.createElement(E.k,{align:"center",css:{p:"$4 $8",borderBottom:"1px solid $borderLight",bg:"$menuBg"}},e.createElement(D.x,{variant:"md",css:{flex:"1 1 0"}},s?"Audio Player":"Video Playlist"),e.createElement($n,{type:a,actions:i}),e.createElement(Pe.Z,{css:{mr:"-$4"},onClick:()=>cn(void 0,null,function*(){t&&(yield i.stop()),_(!1),o(!1)})},e.createElement(Re.Z,{width:24,height:24}))),!p&&e.createElement(w.x,{css:{maxHeight:"$96",overflowY:"auto"}},r.map(y=>e.createElement(ve,Nn(Un({key:y.id},y),{onClick:U=>cn(void 0,null,function*(){U.preventDefault();try{yield i.play(y.id)}catch{}s||_(!1)})})))),s&&e.createElement(xe.iS,{onToggle:()=>o(y=>!y)}))))};var pn=n(4978),qe=n(2799),_n=n(6408),en=n(1243),Vn=n(2093),mn=n(7158),Fn=n(4241),Bn=n(8546),jn=n(8703),un=n(4801),gn=n(8981),Hn=n(3510),nn=n(8565),Wn=n(7632),Ze=n(7281),Kn=n(198),Zn=n(5231),vn=n(8198),re=n(622),Ae=n(7688),Gn=n(1529),zn=n(3284),Ue=n(7097),En=(a,s,t)=>new Promise((r,i)=>{var l=o=>{try{p(t.next(o))}catch(d){i(d)}},_=o=>{try{p(t.throw(o))}catch(d){i(d)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,_);p((t=t.apply(a,s)).next())});const Xn=({open:a,onOpenChange:s})=>{const t=(0,m._U)(u.AI),r=(0,m._U)((0,u.EP)(h._8.recordingUrl)),[i,l]=(0,e.useState)(h.w7),[_,p]=(0,N.$h)(h._8.recordingStarted),{isBrowserRecordingOn:o,isStreamingOn:d,isHLSRunning:k}=(0,mn.v)(),y=(0,m.cw)();return!t?.browserRecording||k?null:o?e.createElement(re.V.Root,{open:a,onOpenChange:s},e.createElement(re.V.Portal,null,e.createElement(re.V.Content,{css:{width:"min(400px,80%)",p:"$10",bg:"#201617"}},e.createElement(re.V.Title,null,e.createElement(E.k,{gap:2,css:{c:"$error"}},e.createElement(vn.Z,null),e.createElement(D.x,{css:{c:"inherit"},variant:"h6"},"End Recording"))),e.createElement(D.x,{variant:"sm",css:{c:"$textMedEmp",my:"$8"}},"Are you sure you want to end recording? You can\u2019t undo this action."),e.createElement(E.k,{justify:"end",css:{mt:"$12"}},e.createElement(re.V.Close,{asChild:!0},e.createElement(Ae.z,{outlined:!0,css:{borderColor:"$secondaryLight",mr:"$4"}},"Don't end")),e.createElement(Ae.z,{"data-testid":"stop_recording_confirm_mobile",variant:"danger",icon:!0,onClick:()=>En(void 0,null,function*(){try{yield y.stopRTMPAndRecording()}catch(U){Ue.y.addToast({title:U.message,variant:"error"})}s(!1)})},"End recording"))))):e.createElement(re.V.Root,{open:a,onOpenChange:s},e.createElement(re.V.Content,{css:{width:"min(400px,80%)",p:"$10"}},e.createElement(re.V.Title,null,e.createElement(D.x,{variant:"h6"},"Start Recording")),e.createElement(Gn.P,{testId:"recording_resolution_mobile",css:{flexDirection:"column",alignItems:"start"},onResolutionChange:l}),e.createElement(Ae.z,{"data-testid":"start_recording_confirm_mobile",variant:"primary",icon:!0,css:{ml:"auto"},type:"submit",disabled:_||d,onClick:()=>En(void 0,null,function*(){try{p(!0),yield y.startRTMPOrRecording({meetingURL:r,resolution:(0,zn.u)(i),record:!0})}catch(U){U.message.includes("stream already running")?Ue.y.addToast({title:"Recording already running",variant:"error"}):Ue.y.addToast({title:U.message,variant:"error"}),p(!1)}s(!1)})},"Start")))};var Jn=n(7273),Yn=n(1118),tn=n(6081),sn=n(4634),Qn=n(4791);const qn=({onOpenChange:a})=>{var s;const t=et(),r=(0,e.useMemo)(()=>[{id:"local-peer",label:"Local Peer Stats"},...t],[t]),[i,l]=(0,e.useState)(r[0]),[_,p]=(0,N.iz)(h.JZ.showStatsOnTiles),[o,d]=(0,e.useState)(!1),k=(0,e.useRef)(),y=(0,Qn.s)();return(0,e.useEffect)(()=>{i.id!=="local-peer"&&!t.find(U=>U.id===i.id)&&l("local-peer")},[t,i]),e.createElement(re.V.Root,{defaultOpen:!0,onOpenChange:a},e.createElement(re.V.Portal,null,e.createElement(re.V.Overlay,null),e.createElement(re.V.Content,{css:{width:"min(500px, 95%)",maxHeight:"100%",overflowY:"auto"}},e.createElement(re.V.Title,{css:{p:"$4 0"}},e.createElement(E.k,{justify:"between"},e.createElement(E.k,{align:"center",css:{mb:"$1"}},e.createElement(D.x,{variant:"h6",inline:!0},"Stats For Nerds")),e.createElement(re.V.DefaultClose,{"data-testid":"stats_dialog_close_icon"}))),e.createElement(Jn.E,{css:{mt:"0.8rem"}}),e.createElement(E.k,{justify:"start",gap:4,css:{m:"$10 0"}},e.createElement(Yn.r,{checked:_,onCheckedChange:p}),e.createElement(D.x,{variant:"body2",css:{fontWeight:"$semiBold"}},"Show Stats on Tiles")),e.createElement(E.k,{direction:"column",css:{mb:"$12",position:"relative",minWidth:0}},e.createElement(tn._,{variant:"body2"},"Stats For"),e.createElement(L.L.Root,{"data-testid":"dialog_select_Stats For",open:o,onOpenChange:d},e.createElement(sn.l,{title:i.label||"Select Stats",css:{mt:"$4"},titleCSS:{mx:0},open:o,ref:k}),e.createElement(L.L.Portal,null,e.createElement(L.L.Content,{align:"start",sideOffset:8,css:{w:(s=k.current)==null?void 0:s.clientWidth,zIndex:1e3}},r.map(U=>{const j=U.id===i.id&&U.layer===i.layer;return e.createElement(L.L.Item,{key:`${U.id}-${U.layer||""}`,onClick:()=>{l(U)},css:{px:"$9",bg:j?y:void 0,c:j?"$white":"$textPrimary"}},U.label)}))))),i.id==="local-peer"?e.createElement(nt,null):e.createElement(tt,{trackID:i.id,layer:i.layer,local:i.local}))))},et=()=>{const a=(0,m._U)(u.zK),s=(0,m._U)(u.iZ),t=(0,m._U)(u.I3);return(0,e.useMemo)(()=>Object.values(a).reduce((i,l)=>{var _,p;const o=(_=s[l.peerId])==null?void 0:_.name,d=l.peerId===t;return d&&((p=l.layerDefinitions)==null?void 0:p.length)?(i=i.concat(l.layerDefinitions.map(({layer:k})=>({id:l.id,layer:k,local:!0,label:`${o} ${l.source} ${l.type} - ${k}`}))),i):(i.push({id:l.id,local:d,label:`${o} ${l.source} ${l.type}`}),i)},[]),[a,s,t])},nt=()=>{var a,s,t,r,i,l,_,p,o;const d=(0,m.p5)(u.fA.localPeerStats);return d?e.createElement(E.k,{css:{flexWrap:"wrap",gap:"$10"}},e.createElement(Te,{label:"Packets Lost",value:(a=d.subscribe)==null?void 0:a.packetsLost}),e.createElement(Te,{label:"Jitter",value:(s=d.subscribe)==null?void 0:s.jitter}),e.createElement(Te,{label:"Publish Bitrate",value:Ne((t=d.publish)==null?void 0:t.bitrate,"b/s")}),e.createElement(Te,{label:"Subscribe Bitrate",value:Ne((r=d.subscribe)==null?void 0:r.bitrate,"b/s")}),e.createElement(Te,{label:"Available Outgoing Bitrate",value:Ne((i=d.publish)==null?void 0:i.availableOutgoingBitrate,"b/s")}),e.createElement(Te,{label:"Total Bytes Sent",value:Ne((l=d.publish)==null?void 0:l.bytesSent)}),e.createElement(Te,{label:"Total Bytes Received",value:Ne((_=d.subscribe)==null?void 0:_.bytesReceived)}),e.createElement(Te,{label:"Round Trip Time",value:`${(((((p=d.publish)==null?void 0:p.currentRoundTripTime)||0)+(((o=d.subscribe)==null?void 0:o.currentRoundTripTime)||0))/2).toFixed(3)*1e3} ms`})):null},tt=({trackID:a,layer:s,local:t})=>{var r;const i=s?u.fA.localVideoTrackStatsByLayer(s)(a):t?u.fA.localAudioTrackStatsByID(a):u.fA.trackStatsByID(a),l=(0,m.p5)(i);if(!l)return null;const _=l.type.includes("inbound");return e.createElement(E.k,{css:{flexWrap:"wrap",gap:"$10"}},e.createElement(Te,{label:"Type",value:l.type+" "+l.kind}),e.createElement(Te,{label:"Bitrate",value:Ne(l.bitrate,"b/s")}),e.createElement(Te,{label:"Packets Lost",value:l.packetsLost}),e.createElement(Te,{label:"Jitter",value:(r=l.jitter)==null?void 0:r.toFixed(3)}),e.createElement(Te,{label:_?"Bytes Received":"Bytes Sent",value:Ne(_?l.bytesReceived:l.bytesSent)}),l.kind==="video"&&e.createElement(e.Fragment,null,e.createElement(Te,{label:"Framerate",value:l.framesPerSecond}),!_&&e.createElement(Te,{label:"Quality Limitation Reason",value:l.qualityLimitationReason})),e.createElement(Te,{label:"Round Trip Time",value:l.roundTripTime?`${l.roundTripTime*1e3} ms`:"-"}))},Te=e.memo(({label:a,value:s})=>e.createElement(w.x,{css:{bg:"$surfaceLight",w:"calc(50% - $6)",p:"$8",r:"$3"}},e.createElement(D.x,{variant:"overline",css:{fontWeight:"$semiBold",color:"$textMedEmp",textTransform:"uppercase"}},a," "),e.createElement(D.x,{variant:"sub1",css:{fontWeight:"$semiBold",color:"$textHighEmp"}},s||"-"))),Ne=(a,s="B",t=2)=>{if(a===void 0)return"-";if(a===0)return"0 "+s;const r=1024,i=t<0?0:t,l=["","K","M","G","T","P","E","Z","Y"].map(p=>p+s),_=Math.floor(Math.log(a)/Math.log(r));return parseFloat((a/Math.pow(r,_)).toFixed(i))+" "+l[_]};var st=n(9814),fe=n(4778),an=n(759),at=(a,s,t)=>new Promise((r,i)=>{var l=o=>{try{p(t.next(o))}catch(d){i(d)}},_=o=>{try{p(t.throw(o))}catch(d){i(d)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,_);p((t=t.apply(a,s)).next())});const it=({onOpenChange:a})=>{var s,t;const r=(0,an.E)(),i=(0,m.cw)(),l=(0,e.useRef)(null),_=(0,e.useRef)(null),[p,o]=(0,e.useState)([]),[d,k]=(0,e.useState)(""),[y,U]=(0,e.useState)(!1),[j,C]=(0,e.useState)(!1),[Ee,pe]=(0,e.useState)(""),[be,Se]=(0,e.useState)(!1),Qe=(0,e.useCallback)(()=>at(void 0,null,function*(){if(p.length>0&&d)try{Se(!0),yield i.changeRoleOfPeersWithRoles(p,d),Se(!1),pe(""),a(!1)}catch(_e){pe(_e?.message?_e?.message:"Unknown error"),Se(!1)}}),[p,d,i,a]);return e.createElement(re.V.Root,{defaultOpen:!0,onOpenChange:a},e.createElement(fe.cZ,{title:"Bulk Role Change",Icon:un.Z},e.createElement(fe.DP,null,e.createElement(D.x,null,"For Roles: "),e.createElement(L.L.Root,{open:y,onOpenChange:_e=>{_e&&U(_e)},modal:!1},e.createElement(sn.l,{ref:l,title:p.length===0?"Select Multiple Roles":p.toString(),css:{w:"70%",p:"$8"},open:y}),e.createElement(L.L.Content,{css:{w:(s=l.current)==null?void 0:s.clientWidth,zIndex:1e3},onInteractOutside:()=>{y&&U(!1)}},r&&r.map(_e=>e.createElement(L.L.CheckboxItem,{key:_e,checked:p.includes(_e),onCheckedChange:ms=>{o(Ln=>ms?[...Ln,_e]:Ln.filter(us=>us!==_e)),pe("")}},e.createElement(Ze.X.Root,{css:{margin:"$2"},checked:p.includes(_e)},e.createElement(Ze.X.Indicator,null,e.createElement(nn.Z,{width:16,height:16}))),_e))))),e.createElement(fe.DP,null,e.createElement(D.x,null,"To Role: "),e.createElement(L.L.Root,{open:j,onOpenChange:_e=>C(_e)},e.createElement(sn.l,{ref:_,title:d||"Select Role",css:{w:"70%",p:"$8"},open:j}),e.createElement(L.L.Content,{css:{w:(t=_.current)==null?void 0:t.clientWidth,zIndex:1e3}},r&&r.map(_e=>e.createElement(L.L.Item,{key:_e,onSelect:()=>{k(_e),pe("")}},_e))))),e.createElement(fe.DP,null,Ee&&e.createElement(E.k,{gap:2,css:{c:"$error",w:"70%",ml:"auto"}},e.createElement(vn.Z,null),e.createElement(D.x,{css:{c:"inherit"}},Ee))),e.createElement(fe.DP,{justify:"end"},e.createElement(Ae.z,{variant:"primary",onClick:Qe,disabled:!(d&&p.length>0)},be&&e.createElement(st.g,{css:{color:"$textSecondary"}}),"Apply"))))};var ot=n(2385),hn=n(3620),lt=Object.defineProperty,rt=Object.defineProperties,ct=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertySymbols,dt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,bn=(a,s,t)=>s in a?lt(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,_t=(a,s)=>{for(var t in s||(s={}))dt.call(s,t)&&bn(a,t,s[t]);if(fn)for(var t of fn(s))pt.call(s,t)&&bn(a,t,s[t]);return a},mt=(a,s)=>rt(a,ct(s)),kn=(a,s,t)=>new Promise((r,i)=>{var l=o=>{try{p(t.next(o))}catch(d){i(d)}},_=o=>{try{p(t.throw(o))}catch(d){i(d)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,_);p((t=t.apply(a,s)).next())});const ut=({onOpenChange:a})=>{const[s,t]=(0,hn.o4)(hn.lN.PREVIEW),r=(0,m.cw)(),i=(0,m._U)(u.lA),[l,_]=(0,e.useState)(i),p=()=>kn(void 0,null,function*(){const o=l.trim();if(!(!o||o===i))try{yield r.changeName(o),t(mt(_t({},s||{}),{name:o}))}catch(d){console.error("failed to update name",d),Ue.y.addToast({title:d.message})}finally{a(!1)}});return e.createElement(re.V.Root,{defaultOpen:!0,onOpenChange:a},e.createElement(re.V.Portal,null,e.createElement(re.V.Overlay,null),e.createElement(re.V.Content,{css:{width:"min(400px,80%)",p:"$10"}},e.createElement(re.V.Title,{css:{p:"0 $4"}},e.createElement(D.x,{variant:"h6"}," Change Name")),e.createElement("form",{onSubmit:o=>kn(void 0,null,function*(){o.preventDefault(),yield p()})},e.createElement(E.k,{justify:"center",align:"center",css:{my:"$8",w:"100%"}},e.createElement(ot.I,{css:{width:"100%"},value:l,onChange:o=>{_(o.target.value)},autoComplete:"name",required:!0,"data-testid":"change_name_field"})),e.createElement(E.k,{justify:"between",align:"center",css:{width:"100%",gap:"$md",mt:"$10"}},e.createElement(w.x,{css:{w:"50%"}},e.createElement(re.V.Close,{css:{w:"100%"}},e.createElement(Ae.z,{variant:"standard",css:{w:"100%"},outlined:!0,type:"submit",disabled:!i},"Cancel"))),e.createElement(w.x,{css:{w:"50%"}},e.createElement(Ae.z,{variant:"primary",css:{width:"100%"},type:"submit",disabled:!l.trim()||l.trim()===i,"data-testid":"popup_change_btn"},"Change")))))))};var Sn=n(8953),gt=n(5873),Ge=n(9953),vt=(a,s,t)=>new Promise((r,i)=>{var l=o=>{try{p(t.next(o))}catch(d){i(d)}},_=o=>{try{p(t.throw(o))}catch(d){i(d)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,_);p((t=t.apply(a,s)).next())});const Et=({onClick:a})=>{const s=(0,an.E)(),t=(0,m._U)(u.AI),r=(0,m._U)(u.I3),i=(0,m._U)(u.fo),l=(0,m.cw)(),_=(0,G.Z)(de.vc.media.sm),p=V("selfRoleChangeTo"),o=(0,e.useMemo)(()=>(0,Ge.tN)(p,s),[s,p]);return t.changeRole?_?e.createElement(L.L.Item,{onClick:a},e.createElement(Sn.Z,null),e.createElement(D.x,{variant:"sm",css:{mx:"$4"}},"Change My Role")):e.createElement(L.L.SubMenu,null,e.createElement(L.L.TriggerItem,{"data-testid":"change_my_role_btn"},e.createElement(Sn.Z,null),e.createElement(D.x,{variant:"sm",css:{flex:"1 1 0",mx:"$4"}},"Change My Role"),e.createElement(gt.Z,null)),e.createElement(L.L.SubMenuContent,{sideOffset:8,alignOffset:-5,css:{"@md":{w:"$64"}}},o.map((d,k)=>e.createElement(L.L.Item,{key:d,css:{justifyContent:"space-between"},onClick:()=>vt(void 0,null,function*(){try{yield l.changeRole(r,d,!0)}catch(y){Ue.y.addToast({title:y.message})}}),"data-testid":"change_to_role_"+d},e.createElement(D.x,{variant:"sm"},d),i===d&&e.createElement(nn.Z,{width:16,height:16}))))):null};var Dn=n(3055);const ht=({setShowOpenUrl:a})=>window.CropTarget?e.createElement(L.L.Item,{onClick:()=>{a(!0)},"data-testid":"embed_url_btn"},e.createElement(Dn.Z,null),e.createElement(D.x,{variant:"sm",css:{ml:"$4"}},"Embed URL")):null;function ft({onOpenChange:a}){const[s,t]=(0,N.$h)(h._8.embedConfig),[r,i]=(0,e.useState)(s?.url||""),l=!!s?.url,_=l&&r&&r!==s.url;return e.createElement(re.V.Root,{defaultOpen:!0,onOpenChange:a},e.createElement(fe.cZ,{title:"Embed URL",Icon:Dn.Z},e.createElement(fe.OD,{title:"URL",value:r,onChange:i,placeholder:"https://www.tldraw.com/",type:"url"}),e.createElement(fe.DP,null,e.createElement(D.x,null,"Embed a url and share with everyone in the room. Ensure that you're sharing the current tab when the prompt opens. Note that not all websites support being embedded.")),e.createElement(fe.DP,{justify:"end"},l?e.createElement(e.Fragment,null,e.createElement(Ae.z,{variant:"primary",type:"submit",disabled:!_,onClick:()=>{t({url:r,shareScreen:s.shareScreen}),a(!1)},"data-testid":"embed_url_btn",css:{mr:"$4"}},"Update Embed"),e.createElement(Ae.z,{variant:"danger",type:"submit",onClick:()=>{t({url:""}),a(!1)},"data-testid":"embed_url_btn"},"Stop Embed")):e.createElement(e.Fragment,null,e.createElement(Ae.z,{variant:"primary",type:"submit",disabled:!r.trim(),onClick:()=>{t({url:r}),a(!1)},"data-testid":"embed_url_btn",css:{mr:"$4"}},"Just Embed"),e.createElement(Ae.z,{variant:"primary",type:"submit",disabled:!r.trim(),onClick:()=>{t({url:r,shareScreen:!0}),a(!1)},"data-testid":"embed_url_btn"},"Embed and Share")))))}var bt=n(7854),kt=n(8523),we=n.n(kt),St=(a,s,t)=>new Promise((r,i)=>{var l=o=>{try{p(t.next(o))}catch(d){i(d)}},_=o=>{try{p(t.throw(o))}catch(d){i(d)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,_);p((t=t.apply(a,s)).next())});const Dt=()=>{const[a,s]=(0,e.useState)(we().isFullscreen),t=(0,e.useCallback)(()=>St(void 0,null,function*(){if(!we().isEnabled){Ue.y.addToast({title:"Fullscreen feature not supported"});return}try{a?yield we().exit():yield we().request()}catch(r){Ue.y.addToast({title:r.message})}}),[a]);return(0,e.useEffect)(()=>{const r=()=>{s(we().isFullscreen)};return we().isEnabled&&we().on("change",r),()=>{we().isEnabled&&we().off("change",r)}},[]),{allowed:we().isEnabled,isFullscreen:a,toggleFullscreen:t}},Pt=()=>{const{allowed:a,isFullscreen:s,toggleFullscreen:t}=Dt();return!(0,S.N3)(h.ql.FULLSCREEN)||!a?null:e.createElement(L.L.Item,{onClick:()=>{t()},"data-testid":"full_screen_btn"},e.createElement(bt.Z,null),e.createElement(D.x,{variant:"sm",css:{ml:"$4"}},s?"Exit ":"Go ","Fullscreen"))};var We=n(8673),Ct=(a,s,t)=>new Promise((r,i)=>{var l=o=>{try{p(t.next(o))}catch(d){i(d)}},_=o=>{try{p(t.throw(o))}catch(d){i(d)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,_);p((t=t.apply(a,s)).next())});const Tt=[{label:"All Track Sources",value:""},{label:"regular",value:"regular"},{label:"screen",value:"screen"},{label:"audioplaylist",value:"audioplaylist"},{label:"videoplaylist",value:"videoplaylist"}],Rt=[{label:"All Track Types",value:""},{label:"audio",value:"audio"},{label:"video",value:"video"}],yt=({onOpenChange:a})=>{const s=(0,an.E)(),t=(0,m.cw)(),[r,i]=(0,e.useState)(!1),[l,_]=(0,e.useState)(),[p,o]=(0,e.useState)(),[d,k]=(0,e.useState)(),y=(0,e.useCallback)(()=>Ct(void 0,null,function*(){yield t.setRemoteTracksEnabled({enabled:r,type:l,source:d,roles:p?[p]:void 0}),a(!1)}),[p,r,l,d,t,a]);return e.createElement(re.V.Root,{defaultOpen:!0,onOpenChange:a},e.createElement(fe.cZ,{title:"Mute/Unmute Remote Tracks",Icon:gn.Z},e.createElement(fe.z2,{title:"Role",options:[{label:"All Roles",value:""},...s.map(U=>({label:U,value:U}))],selected:p,keyField:"value",labelField:"label",onChange:o}),e.createElement(fe.z2,{title:"Track type",options:Rt,selected:l,onChange:_,keyField:"value",labelField:"label"}),e.createElement(fe.z2,{title:"Track source",options:Tt,selected:d,onChange:k,keyField:"value",labelField:"label"}),e.createElement(fe.DP,null,e.createElement(D.x,{variant:"md"},"Track status"),e.createElement(We.E.Root,{value:r,onValueChange:i},e.createElement(E.k,{align:"center",css:{mr:"$8"}},e.createElement(We.E.Item,{value:!1,id:"trackDisableRadio",css:{mr:"$4"}},e.createElement(We.E.Indicator,null)),e.createElement(tn._,{htmlFor:"trackDisableRadio"},"Mute")),e.createElement(E.k,{align:"center",css:{cursor:"pointer"}},e.createElement(We.E.Item,{value:!0,id:"trackEnableRadio",css:{mr:"$4"}},e.createElement(We.E.Indicator,null)),e.createElement(tn._,{htmlFor:"trackEnableRadio"},"Request Unmute")))),e.createElement(fe.DP,{justify:"end"},e.createElement(Ae.z,{variant:"primary",onClick:y},"Apply"))))};var Ot=n(395),Ke=n(9478);const At=h.Dt||h.gn,ie={CHANGE_NAME:"changeName",SELF_ROLE_CHANGE:"selfRoleChange",MORE_SETTINGS:"moreSettings",START_RECORDING:"startRecording",DEVICE_SETTINGS:"deviceSettings",STATS_FOR_NERDS:"statsForNerds",BULK_ROLE_CHANGE:"bulkRoleChange",MUTE_ALL:"muteAll",EMBED_URL:"embedUrl"},Pn=()=>{const a=(0,m._U)(u.AI),s=(0,m._U)(u.xf),t=(0,m._U)(u.I3),r=(0,m._U)(u.fo),i=(0,m.cw)(),l=(0,m._U)((0,u.EP)(h._8.hlsStats)),_=(0,G.Z)(de.vc.media.md),{isBrowserRecordingOn:p}=(0,mn.v)(),o=(0,S.N3)(h.ql.CHANGE_NAME),d=(0,S.N3)(h.ql.EMBED_URL),k=(0,S.N3)(h.ql.STARTS_FOR_NERDS),[y,U]=(0,e.useState)(new Set);(0,Ot.M)({open:y.size>0,name:"MoreSettings"});const j=(C,Ee)=>{U(pe=>{const be=new Set(pe);return Ee?be.add(C):be.delete(C),be})};return e.createElement(e.Fragment,null,e.createElement(L.L.Root,{open:y.has(ie.MORE_SETTINGS),onOpenChange:C=>j(ie.MORE_SETTINGS,C)},e.createElement(L.L.Trigger,{asChild:!0,"data-testid":"more_settings_btn"},e.createElement(Pe.Z,null,e.createElement(K.u,{title:"More options"},e.createElement(w.x,null,e.createElement(Fn.Z,null))))),e.createElement(L.L.Content,{sideOffset:5,align:"center",css:{maxHeight:"$96","@md":{w:"$64"},"div[role='separator']:first-child":{display:"none"}}},_&&a?.browserRecording?e.createElement(e.Fragment,null,e.createElement(L.L.Item,{onClick:()=>j(ie.START_RECORDING,!0)},e.createElement(Bn.Z,null),e.createElement(D.x,{variant:"sm",css:{ml:"$4"}},p?"Stop":"Start"," Recording")),e.createElement(L.L.ItemSeparator,null)):null,o&&e.createElement(L.L.Item,{onClick:()=>j(ie.CHANGE_NAME,!0),"data-testid":"change_name_btn"},e.createElement(jn.Z,null),e.createElement(D.x,{variant:"sm",css:{ml:"$4"}},"Change Name")),e.createElement(Et,{onClick:()=>j(ie.SELF_ROLE_CHANGE,!0)}),a?.changeRole&&e.createElement(L.L.Item,{onClick:()=>j(ie.BULK_ROLE_CHANGE,!0),"data-testid":"bulk_role_change_btn"},e.createElement(un.Z,null),e.createElement(D.x,{variant:"sm",css:{ml:"$4"}},"Bulk Role Change")),e.createElement(Pt,null),s.screen&&d&&e.createElement(ht,{setShowOpenUrl:()=>j(ie.EMBED_URL,!0)}),a.mute&&e.createElement(L.L.Item,{onClick:()=>j(ie.MUTE_ALL,!0),"data-testid":"mute_all_btn"},e.createElement(gn.Z,null),e.createElement(D.x,{variant:"sm",css:{ml:"$4"}},"Mute All")),e.createElement(L.L.ItemSeparator,null),e.createElement(L.L.Item,{onClick:()=>j(ie.DEVICE_SETTINGS,!0),"data-testid":"device_settings_btn"},e.createElement(Hn.Z,null),e.createElement(D.x,{variant:"sm",css:{ml:"$4"}},"Settings")),Ke.T.enableStatsForNerds&&k&&(r==="hls-viewer"?Vn.Z.isSupported()?e.createElement(L.L.Item,{onClick:()=>i.setAppData(h._8.hlsStats,!l),"data-testid":"hls_stats"},e.createElement(Ze.X.Root,{css:{margin:"$2"},checked:l,onCheckedChange:()=>i.setAppData(h._8.hlsStats,!l)},e.createElement(Ze.X.Indicator,null,e.createElement(nn.Z,{width:16,height:16}))),e.createElement(E.k,{justify:"between",css:{width:"100%"}},e.createElement(D.x,{variant:"sm",css:{ml:"$4"}},"Show HLS Stats"),At?null:e.createElement(D.x,{variant:"sm",css:{ml:"$4"}},`${h.eE?"\u2318":"ctrl"} + ]`))):null:e.createElement(L.L.Item,{onClick:()=>j(ie.STATS_FOR_NERDS,!0),"data-testid":"stats_for_nreds_btn"},e.createElement(Wn.Z,null),e.createElement(D.x,{variant:"sm",css:{ml:"$4"}},"Stats for Nerds"))))),y.has(ie.BULK_ROLE_CHANGE)&&e.createElement(it,{onOpenChange:C=>j(ie.BULK_ROLE_CHANGE,C)}),y.has(ie.MUTE_ALL)&&e.createElement(yt,{onOpenChange:C=>j(ie.MUTE_ALL,C)}),y.has(ie.CHANGE_NAME)&&e.createElement(ut,{onOpenChange:C=>j(ie.CHANGE_NAME,C)}),y.has(ie.DEVICE_SETTINGS)&&e.createElement(Zn.Z,{open:!0,onOpenChange:C=>j(ie.DEVICE_SETTINGS,C)}),Ke.T.enableStatsForNerds&&y.has(ie.STATS_FOR_NERDS)&&e.createElement(qn,{open:!0,onOpenChange:C=>j(ie.STATS_FOR_NERDS,C)}),y.has(ie.SELF_ROLE_CHANGE)&&e.createElement(Kn.t,{peerId:t,onOpenChange:C=>j(ie.SELF_ROLE_CHANGE,C)}),y.has(ie.START_RECORDING)&&e.createElement(Xn,{open:!0,onOpenChange:C=>j(ie.START_RECORDING,C)}),y.has(ie.EMBED_URL)&&e.createElement(ft,{onOpenChange:C=>j(ie.EMBED_URL,C)}))};var It=n(1182),Cn=n(5106);let Ve,ze;function Tn(){Ve||(Ve=window.getComputedStyle(document.documentElement).getPropertyValue("--hms-ui-colors-surfaceLight")),ze||(ze=window.getComputedStyle(document.documentElement).getPropertyValue("--hms-ui-colors-borderLight"))}function Mt(){Ve="",ze=""}function wt(a,s){let t=a.filter(i=>i.srcObject!==null);const r=s.getContext("2d");if(Tn(),r.fillStyle=Ve,r.clearRect(0,0,s.width,s.height),t.length===0){r.fillRect(0,0,s.width,s.height);return}Lt(t.slice(0,4),r,s)}function xt(a){const s=a.getContext("2d");Tn(),s.fillStyle=Ve,s.fillRect(0,0,a.width,a.height)}function Lt(a,s,t){if(t.width=480,t.height=320,s.fillStyle=Ve,s.fillRect(0,0,t.width,t.height),a.length>0&&(s.strokeStyle=ze,s.lineWidth=8/2,s.strokeRect(0,0,t.width,t.height)),a.length===1){const i=a[0],{width:l,height:_}=Xe(i,t.width-8,t.height-8),p=(t.width-l)/2,o=(t.height-_)/2;s.drawImage(i,p,o,l,_)}if(a.length===2){a.forEach((l,_)=>{const{width:p,height:o}=Xe(l,t.width/2-8,t.height-8),d=(t.width/2-p)/2+t.width/2*_,k=(t.height-o)/2;s.drawImage(l,d,k,p,o)});const i=new Path2D;i.moveTo(t.width/2,0),i.lineTo(t.width/2,t.height),s.stroke(i)}if(a.length===3){a.forEach((l,_)=>{const{width:p,height:o}=Xe(l,t.width/2-8,t.height/2-8),d=_<2?(t.width/2-p)/2+t.width/2*_:t.width/2-p/2,k=(_<2?0:t.height/2)+(t.height/2-o)/2;s.drawImage(l,d,k,p,o)});const i=new Path2D;i.moveTo(t.width/2,0),i.lineTo(t.width/2,t.height/2),s.stroke(i),i.moveTo(0,t.height/2),i.lineTo(t.width,t.height/2),s.stroke(i)}if(a.length===4){a.forEach((l,_)=>{const{width:p,height:o}=Xe(l,t.width/2-8,t.height/2-8),d=(t.width/2-p)/2+t.width/2*(_%2),k=(_<2?0:t.height/2)+(t.height/2-o)/2;s.drawImage(l,d,k,p,o)});const i=new Path2D;i.moveTo(t.width/2,0),i.lineTo(t.width/2,t.height),s.stroke(i),i.moveTo(0,t.height/2),i.lineTo(t.width,t.height/2),s.stroke(i)}}function Xe(a,s,t){let r=a.videoWidth/a.videoHeight*t,i=t;return r>s&&(r=s,i=a.videoHeight/a.videoWidth*s),{width:r,height:i}}var Ut=Object.defineProperty,Nt=(a,s,t)=>s in a?Ut(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,$t=(a,s,t)=>(Nt(a,typeof s!="symbol"?s+"":s,t),t),$e=(a,s,t)=>new Promise((r,i)=>{var l=o=>{try{p(t.next(o))}catch(d){i(d)}},_=o=>{try{p(t.throw(o))}catch(d){i(d)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,_);p((t=t.apply(a,s)).next())});const Rn=4,Vt=30,yn=480,On=320,An="leavepictureinpicture",Ie={starting:"starting",started:"started",stopping:"stopping",stopped:"stopped"};class Ft{constructor(){$t(this,"stop",()=>$e(this,null,function*(){var s;this.state!==Ie.stopped&&(this.state=Ie.stopping,(s=this.pipVideo)==null||s.removeEventListener(An,this.stop),this.timeoutRef&&Cn.gr(this.timeoutRef),this.isOn()&&this.exitPIP(),yield this.detachOldAttachNewTracks(this.tracksToShow,[]),this.onStateChange(!1),this.reset(),this.state=Ie.stopped)})),this.reset()}reset(){console.debug("resetting PIP state"),Mt(),this.canvas=null,this.pipVideo=null,this.timeoutRef=null,this.hmsActions=null,this.videoElements=[],this.tracksToShow=[],this.onStateChange=()=>{},this.state=Ie.stopped}isSupported(){return!!document.pictureInPictureEnabled&&!h.gn&&!(h.eE&&h.G6)}isOn(){return!!document.pictureInPictureElement}start(s,t){return $e(this,null,function*(){if(!this.isSupported())throw new Error("pip is not supported on this browser");if(console.debug("starting PIP, current state",this.state),this.state===Ie.started)yield this.stop();else if(this.state===Ie.starting)return;this.state=Ie.starting;try{yield this.init(s,t),this.pipVideo.addEventListener(An,this.stop),this.renderLoop(),this.isOn()||(yield this.requestPIP()),console.debug("pip started"),this.state=Ie.started,this.onStateChange(!0)}catch(r){console.error("error in request pip",r),this.state=Ie.stopped}})}updatePeersAndTracks(s,t){return $e(this,null,function*(){if(!this.canvas)return;const r=this.pickTracksToShow(s,t),i=this.tracksToShow;this.tracksToShow=this.orderNewTracksToShow(r,i);try{yield this.detachOldAttachNewTracks(i,this.tracksToShow,t)}catch(l){console.error("error in detaching/attaching tracks",l)}})}init(s,t){return $e(this,null,function*(){yield this.initMediaElements(),this.hmsActions=s,this.onStateChange=t})}initMediaElements(){return $e(this,null,function*(){if(!this.canvas){const{canvas:s,pipVideo:t}=this.initializeCanvasAndVideoElement();this.canvas=s,this.pipVideo=t,this.videoElements=this.initializeVideoElements();const r=this.pipVideo.play();xt(this.canvas),yield r}})}initializeCanvasAndVideoElement(){const s=document.createElement("canvas");s.width=yn,s.height=On;const t=document.createElement("video");return t.width=yn,t.height=On,t.muted=!0,t.srcObject=s.captureStream(),{canvas:s,pipVideo:t}}initializeVideoElements(){let s=[];for(let t=0;t<Rn;t++){const r=document.createElement("video");r.autoplay=!0,r.playsinline=!0,s.push(r)}return s}renderLoop(){const s=1e3/Vt;this.timeoutRef=Cn.iK(()=>{this.state===Ie.stopping||this.state===Ie.stopped||(this.state===Ie.started&&wt(this.videoElements,this.canvas),this.renderLoop())},s)}requestPIP(){return $e(this,null,function*(){try{this.isOn()&&this.exitPIP(),yield this.pipVideo.requestPictureInPicture()}catch(s){throw console.error("error in requestpip",s,"state",this.state),s}})}exitPIP(){document.exitPictureInPicture()}pickTracksToShow(s,t){var r;const i=[];for(const l of s){if(i.length===Rn)break;l.videoTrack&&((r=t[l.videoTrack])==null?void 0:r.enabled)&&i.push(l.videoTrack)}return i}orderNewTracksToShow(s,t){const r=[],i=[];s.forEach(l=>{const _=t.indexOf(l);_!==-1&&_<s.length?r[_]=l:i.push(l)});for(let l=0;l<s.length;l++)r[l]||(r[l]=i.shift());return r}detachOldAttachNewTracks(s,t,r=null){return $e(this,null,function*(){const i=Math.max(s.length,t.length);for(let l=0;l<i;l++)s[l]!==t[l]&&(s[l]&&((!r||r[s[l]])&&(yield this.hmsActions.detachVideo(s[l],this.videoElements[l])),this.videoElements[l]&&(this.videoElements[l].srcObject=null)),t[l]&&(yield this.hmsActions.attachVideo(t[l],this.videoElements[l])))})}}const Fe=new Ft;var Bt=Object.defineProperty,jt=(a,s,t)=>s in a?Bt(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,Be=(a,s,t)=>(jt(a,typeof s!="symbol"?s+"":s,t),t),In=(a,s,t)=>new Promise((r,i)=>{var l=o=>{try{p(t.next(o))}catch(d){i(d)}},_=o=>{try{p(t.throw(o))}catch(d){i(d)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,_);p((t=t.apply(a,s)).next())});class Ht{constructor(){Be(this,"setup",(s,t)=>{this.actions=s,this.store=t,this.initState(),this.setUpHandlers()}),Be(this,"initState",()=>{var s,t,r,i;const l=this.store.getState(u.uX),_=this.store.getState(u.um);(t=(s=navigator.mediaSession)==null?void 0:s.setMicrophoneActive)==null||t.call(s,l),(i=(r=navigator.mediaSession)==null?void 0:r.setCameraActive)==null||i.call(r,_),this.store.subscribe(p=>{var o,d;(d=(o=navigator.mediaSession)==null?void 0:o.setMicrophoneActive)==null||d.call(o,p)},u.uX),this.store.subscribe(p=>{var o,d;(d=(o=navigator.mediaSession)==null?void 0:o.setCameraActive)==null||d.call(o,p)},u.um)}),Be(this,"toggleMic",()=>In(this,null,function*(){console.log("toggle mic clicked in pip");const s=this.store.getState(u.uX);yield this.actions.setLocalAudioEnabled(!s)})),Be(this,"toggleCam",()=>In(this,null,function*(){console.log("toggle cam clicked in pip");const s=this.store.getState(u.um);yield this.actions.setLocalVideoEnabled(!s)})),Be(this,"leave",()=>{console.log("leave called from pip"),this.actions.leave()}),Be(this,"setUpHandlers",()=>{if(navigator.mediaSession)try{navigator.mediaSession.setActionHandler("togglemicrophone",this.toggleMic),navigator.mediaSession.setActionHandler("togglecamera",this.toggleCam),navigator.mediaSession.setActionHandler("hangup",this.leave)}catch(s){console.error("error in setting media session handlers",s)}})}}const Wt=new Ht,Kt=({peers:a,showLocalPeer:s})=>{const t=(0,m._U)(u.fo),[r,i]=(0,e.useState)(Fe.isOn()),l=(0,m.cw)(),_=(0,m.gg)(),p=(0,S.N3)(h.ql.PICTURE_IN_PICTURE),o=(0,e.useCallback)(()=>{r?Fe.stop().catch(d=>console.error("error in stopping pip",d)):(Fe.start(l,i).catch(d=>console.error("error in starting pip",d)),Wt.setup(l,_))},[l,r,_]);return(0,e.useEffect)(()=>()=>{Fe.stop().catch(d=>console.error("error in stopping pip on unmount",d))},[]),!Fe.isSupported()||t===h.Pj||!p?null:e.createElement(e.Fragment,null,e.createElement(K.u,{title:`${r?"Deactivate":"Activate"} picture in picture view`},e.createElement(Pe.Z,{active:!r,key:"pip",onClick:()=>o(),"data-testid":"pip_btn"},e.createElement(It.Z,null))),r&&e.createElement(Zt,{showLocalPeer:s,peers:a}))},Zt=({showLocalPeer:a,peers:s})=>{const t=(0,m._U)(u.zK),r=(0,m._U)(a?u.BK:u.LY);return(0,e.useEffect)(()=>{let i=r;s&&(i=r.filter(l=>s.includes(l.id))),Fe.updatePeersAndTracks(i,t).catch(l=>{console.error("error in updating pip",l)})},[s,r,t]),null},Gt=Kt;var zt=n(8160);const Mn=()=>{const a=(0,N.xL)();return zt.createElement(Gt,{peers:a&&a.enabled?[a.peerId]:void 0,showLocalPeer:!0})};var Xt=n(4685),on=n(8160);const wn=({css:a})=>{const s=(0,m._U)(u.xf),t=(0,N.L3)(h.JZ.isAudioOnly),{amIScreenSharing:r,screenShareVideoTrackId:i,toggleScreenShare:l}=(0,W.N)(),_=r&&!!i;return!s.screen||!(0,Ge.Lo)()?null:on.createElement(K.u,{title:`${_?"Stop":"Start"} screen sharing`},on.createElement(Pe.Z,{active:!_,css:a,disabled:t,onClick:()=>{l()},"data-testid":"screen_share_btn"},on.createElement(Xt.Z,null)))},Jt=({onClose:a})=>{const s=(0,m.cw)();return e.createElement(re.V.Root,{defaultOpen:!0,onOpenChange:t=>!t&&a()},e.createElement(fe.cZ,{title:"AudioOnly Screenshare"},e.createElement("img",{src:"/share-audio.png",alt:"AudioOnly Screenshare instructions"}),e.createElement(fe.DP,{justify:"end"},e.createElement(Ae.z,{variant:"primary",onClick:()=>{s.setScreenShareEnabled(!0,{audioOnly:!0,displaySurface:"browser"}).catch(console.error),a()},"data-testid":"audio_screenshare_continue"},"Continue"))))};var Yt=n(9156),Qt=n(370),xn=n(3600),Je=n(8160);const Ye=()=>{const a=(0,m._U)(u.SI),s=(0,xn.fg)(h.yb.CHAT),t=(0,xn.Jp)(h.yb.CHAT);if(!!(0,S.N3)(h.ql.CHAT))return Je.createElement(K.u,{key:"chat",title:`${s?"Close":"Open"} chat`},Je.createElement(Pe.Z,{onClick:t,active:!s,"data-testid":"chat_btn"},a===0?Je.createElement(Yt.Z,null):Je.createElement(Qt.Z,{"data-testid":"chat_unread_btn"})))};var qt=n(550),es=n(1290),ln=n(8160),je=(a,s,t)=>new Promise((r,i)=>{var l=o=>{try{p(t.next(o))}catch(d){i(d)}},_=o=>{try{p(t.throw(o))}catch(d){i(d)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(l,_);p((t=t.apply(a,s)).next())});const ns=()=>{const a=(0,e.useRef)(null),s=(0,m.cw)(),[t,r]=(0,e.useState)(!1),[i,l]=(0,e.useState)(!1),_=(0,m._U)((0,u.fC)("@100mslive/hms-noise-suppression")),p=(0,S.N3)(h.ql.AUDIO_PLUGINS),{selectedDeviceIDs:o}=(0,qt.L)(),d=_&&!t,k=(0,e.useCallback)(()=>je(void 0,null,function*(){if(!a.current){const{HMSNoiseSuppressionPlugin:C}=yield Promise.all([n.e(53),n.e(301)]).then(n.bind(n,2053));a.current=new C({npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"vscode",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/usr/local/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/",npm_package_dependencies_react_virtualized_auto_sizer:"^1.0.7",npm_package_dependencies__100mslive_react_icons:"0.8.3",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.78.0",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_react_intersection_observer:"^9.4.3",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",ZDOTDIR:"/Users/macbook",npm_package_dependencies_uuid:"^8.3.2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",USER:"macbook",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.76.0",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",COMMAND_MODE:"unix2003",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies__100mslive_hms_noise_suppression:"0.9.3",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.tJiuoSH8nu/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x1",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.8.3",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/yarn--1684819888085-0.5786261786208151:/Users/macbook/Downloads/100ms-web-main/node_modules/.bin:/Users/macbook/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/Library/Apple/usr/bin:/Library/Frameworks/Mono.framework/Versions/Current/Commands:/Users/macbook/Documents/flutter/bin:/Users/macbook/Documents/flutter/bin",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies_zipyai:"^1.3.24",npm_package_dependencies__emoji_mart_react:"^1.0.1",LaunchInstanceID:"E4FED9CE-D764-4E76-8C1A-952A493E16D7",_:"/Users/macbook/Downloads/100ms-web-main/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/macbook",npm_package_browserslist_production_1:"not dead",PWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.8.3",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"fr_FR.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.11.3",npm_package_resolutions_loader_utils:"^2.0.4",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",VSCODE_INJECTION:"1",npm_package_devDependencies_autoprefixer:"^10.4.2",HOME:"/Users/macbook",SHLVL:"2",npm_package_dependencies_react_window:"^1.8.7",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_hls_js:"^1.3.0",npm_package_dependencies__100mslive_hls_player:"0.1.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"macbook",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",npm_lifecycle_script:"webpack --node-env production",VSCODE_GIT_IPC_HANDLE:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/vscode-git-73afa0f49e.sock",npm_package_dependencies_react:"^18.1.0",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v18.8.0 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",SECURITYSESSIONID:"186a3",npm_package_devDependencies_css_loader:"^6.5.1",npm_package_dependencies_react_draggable:"^4.4.5",COLORTERM:"truecolor",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/johanna-videoconf-559.app.100ms.live/"}.NS_DURATION_TIME_IN_MS)}}),[]),y=(0,e.useCallback)(()=>je(void 0,null,function*(){a.current&&(yield s.removePluginFromAudioTrack(a.current),a.current=null)}),[s]),U=(0,e.useCallback)(C=>je(void 0,null,function*(){let Ee="adding Noise Suppression plugin failed, see docs";C.message&&(Ee=C.message),Ue.y.addToast({title:Ee}),r(!0),yield y(),a.current=null,console.error(C)}),[y]),j=(0,e.useCallback)(()=>je(void 0,null,function*(){try{r(!1),yield k();const C=s.validateAudioPluginSupport(a.current);if(C.isSupported)yield s.addPluginToAudioTrack(a.current);else{const Ee=C.errMsg;yield U(Ee)}}catch(C){yield U(C)}}),[s,U,k]);return(0,e.useEffect)(()=>{je(void 0,null,function*(){a.current||(yield k());const C=s.validateAudioPluginSupport(a.current);l(C.isSupported),r(!C.isSupported)})},[o.audioInput,s,k]),i&&Ke.T.showNS()&&p?ln.createElement(K.u,{title:`Turn ${d?"off":"on"} noise suppression`},ln.createElement(Pe.Z,{active:!d,disabled:t,onClick:()=>je(void 0,null,function*(){d?yield y():yield j()}),"data-testid":"noise_suppression_btn"},ln.createElement(es.Z,null))):null};var ts=n(3951);const ss=e.lazy(()=>Promise.all([n.e(813),n.e(346)]).then(n.bind(n,8346))),as=()=>{const{amIScreenSharing:a,screenShareVideoTrackId:s,screenShareAudioTrackId:t,toggleScreenShare:r}=(0,W.N)(),i=(0,m._U)(u.xf),l=a&&!s&&!!t,[_,p]=(0,e.useState)(!1);return!(0,S.N3)(h.ql.AUDIO_ONLY_SCREENSHARE)||!i.screen||!(0,Ge.Lo)()?null:e.createElement(e.Fragment,null,e.createElement(K.u,{title:`${l?"Stop":"Start"} audio sharing`,key:"shareAudio"},e.createElement(Pe.Z,{active:!l,onClick:()=>{a?r():p(!0)},"data-testid":"screenshare_audio"},e.createElement(Q.Z,null))),_&&e.createElement(Jt,{onClose:()=>p(!1)}))},is=()=>{const a=(0,G.Z)(de.vc.media.md);return e.createElement(le.$.Root,null,e.createElement(le.$.Left,null,e.createElement(as,null),e.createElement(dn,{type:u.Mv.audio}),e.createElement(dn,{type:u.Mv.video}),Ke.T.enableWhiteboard?e.createElement(c.VK,null):null,e.createElement(ts.f,null),e.createElement(ns,null),Ke.T.enableTranscription?e.createElement(ss,null):null,e.createElement(E.k,{align:"center",css:{display:"none","@md":{display:"flex",gap:"$8"}}},a&&e.createElement(qe.v,null),e.createElement(en.Z,{isMobile:!0}))),e.createElement(le.$.Center,null,e.createElement(pn.l,null),e.createElement(wn,null),e.createElement(Mn,null),e.createElement(Pn,null),e.createElement(E.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(Ye,null)),e.createElement(_n.R,null)),e.createElement(le.$.Right,null,!a&&e.createElement(qe.v,null),e.createElement(en.Z,null),e.createElement(Ye,null)))};var os=n(9209);const ls=()=>e.createElement(le.$.Root,{css:{flexWrap:"nowrap","@md":{justifyContent:"center"}}},e.createElement(le.$.Left,{css:{"@md":{w:"unset",p:"0"}}},e.createElement(pn.l,null)),e.createElement(le.$.Center,{css:{"@md":{w:"unset"}}},e.createElement(wn,{css:{"@sm":{display:"none"}}}),e.createElement(w.x,{css:{"@md":{display:"none"}}},e.createElement(Mn,null)),e.createElement(w.x,{css:{display:"none","@md":{display:"flex",alignItems:"center",mx:"$4"}}},e.createElement(os.Q$,null)),e.createElement(Pn,null),e.createElement(w.x,{css:{"@md":{display:"none"}}},e.createElement(_n.R,null)),e.createElement(E.k,{align:"center",css:{display:"none","@md":{display:"flex"}}},e.createElement(Ye,null))),e.createElement(le.$.Right,null,e.createElement(qe.v,null),e.createElement(en.Z,null),e.createElement(Ye,null))),rs=()=>(0,Ge.ZM)()?e.createElement(ls,null):e.createElement(is,null);var cs=n(610);const ds=()=>{var a,s;const t=(0,m.cw)(),r=(0,N.tQ)(),i=(0,m._U)(u.lj);return!i?.role||r?null:e.createElement(fe.wq,{title:"Role Change Request",onOpenChange:l=>!l&&t.rejectChangeRole(i),body:`${(a=i?.requestedBy)==null?void 0:a.name} has requested you to change your role to ${(s=i?.role)==null?void 0:s.name}.`,onAction:()=>{t.acceptChangeRole(i)},actionText:"Accept"})};var ps=n(8760);const _s=()=>{var a,s;const t=(0,ps.H)(),{roomId:r,role:i}=(0,f.UO)(),l=(0,N.tQ)(),_=(0,m._U)(u.Pz),p=(0,b.Z)(_),o=(0,m._U)(u.ln),d=(0,m.cw)(),[k,y]=(0,e.useState)(!1),U=(0,m._U)((0,u.EP)(h._8.dropdownList)),j=(0,e.useRef)(),C=(0,e.useRef)(),Ee=(0,e.useRef)(),pe=k&&(h.Dt||h.gn||h.yx),be=Se=>{var Qe;((Qe=Ee.current)==null?void 0:Qe.length)===0&&y(_e=>!_e)};return(0,e.useEffect)(()=>{let Se=null;return Ee.current=U||[],Ee.current.length===0&&(clearTimeout(Se),Se=setTimeout(()=>{Ee.current.length===0&&y(!0)},5e3)),()=>{clearTimeout(Se)}},[U,k]),(0,e.useEffect)(()=>{if(!r){t("/");return}!p&&!(_===u.wk.Connecting||_===u.wk.Reconnecting||o)&&t(i?`/preview/${r||""}/${i}`:`/preview/${r||""}`)},[o,p,_,t,i,r]),(0,e.useEffect)(()=>{l&&d.ignoreMessageTypes(["chat",h.nf])},[l,d]),o?e.createElement(E.k,{css:{size:"100%",overflow:"hidden"},direction:"column"},!l&&e.createElement(w.x,{ref:j,css:{h:"$18",transition:"margin 0.3s ease-in-out",marginTop:pe?`-${(a=j.current)==null?void 0:a.clientHeight}px`:"none","@md":{h:"$17"}},"data-testid":"header"},e.createElement(cs.h,null)),e.createElement(w.x,{css:{w:"100%",flex:"1 1 0",minHeight:0,paddingBottom:"env(safe-area-inset-bottom)"},id:"conferencing","data-testid":"conferencing",onClick:be},e.createElement(Y,null)),!l&&e.createElement(w.x,{ref:C,css:{flexShrink:0,maxHeight:"$24",transition:"margin 0.3s ease-in-out",marginBottom:pe?`-${(s=C.current)==null?void 0:s.clientHeight}px`:void 0,"@md":{maxHeight:"unset"}},"data-testid":"footer"},e.createElement(rs,null)),e.createElement(ds,null)):e.createElement(Z.Z,null)}},1554:(Oe,ee,n)=>{n.d(ee,{m:()=>x,O:()=>J});var e=n(8160),f=n(32),b=n(9290),m=n(6939),u=n(8485),E=n(3053);const w=(0,b.zo)("img",{width:"100%",height:"auto",r:"$3"});var Z=n(8051),W=n(9112),ne=n(6773);const te=4,N=JSON.parse({npm_package_dependencies_emoji_mart:"^5.2.2",npm_package_devDependencies_prettier:"^2.5.1",npm_package_devDependencies_source_map_loader:"^3.0.1",TERM_PROGRAM:"vscode",npm_package_devDependencies_cssnano:"^5.0.15",NODE:"/usr/local/bin/node",npm_package_dependencies_worker_timers:"^7.0.40",INIT_CWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_devDependencies_terser_webpack_plugin:"^5.3.1",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_dependencies_eventemitter2:"^6.4.7",TMPDIR:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/",npm_package_dependencies_react_virtualized_auto_sizer:"^1.0.7",npm_package_dependencies__100mslive_react_icons:"0.8.3",npm_package_scripts_lint:"eslint -c .eslintrc --no-error-on-unmatched-pattern src --ext .js --ext jsx",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.78.0",npm_package_dependencies_screenfull:"^5.1.0",npm_package_scripts_dev:"node ../../scripts/dev-webapp",npm_package_dependencies_react_intersection_observer:"^9.4.3",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",ZDOTDIR:"/Users/macbook",npm_package_dependencies_uuid:"^8.3.2",npm_package_dependencies_pusher_js:"^7.0.3",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_react_dom:"^18.1.0",npm_package_readmeFilename:"README.md",USER:"macbook",npm_package_description:"[![Documentation](https://img.shields.io/badge/Read-Documentation-blue)](https://docs.100ms.live/javascript/v2/foundation/basics) [![Discord](https://img.shields.io/badge/Community-Join%20on%20Discord-blue)](https://discord.gg/F8cNgbjSaQ) [![Email](https://img.shields.io/badge/Contact-Know%20More-blue)](mailto:founders@100ms.live)",npm_package_devDependencies_webpack:"^5.76.0",npm_package_dependencies_web_vitals:"^1.0.1",npm_package_license:"MIT",npm_package_devDependencies_webpack_cli:"^4.9.2",npm_package_devDependencies_dotenv:"^14.2.0",COMMAND_MODE:"unix2003",npm_package_devDependencies_postcss_loader:"^6.2.1",npm_package_scripts_prebuild:"rm -rf build",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_devDependencies_webpack_dev_server:"^4.7.4",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_dependencies__100mslive_hms_noise_suppression:"0.9.3",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.tJiuoSH8nu/Listeners",npm_package_devDependencies_esbuild_plugin_postcss2:"0.1.1",npm_package_devDependencies_esbuild_loader:"^2.18.0",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x1",npm_package_devDependencies_postcss:"^8.4.5",npm_package_devDependencies_eslint_plugin_simple_import_sort:"^8.0.0",npm_package_devDependencies_eslint:"^8.9.0",npm_package_browserslist_development_2:"last 1 safari version",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies__100mslive_react_ui:"0.8.3",npm_package_module:"dist/index.js",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies_mini_css_extract_plugin:"^2.5.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.0.0",npm_package_devDependencies_copy_webpack_plugin:"^10.2.1",PATH:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/yarn--1684819888085-0.5786261786208151:/Users/macbook/Downloads/100ms-web-main/node_modules/.bin:/Users/macbook/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/share/dotnet:~/.dotnet/tools:/Library/Apple/usr/bin:/Library/Frameworks/Mono.framework/Versions/Current/Commands:/Users/macbook/Documents/flutter/bin:/Users/macbook/Documents/flutter/bin",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["build"]}',npm_package_scripts_lint_fix:"yarn lint --fix",npm_package_dependencies_zipyai:"^1.3.24",npm_package_dependencies__emoji_mart_react:"^1.0.1",LaunchInstanceID:"E4FED9CE-D764-4E76-8C1A-952A493E16D7",_:"/Users/macbook/Downloads/100ms-web-main/node_modules/.bin/webpack",npm_package_dependencies__tldraw_tldraw:"^1.18.4",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/macbook",npm_package_browserslist_production_1:"not dead",PWD:"/Users/macbook/Downloads/100ms-web-main",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies__100mslive_react_sdk:"0.8.3",npm_lifecycle_event:"build",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_mobx:"^6.3.12",npm_package_dependencies_js_confetti:"^0.10.2",LANG:"fr_FR.UTF-8",npm_package_name:"100ms_edtech_template",npm_package_devDependencies_eslint_plugin_import:"^2.25.4",npm_package_dependencies__100mslive_hms_virtual_background:"1.11.3",npm_package_resolutions_loader_utils:"^2.0.4",npm_package_scripts_esbuild:"node ../../scripts/build-webapp",npm_package_scripts_start:"webpack serve",npm_package_scripts_build:"webpack --node-env production",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_package_devDependencies__babel_eslint_parser:"^7.17.0",npm_package_dependencies_react_router_dom:"^6.3.0",npm_package_devDependencies_eslint_config_react_app:"^7.0.0",npm_config_bin_links:"true",npm_package_main:"dist/index.cjs.js",XPC_SERVICE_NAME:"0",npm_package_dependencies_recordrtc:"^5.6.2",npm_package_version:"0.1.4",VSCODE_INJECTION:"1",npm_package_devDependencies_autoprefixer:"^10.4.2",HOME:"/Users/macbook",SHLVL:"2",npm_package_dependencies_react_window:"^1.8.7",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_package_dependencies_hls_js:"^1.3.0",npm_package_dependencies__100mslive_hls_player:"0.1.3",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_dependencies__emoji_mart_data:"^1.0.6",npm_config_version_git_message:"v%s",LOGNAME:"macbook",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies_html_webpack_plugin:"^5.5.0",npm_package_scripts_format:"prettier -w src",npm_lifecycle_script:"webpack --node-env production",VSCODE_GIT_IPC_HANDLE:"/var/folders/78/ts31st6s4clfpy3xkgbzfvsw0000gn/T/vscode-git-73afa0f49e.sock",npm_package_dependencies_react:"^18.1.0",npm_package_devDependencies_webpack_manifest_plugin:"^4.1.1",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.19 npm/? node/v18.8.0 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",npm_package_files_1:"src",npm_package_files_0:"dist",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",SECURITYSESSIONID:"186a3",npm_package_devDependencies_css_loader:"^6.5.1",npm_package_dependencies_react_draggable:"^4.4.5",COLORTERM:"truecolor",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_eslint_webpack_plugin:"^3.1.1",npm_config_version_tag_prefix:"v",NODE_ENV:"production",REACT_APP_TOKEN_GENERATION_ENDPOINT:"https://prod-in2.100ms.live/hmsapi/johanna-videoconf-559.app.100ms.live/"}.REACT_APP_WEBINAR_PROPS||"{}"),h=N?.ROOM_IDS||[],se=N?.IMAGE_FILE||"",ce=N?.LINK_HREF||"https://100ms.live/",x=({peers:oe,maxTileCount:me})=>{const G=b.vc.media.md,de=(0,f.Z)(G),O=(0,W.M)("headlessConfig"),M=(0,ne.tQ)();return e.createElement(e.Fragment,null,e.createElement(m.x,{css:{flex:"1 1 0",height:"100%",mx:M&&Number(O?.tileOffset)===0?"0":"$8","@md":{flex:"2 1 0"}}},oe&&oe.length>0?e.createElement(Z.Z,{peers:oe,maxTileCount:de?te:me}):h.some(S=>window.location.href.includes(S))?e.createElement(m.x,{css:{display:"grid",placeItems:"center",size:"100%",p:"$12"}},e.createElement("a",{href:ce,target:"_blank",rel:"noreferrer"},e.createElement(w,{css:{p:"$4",boxShadow:"$sm"},alt:"Event template",src:se}))):e.createElement(E.$,null)))},J=({peers:oe})=>{const me=(0,W.M)("headlessConfig"),G=(0,ne.tQ)();return e.createElement(u.k,{direction:"column",css:{flex:"0 0 20%",mx:G&&Number(me?.tileOffset)===0?"0":"$8","@lg":{flex:"0 0 25%"},"@md":{flex:"1 1 0"}}},e.createElement(u.k,{css:{flex:"1 1 0"},align:"end"},oe&&oe.length>0&&e.createElement(Z.Z,{peers:oe,maxColCount:2})))}},3844:(Oe,ee,n)=>{n.d(ee,{O:()=>b});const e="peerName",f=new Map([[[!0,"screen"].toString(),"Your Screen"],[[!0,"regular"].toString(),`You (${e})`],[[!1,"screen"].toString(),`${e}'s Screen`],[[!1,"regular"].toString(),e],[[!0,void 0].toString(),`You (${e})`],[[!1,void 0].toString(),`${e}`]]),b=({peerName:m,isLocal:u,track:E})=>{const w=m!==void 0;if(!w||!E)return w?f.get([u,void 0].toString()).replace(e,m):"";const Z=E.volume===0;let W=f.get([u,E.source].toString());return W?W=W.replace(e,m):W=`${m} ${E.source}`,W=`${W}${E.degraded?"(Degraded)":""}`,`${W}${Z?" (Muted for you)":""}`}},535:(Oe,ee,n)=>{n.d(ee,{s:()=>V,Z:()=>H});var e=n(8160),f=n(32),b=n(9067),m=n(8081),u=n(9290),E=n(8485),w=n(6939),Z=n(1438),W=n(8379),ne=n(8523),te=n.n(ne),N=n(9057),h=n(6532),se=n(7854),ce=n(8721),x=n(5861),J=n(4299),oe=n(3074),me=n(9990),G=n(6773),de=n(5581);const O=e.memo(({peerId:v})=>{const c=(0,b._U)((0,m.u1)(v)),g=(0,b._U)((0,m.n2)(v)),P=(0,b._U)(m.k0.selectedItem),T=(0,G.L3)(de.JZ.isAudioOnly),R=(0,b.cw)(),I=(0,e.useRef)(null),[Y,Q]=(0,Z.Z)(!1),K=(0,W.Z)(I,Y,{onClose:()=>Q(!1)}),le=(0,G.L3)(de.JZ.showStatsOnTiles);return e.createElement(E.k,{direction:"column",justify:"center",css:{w:"100%",h:"100%"},ref:I},P&&e.createElement(E.k,{justify:"between",align:"center",css:{bg:"$menuBg",p:"$2 $2 $2 $6",borderTopLeftRadius:"$1",borderTopRightRadius:"$1"}},e.createElement(ce.x,{css:{color:"$textPrimary"}},P.name),e.createElement(x.h,{css:{color:"$white"},onClick:()=>{R.videoPlaylist.stop()},"data-testid":"videoplaylist_cross_btn"},e.createElement(N.Z,null))),le?e.createElement(w.x,{css:{"& > div":{top:"$14",left:"$8"}}},e.createElement(J.q8,{audioTrackID:g?.id,videoTrackID:c?.id,peerID:v,isLocal:P})):null,e.createElement(oe.n,{trackId:c?.id,attach:!T,css:{objectFit:"contain",h:"auto",r:"$1",borderTopLeftRadius:0,borderTopRightRadius:0}}),e.createElement(me.Nc,null,te().enabled&&e.createElement(x.h,{onClick:()=>Q(),css:{color:"$white",height:"max-content",alignSelf:"center",cursor:"pointer"}},K?e.createElement(h.Z,null):e.createElement(se.Z,null))))});var M=n(4685),S=n(7688),$=(v,c,g)=>new Promise((P,T)=>{var R=Q=>{try{Y(g.next(Q))}catch(K){T(K)}},I=Q=>{try{Y(g.throw(Q))}catch(K){T(K)}},Y=Q=>Q.done?P(Q.value):Promise.resolve(Q.value).then(R,I);Y((g=g.apply(v,c)).next())});const B=()=>{const v=(0,b.cw)();return e.createElement(E.k,{direction:"column",align:"center",justify:"center",css:{position:"relative",overflow:"hidden",w:"37.5rem",maxWidth:"80%",h:"100%",r:"$3",m:"0 auto",color:"$textPrimary",bg:"$surfaceDefault",textAlign:"center"}},e.createElement(M.Z,{width:48,height:48}),e.createElement(ce.x,{variant:"h5",css:{m:"$8 0"}},"You are sharing your screen"),e.createElement(S.z,{variant:"danger",onClick:()=>$(void 0,null,function*(){yield v.setScreenShareEnabled(!1)}),"data-testid":"stop_screen_share_btn"},e.createElement(N.Z,{width:18,height:18}),"\xA0 Stop screen share"))};var X=n(9477),ae=n(8051),D=n(8329);const ue=()=>{var v;const c=u.vc.media.xl,g=(0,f.Z)(c),P=(0,b._U)(m.BK),T=(0,b._U)(m.I3),R=(0,b._U)(m.fo),I=(0,b._U)(m.pk),Y=(0,b._U)(m.Oq),Q=((v=I?.roleName)==null?void 0:v.toLowerCase())===R?.toLowerCase(),K=T===I?.id,le=g||K||Q,he=(0,e.useMemo)(()=>{const De=P.filter(Re=>Re.id!==I?.id);return le&&I&&De.unshift(I),De},[P,I,le]);return e.createElement(E.k,{css:{size:"100%"},direction:g?"column":"row"},e.createElement(F,{amIPresenting:K,peerPresenting:I,peerSharingPlaylist:Y}),e.createElement(E.k,{direction:{"@initial":"column","@lg":"row"},css:{overflow:"hidden",p:"$4 $8",flex:"0 0 20%","@xl":{flex:"1 1 0"}}},e.createElement(V,{showSidebarInBottom:g,peerScreenSharing:I,isPresenterInSmallTiles:le,smallTilePeers:he,totalPeers:P.length})))},V=({isPresenterInSmallTiles:v,peerScreenSharing:c,smallTilePeers:g,totalPeers:P,showSidebarInBottom:T})=>{const R=(0,e.useCallback)(I=>c&&I.id!==c.id,[c]);return e.createElement(e.Fragment,null,!v&&e.createElement(z,{peerScreenSharing:c}),e.createElement(A,{showSidebarInBottom:T,smallTilePeers:g,shouldShowScreenFn:R}))},F=({amIPresenting:v,peerPresenting:c,peerSharingPlaylist:g})=>{const P=(0,b._U)((0,m.K6)(c?.id));return g?e.createElement(w.x,{css:{mx:"$8",flex:"3 1 0","@xl":{flex:"2 1 0",display:"flex",alignItems:"center"}}},e.createElement(O,{peerId:g.id})):e.createElement(w.x,{css:{flex:"3 1 0",mx:"$8","@xl":{ml:"$4",maxHeight:"80%",minHeight:0}}},c&&(v&&!["browser","window","application"].includes(P?.displaySurface)?e.createElement(w.x,{css:{objectFit:"contain",h:"100%"}},e.createElement(B,null)):e.createElement(X.Z,{peerId:c?.id})))},A=({smallTilePeers:v,shouldShowScreenFn:c,showStatsOnTiles:g,showSidebarInBottom:P})=>e.createElement(E.k,{css:{flex:"2 1 0"}},v&&v.length>0&&e.createElement(ae.Z,{peers:v,maxColCount:P?void 0:2,maxRowCount:P?1:void 0,includeScreenShareForPeer:c})),z=({peerScreenSharing:v,showStatsOnTiles:c})=>v?e.createElement(w.x,{css:{flex:"1 1 0",minHeight:"25%",py:"$4","@lg":{mr:"$4",minHeight:"unset",py:0},"@sm":{height:"100%",maxHeight:"75%",alignSelf:"center"}}},e.createElement(D.Z,{showStatsOnTiles:c,width:"100%",height:"100%",peerId:v.id})):null,H=ue}}]);

//# sourceMappingURL=733.c6c2a773.js.map