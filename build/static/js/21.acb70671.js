(self.webpackChunk=self.webpackChunk||[]).push([[21],{5873:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{d:"M20.319 12.004c0-.272-.114-.536-.317-.73L14.228 5.5c-.229-.22-.466-.316-.712-.316-.562 0-.967.396-.967.932 0 .281.115.518.29.694l1.978 2.004 2.549 2.33-2.04-.124H4.675c-.589 0-.993.404-.993.984 0 .572.404.976.993.976h10.653l2.039-.123-2.55 2.329-1.977 2.004a.968.968 0 0 0-.29.694c0 .536.405.932.967.932a.99.99 0 0 0 .694-.299l5.792-5.792c.203-.193.317-.457.317-.72Z",fill:"currentColor"}))},1290:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{d:"M12.5 5a.625.625 0 0 0-.625.625v13.75a.625.625 0 0 0 1.25 0V5.625A.625.625 0 0 0 12.5 5ZM10 6.25a.625.625 0 0 0-.625.625v11.25a.625.625 0 1 0 1.25 0V6.875A.625.625 0 0 0 10 6.25ZM7.5 8.75a.625.625 0 0 0-.625.625v6.25a.625.625 0 1 0 1.25 0v-6.25A.625.625 0 0 0 7.5 8.75ZM5.625 11.25a.625.625 0 0 0-.625.625v1.25a.625.625 0 0 0 1.25 0v-1.25a.625.625 0 0 0-.625-.625ZM15 6.25a.625.625 0 0 0-.625.625v11.25a.625.625 0 1 0 1.25 0V6.875A.625.625 0 0 0 15 6.25ZM17.5 8.75a.625.625 0 0 0-.625.625v6.25a.624.624 0 1 0 1.25 0v-6.25a.625.625 0 0 0-.625-.625ZM19.375 11.25a.625.625 0 0 0-.625.625v1.25a.625.625 0 1 0 1.25 0v-1.25a.625.625 0 0 0-.625-.625Z",fill:"currentColor"}))},370:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 13.167v2.262a1.632 1.632 0 0 1-1.633 1.632h-6.64L7.985 19.87a.653.653 0 0 1-1.045-.522V17.06H5.633A1.633 1.633 0 0 1 4 15.43V5.633A1.633 1.633 0 0 1 5.633 4h5.2c-.18.416-.322.853-.42 1.306h-4.78a.327.327 0 0 0-.327.327v9.796a.327.327 0 0 0 .327.326h1.959c.36 0 .653.292.653.653v1.633l2.873-2.155a.653.653 0 0 1 .392-.13h6.857a.327.327 0 0 0 .327-.327v-1.843c.453-.097.89-.239 1.306-.42Z",fill:"currentColor"}),W.createElement("rect",{x:12,y:2,width:10,height:10,rx:5,fill:"#2F80FF"}))},8647:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{d:"m38.211 14.289-2.5-2.5L38.5 9l2.5 2.5-2.789 2.789ZM27 4h-6v6h6V4Z",fill:"#F5BC00"}),W.createElement("path",{d:"M42.993 25.993c0 10.489-8.504 18.993-18.993 18.993-10.489 0-18.993-8.504-18.993-18.993C5.007 15.504 13.511 7 24 7c10.489 0 18.993 8.504 18.993 18.993Z",fill:"url(#ColoredTimeIcon_svg__a)"}),W.createElement("path",{d:"M27 7.236a19.137 19.137 0 0 0-6 0V11h6V7.236ZM31.535 14.636l-9.899 9.9 2.829 2.828 9.899-9.9-2.829-2.828Z",fill:"#D8E7FF"}),W.createElement("path",{d:"M30 5H18V1h12v4Z",fill:"#F5BC00"}),W.createElement("path",{d:"M27.993 24.993a3.993 3.993 0 1 1-7.987 0 3.993 3.993 0 0 1 7.987 0Z",fill:"#D8E7FF"}),W.createElement("defs",null,W.createElement("linearGradient",{id:"ColoredTimeIcon_svg__a",x1:6.505,y1:7.835,x2:28.858,y2:49.079,gradientUnits:"userSpaceOnUse"},W.createElement("stop",{stopColor:"#2AA4F4"}),W.createElement("stop",{offset:1,stopColor:"#007AD9"}))))},7854:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{d:"M19.567 10.38c-.465 0-.8-.352-.8-.818v-.738l.176-3.067-2.311 2.434-2.707 2.725a.737.737 0 0 1-.554.229c-.5 0-.87-.326-.87-.818 0-.237.08-.448.237-.606l2.716-2.707 2.435-2.312-3.076.176h-.73c-.466 0-.826-.325-.826-.8 0-.474.351-.808.826-.808h4.878c.896 0 1.415.518 1.415 1.415v4.878a.798.798 0 0 1-.809.817Zm-9.641 9.66H5.048c-.897 0-1.424-.52-1.424-1.416v-4.878a.8.8 0 0 1 .817-.817c.457 0 .8.351.8.817v.738l-.184 3.068 2.32-2.435 2.698-2.724a.756.756 0 0 1 .563-.229c.492 0 .87.325.87.817a.843.843 0 0 1-.246.607l-2.707 2.707-2.444 2.311 3.077-.175h.738c.466 0 .826.325.826.8 0 .474-.36.808-.826.808Z",fill:"currentColor"}))},3712:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{d:"M6.193 14.89c.725 3.475 2.329 5.528 5.466 5.528 2.352 0 3.878-.956 4.927-2.876.748-1.195 1.272-2.837 1.704-4.255.23-.733.547-1.658.57-2.067.031-.462-.27-.793-.732-.824-.532-.039-.864.27-1.195.963l-1.08 2.32c-.1.232-.208.31-.331.31-.139 0-.24-.078-.24-.332l.356-8.144a.885.885 0 0 0-.894-.894.884.884 0 0 0-.887.894l-.355 5.923c-.2-.069-.416-.13-.64-.177l-.187-6.783a.885.885 0 0 0-.895-.894.884.884 0 0 0-.886.894l.187 6.698a9.593 9.593 0 0 0-.678.093l-.785-6.214a.882.882 0 0 0-.887-.887.884.884 0 0 0-.894.887l.72 6.72c-.232.107-.53.27-.731.401l-.908-4.716a.882.882 0 0 0-.886-.886.884.884 0 0 0-.895.886l1.056 7.432Z",fill:"#FAC919"}),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.725 15.197a1.495 1.495 0 0 1-.017-.096L3.652 7.67a1.5 1.5 0 0 1-.015-.21 2.383 2.383 0 0 1 2.7-2.368v-.038A2.383 2.383 0 0 1 8.73 2.666c.432 0 .836.114 1.184.312a2.373 2.373 0 0 1 1.866-.896c.895 0 1.67.483 2.08 1.204a2.39 2.39 0 0 1 .883-.167 2.385 2.385 0 0 1 2.393 2.46l-.155 3.555c.389-.191.814-.266 1.25-.235a2.29 2.29 0 0 1 1.566.748c.424.474.596 1.078.56 1.665-.025.406-.165.903-.267 1.247-.082.276-.18.582-.268.858l-.1.314c-.418 1.372-.986 3.185-1.842 4.57-.62 1.122-1.43 2.05-2.504 2.689-1.087.645-2.335.928-3.718.928-1.936 0-3.536-.652-4.735-1.938-1.148-1.23-1.81-2.916-2.2-4.783Zm11.86 2.345c.749-1.195 1.273-2.837 1.705-4.255l.11-.348c.21-.656.44-1.372.46-1.719.031-.462-.27-.793-.732-.824-.532-.039-.864.27-1.195.963l-1.08 2.32v.003c-.1.23-.208.306-.331.306-.139 0-.24-.077-.24-.331l.356-8.144a.885.885 0 0 0-.894-.894.882.882 0 0 0-.887.894l-.355 5.923c-.2-.069-.416-.13-.64-.177l-.187-6.783a.884.884 0 0 0-.894-.894.88.88 0 0 0-.887.894l.187 6.698a9.593 9.593 0 0 0-.678.093l-.785-6.214a.886.886 0 0 0-.224-.592.883.883 0 0 0-.663-.295.884.884 0 0 0-.894.887l.72 6.72c-.232.107-.53.27-.731.401l-.908-4.716a.882.882 0 0 0-.886-.886.884.884 0 0 0-.895.886l1.056 7.432c.725 3.475 2.329 5.528 5.466 5.528 2.352 0 3.878-.956 4.927-2.876Z",fill:"#212121"}))},4334:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{d:"M13.832 10.608 7.409 5.335A1.474 1.474 0 0 0 5 6.469v11.082a1.474 1.474 0 0 0 2.408 1.135l6.424-5.274a1.809 1.809 0 0 0 0-2.798v-.006ZM15.996 5H19v14.02h-3.004V5Z",fill:"currentColor"}))},8338:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{d:"M11.875 4a7.875 7.875 0 1 0 0 15.75 7.875 7.875 0 0 0 0-15.75ZM10.75 14.688a1.125 1.125 0 1 1-2.25 0V9.061a1.125 1.125 0 0 1 2.25 0v5.626Zm4.5 0a1.125 1.125 0 1 1-2.25 0V9.061a1.125 1.125 0 1 1 2.25 0v5.626Z",fill:"currentColor"}))},1182:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none"},oe),W.createElement("path",{d:"M18.268 15.929h-7.893a2.72 2.72 0 0 1-2.732-2.72V7.744A2.744 2.744 0 0 1 10.375 5h7.893A2.744 2.744 0 0 1 21 7.744v5.465a2.72 2.72 0 0 1-2.732 2.72ZM10.375 6.82a.923.923 0 0 0-.91.923v5.465a.91.91 0 0 0 .91.898h7.893a.91.91 0 0 0 .91-.898V7.744a.923.923 0 0 0-.91-.923h-7.893Z",fill:"currentColor"}),W.createElement("path",{d:"M16.75 18.673a.91.91 0 0 1-.91.898H6.124A2.125 2.125 0 0 1 4 17.46v-7.286a.923.923 0 0 1 .91-.923.923.923 0 0 1 .911.923v7.286a.303.303 0 0 0 .304.291h9.714a.923.923 0 0 1 .911.923Z",fill:"currentColor"}))},4053:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{d:"M12 4.125a7.875 7.875 0 1 0 0 15.75 7.875 7.875 0 0 0 0-15.75Zm3.572 8.57-4.5 3.094a.84.84 0 0 1-.801.085.842.842 0 0 1-.521-.78V8.906a.844.844 0 0 1 1.322-.695l4.5 3.094a.845.845 0 0 1 0 1.39Z",fill:"currentColor"}))},6905:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{d:"M5.897 6.795h12.206a.897.897 0 0 0 0-1.795H5.897a.897.897 0 1 0 0 1.795ZM18.102 8.949H12a.898.898 0 0 0 0 1.795h6.102a.897.897 0 1 0 0-1.795ZM18.102 13.256H12a.898.898 0 0 0 0 1.795h6.102a.897.897 0 0 0 0-1.795ZM18.103 17.205H5.897a.897.897 0 1 0 0 1.795h12.206a.897.897 0 0 0 0-1.795ZM5.982 9.183a.718.718 0 0 0-.444.663v4.308a.718.718 0 0 0 1.227.508l2.154-2.154a.718.718 0 0 0 0-1.016L6.765 9.338a.718.718 0 0 0-.783-.155Z",fill:"currentColor"}))},4817:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{d:"m10.168 13.392 6.423 5.273A1.473 1.473 0 0 0 19 17.531V6.449a1.474 1.474 0 0 0-2.408-1.135l-6.424 5.274a1.81 1.81 0 0 0 0 2.798v.006ZM8.004 19H5V4.98h3.004V19Z",fill:"currentColor"}))},5211:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.076 3.052c.186-.07.39-.07.575 0l6.546 2.455c.319.12.53.425.53.766V12c0 2.82-1.867 5.073-3.552 6.548a18.568 18.568 0 0 1-3.42 2.353l-.017.009-.005.002-.002.001-.367-.731-.367.732-.002-.002-.005-.002-.018-.01a6.77 6.77 0 0 1-.286-.152 18.563 18.563 0 0 1-3.134-2.2C6.867 17.073 5 14.82 5 12V6.273c0-.341.212-.647.53-.766l6.546-2.455Zm-.079 17.861c.23.116.502.116.733 0l-.366-.731-.367.732Zm.367-1.662a16.924 16.924 0 0 0 2.734-1.935C16.685 15.927 18.09 14.09 18.09 12V6.84l-5.727-2.148L6.636 6.84V12c0 2.09 1.406 3.927 2.994 5.316a16.922 16.922 0 0 0 2.734 1.936Zm0-11.342c.451 0 .818.366.818.818V12a.818.818 0 0 1-1.636 0V8.727c0-.452.366-.818.818-.818Zm0 6.546a.818.818 0 1 0 0 1.636h.008a.818.818 0 0 0 0-1.636h-.008Z",fill:"currentColor"}))},6532:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{d:"M18.987 10.81H14.11c-.896 0-1.415-.527-1.415-1.423v-4.87c0-.456.343-.817.809-.817s.8.352.8.818v.738l-.185 3.067 2.32-2.434 2.699-2.725a.764.764 0 0 1 .562-.237c.501 0 .87.334.87.826a.858.858 0 0 1-.246.606l-2.707 2.707-2.434 2.312 3.067-.176h.738c.466 0 .827.325.827.8 0 .466-.352.808-.827.808Zm-8.428 8.921c-.466 0-.8-.342-.8-.817v-.835l.184-3.059-2.32 2.435-2.76 2.777a.75.75 0 0 1-.562.238c-.492 0-.862-.334-.862-.826a.85.85 0 0 1 .238-.607l2.768-2.768 2.444-2.312-3.076.176h-.835c-.466 0-.827-.325-.827-.791 0-.475.352-.809.827-.809h4.974c.897 0 1.415.519 1.415 1.415v4.966c0 .466-.334.817-.808.817Z",fill:"currentColor"}))},3191:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3c.311 0 .596.177.734.456l2.338 4.737 5.228.764a.818.818 0 0 1 .453 1.395l-3.783 3.685.893 5.205a.818.818 0 0 1-1.188.862L12 17.645l-4.676 2.46a.818.818 0 0 1-1.187-.863l.893-5.205-3.783-3.685A.818.818 0 0 1 3.7 8.957l5.228-.764 2.338-4.737A.818.818 0 0 1 12 3Zm0 2.667-1.794 3.635a.818.818 0 0 1-.616.448l-4.014.586 2.904 2.829a.818.818 0 0 1 .236.724l-.686 3.995 3.59-1.887a.818.818 0 0 1 .76 0l3.59 1.887-.686-3.995a.818.818 0 0 1 .236-.724l2.904-2.829-4.014-.586a.818.818 0 0 1-.616-.448L12 5.667Z",fill:"currentColor"}))},3055:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160),u=oe=>W.createElement("svg",Object.assign({width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.4 4A2.4 2.4 0 0 0 4 6.4v2.4a.8.8 0 1 0 1.6 0V6.4a.8.8 0 0 1 .8-.8h11.2a.8.8 0 0 1 .8.8v2.4a.8.8 0 0 0 1.6 0V6.4A2.4 2.4 0 0 0 17.6 4H6.4Zm-.8 11.2a.8.8 0 0 0-1.6 0v2.4A2.4 2.4 0 0 0 6.4 20h11.2a2.4 2.4 0 0 0 2.4-2.4v-2.4a.8.8 0 0 0-1.6 0v2.4a.8.8 0 0 1-.8.8H6.4a.8.8 0 0 1-.8-.8v-2.4ZM7.324 12a9.061 9.061 0 0 0 1.119 1.448c.884.927 2.089 1.752 3.557 1.752s2.672-.825 3.557-1.752A9.08 9.08 0 0 0 16.677 12a9.067 9.067 0 0 0-1.119-1.448C14.671 9.625 13.467 8.8 12 8.8s-2.673.825-3.558 1.752A9.061 9.061 0 0 0 7.324 12ZM17.6 12l.713-.364L17.6 12Zm.713-.364-.002-.002-.002-.004-.006-.013-.023-.042a9.584 9.584 0 0 0-.386-.64 10.671 10.671 0 0 0-1.18-1.487C15.692 8.375 14.097 7.2 12 7.2c-2.096 0-3.691 1.175-4.715 2.248A10.656 10.656 0 0 0 5.8 11.43a6.756 6.756 0 0 0-.103.188l-.006.012-.003.004v.002s-.001.001.712.364l-.713-.363a.8.8 0 0 0 0 .726L6.4 12l-.713.363v.001l.001.002.003.004.006.012a3.92 3.92 0 0 0 .103.187 10.659 10.659 0 0 0 1.485 1.983C8.309 15.625 9.904 16.8 12 16.8c2.096 0 3.691-1.175 4.715-2.248A10.68 10.68 0 0 0 18.2 12.57a6.785 6.785 0 0 0 .103-.188l.006-.012.002-.004.001-.002L17.6 12l.713.363a.801.801 0 0 0 0-.727Zm-7.444-.767a1.6 1.6 0 1 1 2.263 2.262 1.6 1.6 0 0 1-2.263-2.262Z",fill:"currentColor"}))},4866:(gt,ue,q)=>{"use strict";q.d(ue,{T:()=>D});var W=q(1931),u=q(8160),oe=q(8081),xe=q(9067),te=q(6395);const ae=(ee,fe,P)=>(0,W.m)(void 0,void 0,void 0,function*(){if(fe)try{yield ee.setRemoteTrackEnabled(fe.id,!fe.enabled)}catch(be){P(be,"remoteToggle")}}),D=(ee,fe,P=te.r)=>{const be=(0,xe.cw)(),Z=(0,xe._U)((0,oe.VW)(ee)),Q=(0,xe._U)((0,oe.GP)(fe)),ie=(0,xe._U)((0,oe.BF)(Z?.id)),he=(0,xe._U)(oe.AI),ve=Q?.enabled?he?.mute:he?.unmute,Je=Z?.enabled?he?.mute:he?.unmute,rt=(0,u.useCallback)(()=>(0,W.m)(void 0,void 0,void 0,function*(){yield ae(be,Z,P)}),[be,Z,P]),K=(0,u.useCallback)(()=>(0,W.m)(void 0,void 0,void 0,function*(){yield ae(be,Q,P)}),[be,P,Q]),St=(0,u.useCallback)(Se=>{Z&&be.setVolume(Se,Z.id)},[be,Z]);return{isAudioEnabled:!!Z?.enabled,isVideoEnabled:!!Q?.enabled,volume:ie,toggleAudio:Z&&Je?rt:void 0,toggleVideo:Q?.source==="regular"&&ve?K:void 0,setVolume:Z?St:void 0}}},871:(gt,ue,q)=>{"use strict";q.d(ue,{i:()=>sn});var W=q(8160),u=q(9004),oe=function(ge,Me){return oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ne,Te){Ne.__proto__=Te}||function(Ne,Te){for(var ze in Te)Object.prototype.hasOwnProperty.call(Te,ze)&&(Ne[ze]=Te[ze])},oe(ge,Me)};function xe(ge,Me){if(typeof Me!="function"&&Me!==null)throw new TypeError("Class extends value "+String(Me)+" is not a constructor or null");oe(ge,Me);function Ne(){this.constructor=ge}ge.prototype=Me===null?Object.create(Me):(Ne.prototype=Me.prototype,new Ne)}var te=function(){return te=Object.assign||function(Me){for(var Ne,Te=1,ze=arguments.length;Te<ze;Te++){Ne=arguments[Te];for(var We in Ne)Object.prototype.hasOwnProperty.call(Ne,We)&&(Me[We]=Ne[We])}return Me},te.apply(this,arguments)};function ae(ge,Me){var Ne={};for(var Te in ge)Object.prototype.hasOwnProperty.call(ge,Te)&&Me.indexOf(Te)<0&&(Ne[Te]=ge[Te]);if(ge!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ze=0,Te=Object.getOwnPropertySymbols(ge);ze<Te.length;ze++)Me.indexOf(Te[ze])<0&&Object.prototype.propertyIsEnumerable.call(ge,Te[ze])&&(Ne[Te[ze]]=ge[Te[ze]]);return Ne}var D=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof q.g<"u"?q.g:typeof self<"u"?self:{};function ee(ge){var Me=typeof ge;return ge!=null&&(Me=="object"||Me=="function")}var fe=ee,P=typeof D=="object"&&D&&D.Object===Object&&D,be=P,Z=be,Q=typeof self=="object"&&self&&self.Object===Object&&self,ie=Z||Q||Function("return this")(),he=ie,ve=he,Je=function(){return ve.Date.now()},rt=Je,K=/\s/;function St(ge){for(var Me=ge.length;Me--&&K.test(ge.charAt(Me)););return Me}var Se=St,He=Se,Qe=/^\s+/;function It(ge){return ge&&ge.slice(0,He(ge)+1).replace(Qe,"")}var yt=It,Ut=he,wt=Ut.Symbol,we=wt,De=we,Ze=Object.prototype,Ht=Ze.hasOwnProperty,Le=Ze.toString,Fe=De?De.toStringTag:void 0;function at(ge){var Me=Ht.call(ge,Fe),Ne=ge[Fe];try{ge[Fe]=void 0;var Te=!0}catch{}var ze=Le.call(ge);return Te&&(Me?ge[Fe]=Ne:delete ge[Fe]),ze}var Ae=at,$t=Object.prototype,Zt=$t.toString;function pe(ge){return Zt.call(ge)}var Pe=pe,je=we,Ue=Ae,Xe=Pe,dt="[object Null]",ht="[object Undefined]",Pt=je?je.toStringTag:void 0;function jt(ge){return ge==null?ge===void 0?ht:dt:Pt&&Pt in Object(ge)?Ue(ge):Xe(ge)}var Lr=jt;function dr(ge){return ge!=null&&typeof ge=="object"}var Rr=dr,Jr=Lr,Qr=Rr,Tt="[object Symbol]";function Kt(ge){return typeof ge=="symbol"||Qr(ge)&&Jr(ge)==Tt}var Yt=Kt,Qt=yt,Nr=fe,yr=Yt,vr=0/0,nn=/^[-+]0x[0-9a-f]+$/i,Xr=/^0b[01]+$/i,en=/^0o[0-7]+$/i,on=parseInt;function lr(ge){if(typeof ge=="number")return ge;if(yr(ge))return vr;if(Nr(ge)){var Me=typeof ge.valueOf=="function"?ge.valueOf():ge;ge=Nr(Me)?Me+"":Me}if(typeof ge!="string")return ge===0?ge:+ge;ge=Qt(ge);var Ne=Xr.test(ge);return Ne||en.test(ge)?on(ge.slice(2),Ne?2:8):nn.test(ge)?vr:+ge}var zt=lr,zr=fe,Vr=rt,wn=zt,bi="Expected a function",Ln=Math.max,Ir=Math.min;function Pn(ge,Me,Ne){var Te,ze,We,mt,tt,xt,Lt=0,Rt=!1,Et=!1,vt=!0;if(typeof ge!="function")throw new TypeError(bi);Me=wn(Me)||0,zr(Ne)&&(Rt=!!Ne.leading,Et="maxWait"in Ne,We=Et?Ln(wn(Ne.maxWait)||0,Me):We,vt="trailing"in Ne?!!Ne.trailing:vt);function ur(mr){var an=Te,bn=ze;return Te=ze=void 0,Lt=mr,mt=ge.apply(bn,an),mt}function hr(mr){return Lt=mr,tt=setTimeout(Or,Me),Rt?ur(mr):mt}function jr(mr){var an=mr-xt,bn=mr-Lt,hi=Me-an;return Et?Ir(hi,We-bn):hi}function Mr(mr){var an=mr-xt,bn=mr-Lt;return xt===void 0||an>=Me||an<0||Et&&bn>=We}function Or(){var mr=Vr();if(Mr(mr))return wr(mr);tt=setTimeout(Or,jr(mr))}function wr(mr){return tt=void 0,vt&&Te?ur(mr):(Te=ze=void 0,mt)}function Br(){tt!==void 0&&clearTimeout(tt),Lt=0,Te=xt=ze=tt=void 0}function At(){return tt===void 0?mt:wr(Vr())}function bt(){var mr=Vr(),an=Mr(mr);if(Te=arguments,ze=this,xt=mr,an){if(tt===void 0)return hr(xt);if(Et)return clearTimeout(tt),tt=setTimeout(Or,Me),ur(xt)}return tt===void 0&&(tt=setTimeout(Or,Me)),mt}return bt.cancel=Br,bt.flush=At,bt}var Mt=Pn,_o=Mt,xi=fe,er="Expected a function";function ts(ge,Me,Ne){var Te=!0,ze=!0;if(typeof ge!="function")throw new TypeError(er);return xi(Ne)&&(Te="leading"in Ne?!!Ne.leading:Te,ze="trailing"in Ne?!!Ne.trailing:ze),_o(ge,Me,{leading:Te,maxWait:Me,trailing:ze})}var So=ts,Lo=function(ge,Me,Ne,Te){switch(Me){case"debounce":return Mt(ge,Ne,Te);case"throttle":return So(ge,Ne,Te);default:return ge}},Bi=function(ge){return typeof ge=="function"},Fn=function(){return typeof window>"u"},$i=function(ge){return ge instanceof Element||ge instanceof HTMLDocument},Ro=function(ge,Me,Ne,Te){return function(ze){var We=ze.width,mt=ze.height;Me(function(tt){return tt.width===We&&tt.height===mt||tt.width===We&&!Te||tt.height===mt&&!Ne?tt:(ge&&Bi(ge)&&ge(We,mt),{width:We,height:mt})})}},Rn=function(ge){xe(Me,ge);function Me(Ne){var Te=ge.call(this,Ne)||this;Te.cancelHandler=function(){Te.resizeHandler&&Te.resizeHandler.cancel&&(Te.resizeHandler.cancel(),Te.resizeHandler=null)},Te.attachObserver=function(){var Lt=Te.props,Rt=Lt.targetRef,Et=Lt.observerOptions;if(!Fn()){Rt&&Rt.current&&(Te.targetRef.current=Rt.current);var vt=Te.getElement();!vt||Te.observableElement&&Te.observableElement===vt||(Te.observableElement=vt,Te.resizeObserver.observe(vt,Et))}},Te.getElement=function(){var Lt=Te.props,Rt=Lt.querySelector,Et=Lt.targetDomEl;if(Fn())return null;if(Rt)return document.querySelector(Rt);if(Et&&$i(Et))return Et;if(Te.targetRef&&$i(Te.targetRef.current))return Te.targetRef.current;var vt=(0,u.findDOMNode)(Te);if(!vt)return null;var ur=Te.getRenderType();switch(ur){case"renderProp":return vt;case"childFunction":return vt;case"child":return vt;case"childArray":return vt;default:return vt.parentElement}},Te.createResizeHandler=function(Lt){var Rt=Te.props,Et=Rt.handleWidth,vt=Et===void 0?!0:Et,ur=Rt.handleHeight,hr=ur===void 0?!0:ur,jr=Rt.onResize;if(!(!vt&&!hr)){var Mr=Ro(jr,Te.setState.bind(Te),vt,hr);Lt.forEach(function(Or){var wr=Or&&Or.contentRect||{},Br=wr.width,At=wr.height,bt=!Te.skipOnMount&&!Fn();bt&&Mr({width:Br,height:At}),Te.skipOnMount=!1})}},Te.getRenderType=function(){var Lt=Te.props,Rt=Lt.render,Et=Lt.children;return Bi(Rt)?"renderProp":Bi(Et)?"childFunction":(0,W.isValidElement)(Et)?"child":Array.isArray(Et)?"childArray":"parent"};var ze=Ne.skipOnMount,We=Ne.refreshMode,mt=Ne.refreshRate,tt=mt===void 0?1e3:mt,xt=Ne.refreshOptions;return Te.state={width:void 0,height:void 0},Te.skipOnMount=ze,Te.targetRef=(0,W.createRef)(),Te.observableElement=null,Fn()||(Te.resizeHandler=Lo(Te.createResizeHandler,We,tt,xt),Te.resizeObserver=new window.ResizeObserver(Te.resizeHandler)),Te}return Me.prototype.componentDidMount=function(){this.attachObserver()},Me.prototype.componentDidUpdate=function(){this.attachObserver()},Me.prototype.componentWillUnmount=function(){Fn()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},Me.prototype.render=function(){var Ne=this.props,Te=Ne.render,ze=Ne.children,We=Ne.nodeType,mt=We===void 0?"div":We,tt=this.state,xt=tt.width,Lt=tt.height,Rt={width:xt,height:Lt,targetRef:this.targetRef},Et=this.getRenderType(),vt;switch(Et){case"renderProp":return Te&&Te(Rt);case"childFunction":return vt=ze,vt(Rt);case"child":if(vt=ze,vt.type&&typeof vt.type=="string"){Rt.targetRef;var ur=ae(Rt,["targetRef"]);return(0,W.cloneElement)(vt,ur)}return(0,W.cloneElement)(vt,Rt);case"childArray":return vt=ze,vt.map(function(hr){return!!hr&&(0,W.cloneElement)(hr,Rt)});default:return W.createElement(mt,null)}},Me}(W.PureComponent);function Io(ge,Me){Me===void 0&&(Me={});var Ne=function(We){xe(mt,We);function mt(){var tt=We!==null&&We.apply(this,arguments)||this;return tt.ref=createRef(),tt}return mt.prototype.render=function(){var tt=this.props,xt=tt.forwardedRef,Lt=ae(tt,["forwardedRef"]),Rt=xt??this.ref;return React.createElement(Rn,te({},Me,{targetRef:Rt}),React.createElement(ge,te({targetRef:Rt},Lt)))},mt}(Component);function Te(We,mt){return React.createElement(Ne,te({},We,{forwardedRef:mt}))}var ze=ge.displayName||ge.name;return Te.displayName="withResizeDetector(".concat(ze,")"),forwardRef(Te)}var Jn=Fn()?W.useEffect:W.useLayoutEffect;function To(ge){ge===void 0&&(ge={});var Me=ge.skipOnMount,Ne=Me===void 0?!1:Me,Te=ge.refreshMode,ze=ge.refreshRate,We=ze===void 0?1e3:ze,mt=ge.refreshOptions,tt=ge.handleWidth,xt=tt===void 0?!0:tt,Lt=ge.handleHeight,Rt=Lt===void 0?!0:Lt,Et=ge.targetRef,vt=ge.observerOptions,ur=ge.onResize,hr=(0,W.useRef)(Ne),jr=(0,W.useRef)(null),Mr=Et??jr,Or=(0,W.useRef)(),wr=(0,W.useState)({width:void 0,height:void 0}),Br=wr[0],At=wr[1];return Jn(function(){if(!Fn()){var bt=Ro(ur,At,xt,Rt),mr=function(bn){!xt&&!Rt||bn.forEach(function(hi){var lo=hi&&hi.contentRect||{},Qn=lo.width,Vi=lo.height,is=!hr.current&&!Fn();is&&bt({width:Qn,height:Vi}),hr.current=!1})};Or.current=Lo(mr,Te,We,mt);var an=new window.ResizeObserver(Or.current);return Mr.current&&an.observe(Mr.current,vt),function(){an.disconnect();var bn=Or.current;bn&&bn.cancel&&bn.cancel()}}},[Te,We,mt,xt,Rt,ur,vt,Mr.current]),te({ref:Mr},Br)}var rs=q(8081),di=q(9067);const Do=(ge,Me,Ne)=>ge.reduce((Te,ze,We)=>{const mt=Math.floor(We/Me);return mt>0&&Ne||(Te[mt]||(Te[mt]=[]),Te[mt].push(ze)),Te},[]),oo=({elements:ge,tilesInFirstPage:Me,onlyOnePage:Ne,isLastPageDifferentFromFirstPage:Te,defaultWidth:ze,defaultHeight:We,lastPageWidth:mt,lastPageHeight:tt})=>{const xt=Do(ge,Me,Ne);return xt.map((Lt,Rt)=>Lt.map(Et=>{const vt=Rt===xt.length-1,ur=Te&&vt?mt:ze,hr=Te&&vt?tt:We;return Object.assign(Object.assign({},Et),{height:hr,width:ur})}))};function Ao(ge){if(ge.length===0)return null;const Me={};let Ne=ge[0],Te=1;for(let ze=0;ze<ge.length;ze++){const We=ge[ze];Me[We]===null?Me[We]=1:Me[We]++,Me[We]>Te&&(Ne=We,Te=Me[We])}return Ne}const ko=ge=>Ao(ge.filter(Me=>{var Ne,Te;return((Ne=Me.track)===null||Ne===void 0?void 0:Ne.width)&&((Te=Me.track)===null||Te===void 0?void 0:Te.height)}).map(Me=>{var Ne,Te;return(((Ne=Me.track)===null||Ne===void 0?void 0:Ne.width)||1)/(((Te=Me.track)===null||Te===void 0?void 0:Te.height)||1)})),Fi=(ge,Me,Ne,Te,ze)=>{if(ge<0||Me<0)throw new Error("Container must have a non-negative area");if(Ne<1||!Number.isInteger(Ne))throw new Error("Number of shapes to place must be a positive integer");const We=Te&&ze&&Te/ze;if(We!==void 0&&isNaN(We))throw new Error("Aspect ratio must be a number");let mt={area:0,cols:0,rows:0,width:0,height:0};if(We!==void 0)for(let tt=Ne;tt>0;tt+=-1){const xt=Math.ceil(Ne/tt);let Lt,Rt;ge/(tt*We)<=Me/xt?(Lt=ge/tt,Rt=Lt/We):(Rt=Me/xt,Lt=Rt*We);const Et=Lt*Rt;Et>mt.area&&(mt={area:Et,width:Lt,height:Rt,rows:xt,cols:tt})}return mt},ns=({parentWidth:ge,parentHeight:Me,count:Ne,maxCount:Te,aspectRatio:ze})=>{let We=0,mt=0,tt=0,xt=0,Lt=!1,Rt=0,Et=0;const vt=Math.min(Math.ceil(Math.sqrt(Ne*(ge/Me)/(ze.width/ze.height))),Te);let ur=ge/vt,hr=ur/(ze.width/ze.height);hr>Me&&(hr=Me,ur=hr/(ze.height/ze.width));const jr=Math.floor(Me/hr);if(mt=hr,We=ur,Rt=Math.min(Ne,jr*vt),Et=Ne%(jr*vt),Lt=Et>0&&Ne>jr*vt,Lt){let Mr=ge/Math.min(Math.ceil(Math.sqrt(Et*(ge/Me)/(ze.width/ze.height))),Te),Or=Mr/(ze.width/ze.height);Or>Me&&(Or=Me,Mr=Or/(ze.height/ze.width)),xt=Or,tt=Mr}return{tilesInFirstPage:Rt,defaultWidth:We,defaultHeight:mt,lastPageWidth:tt,lastPageHeight:xt,isLastPageDifferentFromFirstPage:Lt}},Hi=({parentWidth:ge,parentHeight:Me,count:Ne,maxCount:Te,aspectRatio:ze})=>{let We=0,mt=0,tt=0,xt=0,Lt=!1,Rt=0,Et=0;const{width:vt,height:ur}=Fi(ge,Me,Math.min(Ne,Te),ze.width,ze.height);if(We=vt,mt=ur,Rt=Math.min(Ne,Te),Et=Ne%Te,Lt=Et>0&&Ne>Te,Lt){const{width:hr,height:jr}=Fi(ge,Me,Et,ze.width,ze.height);tt=hr,xt=jr}return{tilesInFirstPage:Rt,defaultWidth:We,defaultHeight:mt,lastPageWidth:tt,lastPageHeight:xt,isLastPageDifferentFromFirstPage:Lt}},Hn=({parentWidth:ge,parentHeight:Me,count:Ne,maxCount:Te,aspectRatio:ze})=>{let We=0,mt=0,tt=0,xt=0,Lt=!1,Rt=0,Et=0;const vt=Math.min(Math.ceil(Math.sqrt(Ne*(ze.width/ze.height)/(ge/Me))),Te),ur=Me/vt,hr=ur*(ze.width/ze.height),jr=Math.floor(ge/hr);if(We=hr,mt=ur,Rt=Math.min(Ne,vt*jr),Et=Ne%(vt*jr),Lt=Et>0&&Ne>vt*jr,Lt){const Mr=Me/Math.min(Math.ceil(Math.sqrt(Et*(ze.width/ze.height)/(ge/Me))),Te);xt=Mr,tt=Mr*(ze.width/ze.height)}return{tilesInFirstPage:Rt,defaultWidth:We,defaultHeight:mt,lastPageWidth:tt,lastPageHeight:xt,isLastPageDifferentFromFirstPage:Lt}};function Ni({count:ge,parentWidth:Me,parentHeight:Ne,maxTileCount:Te,maxRowCount:ze,maxColCount:We,aspectRatio:mt}){let tt=0,xt=0,Lt=0,Rt=0,Et=!1,vt=0;if(ge===0)return{tilesInFirstPage:vt,defaultWidth:tt,defaultHeight:xt,lastPageWidth:Lt,lastPageHeight:Rt,isLastPageDifferentFromFirstPage:Et};if(Te)({tilesInFirstPage:vt,defaultWidth:tt,defaultHeight:xt,lastPageWidth:Lt,lastPageHeight:Rt,isLastPageDifferentFromFirstPage:Et}=Hi({parentWidth:Me,parentHeight:Ne,count:ge,maxCount:Te,aspectRatio:mt}));else if(ze)({tilesInFirstPage:vt,defaultWidth:tt,defaultHeight:xt,lastPageWidth:Lt,lastPageHeight:Rt,isLastPageDifferentFromFirstPage:Et}=Hn({parentWidth:Me,parentHeight:Ne,count:ge,maxCount:ze,aspectRatio:mt}));else if(We)({tilesInFirstPage:vt,defaultWidth:tt,defaultHeight:xt,lastPageWidth:Lt,lastPageHeight:Rt,isLastPageDifferentFromFirstPage:Et}=ns({parentWidth:Me,parentHeight:Ne,count:ge,maxCount:We,aspectRatio:mt}));else{const{width:ur,height:hr}=Fi(Me,Ne,ge,mt.width,mt.height);tt=ur,xt=hr,vt=ge}return{tilesInFirstPage:vt,defaultWidth:tt,defaultHeight:xt,lastPageWidth:Lt,lastPageHeight:Rt,isLastPageDifferentFromFirstPage:Et}}const so=(ge,Me,Ne,Te=!0)=>{if(!ge||!Me||!Ne)return[];const ze=[];for(const We of ge)if(We.videoTrack===void 0&&We.audioTrack&&Me[We.audioTrack]?ze.push({peer:We}):We.videoTrack&&Me[We.videoTrack]?ze.push({track:Me[We.videoTrack],peer:We}):Te||ze.push({peer:We}),We.auxiliaryTracks.length>0&&We.auxiliaryTracks.forEach(mt=>{const tt=Me[mt];tt?.type==="video"&&tt?.source==="regular"&&ze.push({track:tt,peer:We})}),Ne(We)&&We.auxiliaryTracks.length>0){const mt=We.auxiliaryTracks.find(tt=>{const xt=Me[tt];return xt?.type==="video"&&xt?.source==="screen"});mt&&ze.push({track:Me[mt],peer:We})}return ze},ao={width:1,height:1},sn=({peers:ge,maxTileCount:Me,maxColCount:Ne,maxRowCount:Te,includeScreenShareForPeer:ze=()=>!1,aspectRatio:We=ao,filterNonPublishingPeers:mt=!0,offsetY:tt=0})=>{const{width:xt=0,height:Lt=0,ref:Rt}=To(),Et=(0,di.gg)().getState(rs.zK),vt=so(ge,Et,ze,mt),ur=(0,W.useMemo)(()=>We||{width:ko(vt)||1,height:1},[We,vt]),hr=vt.length,{tilesInFirstPage:jr,defaultWidth:Mr,defaultHeight:Or,lastPageWidth:wr,lastPageHeight:Br,isLastPageDifferentFromFirstPage:At}=(0,W.useMemo)(()=>Ni({count:hr,parentWidth:Math.floor(xt),parentHeight:Math.floor(Lt)-Math.min(Lt,tt),maxTileCount:Me,maxRowCount:Te,maxColCount:Ne,aspectRatio:ur}),[hr,xt,Lt,Me,Te,Ne,ur,tt]);return{pagesWithTiles:(0,W.useMemo)(()=>oo({elements:vt,tilesInFirstPage:jr,onlyOnePage:!1,isLastPageDifferentFromFirstPage:At,defaultWidth:Mr,defaultHeight:Or,lastPageWidth:wr,lastPageHeight:Br}),[vt,jr,At,Mr,Or,wr,Br]),ref:Rt}}},1458:(gt,ue,q)=>{"use strict";q.d(ue,{$:()=>oe});var W=q(8485),u=q(9290);const oe={Root:(0,u.zo)(W.k,{justifyContent:"space-between",alignItems:"center",py:"$4",position:"relative",height:"100%","@md":{flexWrap:"wrap",gap:"$4"}}),Left:(0,u.zo)(W.k,{alignItems:"center",position:"absolute",left:"$10",gap:"$8","@md":{position:"unset",justifyContent:"center",w:"100%"}}),Center:(0,u.zo)(W.k,{w:"100%",justifyContent:"center",alignItems:"center",gap:"$8"}),Right:(0,u.zo)(W.k,{alignItems:"center",position:"absolute",right:"$10",gap:"$8","@md":{display:"none"}})}},4674:(gt,ue,q)=>{"use strict";q.d(ue,{I:()=>u});var W=q(9290);const u={Root:(0,W.zo)("div",{height:"2rem",display:"flex",justifyContent:"center",alignItems:"center",width:"100%","& > * + *":{marginRight:"0",marginLeft:"0.5rem"}}),Chevron:(0,W.zo)("button",{color:"$textPrimary","&:focus":{outline:"none"},"&[disabled]":{color:"$grayDefault",cursor:"not-allowed"},display:"flex"}),Dots:(0,W.zo)("div",{display:"flex",alignItems:"center","& > * + *":{marginRight:"0",marginLeft:"0.5rem"}}),Dot:(0,W.zo)("button",{"&:focus":{outline:"none"},borderRadius:"9999px",width:"0.5rem",height:"0.5rem",backgroundColor:"$textDisabled",padding:"0px",border:"none",cursor:"pointer",variants:{active:{true:{backgroundColor:"$textPrimary"}}}})}},8673:(gt,ue,q)=>{"use strict";q.d(ue,{E:()=>Qr});var W=q(8886),u=q(8160),oe=q(9600),xe=q(8224),te=q(4135),ae=q(8841),D=q(3118),ee=q(1802),fe=q(440),P=q(6246),be=q(5939),Z=q(5859),Q=q(1855),ie=Object.defineProperty,he=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,Je=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,St=(Tt,Kt,Yt)=>Kt in Tt?ie(Tt,Kt,{enumerable:!0,configurable:!0,writable:!0,value:Yt}):Tt[Kt]=Yt,Se=(Tt,Kt)=>{for(var Yt in Kt||(Kt={}))rt.call(Kt,Yt)&&St(Tt,Yt,Kt[Yt]);if(Je)for(var Yt of Je(Kt))K.call(Kt,Yt)&&St(Tt,Yt,Kt[Yt]);return Tt},He=(Tt,Kt)=>he(Tt,ve(Kt)),Qe=(Tt,Kt)=>{var Yt={};for(var Qt in Tt)rt.call(Tt,Qt)&&Kt.indexOf(Qt)<0&&(Yt[Qt]=Tt[Qt]);if(Tt!=null&&Je)for(var Qt of Je(Tt))Kt.indexOf(Qt)<0&&K.call(Tt,Qt)&&(Yt[Qt]=Tt[Qt]);return Yt};const It="Radio",[yt,Ut]=(0,ae.b)(It),[wt,we]=yt(It),De=(0,u.forwardRef)((Tt,Kt)=>{const Yt=Tt,{__scopeRadio:Qt,"aria-labelledby":Nr,name:yr,checked:vr=!1,required:nn,disabled:Xr,value:en="on",onCheck:on}=Yt,lr=Qe(Yt,["__scopeRadio","aria-labelledby","name","checked","required","disabled","value","onCheck"]),[zt,zr]=(0,u.useState)(null),Vr=(0,te.e)(Kt,Pn=>zr(Pn)),wn=(0,xe.t0)(zt),bi=Nr||wn,Ln=(0,u.useRef)(!1),Ir=zt?Boolean(zt.closest("form")):!0;return(0,u.createElement)(wt,{scope:Qt,checked:vr,disabled:Xr},(0,u.createElement)(D.WV.button,(0,W.Z)({type:"button",role:"radio","aria-checked":vr,"aria-labelledby":bi,"data-state":Fe(vr),"data-disabled":Xr?"":void 0,disabled:Xr,value:en},lr,{ref:Vr,onClick:(0,oe.M)(Tt.onClick,Pn=>{vr||on?.(),Ir&&(Ln.current=Pn.isPropagationStopped(),Ln.current||Pn.stopPropagation())})})),Ir&&(0,u.createElement)(Le,{control:zt,bubbles:!Ln.current,name:yr,value:en,checked:vr,required:nn,disabled:Xr,style:{transform:"translateX(-100%)"}}))}),Ze="RadioIndicator",Ht=(0,u.forwardRef)((Tt,Kt)=>{const Yt=Tt,{__scopeRadio:Qt,forceMount:Nr}=Yt,yr=Qe(Yt,["__scopeRadio","forceMount"]),vr=we(Ze,Qt);return(0,u.createElement)(Q.z,{present:Nr||vr.checked},(0,u.createElement)(D.WV.span,(0,W.Z)({"data-state":Fe(vr.checked),"data-disabled":vr.disabled?"":void 0},yr,{ref:Kt})))}),Le=Tt=>{const Kt=Tt,{control:Yt,checked:Qt,bubbles:Nr=!0}=Kt,yr=Qe(Kt,["control","checked","bubbles"]),vr=(0,u.useRef)(null),nn=(0,Z.D)(Qt),Xr=(0,be.t)(Yt);return(0,u.useEffect)(()=>{const en=vr.current,on=window.HTMLInputElement.prototype,zt=Object.getOwnPropertyDescriptor(on,"checked").set;if(nn!==Qt&&zt){const zr=new Event("click",{bubbles:Nr});zt.call(en,Qt),en.dispatchEvent(zr)}},[nn,Qt,Nr]),(0,u.createElement)("input",(0,W.Z)({type:"radio","aria-hidden":!0,defaultChecked:Qt},yr,{tabIndex:-1,ref:vr,style:He(Se(Se({},Tt.style),Xr),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))};function Fe(Tt){return Tt?"checked":"unchecked"}const at=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ae="RadioGroup",[$t,Zt]=(0,ae.b)(Ae,[ee.Pc,Ut]),pe=(0,ee.Pc)(),Pe=Ut(),[je,Ue]=$t(Ae),Xe=(0,u.forwardRef)((Tt,Kt)=>{const Yt=Tt,{__scopeRadioGroup:Qt,name:Nr,"aria-labelledby":yr,defaultValue:vr,value:nn,required:Xr=!1,orientation:en,dir:on,loop:lr=!0,onValueChange:zt}=Yt,zr=Qe(Yt,["__scopeRadioGroup","name","aria-labelledby","defaultValue","value","required","orientation","dir","loop","onValueChange"]),Vr=(0,xe.t0)(),wn=yr||Vr,bi=pe(Qt),Ln=(0,P.gm)(on),[Ir,Pn]=(0,fe.T)({prop:nn,defaultProp:vr,onChange:zt});return(0,u.createElement)(je,{scope:Qt,name:Nr,required:Xr,value:Ir,onValueChange:Pn},(0,u.createElement)(ee.fC,(0,W.Z)({asChild:!0},bi,{orientation:en,dir:Ln,loop:lr}),(0,u.createElement)(D.WV.div,(0,W.Z)({role:"radiogroup","aria-required":Xr,"aria-orientation":en,"aria-labelledby":wn,dir:Ln},zr,{ref:Kt}))))}),dt="RadioGroupItem",ht=(0,u.forwardRef)((Tt,Kt)=>{const Yt=Tt,{__scopeRadioGroup:Qt,disabled:Nr}=Yt,yr=Qe(Yt,["__scopeRadioGroup","disabled"]),vr=Ue(dt,Qt),nn=pe(Qt),Xr=Pe(Qt),en=(0,u.useRef)(null),on=(0,te.e)(Kt,en),lr=vr.value===yr.value,zt=(0,u.useRef)(!1);return(0,u.useEffect)(()=>{const zr=wn=>{at.includes(wn.key)&&(zt.current=!0)},Vr=()=>zt.current=!1;return document.addEventListener("keydown",zr),document.addEventListener("keyup",Vr),()=>{document.removeEventListener("keydown",zr),document.removeEventListener("keyup",Vr)}},[]),(0,u.createElement)(ee.ck,(0,W.Z)({asChild:!0},nn,{focusable:!Nr,active:lr}),(0,u.createElement)(De,(0,W.Z)({disabled:Nr,required:vr.required,checked:lr},Xr,yr,{name:vr.name,ref:on,onCheck:()=>vr.onValueChange(yr.value),onKeyDown:(0,oe.M)(zr=>{zr.key==="Enter"&&zr.preventDefault()}),onFocus:(0,oe.M)(yr.onFocus,()=>{var zr;zt.current&&((zr=en.current)===null||zr===void 0||zr.click())})})))}),Pt="RadioGroupIndicator",jt=(0,u.forwardRef)((Tt,Kt)=>{const Yt=Tt,{__scopeRadioGroup:Qt}=Yt,Nr=Qe(Yt,["__scopeRadioGroup"]),yr=Pe(Qt);return(0,u.createElement)(Ht,(0,W.Z)({},yr,Nr,{ref:Kt}))}),Lr=Xe,dr=ht,Rr=jt;var Jr=q(9290);const Qr={Root:(0,Jr.zo)(Lr,{display:"flex",alignItems:"center"}),Item:(0,Jr.zo)(dr,{bg:"$white",width:"$8",height:"$8",border:"1px solid $brandDefault",cursor:"pointer",borderRadius:"$round","&:focus":{boxShadow:"none",outline:"none"},'&[data-state="checked"]':{borderWidth:"$space$2",p:"$1"}}),Indicator:(0,Jr.zo)(Rr,{bg:"$brandDefault"})}},4299:(gt,ue,q)=>{"use strict";q.d(ue,{q8:()=>he});var W=q(8160),u=q(8081),oe=q(9067),xe=q(6422);const te=(Se,He="B",Qe=2)=>{if(Se===0)return`0 ${He}`;if(!Se)return"-";const It=Qe<0?0:Qe,yt=["","K","M","G","T","P","E","Z","Y"].map(wt=>wt+He);let Ut=Math.floor(Math.log(Se)/Math.log(1024));return Ut===0&&Ut++,`${parseFloat((Se/Math.pow(1024,Ut)).toFixed(It))} ${yt[Ut]}`};var ae=q(9290);const D=(0,ae.zo)("div",{backgroundColor:"$statsBg",position:"absolute",top:"$3",left:"$3",zIndex:7,borderRadius:"$2",padding:"$2",fontSize:"$xs",overflowY:"auto",maxHeight:"75%",maxWidth:"85%"}),ee=(0,ae.zo)("table",{}),fe=(0,ae.zo)("tr",{width:"100%","& > * + *":{px:"$4"},whiteSpace:"nowrap",textAlign:"left"}),P=(0,ae.zo)("td",{color:"$textPrimary",fontWeight:"$regular"}),be=(0,ae.zo)("td",{color:"$textPrimary"}),Z=(0,ae.zo)("tr",{height:"$4"}),Q={Root:D,Row:fe,Label:P,Value:be,Table:ee,Gap:Z};var ie=q(455);function he({videoTrackID:Se,audioTrackID:He,peerID:Qe,isLocal:It=!1}){var yt,Ut,wt;const we=It?u.fA.localAudioTrackStatsByID:u.fA.trackStatsByID,De=(0,oe.p5)(we(He)),Ze=(0,oe.p5)(u.fA.localVideoTrackStatsByID(Se)),Ht=(0,oe.p5)(u.fA.trackStatsByID(Se)),Le=It?Ze?.[0]:Ht,Fe=(yt=(0,oe._U)((0,u.hE)(Qe)))===null||yt===void 0?void 0:yt.downlinkQuality,at=(0,oe.p5)(u.fA.availablePublishBitrate);return De||Le?W.createElement(Q.Root,null,W.createElement("table",null,W.createElement("tbody",null,It?W.createElement(W.Fragment,null,W.createElement(rt,{show:K(at),label:"AOBR",tooltip:"Available Outgoing Bitrate",value:te(at,"b/s")}),Ze?.map(Ae=>{var $t,Zt;if(!Ae)return null;const pe=Ae.rid?xe.EN[Ae.rid]:"";return W.createElement(W.Fragment,null,pe&&W.createElement(rt,{label:pe.toUpperCase(),value:""}),W.createElement(rt,{show:K(Ae.frameWidth),label:"Width",value:($t=Ae.frameWidth)===null||$t===void 0?void 0:$t.toString()}),W.createElement(rt,{show:K(Ae.frameHeight),label:"Height",value:(Zt=Ae.frameHeight)===null||Zt===void 0?void 0:Zt.toString()}),W.createElement(rt,{show:K(Ae.framesPerSecond),label:"FPS",value:`${Ae.framesPerSecond} ${K(Ae.framesDropped)?`(${Ae.framesDropped} dropped)`:""}`}),W.createElement(rt,{show:St(Ae.bitrate),label:"Bitrate(V)",value:te(Ae.bitrate,"b/s")}),W.createElement(Q.Gap,null))})):W.createElement(W.Fragment,null,W.createElement(rt,{show:K(Le?.frameWidth),label:"Width",value:(Ut=Le?.frameWidth)===null||Ut===void 0?void 0:Ut.toString()}),W.createElement(rt,{show:K(Le?.frameHeight),label:"Height",value:(wt=Le?.frameHeight)===null||wt===void 0?void 0:wt.toString()}),W.createElement(rt,{show:K(Le?.framesPerSecond),label:"FPS",value:`${Le?.framesPerSecond} ${K(Le?.framesDropped)?`(${Le?.framesDropped} dropped)`:""}`}),W.createElement(rt,{show:St(Le?.bitrate),label:"Bitrate(V)",value:te(Le?.bitrate,"b/s")})),W.createElement(rt,{show:St(De?.bitrate),label:"Bitrate(A)",value:te(De?.bitrate,"b/s")}),W.createElement(rt,{show:St(Fe),label:"Downlink",value:`${Fe}`}),W.createElement(rt,{show:St(Le?.codec),label:"Codec(V)",value:Le?.codec}),W.createElement(rt,{show:St(De?.codec),label:"Codec(A)",value:De?.codec}),W.createElement(ve,{audioTrackStats:De,videoTrackStats:Le})))):null}const ve=({audioTrackStats:Se,videoTrackStats:He})=>{var Qe,It;const yt=Se?.type.includes("outbound")||He?.type.includes("outbound"),Ut=yt?Se?.remote:Se,wt=yt?He?.remote:He;return W.createElement(W.Fragment,null,W.createElement(Je,{label:"Packet Loss(V)",stats:wt}),W.createElement(Je,{label:"Packet Loss(A)",stats:Ut}),W.createElement(rt,{show:St(wt?.jitter),label:"Jitter(V)",value:(Qe=wt?.jitter)===null||Qe===void 0?void 0:Qe.toFixed(4)}),W.createElement(rt,{show:St(Ut?.jitter),label:"Jitter(A)",value:(It=Ut?.jitter)===null||It===void 0?void 0:It.toFixed(4)}))},Je=({stats:Se,label:He})=>{const Qe=`${Se?.packetsLostRate?Se.packetsLostRate.toFixed(2):0}/s`;return W.createElement(rt,{show:K(Se?.packetsLost),label:He,value:`${Se?.packetsLost}(${Qe})`})},rt=W.memo(({label:Se="",value:He="",tooltip:Qe="",show:It=!0})=>{const yt=W.createElement(Q.Label,{css:{fontWeight:He?"$regular":"$semiBold"}},Se);return W.createElement(W.Fragment,null,It?W.createElement(Q.Row,null,Qe?W.createElement(ie.u,{side:"top",title:Qe},yt):yt,He===""?W.createElement(Q.Value,null):W.createElement(Q.Value,null,He)):null)});function K(Se){return St(Se)&&Se!==0}function St(Se){return Se!=null}},8414:(gt,ue,q)=>{"use strict";q.d(ue,{R:()=>be});var W=q(6811),u=q(9290),oe=q(5943),xe=q(3764);const te=W.fC,ae=(0,u.zo)(W.xz,Object.assign(Object.assign({position:"absolute",bottom:"$2",right:"$2",zIndex:10,width:"$13",height:"$13",color:"$textPrimary",borderRadius:"$round",backgroundColor:"$menuBg",border:"none"},xe._),{"&:not([disabled]):focus":{outline:"none",boxShadow:"0 0 0 3px $colors$brandLight"}})),D=(0,u.zo)(W.VY,Object.assign({fontFamily:"$sans",backgroundColor:"$menuBg",padding:"$5 0",display:"flex",flexDirection:"column",borderRadius:"$space$6",zIndex:11,width:"$60"},oe.kp)),ee={fontSize:"$sm",color:"$textPrimary",display:"flex",alignItems:"center",padding:"$4 $6",width:"100%"},fe=(0,u.zo)("button",Object.assign(Object.assign({},ee),{height:"$14","&:hover":{backgroundColor:"$menuBg"},"&:focus":{outline:"none"},"& > * + *":{marginRight:"0",marginLeft:"$4"}})),P=(0,u.zo)("div",Object.assign(Object.assign({},ee),{alignItems:"start",flexDirection:"column",marginBottom:"0"}));(0,u.zo)("div",{display:"flex","& > * + *":{marginRight:"0",marginLeft:"$4"}});const be={Root:te,Trigger:ae,Content:D,ItemButton:fe,VolumeItem:P,RemoveItem:(0,u.zo)(fe,{color:"$error",borderTop:"1px solid $borderLight"})}},8613:(gt,ue,q)=>{"use strict";q.d(ue,{d:()=>u});var W=q(9290);const u={Root:(0,W.zo)("div",{height:"100%",width:"100%",display:"flex",flexDirection:"column"}),Container:(0,W.zo)("div",{height:"100%",width:"100%",position:"relative",display:"flex",alignItems:"center",overflow:"hidden"}),View:(0,W.zo)("div",{height:"100%",width:"100%",position:"absolute",display:"flex",placeContent:"center",flexWrap:"wrap",alignItems:"center"})}},8534:(gt,ue,q)=>{"use strict";q.d(ue,{I:()=>W});const W=(u,oe)=>u===oe?0:u+1===oe?"-100%":u-1===oe?"100%":u<oe?"-200%":"200%"},4013:(gt,ue,q)=>{"use strict";q.r(ue),q.d(ue,{clsx:()=>u,default:()=>oe});function W(xe){var te,ae,D="";if(typeof xe=="string"||typeof xe=="number")D+=xe;else if(typeof xe=="object")if(Array.isArray(xe))for(te=0;te<xe.length;te++)xe[te]&&(ae=W(xe[te]))&&(D&&(D+=" "),D+=ae);else for(te in xe)xe[te]&&(D&&(D+=" "),D+=te);return D}function u(){for(var xe,te,ae=0,D="";ae<arguments.length;)(xe=arguments[ae++])&&(te=W(xe))&&(D&&(D+=" "),D+=te);return D}const oe=u},7924:function(gt,ue){(function(q,W){W(ue)})(this,function(q){"use strict";var W=function(Z){return function(Q){var ie=Z(Q);return Q.add(ie),ie}},u=function(Z){return function(Q,ie){return Z.set(Q,ie),ie}},oe=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,xe=536870912,te=xe*2,ae=function(Z,Q){return function(ie){var he=Q.get(ie),ve=he===void 0?ie.size:he<te?he+1:0;if(!ie.has(ve))return Z(ie,ve);if(ie.size<xe){for(;ie.has(ve);)ve=Math.floor(Math.random()*te);return Z(ie,ve)}if(ie.size>oe)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;ie.has(ve);)ve=Math.floor(Math.random()*oe);return Z(ie,ve)}},D=new WeakMap,ee=u(D),fe=ae(ee,D),P=W(fe);q.addUniqueNumber=P,q.generateUniqueNumber=fe,Object.defineProperty(q,"__esModule",{value:!0})})},335:(gt,ue,q)=>{"use strict";var W=q(9333),u={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},oe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},xe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},te={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ae={};ae[W.ForwardRef]=xe,ae[W.Memo]=te;function D(he){return W.isMemo(he)?te:ae[he.$$typeof]||u}var ee=Object.defineProperty,fe=Object.getOwnPropertyNames,P=Object.getOwnPropertySymbols,be=Object.getOwnPropertyDescriptor,Z=Object.getPrototypeOf,Q=Object.prototype;function ie(he,ve,Je){if(typeof ve!="string"){if(Q){var rt=Z(ve);rt&&rt!==Q&&ie(he,rt,Je)}var K=fe(ve);P&&(K=K.concat(P(ve)));for(var St=D(he),Se=D(ve),He=0;He<K.length;++He){var Qe=K[He];if(!oe[Qe]&&!(Je&&Je[Qe])&&!(Se&&Se[Qe])&&!(St&&St[Qe])){var It=be(ve,Qe);try{ee(he,Qe,It)}catch{}}}}return he}gt.exports=ie},3640:(gt,ue,q)=>{"use strict";var W=q(5620);function u(){}function oe(){}oe.resetWarningCache=u,gt.exports=function(){function xe(D,ee,fe,P,be,Z){if(Z!==W){var Q=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Q.name="Invariant Violation",Q}}xe.isRequired=xe;function te(){return xe}var ae={array:xe,bigint:xe,bool:xe,func:xe,number:xe,object:xe,string:xe,symbol:xe,any:xe,arrayOf:te,element:xe,elementType:xe,instanceOf:te,node:xe,objectOf:te,oneOf:te,oneOfType:te,shape:te,exact:te,checkPropTypes:oe,resetWarningCache:u};return ae.PropTypes=ae,ae}},9386:(gt,ue,q)=>{if(!1)var W,u;else gt.exports=q(3640)()},5620:gt=>{"use strict";var ue="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";gt.exports=ue},108:gt=>{/*!
 * Pusher JavaScript Library v7.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(q,W){gt.exports=W()})(window,function(){return function(ue){var q={};function W(u){if(q[u])return q[u].exports;var oe=q[u]={i:u,l:!1,exports:{}};return ue[u].call(oe.exports,oe,oe.exports,W),oe.l=!0,oe.exports}return W.m=ue,W.c=q,W.d=function(u,oe,xe){W.o(u,oe)||Object.defineProperty(u,oe,{enumerable:!0,get:xe})},W.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},W.t=function(u,oe){if(oe&1&&(u=W(u)),oe&8||oe&4&&typeof u=="object"&&u&&u.__esModule)return u;var xe=Object.create(null);if(W.r(xe),Object.defineProperty(xe,"default",{enumerable:!0,value:u}),oe&2&&typeof u!="string")for(var te in u)W.d(xe,te,function(ae){return u[ae]}.bind(null,te));return xe},W.n=function(u){var oe=u&&u.__esModule?function(){return u.default}:function(){return u};return W.d(oe,"a",oe),oe},W.o=function(u,oe){return Object.prototype.hasOwnProperty.call(u,oe)},W.p="",W(W.s=2)}([function(ue,q,W){"use strict";var u=this&&this.__extends||function(){var Z=function(Q,ie){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(he,ve){he.__proto__=ve}||function(he,ve){for(var Je in ve)ve.hasOwnProperty(Je)&&(he[Je]=ve[Je])},Z(Q,ie)};return function(Q,ie){Z(Q,ie);function he(){this.constructor=Q}Q.prototype=ie===null?Object.create(ie):(he.prototype=ie.prototype,new he)}}();Object.defineProperty(q,"__esModule",{value:!0});var oe=256,xe=function(){function Z(Q){Q===void 0&&(Q="="),this._paddingCharacter=Q}return Z.prototype.encodedLength=function(Q){return this._paddingCharacter?(Q+2)/3*4|0:(Q*8+5)/6|0},Z.prototype.encode=function(Q){for(var ie="",he=0;he<Q.length-2;he+=3){var ve=Q[he]<<16|Q[he+1]<<8|Q[he+2];ie+=this._encodeByte(ve>>>3*6&63),ie+=this._encodeByte(ve>>>2*6&63),ie+=this._encodeByte(ve>>>1*6&63),ie+=this._encodeByte(ve>>>0*6&63)}var Je=Q.length-he;if(Je>0){var ve=Q[he]<<16|(Je===2?Q[he+1]<<8:0);ie+=this._encodeByte(ve>>>3*6&63),ie+=this._encodeByte(ve>>>2*6&63),Je===2?ie+=this._encodeByte(ve>>>1*6&63):ie+=this._paddingCharacter||"",ie+=this._paddingCharacter||""}return ie},Z.prototype.maxDecodedLength=function(Q){return this._paddingCharacter?Q/4*3|0:(Q*6+7)/8|0},Z.prototype.decodedLength=function(Q){return this.maxDecodedLength(Q.length-this._getPaddingLength(Q))},Z.prototype.decode=function(Q){if(Q.length===0)return new Uint8Array(0);for(var ie=this._getPaddingLength(Q),he=Q.length-ie,ve=new Uint8Array(this.maxDecodedLength(he)),Je=0,rt=0,K=0,St=0,Se=0,He=0,Qe=0;rt<he-4;rt+=4)St=this._decodeChar(Q.charCodeAt(rt+0)),Se=this._decodeChar(Q.charCodeAt(rt+1)),He=this._decodeChar(Q.charCodeAt(rt+2)),Qe=this._decodeChar(Q.charCodeAt(rt+3)),ve[Je++]=St<<2|Se>>>4,ve[Je++]=Se<<4|He>>>2,ve[Je++]=He<<6|Qe,K|=St&oe,K|=Se&oe,K|=He&oe,K|=Qe&oe;if(rt<he-1&&(St=this._decodeChar(Q.charCodeAt(rt)),Se=this._decodeChar(Q.charCodeAt(rt+1)),ve[Je++]=St<<2|Se>>>4,K|=St&oe,K|=Se&oe),rt<he-2&&(He=this._decodeChar(Q.charCodeAt(rt+2)),ve[Je++]=Se<<4|He>>>2,K|=He&oe),rt<he-3&&(Qe=this._decodeChar(Q.charCodeAt(rt+3)),ve[Je++]=He<<6|Qe,K|=Qe&oe),K!==0)throw new Error("Base64Coder: incorrect characters for decoding");return ve},Z.prototype._encodeByte=function(Q){var ie=Q;return ie+=65,ie+=25-Q>>>8&0-65-26+97,ie+=51-Q>>>8&26-97-52+48,ie+=61-Q>>>8&52-48-62+43,ie+=62-Q>>>8&62-43-63+47,String.fromCharCode(ie)},Z.prototype._decodeChar=function(Q){var ie=oe;return ie+=(42-Q&Q-44)>>>8&-oe+Q-43+62,ie+=(46-Q&Q-48)>>>8&-oe+Q-47+63,ie+=(47-Q&Q-58)>>>8&-oe+Q-48+52,ie+=(64-Q&Q-91)>>>8&-oe+Q-65+0,ie+=(96-Q&Q-123)>>>8&-oe+Q-97+26,ie},Z.prototype._getPaddingLength=function(Q){var ie=0;if(this._paddingCharacter){for(var he=Q.length-1;he>=0&&Q[he]===this._paddingCharacter;he--)ie++;if(Q.length<4||ie>2)throw new Error("Base64Coder: incorrect padding")}return ie},Z}();q.Coder=xe;var te=new xe;function ae(Z){return te.encode(Z)}q.encode=ae;function D(Z){return te.decode(Z)}q.decode=D;var ee=function(Z){u(Q,Z);function Q(){return Z!==null&&Z.apply(this,arguments)||this}return Q.prototype._encodeByte=function(ie){var he=ie;return he+=65,he+=25-ie>>>8&0-65-26+97,he+=51-ie>>>8&26-97-52+48,he+=61-ie>>>8&52-48-62+45,he+=62-ie>>>8&62-45-63+95,String.fromCharCode(he)},Q.prototype._decodeChar=function(ie){var he=oe;return he+=(44-ie&ie-46)>>>8&-oe+ie-45+62,he+=(94-ie&ie-96)>>>8&-oe+ie-95+63,he+=(47-ie&ie-58)>>>8&-oe+ie-48+52,he+=(64-ie&ie-91)>>>8&-oe+ie-65+0,he+=(96-ie&ie-123)>>>8&-oe+ie-97+26,he},Q}(xe);q.URLSafeCoder=ee;var fe=new ee;function P(Z){return fe.encode(Z)}q.encodeURLSafe=P;function be(Z){return fe.decode(Z)}q.decodeURLSafe=be,q.encodedLength=function(Z){return te.encodedLength(Z)},q.maxDecodedLength=function(Z){return te.maxDecodedLength(Z)},q.decodedLength=function(Z){return te.decodedLength(Z)}},function(ue,q,W){"use strict";Object.defineProperty(q,"__esModule",{value:!0});var u="utf8: invalid string",oe="utf8: invalid source encoding";function xe(D){for(var ee=new Uint8Array(te(D)),fe=0,P=0;P<D.length;P++){var be=D.charCodeAt(P);be<128?ee[fe++]=be:be<2048?(ee[fe++]=192|be>>6,ee[fe++]=128|be&63):be<55296?(ee[fe++]=224|be>>12,ee[fe++]=128|be>>6&63,ee[fe++]=128|be&63):(P++,be=(be&1023)<<10,be|=D.charCodeAt(P)&1023,be+=65536,ee[fe++]=240|be>>18,ee[fe++]=128|be>>12&63,ee[fe++]=128|be>>6&63,ee[fe++]=128|be&63)}return ee}q.encode=xe;function te(D){for(var ee=0,fe=0;fe<D.length;fe++){var P=D.charCodeAt(fe);if(P<128)ee+=1;else if(P<2048)ee+=2;else if(P<55296)ee+=3;else if(P<=57343){if(fe>=D.length-1)throw new Error(u);fe++,ee+=4}else throw new Error(u)}return ee}q.encodedLength=te;function ae(D){for(var ee=[],fe=0;fe<D.length;fe++){var P=D[fe];if(P&128){var be=void 0;if(P<224){if(fe>=D.length)throw new Error(oe);var Z=D[++fe];if((Z&192)!==128)throw new Error(oe);P=(P&31)<<6|Z&63,be=128}else if(P<240){if(fe>=D.length-1)throw new Error(oe);var Z=D[++fe],Q=D[++fe];if((Z&192)!==128||(Q&192)!==128)throw new Error(oe);P=(P&15)<<12|(Z&63)<<6|Q&63,be=2048}else if(P<248){if(fe>=D.length-2)throw new Error(oe);var Z=D[++fe],Q=D[++fe],ie=D[++fe];if((Z&192)!==128||(Q&192)!==128||(ie&192)!==128)throw new Error(oe);P=(P&15)<<18|(Z&63)<<12|(Q&63)<<6|ie&63,be=65536}else throw new Error(oe);if(P<be||P>=55296&&P<=57343)throw new Error(oe);if(P>=65536){if(P>1114111)throw new Error(oe);P-=65536,ee.push(String.fromCharCode(55296|P>>10)),P=56320|P&1023}}ee.push(String.fromCharCode(P))}return ee.join("")}q.decode=ae},function(ue,q,W){ue.exports=W(3).default},function(ue,q,W){"use strict";W.r(q);var u=function(){function _(x,L){this.lastId=0,this.prefix=x,this.name=L}return _.prototype.create=function(x){this.lastId++;var L=this.lastId,M=this.prefix+L,N=this.name+"["+L+"]",G=!1,Re=function(){G||(x.apply(null,arguments),G=!0)};return this[L]=Re,{number:L,id:M,name:N,callback:Re}},_.prototype.remove=function(x){delete this[x.number]},_}(),oe=new u("_pusher_script_","Pusher.ScriptReceivers"),xe={VERSION:"7.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},te=xe,ae=function(){function _(x){this.options=x,this.receivers=x.receivers||oe,this.loading={}}return _.prototype.load=function(x,L,M){var N=this;if(N.loading[x]&&N.loading[x].length>0)N.loading[x].push(M);else{N.loading[x]=[M];var G=Xt.createScriptRequest(N.getPath(x,L)),Re=N.receivers.create(function(Ke){if(N.receivers.remove(Re),N.loading[x]){var _t=N.loading[x];delete N.loading[x];for(var nt=function(un){un||G.cleanup()},sr=0;sr<_t.length;sr++)_t[sr](Ke,nt)}});G.send(Re)}},_.prototype.getRoot=function(x){var L,M=Xt.getDocument().location.protocol;return x&&x.useTLS||M==="https:"?L=this.options.cdn_https:L=this.options.cdn_http,L.replace(/\/*$/,"")+"/"+this.options.version},_.prototype.getPath=function(x,L){return this.getRoot(L)+"/"+x+this.options.suffix+".js"},_}(),D=ae,ee=new u("_pusher_dependencies","Pusher.DependenciesReceivers"),fe=new D({cdn_http:te.cdn_http,cdn_https:te.cdn_https,version:te.VERSION,suffix:te.dependency_suffix,receivers:ee}),P={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},be=function(_){var x="See:",L=P.urls[_];if(!L)return"";var M;return L.fullUrl?M=L.fullUrl:L.path&&(M=P.baseUrl+L.path),M?x+" "+M:""},Z={buildLogSuffix:be},Q;(function(_){_.UserAuthentication="user-authentication",_.ChannelAuthorization="channel-authorization"})(Q||(Q={}));var ie=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}(),he=function(_){ie(x,_);function x(L){var M=this.constructor,N=_.call(this,L)||this;return Object.setPrototypeOf(N,M.prototype),N}return x}(Error),ve=function(_){ie(x,_);function x(L){var M=this.constructor,N=_.call(this,L)||this;return Object.setPrototypeOf(N,M.prototype),N}return x}(Error),Je=function(_){ie(x,_);function x(L){var M=this.constructor,N=_.call(this,L)||this;return Object.setPrototypeOf(N,M.prototype),N}return x}(Error),rt=function(_){ie(x,_);function x(L){var M=this.constructor,N=_.call(this,L)||this;return Object.setPrototypeOf(N,M.prototype),N}return x}(Error),K=function(_){ie(x,_);function x(L){var M=this.constructor,N=_.call(this,L)||this;return Object.setPrototypeOf(N,M.prototype),N}return x}(Error),St=function(_){ie(x,_);function x(L){var M=this.constructor,N=_.call(this,L)||this;return Object.setPrototypeOf(N,M.prototype),N}return x}(Error),Se=function(_){ie(x,_);function x(L){var M=this.constructor,N=_.call(this,L)||this;return Object.setPrototypeOf(N,M.prototype),N}return x}(Error),He=function(_){ie(x,_);function x(L){var M=this.constructor,N=_.call(this,L)||this;return Object.setPrototypeOf(N,M.prototype),N}return x}(Error),Qe=function(_){ie(x,_);function x(L,M){var N=this.constructor,G=_.call(this,M)||this;return G.status=L,Object.setPrototypeOf(G,N.prototype),G}return x}(Error),It=function(_,x,L,M,N){var G=Xt.createXHR();G.open("POST",L.endpoint,!0),G.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var Re in L.headers)G.setRequestHeader(Re,L.headers[Re]);return G.onreadystatechange=function(){if(G.readyState===4)if(G.status===200){var Ke=void 0,_t=!1;try{Ke=JSON.parse(G.responseText),_t=!0}catch{N(new Qe(200,"JSON returned from "+M.toString()+" endpoint was invalid, yet status code was 200. Data was: "+G.responseText),null)}_t&&N(null,Ke)}else{var nt="";switch(M){case Q.UserAuthentication:nt=Z.buildLogSuffix("authenticationEndpoint");break;case Q.ChannelAuthorization:nt="Clients must be authenticated to join private or presence channels. "+Z.buildLogSuffix("authorizationEndpoint");break}N(new Qe(G.status,"Unable to retrieve auth string from "+M.toString()+" endpoint - "+("received status: "+G.status+" from "+L.endpoint+". "+nt)),null)}},G.send(x),G},yt=It;function Ut(_){return Ae(Fe(_))}for(var wt=String.fromCharCode,we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",De={},Ze=0,Ht=we.length;Ze<Ht;Ze++)De[we.charAt(Ze)]=Ze;var Le=function(_){var x=_.charCodeAt(0);return x<128?_:x<2048?wt(192|x>>>6)+wt(128|x&63):wt(224|x>>>12&15)+wt(128|x>>>6&63)+wt(128|x&63)},Fe=function(_){return _.replace(/[^\x00-\x7F]/g,Le)},at=function(_){var x=[0,2,1][_.length%3],L=_.charCodeAt(0)<<16|(_.length>1?_.charCodeAt(1):0)<<8|(_.length>2?_.charCodeAt(2):0),M=[we.charAt(L>>>18),we.charAt(L>>>12&63),x>=2?"=":we.charAt(L>>>6&63),x>=1?"=":we.charAt(L&63)];return M.join("")},Ae=window.btoa||function(_){return _.replace(/[\s\S]{1,3}/g,at)},$t=function(){function _(x,L,M,N){var G=this;this.clear=L,this.timer=x(function(){G.timer&&(G.timer=N(G.timer))},M)}return _.prototype.isRunning=function(){return this.timer!==null},_.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},_}(),Zt=$t,pe=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}();function Pe(_){window.clearTimeout(_)}function je(_){window.clearInterval(_)}var Ue=function(_){pe(x,_);function x(L,M){return _.call(this,setTimeout,Pe,L,function(N){return M(),null})||this}return x}(Zt),Xe=function(_){pe(x,_);function x(L,M){return _.call(this,setInterval,je,L,function(N){return M(),N})||this}return x}(Zt),dt={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(_){return new Ue(0,_)},method:function(_){for(var x=[],L=1;L<arguments.length;L++)x[L-1]=arguments[L];var M=Array.prototype.slice.call(arguments,1);return function(N){return N[_].apply(N,M.concat(arguments))}}},ht=dt;function Pt(_){for(var x=[],L=1;L<arguments.length;L++)x[L-1]=arguments[L];for(var M=0;M<x.length;M++){var N=x[M];for(var G in N)N[G]&&N[G].constructor&&N[G].constructor===Object?_[G]=Pt(_[G]||{},N[G]):_[G]=N[G]}return _}function jt(){for(var _=["Pusher"],x=0;x<arguments.length;x++)typeof arguments[x]=="string"?_.push(arguments[x]):_.push(on(arguments[x]));return _.join(" : ")}function Lr(_,x){var L=Array.prototype.indexOf;if(_===null)return-1;if(L&&_.indexOf===L)return _.indexOf(x);for(var M=0,N=_.length;M<N;M++)if(_[M]===x)return M;return-1}function dr(_,x){for(var L in _)Object.prototype.hasOwnProperty.call(_,L)&&x(_[L],L,_)}function Rr(_){var x=[];return dr(_,function(L,M){x.push(M)}),x}function Jr(_){var x=[];return dr(_,function(L){x.push(L)}),x}function Qr(_,x,L){for(var M=0;M<_.length;M++)x.call(L||window,_[M],M,_)}function Tt(_,x){for(var L=[],M=0;M<_.length;M++)L.push(x(_[M],M,_,L));return L}function Kt(_,x){var L={};return dr(_,function(M,N){L[N]=x(M)}),L}function Yt(_,x){x=x||function(N){return!!N};for(var L=[],M=0;M<_.length;M++)x(_[M],M,_,L)&&L.push(_[M]);return L}function Qt(_,x){var L={};return dr(_,function(M,N){(x&&x(M,N,_,L)||Boolean(M))&&(L[N]=M)}),L}function Nr(_){var x=[];return dr(_,function(L,M){x.push([M,L])}),x}function yr(_,x){for(var L=0;L<_.length;L++)if(x(_[L],L,_))return!0;return!1}function vr(_,x){for(var L=0;L<_.length;L++)if(!x(_[L],L,_))return!1;return!0}function nn(_){return Kt(_,function(x){return typeof x=="object"&&(x=on(x)),encodeURIComponent(Ut(x.toString()))})}function Xr(_){var x=Qt(_,function(M){return M!==void 0}),L=Tt(Nr(nn(x)),ht.method("join","=")).join("&");return L}function en(_){var x=[],L=[];return function M(N,G){var Re,Ke,_t;switch(typeof N){case"object":if(!N)return null;for(Re=0;Re<x.length;Re+=1)if(x[Re]===N)return{$ref:L[Re]};if(x.push(N),L.push(G),Object.prototype.toString.apply(N)==="[object Array]")for(_t=[],Re=0;Re<N.length;Re+=1)_t[Re]=M(N[Re],G+"["+Re+"]");else{_t={};for(Ke in N)Object.prototype.hasOwnProperty.call(N,Ke)&&(_t[Ke]=M(N[Ke],G+"["+JSON.stringify(Ke)+"]"))}return _t;case"number":case"string":case"boolean":return N}}(_,"$")}function on(_){try{return JSON.stringify(_)}catch{return JSON.stringify(en(_))}}var lr=function(){function _(){this.globalLog=function(x){window.console&&window.console.log&&window.console.log(x)}}return _.prototype.debug=function(){for(var x=[],L=0;L<arguments.length;L++)x[L]=arguments[L];this.log(this.globalLog,x)},_.prototype.warn=function(){for(var x=[],L=0;L<arguments.length;L++)x[L]=arguments[L];this.log(this.globalLogWarn,x)},_.prototype.error=function(){for(var x=[],L=0;L<arguments.length;L++)x[L]=arguments[L];this.log(this.globalLogError,x)},_.prototype.globalLogWarn=function(x){window.console&&window.console.warn?window.console.warn(x):this.globalLog(x)},_.prototype.globalLogError=function(x){window.console&&window.console.error?window.console.error(x):this.globalLogWarn(x)},_.prototype.log=function(x){for(var L=[],M=1;M<arguments.length;M++)L[M-1]=arguments[M];var N=jt.apply(this,arguments);if(pn.log)pn.log(N);else if(pn.logToConsole){var G=x.bind(this);G(N)}},_}(),zt=new lr,zr=function(_,x,L,M,N){L.headers!==void 0&&zt.warn("To send headers with the "+M.toString()+" request, you must use AJAX, rather than JSONP.");var G=_.nextAuthCallbackID.toString();_.nextAuthCallbackID++;var Re=_.getDocument(),Ke=Re.createElement("script");_.auth_callbacks[G]=function(sr){N(null,sr)};var _t="Pusher.auth_callbacks['"+G+"']";Ke.src=L.endpoint+"?callback="+encodeURIComponent(_t)+"&"+x;var nt=Re.getElementsByTagName("head")[0]||Re.documentElement;nt.insertBefore(Ke,nt.firstChild)},Vr=zr,wn=function(){function _(x){this.src=x}return _.prototype.send=function(x){var L=this,M="Error loading "+L.src;L.script=document.createElement("script"),L.script.id=x.id,L.script.src=L.src,L.script.type="text/javascript",L.script.charset="UTF-8",L.script.addEventListener?(L.script.onerror=function(){x.callback(M)},L.script.onload=function(){x.callback(null)}):L.script.onreadystatechange=function(){(L.script.readyState==="loaded"||L.script.readyState==="complete")&&x.callback(null)},L.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(L.errorScript=document.createElement("script"),L.errorScript.id=x.id+"_error",L.errorScript.text=x.name+"('"+M+"');",L.script.async=L.errorScript.async=!1):L.script.async=!0;var N=document.getElementsByTagName("head")[0];N.insertBefore(L.script,N.firstChild),L.errorScript&&N.insertBefore(L.errorScript,L.script.nextSibling)},_.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},_}(),bi=wn,Ln=function(){function _(x,L){this.url=x,this.data=L}return _.prototype.send=function(x){if(!this.request){var L=Xr(this.data),M=this.url+"/"+x.number+"?"+L;this.request=Xt.createScriptRequest(M),this.request.send(x)}},_.prototype.cleanup=function(){this.request&&this.request.cleanup()},_}(),Ir=Ln,Pn=function(_,x){return function(L,M){var N="http"+(x?"s":"")+"://",G=N+(_.host||_.options.host)+_.options.path,Re=Xt.createJSONPRequest(G,L),Ke=Xt.ScriptReceivers.create(function(_t,nt){oe.remove(Ke),Re.cleanup(),nt&&nt.host&&(_.host=nt.host),M&&M(_t,nt)});Re.send(Ke)}},Mt={name:"jsonp",getAgent:Pn},_o=Mt;function xi(_,x,L){var M=_+(x.useTLS?"s":""),N=x.useTLS?x.hostTLS:x.hostNonTLS;return M+"://"+N+L}function er(_,x){var L="/app/"+_,M="?protocol="+te.PROTOCOL+"&client=js&version="+te.VERSION+(x?"&"+x:"");return L+M}var ts={getInitial:function(_,x){var L=(x.httpPath||"")+er(_,"flash=false");return xi("ws",x,L)}},So={getInitial:function(_,x){var L=(x.httpPath||"/pusher")+er(_);return xi("http",x,L)}},Lo={getInitial:function(_,x){return xi("http",x,x.httpPath||"/pusher")},getPath:function(_,x){return er(_)}},Bi=function(){function _(){this._callbacks={}}return _.prototype.get=function(x){return this._callbacks[$i(x)]},_.prototype.add=function(x,L,M){var N=$i(x);this._callbacks[N]=this._callbacks[N]||[],this._callbacks[N].push({fn:L,context:M})},_.prototype.remove=function(x,L,M){if(!x&&!L&&!M){this._callbacks={};return}var N=x?[$i(x)]:Rr(this._callbacks);L||M?this.removeCallback(N,L,M):this.removeAllCallbacks(N)},_.prototype.removeCallback=function(x,L,M){Qr(x,function(N){this._callbacks[N]=Yt(this._callbacks[N]||[],function(G){return L&&L!==G.fn||M&&M!==G.context}),this._callbacks[N].length===0&&delete this._callbacks[N]},this)},_.prototype.removeAllCallbacks=function(x){Qr(x,function(L){delete this._callbacks[L]},this)},_}(),Fn=Bi;function $i(_){return"_"+_}var Ro=function(){function _(x){this.callbacks=new Fn,this.global_callbacks=[],this.failThrough=x}return _.prototype.bind=function(x,L,M){return this.callbacks.add(x,L,M),this},_.prototype.bind_global=function(x){return this.global_callbacks.push(x),this},_.prototype.unbind=function(x,L,M){return this.callbacks.remove(x,L,M),this},_.prototype.unbind_global=function(x){return x?(this.global_callbacks=Yt(this.global_callbacks||[],function(L){return L!==x}),this):(this.global_callbacks=[],this)},_.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},_.prototype.emit=function(x,L,M){for(var N=0;N<this.global_callbacks.length;N++)this.global_callbacks[N](x,L);var G=this.callbacks.get(x),Re=[];if(M?Re.push(L,M):L&&Re.push(L),G&&G.length>0)for(var N=0;N<G.length;N++)G[N].fn.apply(G[N].context||window,Re);else this.failThrough&&this.failThrough(x,L);return this},_}(),Rn=Ro,Io=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}(),Jn=function(_){Io(x,_);function x(L,M,N,G,Re){var Ke=_.call(this)||this;return Ke.initialize=Xt.transportConnectionInitializer,Ke.hooks=L,Ke.name=M,Ke.priority=N,Ke.key=G,Ke.options=Re,Ke.state="new",Ke.timeline=Re.timeline,Ke.activityTimeout=Re.activityTimeout,Ke.id=Ke.timeline.generateUniqueID(),Ke}return x.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},x.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},x.prototype.connect=function(){var L=this;if(this.socket||this.state!=="initialized")return!1;var M=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(M,this.options)}catch(N){return ht.defer(function(){L.onError(N),L.changeState("closed")}),!1}return this.bindListeners(),zt.debug("Connecting",{transport:this.name,url:M}),this.changeState("connecting"),!0},x.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},x.prototype.send=function(L){var M=this;return this.state==="open"?(ht.defer(function(){M.socket&&M.socket.send(L)}),!0):!1},x.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},x.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},x.prototype.onError=function(L){this.emit("error",{type:"WebSocketError",error:L}),this.timeline.error(this.buildTimelineMessage({error:L.toString()}))},x.prototype.onClose=function(L){L?this.changeState("closed",{code:L.code,reason:L.reason,wasClean:L.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},x.prototype.onMessage=function(L){this.emit("message",L)},x.prototype.onActivity=function(){this.emit("activity")},x.prototype.bindListeners=function(){var L=this;this.socket.onopen=function(){L.onOpen()},this.socket.onerror=function(M){L.onError(M)},this.socket.onclose=function(M){L.onClose(M)},this.socket.onmessage=function(M){L.onMessage(M)},this.supportsPing()&&(this.socket.onactivity=function(){L.onActivity()})},x.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},x.prototype.changeState=function(L,M){this.state=L,this.timeline.info(this.buildTimelineMessage({state:L,params:M})),this.emit(L,M)},x.prototype.buildTimelineMessage=function(L){return Pt({cid:this.id},L)},x}(Rn),To=Jn,rs=function(){function _(x){this.hooks=x}return _.prototype.isSupported=function(x){return this.hooks.isSupported(x)},_.prototype.createConnection=function(x,L,M,N){return new To(this.hooks,x,L,M,N)},_}(),di=rs,Do=new di({urls:ts,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(Xt.getWebSocketAPI())},isSupported:function(){return Boolean(Xt.getWebSocketAPI())},getSocket:function(_){return Xt.createWebSocket(_)}}),oo={urls:So,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Ao=Pt({getSocket:function(_){return Xt.HTTPFactory.createStreamingSocket(_)}},oo),ko=Pt({getSocket:function(_){return Xt.HTTPFactory.createPollingSocket(_)}},oo),Fi={isSupported:function(){return Xt.isXHRSupported()}},ns=new di(Pt({},Ao,Fi)),Hi=new di(Pt({},ko,Fi)),Hn={ws:Do,xhr_streaming:ns,xhr_polling:Hi},Ni=Hn,so=new di({file:"sockjs",urls:Lo,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(_,x){return new window.SockJS(_,null,{js_path:fe.getPath("sockjs",{useTLS:x.useTLS}),ignore_null_origin:x.ignoreNullOrigin})},beforeOpen:function(_,x){_.send(JSON.stringify({path:x}))}}),ao={isSupported:function(_){var x=Xt.isXDRSupported(_.useTLS);return x}},sn=new di(Pt({},Ao,ao)),ge=new di(Pt({},ko,ao));Ni.xdr_streaming=sn,Ni.xdr_polling=ge,Ni.sockjs=so;var Me=Ni,Ne=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}(),Te=function(_){Ne(x,_);function x(){var L=_.call(this)||this,M=L;return window.addEventListener!==void 0&&(window.addEventListener("online",function(){M.emit("online")},!1),window.addEventListener("offline",function(){M.emit("offline")},!1)),L}return x.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},x}(Rn),ze=new Te,We=function(){function _(x,L,M){this.manager=x,this.transport=L,this.minPingDelay=M.minPingDelay,this.maxPingDelay=M.maxPingDelay,this.pingDelay=void 0}return _.prototype.createConnection=function(x,L,M,N){var G=this;N=Pt({},N,{activityTimeout:this.pingDelay});var Re=this.transport.createConnection(x,L,M,N),Ke=null,_t=function(){Re.unbind("open",_t),Re.bind("closed",nt),Ke=ht.now()},nt=function(sr){if(Re.unbind("closed",nt),sr.code===1002||sr.code===1003)G.manager.reportDeath();else if(!sr.wasClean&&Ke){var un=ht.now()-Ke;un<2*G.maxPingDelay&&(G.manager.reportDeath(),G.pingDelay=Math.max(un/2,G.minPingDelay))}};return Re.bind("open",_t),Re},_.prototype.isSupported=function(x){return this.manager.isAlive()&&this.transport.isSupported(x)},_}(),mt=We,tt={decodeMessage:function(_){try{var x=JSON.parse(_.data),L=x.data;if(typeof L=="string")try{L=JSON.parse(x.data)}catch{}var M={event:x.event,channel:x.channel,data:L};return x.user_id&&(M.user_id=x.user_id),M}catch(N){throw{type:"MessageParseError",error:N,data:_.data}}},encodeMessage:function(_){return JSON.stringify(_)},processHandshake:function(_){var x=tt.decodeMessage(_);if(x.event==="pusher:connection_established"){if(!x.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:x.data.socket_id,activityTimeout:x.data.activity_timeout*1e3}}else{if(x.event==="pusher:error")return{action:this.getCloseAction(x.data),error:this.getCloseError(x.data)};throw"Invalid handshake"}},getCloseAction:function(_){return _.code<4e3?_.code>=1002&&_.code<=1004?"backoff":null:_.code===4e3?"tls_only":_.code<4100?"refused":_.code<4200?"backoff":_.code<4300?"retry":"refused"},getCloseError:function(_){return _.code!==1e3&&_.code!==1001?{type:"PusherError",data:{code:_.code,message:_.reason||_.message}}:null}},xt=tt,Lt=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}(),Rt=function(_){Lt(x,_);function x(L,M){var N=_.call(this)||this;return N.id=L,N.transport=M,N.activityTimeout=M.activityTimeout,N.bindListeners(),N}return x.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},x.prototype.send=function(L){return this.transport.send(L)},x.prototype.send_event=function(L,M,N){var G={event:L,data:M};return N&&(G.channel=N),zt.debug("Event sent",G),this.send(xt.encodeMessage(G))},x.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},x.prototype.close=function(){this.transport.close()},x.prototype.bindListeners=function(){var L=this,M={message:function(G){var Re;try{Re=xt.decodeMessage(G)}catch(Ke){L.emit("error",{type:"MessageParseError",error:Ke,data:G.data})}if(Re!==void 0){switch(zt.debug("Event recd",Re),Re.event){case"pusher:error":L.emit("error",{type:"PusherError",data:Re.data});break;case"pusher:ping":L.emit("ping");break;case"pusher:pong":L.emit("pong");break}L.emit("message",Re)}},activity:function(){L.emit("activity")},error:function(G){L.emit("error",G)},closed:function(G){N(),G&&G.code&&L.handleCloseEvent(G),L.transport=null,L.emit("closed")}},N=function(){dr(M,function(G,Re){L.transport.unbind(Re,G)})};dr(M,function(G,Re){L.transport.bind(Re,G)})},x.prototype.handleCloseEvent=function(L){var M=xt.getCloseAction(L),N=xt.getCloseError(L);N&&this.emit("error",N),M&&this.emit(M,{action:M,error:N})},x}(Rn),Et=Rt,vt=function(){function _(x,L){this.transport=x,this.callback=L,this.bindListeners()}return _.prototype.close=function(){this.unbindListeners(),this.transport.close()},_.prototype.bindListeners=function(){var x=this;this.onMessage=function(L){x.unbindListeners();var M;try{M=xt.processHandshake(L)}catch(N){x.finish("error",{error:N}),x.transport.close();return}M.action==="connected"?x.finish("connected",{connection:new Et(M.id,x.transport),activityTimeout:M.activityTimeout}):(x.finish(M.action,{error:M.error}),x.transport.close())},this.onClosed=function(L){x.unbindListeners();var M=xt.getCloseAction(L)||"backoff",N=xt.getCloseError(L);x.finish(M,{error:N})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},_.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},_.prototype.finish=function(x,L){this.callback(Pt({transport:this.transport,action:x},L))},_}(),ur=vt,hr=function(){function _(x,L){this.timeline=x,this.options=L||{}}return _.prototype.send=function(x,L){this.timeline.isEmpty()||this.timeline.send(Xt.TimelineTransport.getAgent(this,x),L)},_}(),jr=hr,Mr=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}(),Or=function(_){Mr(x,_);function x(L,M){var N=_.call(this,function(G,Re){zt.debug("No callbacks on "+L+" for "+G)})||this;return N.name=L,N.pusher=M,N.subscribed=!1,N.subscriptionPending=!1,N.subscriptionCancelled=!1,N}return x.prototype.authorize=function(L,M){return M(null,{auth:""})},x.prototype.trigger=function(L,M){if(L.indexOf("client-")!==0)throw new he("Event '"+L+"' does not start with 'client-'");if(!this.subscribed){var N=Z.buildLogSuffix("triggeringClientEvents");zt.warn("Client event triggered before channel 'subscription_succeeded' event . "+N)}return this.pusher.send_event(L,M,this.name)},x.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},x.prototype.handleEvent=function(L){var M=L.event,N=L.data;if(M==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(L);else if(M==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(L);else if(M.indexOf("pusher_internal:")!==0){var G={};this.emit(M,N,G)}},x.prototype.handleSubscriptionSucceededEvent=function(L){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",L.data)},x.prototype.handleSubscriptionCountEvent=function(L){L.data.subscription_count&&(this.subscriptionCount=L.data.subscription_count),this.emit("pusher:subscription_count",L.data)},x.prototype.subscribe=function(){var L=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(M,N){M?(L.subscriptionPending=!1,zt.error(M.toString()),L.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:M.message},M instanceof Qe?{status:M.status}:{}))):L.pusher.send_event("pusher:subscribe",{auth:N.auth,channel_data:N.channel_data,channel:L.name})}))},x.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},x.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},x.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},x}(Rn),wr=Or,Br=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}(),At=function(_){Br(x,_);function x(){return _!==null&&_.apply(this,arguments)||this}return x.prototype.authorize=function(L,M){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:L},M)},x}(wr),bt=At,mr=function(){function _(){this.reset()}return _.prototype.get=function(x){return Object.prototype.hasOwnProperty.call(this.members,x)?{id:x,info:this.members[x]}:null},_.prototype.each=function(x){var L=this;dr(this.members,function(M,N){x(L.get(N))})},_.prototype.setMyID=function(x){this.myID=x},_.prototype.onSubscription=function(x){this.members=x.presence.hash,this.count=x.presence.count,this.me=this.get(this.myID)},_.prototype.addMember=function(x){return this.get(x.user_id)===null&&this.count++,this.members[x.user_id]=x.user_info,this.get(x.user_id)},_.prototype.removeMember=function(x){var L=this.get(x.user_id);return L&&(delete this.members[x.user_id],this.count--),L},_.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},_}(),an=mr,bn=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}(),hi=function(_,x,L,M){return new(L||(L=Promise))(function(N,G){function Re(nt){try{_t(M.next(nt))}catch(sr){G(sr)}}function Ke(nt){try{_t(M.throw(nt))}catch(sr){G(sr)}}function _t(nt){nt.done?N(nt.value):new L(function(sr){sr(nt.value)}).then(Re,Ke)}_t((M=M.apply(_,x||[])).next())})},lo=function(_,x){var L={label:0,sent:function(){if(G[0]&1)throw G[1];return G[1]},trys:[],ops:[]},M,N,G,Re;return Re={next:Ke(0),throw:Ke(1),return:Ke(2)},typeof Symbol=="function"&&(Re[Symbol.iterator]=function(){return this}),Re;function Ke(nt){return function(sr){return _t([nt,sr])}}function _t(nt){if(M)throw new TypeError("Generator is already executing.");for(;L;)try{if(M=1,N&&(G=nt[0]&2?N.return:nt[0]?N.throw||((G=N.return)&&G.call(N),0):N.next)&&!(G=G.call(N,nt[1])).done)return G;switch(N=0,G&&(nt=[nt[0]&2,G.value]),nt[0]){case 0:case 1:G=nt;break;case 4:return L.label++,{value:nt[1],done:!1};case 5:L.label++,N=nt[1],nt=[0];continue;case 7:nt=L.ops.pop(),L.trys.pop();continue;default:if(G=L.trys,!(G=G.length>0&&G[G.length-1])&&(nt[0]===6||nt[0]===2)){L=0;continue}if(nt[0]===3&&(!G||nt[1]>G[0]&&nt[1]<G[3])){L.label=nt[1];break}if(nt[0]===6&&L.label<G[1]){L.label=G[1],G=nt;break}if(G&&L.label<G[2]){L.label=G[2],L.ops.push(nt);break}G[2]&&L.ops.pop(),L.trys.pop();continue}nt=x.call(_,L)}catch(sr){nt=[6,sr],N=0}finally{M=G=0}if(nt[0]&5)throw nt[1];return{value:nt[0]?nt[1]:void 0,done:!0}}},Qn=function(_){bn(x,_);function x(L,M){var N=_.call(this,L,M)||this;return N.members=new an,N}return x.prototype.authorize=function(L,M){var N=this;_.prototype.authorize.call(this,L,function(G,Re){return hi(N,void 0,void 0,function(){var Ke,_t;return lo(this,function(nt){switch(nt.label){case 0:return G?[3,3]:(Re=Re,Re.channel_data==null?[3,1]:(Ke=JSON.parse(Re.channel_data),this.members.setMyID(Ke.user_id),[3,3]));case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(nt.sent(),this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else return _t=Z.buildLogSuffix("authorizationEndpoint"),zt.error("Invalid auth response for channel '"+this.name+"', "+("expected 'channel_data' field. "+_t+", ")+"or the user should be signed in."),M("Invalid auth response"),[2];nt.label=3;case 3:return M(G,Re),[2]}})})})},x.prototype.handleEvent=function(L){var M=L.event;if(M.indexOf("pusher_internal:")===0)this.handleInternalEvent(L);else{var N=L.data,G={};L.user_id&&(G.user_id=L.user_id),this.emit(M,N,G)}},x.prototype.handleInternalEvent=function(L){var M=L.event,N=L.data;switch(M){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(L);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(L);break;case"pusher_internal:member_added":var G=this.members.addMember(N);this.emit("pusher:member_added",G);break;case"pusher_internal:member_removed":var Re=this.members.removeMember(N);Re&&this.emit("pusher:member_removed",Re);break}},x.prototype.handleSubscriptionSucceededEvent=function(L){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(L.data),this.emit("pusher:subscription_succeeded",this.members))},x.prototype.disconnect=function(){this.members.reset(),_.prototype.disconnect.call(this)},x}(bt),Vi=Qn,is=W(1),_i=W(0),xn=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}(),Ds=function(_){xn(x,_);function x(L,M,N){var G=_.call(this,L,M)||this;return G.key=null,G.nacl=N,G}return x.prototype.authorize=function(L,M){var N=this;_.prototype.authorize.call(this,L,function(G,Re){if(G){M(G,Re);return}var Ke=Re.shared_secret;if(!Ke){M(new Error("No shared_secret key in auth payload for encrypted channel: "+N.name),null);return}N.key=Object(_i.decode)(Ke),delete Re.shared_secret,M(null,Re)})},x.prototype.trigger=function(L,M){throw new St("Client events are not currently supported for encrypted channels")},x.prototype.handleEvent=function(L){var M=L.event,N=L.data;if(M.indexOf("pusher_internal:")===0||M.indexOf("pusher:")===0){_.prototype.handleEvent.call(this,L);return}this.handleEncryptedEvent(M,N)},x.prototype.handleEncryptedEvent=function(L,M){var N=this;if(!this.key){zt.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!M.ciphertext||!M.nonce){zt.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+M);return}var G=Object(_i.decode)(M.ciphertext);if(G.length<this.nacl.secretbox.overheadLength){zt.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+G.length);return}var Re=Object(_i.decode)(M.nonce);if(Re.length<this.nacl.secretbox.nonceLength){zt.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+Re.length);return}var Ke=this.nacl.secretbox.open(G,Re,this.key);if(Ke===null){zt.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(_t,nt){if(_t){zt.error("Failed to make a request to the authEndpoint: "+nt+". Unable to fetch new key, so dropping encrypted event");return}if(Ke=N.nacl.secretbox.open(G,Re,N.key),Ke===null){zt.error("Failed to decrypt event with new key. Dropping encrypted event");return}N.emit(L,N.getDataToEmit(Ke))});return}this.emit(L,this.getDataToEmit(Ke))},x.prototype.getDataToEmit=function(L){var M=Object(is.decode)(L);try{return JSON.parse(M)}catch{return M}},x}(bt),fi=Ds,Po=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}(),Mo=function(_){Po(x,_);function x(L,M){var N=_.call(this)||this;N.state="initialized",N.connection=null,N.key=L,N.options=M,N.timeline=N.options.timeline,N.usingTLS=N.options.useTLS,N.errorCallbacks=N.buildErrorCallbacks(),N.connectionCallbacks=N.buildConnectionCallbacks(N.errorCallbacks),N.handshakeCallbacks=N.buildHandshakeCallbacks(N.errorCallbacks);var G=Xt.getNetwork();return G.bind("online",function(){N.timeline.info({netinfo:"online"}),(N.state==="connecting"||N.state==="unavailable")&&N.retryIn(0)}),G.bind("offline",function(){N.timeline.info({netinfo:"offline"}),N.connection&&N.sendActivityCheck()}),N.updateStrategy(),N}return x.prototype.connect=function(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},x.prototype.send=function(L){return this.connection?this.connection.send(L):!1},x.prototype.send_event=function(L,M,N){return this.connection?this.connection.send_event(L,M,N):!1},x.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},x.prototype.isUsingTLS=function(){return this.usingTLS},x.prototype.startConnecting=function(){var L=this,M=function(N,G){N?L.runner=L.strategy.connect(0,M):G.action==="error"?(L.emit("error",{type:"HandshakeError",error:G.error}),L.timeline.error({handshakeError:G.error})):(L.abortConnecting(),L.handshakeCallbacks[G.action](G))};this.runner=this.strategy.connect(0,M)},x.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},x.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var L=this.abandonConnection();L.close()}},x.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},x.prototype.retryIn=function(L){var M=this;this.timeline.info({action:"retry",delay:L}),L>0&&this.emit("connecting_in",Math.round(L/1e3)),this.retryTimer=new Ue(L||0,function(){M.disconnectInternally(),M.connect()})},x.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},x.prototype.setUnavailableTimer=function(){var L=this;this.unavailableTimer=new Ue(this.options.unavailableTimeout,function(){L.updateState("unavailable")})},x.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},x.prototype.sendActivityCheck=function(){var L=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new Ue(this.options.pongTimeout,function(){L.timeline.error({pong_timed_out:L.options.pongTimeout}),L.retryIn(0)})},x.prototype.resetActivityCheck=function(){var L=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new Ue(this.activityTimeout,function(){L.sendActivityCheck()}))},x.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},x.prototype.buildConnectionCallbacks=function(L){var M=this;return Pt({},L,{message:function(N){M.resetActivityCheck(),M.emit("message",N)},ping:function(){M.send_event("pusher:pong",{})},activity:function(){M.resetActivityCheck()},error:function(N){M.emit("error",N)},closed:function(){M.abandonConnection(),M.shouldRetry()&&M.retryIn(1e3)}})},x.prototype.buildHandshakeCallbacks=function(L){var M=this;return Pt({},L,{connected:function(N){M.activityTimeout=Math.min(M.options.activityTimeout,N.activityTimeout,N.connection.activityTimeout||1/0),M.clearUnavailableTimer(),M.setConnection(N.connection),M.socket_id=M.connection.id,M.updateState("connected",{socket_id:M.socket_id})}})},x.prototype.buildErrorCallbacks=function(){var L=this,M=function(N){return function(G){G.error&&L.emit("error",{type:"WebSocketError",error:G.error}),N(G)}};return{tls_only:M(function(){L.usingTLS=!0,L.updateStrategy(),L.retryIn(0)}),refused:M(function(){L.disconnect()}),backoff:M(function(){L.retryIn(1e3)}),retry:M(function(){L.retryIn(0)})}},x.prototype.setConnection=function(L){this.connection=L;for(var M in this.connectionCallbacks)this.connection.bind(M,this.connectionCallbacks[M]);this.resetActivityCheck()},x.prototype.abandonConnection=function(){if(!!this.connection){this.stopActivityCheck();for(var L in this.connectionCallbacks)this.connection.unbind(L,this.connectionCallbacks[L]);var M=this.connection;return this.connection=null,M}},x.prototype.updateState=function(L,M){var N=this.state;if(this.state=L,N!==L){var G=L;G==="connected"&&(G+=" with new socket ID "+M.socket_id),zt.debug("State changed",N+" -> "+G),this.timeline.info({state:L,params:M}),this.emit("state_change",{previous:N,current:L}),this.emit(L,M)}},x.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},x}(Rn),uo=Mo,os=function(){function _(){this.channels={}}return _.prototype.add=function(x,L){return this.channels[x]||(this.channels[x]=ss(x,L)),this.channels[x]},_.prototype.all=function(){return Jr(this.channels)},_.prototype.find=function(x){return this.channels[x]},_.prototype.remove=function(x){var L=this.channels[x];return delete this.channels[x],L},_.prototype.disconnect=function(){dr(this.channels,function(x){x.disconnect()})},_}(),ji=os;function ss(_,x){if(_.indexOf("private-encrypted-")===0){if(x.config.nacl)return ti.createEncryptedChannel(_,x,x.config.nacl);var L="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",M=Z.buildLogSuffix("encryptedChannelSupport");throw new St(L+". "+M)}else{if(_.indexOf("private-")===0)return ti.createPrivateChannel(_,x);if(_.indexOf("presence-")===0)return ti.createPresenceChannel(_,x);if(_.indexOf("#")===0)throw new ve('Cannot create a channel with name "'+_+'".');return ti.createChannel(_,x)}}var ei={createChannels:function(){return new ji},createConnectionManager:function(_,x){return new uo(_,x)},createChannel:function(_,x){return new wr(_,x)},createPrivateChannel:function(_,x){return new bt(_,x)},createPresenceChannel:function(_,x){return new Vi(_,x)},createEncryptedChannel:function(_,x,L){return new fi(_,x,L)},createTimelineSender:function(_,x){return new jr(_,x)},createHandshake:function(_,x){return new ur(_,x)},createAssistantToTheTransportManager:function(_,x,L){return new mt(_,x,L)}},ti=ei,As=function(){function _(x){this.options=x||{},this.livesLeft=this.options.lives||1/0}return _.prototype.getAssistant=function(x){return ti.createAssistantToTheTransportManager(this,x,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},_.prototype.isAlive=function(){return this.livesLeft>0},_.prototype.reportDeath=function(){this.livesLeft-=1},_}(),Ui=As,Oo=function(){function _(x,L){this.strategies=x,this.loop=Boolean(L.loop),this.failFast=Boolean(L.failFast),this.timeout=L.timeout,this.timeoutLimit=L.timeoutLimit}return _.prototype.isSupported=function(){return yr(this.strategies,ht.method("isSupported"))},_.prototype.connect=function(x,L){var M=this,N=this.strategies,G=0,Re=this.timeout,Ke=null,_t=function(nt,sr){sr?L(null,sr):(G=G+1,M.loop&&(G=G%N.length),G<N.length?(Re&&(Re=Re*2,M.timeoutLimit&&(Re=Math.min(Re,M.timeoutLimit))),Ke=M.tryStrategy(N[G],x,{timeout:Re,failFast:M.failFast},_t)):L(!0))};return Ke=this.tryStrategy(N[G],x,{timeout:Re,failFast:this.failFast},_t),{abort:function(){Ke.abort()},forceMinPriority:function(nt){x=nt,Ke&&Ke.forceMinPriority(nt)}}},_.prototype.tryStrategy=function(x,L,M,N){var G=null,Re=null;return M.timeout>0&&(G=new Ue(M.timeout,function(){Re.abort(),N(!0)})),Re=x.connect(L,function(Ke,_t){Ke&&G&&G.isRunning()&&!M.failFast||(G&&G.ensureAborted(),N(Ke,_t))}),{abort:function(){G&&G.ensureAborted(),Re.abort()},forceMinPriority:function(Ke){Re.forceMinPriority(Ke)}}},_}(),pi=Oo,ua=function(){function _(x){this.strategies=x}return _.prototype.isSupported=function(){return yr(this.strategies,ht.method("isSupported"))},_.prototype.connect=function(x,L){return as(this.strategies,x,function(M,N){return function(G,Re){if(N[M].error=G,G){ls(N)&&L(!0);return}Qr(N,function(Ke){Ke.forceMinPriority(Re.transport.priority)}),L(null,Re)}})},_}(),Bo=ua;function as(_,x,L){var M=Tt(_,function(N,G,Re,Ke){return N.connect(x,L(G,Ke))});return{abort:function(){Qr(M,ir)},forceMinPriority:function(N){Qr(M,function(G){G.forceMinPriority(N)})}}}function ls(_){return vr(_,function(x){return Boolean(x.error)})}function ir(_){!_.error&&!_.aborted&&(_.abort(),_.aborted=!0)}var Nn=function(){function _(x,L,M){this.strategy=x,this.transports=L,this.ttl=M.ttl||1800*1e3,this.usingTLS=M.useTLS,this.timeline=M.timeline}return _.prototype.isSupported=function(){return this.strategy.isSupported()},_.prototype.connect=function(x,L){var M=this.usingTLS,N=da(M),G=[this.strategy];if(N&&N.timestamp+this.ttl>=ht.now()){var Re=this.transports[N.transport];Re&&(this.timeline.info({cached:!0,transport:N.transport,latency:N.latency}),G.push(new pi([Re],{timeout:N.latency*2+1e3,failFast:!0})))}var Ke=ht.now(),_t=G.pop().connect(x,function nt(sr,un){sr?(zi(M),G.length>0?(Ke=ht.now(),_t=G.pop().connect(x,nt)):L(sr)):(Zi(M,un.transport.name,ht.now()-Ke),L(null,un))});return{abort:function(){_t.abort()},forceMinPriority:function(nt){x=nt,_t&&_t.forceMinPriority(nt)}}},_}(),ca=Nn;function us(_){return"pusherTransport"+(_?"TLS":"NonTLS")}function da(_){var x=Xt.getLocalStorage();if(x)try{var L=x[us(_)];if(L)return JSON.parse(L)}catch{zi(_)}return null}function Zi(_,x,L){var M=Xt.getLocalStorage();if(M)try{M[us(_)]=on({timestamp:ht.now(),transport:x,latency:L})}catch{}}function zi(_){var x=Xt.getLocalStorage();if(x)try{delete x[us(_)]}catch{}}var $o=function(){function _(x,L){var M=L.delay;this.strategy=x,this.options={delay:M}}return _.prototype.isSupported=function(){return this.strategy.isSupported()},_.prototype.connect=function(x,L){var M=this.strategy,N,G=new Ue(this.options.delay,function(){N=M.connect(x,L)});return{abort:function(){G.ensureAborted(),N&&N.abort()},forceMinPriority:function(Re){x=Re,N&&N.forceMinPriority(Re)}}},_}(),ri=$o,ha=function(){function _(x,L,M){this.test=x,this.trueBranch=L,this.falseBranch=M}return _.prototype.isSupported=function(){var x=this.test()?this.trueBranch:this.falseBranch;return x.isSupported()},_.prototype.connect=function(x,L){var M=this.test()?this.trueBranch:this.falseBranch;return M.connect(x,L)},_}(),In=ha,fa=function(){function _(x){this.strategy=x}return _.prototype.isSupported=function(){return this.strategy.isSupported()},_.prototype.connect=function(x,L){var M=this.strategy.connect(x,function(N,G){G&&M.abort(),L(N,G)});return M},_}(),ks=fa;function Si(_){return function(){return _.isSupported()}}var Vn=function(_,x,L){var M={};function N(zo,La,Yi,Ci,Ce){var Xi=L(_,zo,La,Yi,Ci,Ce);return M[zo]=Xi,Xi}var G=Object.assign({},x,{hostNonTLS:_.wsHost+":"+_.wsPort,hostTLS:_.wsHost+":"+_.wssPort,httpPath:_.wsPath}),Re=Object.assign({},G,{useTLS:!0}),Ke=Object.assign({},x,{hostNonTLS:_.httpHost+":"+_.httpPort,hostTLS:_.httpHost+":"+_.httpsPort,httpPath:_.httpPath}),_t={loop:!0,timeout:15e3,timeoutLimit:6e4},nt=new Ui({lives:2,minPingDelay:1e4,maxPingDelay:_.activityTimeout}),sr=new Ui({lives:2,minPingDelay:1e4,maxPingDelay:_.activityTimeout}),un=N("ws","ws",3,G,nt),Mn=N("wss","ws",3,Re,nt),vs=N("sockjs","sockjs",1,Ke),Cs=N("xhr_streaming","xhr_streaming",1,Ke,sr),Sa=N("xdr_streaming","xdr_streaming",1,Ke,sr),Ri=N("xhr_polling","xhr_polling",1,Ke),js=N("xdr_polling","xdr_polling",1,Ke),Es=new pi([un],_t),cn=new pi([Mn],_t),mi=new pi([vs],_t),po=new pi([new In(Si(Cs),Cs,Sa)],_t),Uo=new pi([new In(Si(Ri),Ri,js)],_t),Us=new pi([new In(Si(po),new Bo([po,new ri(Uo,{delay:4e3})]),Uo)],_t),Zo=new In(Si(Us),Us,mi),vi;return x.useTLS?vi=new Bo([Es,new ri(Zo,{delay:2e3})]):vi=new Bo([Es,new ri(cn,{delay:2e3}),new ri(Zo,{delay:5e3})]),new ca(new ks(new In(Si(un),vi,Zo)),M,{ttl:18e5,timeline:x.timeline,useTLS:x.useTLS})},co=Vn,ho=function(){var _=this;_.timeline.info(_.buildTimelineMessage({transport:_.name+(_.options.useTLS?"s":"")})),_.hooks.isInitialized()?_.changeState("initialized"):_.hooks.file?(_.changeState("initializing"),fe.load(_.hooks.file,{useTLS:_.options.useTLS},function(x,L){_.hooks.isInitialized()?(_.changeState("initialized"),L(!0)):(x&&_.onError(x),_.onClose(),L(!1))})):_.onClose()},pa={getRequest:function(_){var x=new window.XDomainRequest;return x.ontimeout=function(){_.emit("error",new Je),_.close()},x.onerror=function(L){_.emit("error",L),_.close()},x.onprogress=function(){x.responseText&&x.responseText.length>0&&_.onChunk(200,x.responseText)},x.onload=function(){x.responseText&&x.responseText.length>0&&_.onChunk(200,x.responseText),_.emit("finished",200),_.close()},x},abortRequest:function(_){_.ontimeout=_.onerror=_.onprogress=_.onload=null,_.abort()}},ga=pa,fn=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}(),Cn=256*1024,ma=function(_){fn(x,_);function x(L,M,N){var G=_.call(this)||this;return G.hooks=L,G.method=M,G.url=N,G}return x.prototype.start=function(L){var M=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){M.close()},Xt.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(L)},x.prototype.close=function(){this.unloader&&(Xt.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},x.prototype.onChunk=function(L,M){for(;;){var N=this.advanceBuffer(M);if(N)this.emit("chunk",{status:L,data:N});else break}this.isBufferTooLong(M)&&this.emit("buffer_too_long")},x.prototype.advanceBuffer=function(L){var M=L.slice(this.position),N=M.indexOf(`
`);return N!==-1?(this.position+=N+1,M.slice(0,N)):null},x.prototype.isBufferTooLong=function(L){return this.position===L.length&&L.length>Cn},x}(Rn),Ps=ma,fo;(function(_){_[_.CONNECTING=0]="CONNECTING",_[_.OPEN=1]="OPEN",_[_.CLOSED=3]="CLOSED"})(fo||(fo={}));var gi=fo,cs=1,Fo=function(){function _(x,L){this.hooks=x,this.session=ni(1e3)+"/"+hs(8),this.location=Ms(L),this.readyState=gi.CONNECTING,this.openStream()}return _.prototype.send=function(x){return this.sendRaw(JSON.stringify([x]))},_.prototype.ping=function(){this.hooks.sendHeartbeat(this)},_.prototype.close=function(x,L){this.onClose(x,L,!0)},_.prototype.sendRaw=function(x){if(this.readyState===gi.OPEN)try{return Xt.createSocketRequest("POST",Os(ln(this.location,this.session))).start(x),!0}catch{return!1}else return!1},_.prototype.reconnect=function(){this.closeStream(),this.openStream()},_.prototype.onClose=function(x,L,M){this.closeStream(),this.readyState=gi.CLOSED,this.onclose&&this.onclose({code:x,reason:L,wasClean:M})},_.prototype.onChunk=function(x){if(x.status===200){this.readyState===gi.OPEN&&this.onActivity();var L,M=x.data.slice(0,1);switch(M){case"o":L=JSON.parse(x.data.slice(1)||"{}"),this.onOpen(L);break;case"a":L=JSON.parse(x.data.slice(1)||"[]");for(var N=0;N<L.length;N++)this.onEvent(L[N]);break;case"m":L=JSON.parse(x.data.slice(1)||"null"),this.onEvent(L);break;case"h":this.hooks.onHeartbeat(this);break;case"c":L=JSON.parse(x.data.slice(1)||"[]"),this.onClose(L[0],L[1],!0);break}}},_.prototype.onOpen=function(x){this.readyState===gi.CONNECTING?(x&&x.hostname&&(this.location.base=ds(this.location.base,x.hostname)),this.readyState=gi.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},_.prototype.onEvent=function(x){this.readyState===gi.OPEN&&this.onmessage&&this.onmessage({data:x})},_.prototype.onActivity=function(){this.onactivity&&this.onactivity()},_.prototype.onError=function(x){this.onerror&&this.onerror(x)},_.prototype.openStream=function(){var x=this;this.stream=Xt.createSocketRequest("POST",Os(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(L){x.onChunk(L)}),this.stream.bind("finished",function(L){x.hooks.onFinished(x,L)}),this.stream.bind("buffer_too_long",function(){x.reconnect()});try{this.stream.start()}catch(L){ht.defer(function(){x.onError(L),x.onClose(1006,"Could not start streaming",!1)})}},_.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},_}();function Ms(_){var x=/([^\?]*)\/*(\??.*)/.exec(_);return{base:x[1],queryString:x[2]}}function ln(_,x){return _.base+"/"+x+"/xhr_send"}function Os(_){var x=_.indexOf("?")===-1?"?":"&";return _+x+"t="+ +new Date+"&n="+cs++}function ds(_,x){var L=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(_);return L[1]+x+L[3]}function ni(_){return Math.floor(Math.random()*_)}function hs(_){for(var x=[],L=0;L<_;L++)x.push(ni(32).toString(32));return x.join("")}var t1=Fo,va={getReceiveURL:function(_,x){return _.base+"/"+x+"/xhr_streaming"+_.queryString},onHeartbeat:function(_){_.sendRaw("[]")},sendHeartbeat:function(_){_.sendRaw("[]")},onFinished:function(_,x){_.onClose(1006,"Connection interrupted ("+x+")",!1)}},Bs=va,jn={getReceiveURL:function(_,x){return _.base+"/"+x+"/xhr"+_.queryString},onHeartbeat:function(){},sendHeartbeat:function(_){_.sendRaw("[]")},onFinished:function(_,x){x===200?_.reconnect():_.onClose(1006,"Connection interrupted ("+x+")",!1)}},Ca=jn,r1={getRequest:function(_){var x=Xt.getXHRAPI(),L=new x;return L.onreadystatechange=L.onprogress=function(){switch(L.readyState){case 3:L.responseText&&L.responseText.length>0&&_.onChunk(L.status,L.responseText);break;case 4:L.responseText&&L.responseText.length>0&&_.onChunk(L.status,L.responseText),_.emit("finished",L.status),_.close();break}},L},abortRequest:function(_){_.onreadystatechange=null,_.abort()}},Ea=r1,kr={createStreamingSocket:function(_){return this.createSocket(Bs,_)},createPollingSocket:function(_){return this.createSocket(Ca,_)},createSocket:function(_,x){return new t1(_,x)},createXHR:function(_,x){return this.createRequest(Ea,_,x)},createRequest:function(_,x,L){return new Ps(_,x,L)}},Ho=kr;Ho.createXDR=function(_,x){return this.createRequest(ga,_,x)};var fs=Ho,$s={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:oe,DependenciesReceivers:ee,getDefaultStrategy:co,Transports:Me,transportConnectionInitializer:ho,HTTPFactory:fs,TimelineTransport:_o,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(_){var x=this;window.Pusher=_;var L=function(){x.onDocumentBody(_.ready)};window.JSON?L():fe.load("json2",{},L)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:yt,jsonp:Vr}},onDocumentBody:function(_){var x=this;document.body?_():setTimeout(function(){x.onDocumentBody(_)},0)},createJSONPRequest:function(_,x){return new Ir(_,x)},createScriptRequest:function(_){return new bi(_)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var _=this.getXHRAPI();return new _},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return ze},createWebSocket:function(_){var x=this.getWebSocketAPI();return new x(_)},createSocketRequest:function(_,x){if(this.isXHRSupported())return this.HTTPFactory.createXHR(_,x);if(this.isXDRSupported(x.indexOf("https:")===0))return this.HTTPFactory.createXDR(_,x);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var _=this.getXHRAPI();return Boolean(_)&&new _().withCredentials!==void 0},isXDRSupported:function(_){var x=_?"https:":"http:",L=this.getProtocol();return Boolean(window.XDomainRequest)&&L===x},addUnloadListener:function(_){window.addEventListener!==void 0?window.addEventListener("unload",_,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",_)},removeUnloadListener:function(_){window.addEventListener!==void 0?window.removeEventListener("unload",_,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",_)}},Xt=$s,Fs;(function(_){_[_.ERROR=3]="ERROR",_[_.INFO=6]="INFO",_[_.DEBUG=7]="DEBUG"})(Fs||(Fs={}));var No=Fs,Vo=function(){function _(x,L,M){this.key=x,this.session=L,this.events=[],this.options=M||{},this.sent=0,this.uniqueID=0}return _.prototype.log=function(x,L){x<=this.options.level&&(this.events.push(Pt({},L,{timestamp:ht.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},_.prototype.error=function(x){this.log(No.ERROR,x)},_.prototype.info=function(x){this.log(No.INFO,x)},_.prototype.debug=function(x){this.log(No.DEBUG,x)},_.prototype.isEmpty=function(){return this.events.length===0},_.prototype.send=function(x,L){var M=this,N=Pt({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],x(N,function(G,Re){G||M.sent++,L&&L(G,Re)}),!0},_.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},_}(),ya=Vo,n1=function(){function _(x,L,M,N){this.name=x,this.priority=L,this.transport=M,this.options=N||{}}return _.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},_.prototype.connect=function(x,L){var M=this;if(this.isSupported()){if(this.priority<x)return ps(new rt,L)}else return ps(new He,L);var N=!1,G=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),Re=null,Ke=function(){G.unbind("initialized",Ke),G.connect()},_t=function(){Re=ti.createHandshake(G,function(Mn){N=!0,un(),L(null,Mn)})},nt=function(Mn){un(),L(Mn)},sr=function(){un();var Mn;Mn=on(G),L(new K(Mn))},un=function(){G.unbind("initialized",Ke),G.unbind("open",_t),G.unbind("error",nt),G.unbind("closed",sr)};return G.bind("initialized",Ke),G.bind("open",_t),G.bind("error",nt),G.bind("closed",sr),G.initialize(),{abort:function(){N||(un(),Re?Re.close():G.close())},forceMinPriority:function(Mn){N||M.priority<Mn&&(Re?Re.close():G.close())}}},_}(),i1=n1;function ps(_,x){return ht.defer(function(){x(_)}),{abort:function(){},forceMinPriority:function(){}}}var o1=Xt.Transports,s1=function(_,x,L,M,N,G){var Re=o1[L];if(!Re)throw new Se(L);var Ke=(!_.enabledTransports||Lr(_.enabledTransports,x)!==-1)&&(!_.disabledTransports||Lr(_.disabledTransports,x)===-1),_t;return Ke?(N=Object.assign({ignoreNullOrigin:_.ignoreNullOrigin},N),_t=new i1(x,M,G?G.getAssistant(Re):Re,N)):_t=Hs,_t},Hs={isSupported:function(){return!1},connect:function(_,x){var L=ht.defer(function(){x(new He)});return{abort:function(){L.ensureAborted()},forceMinPriority:function(){}}}},a1=function(_,x){var L="socket_id="+encodeURIComponent(_.socketId);for(var M in x.params)L+="&"+encodeURIComponent(M)+"="+encodeURIComponent(x.params[M]);return L},wa=function(_){if(typeof Xt.getAuthorizers()[_.transport]>"u")throw"'"+_.transport+"' is not a recognized auth transport";return function(x,L){var M=a1(x,_);Xt.getAuthorizers()[_.transport](Xt,M,_,Q.UserAuthentication,L)}},gs=wa,ba=function(_,x){var L="socket_id="+encodeURIComponent(_.socketId);L+="&channel_name="+encodeURIComponent(_.channelName);for(var M in x.params)L+="&"+encodeURIComponent(M)+"="+encodeURIComponent(x.params[M]);return L},Be=function(_){if(typeof Xt.getAuthorizers()[_.transport]>"u")throw"'"+_.transport+"' is not a recognized auth transport";return function(x,L){var M=ba(x,_);Xt.getAuthorizers()[_.transport](Xt,M,_,Q.ChannelAuthorization,L)}},Gi=Be,jo=function(_,x,L){var M={authTransport:x.transport,authEndpoint:x.endpoint,auth:{params:x.params,headers:x.headers}};return function(N,G){var Re=_.channel(N.channelName),Ke=L(Re,M);Ke.authorize(N.socketId,G)}},Wi=function(){return Wi=Object.assign||function(_){for(var x,L=1,M=arguments.length;L<M;L++){x=arguments[L];for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&(_[N]=x[N])}return _},Wi.apply(this,arguments)};function ms(_,x){var L={activityTimeout:_.activityTimeout||te.activityTimeout,cluster:_.cluster||te.cluster,httpPath:_.httpPath||te.httpPath,httpPort:_.httpPort||te.httpPort,httpsPort:_.httpsPort||te.httpsPort,pongTimeout:_.pongTimeout||te.pongTimeout,statsHost:_.statsHost||te.stats_host,unavailableTimeout:_.unavailableTimeout||te.unavailableTimeout,wsPath:_.wsPath||te.wsPath,wsPort:_.wsPort||te.wsPort,wssPort:_.wssPort||te.wssPort,enableStats:Tn(_),httpHost:or(_),useTLS:Tr(_),wsHost:Un(_),userAuthenticator:tn(_),channelAuthorizer:_a(_,x)};return"disabledTransports"in _&&(L.disabledTransports=_.disabledTransports),"enabledTransports"in _&&(L.enabledTransports=_.enabledTransports),"ignoreNullOrigin"in _&&(L.ignoreNullOrigin=_.ignoreNullOrigin),"timelineParams"in _&&(L.timelineParams=_.timelineParams),"nacl"in _&&(L.nacl=_.nacl),L}function or(_){return _.httpHost?_.httpHost:_.cluster?"sockjs-"+_.cluster+".pusher.com":te.httpHost}function Un(_){return _.wsHost?_.wsHost:_.cluster?Li(_.cluster):Li(te.cluster)}function Li(_){return"ws-"+_+".pusher.com"}function Tr(_){return Xt.getProtocol()==="https:"?!0:_.forceTLS!==!1}function Tn(_){return"enableStats"in _?_.enableStats:"disableStats"in _?!_.disableStats:!1}function tn(_){var x=Wi({},te.userAuthentication,_.userAuthentication);return"customHandler"in x&&x.customHandler!=null?x.customHandler:gs(x)}function xa(_,x){var L;return"channelAuthorization"in _?L=Wi({},te.channelAuthorization,_.channelAuthorization):(L={transport:_.authTransport||te.authTransport,endpoint:_.authEndpoint||te.authEndpoint},"auth"in _&&("params"in _.auth&&(L.params=_.auth.params),"headers"in _.auth&&(L.headers=_.auth.headers)),"authorizer"in _&&(L.customHandler=jo(x,L,_.authorizer))),L}function _a(_,x){var L=xa(_,x);return"customHandler"in L&&L.customHandler!=null?L.customHandler:Gi(L)}function Dn(){var _,x,L=new Promise(function(M,N){_=M,x=N});return{promise:L,resolve:_,reject:x}}var Ns=Dn,Ki=function(){var _=function(x,L){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var G in N)N.hasOwnProperty(G)&&(M[G]=N[G])},_(x,L)};return function(x,L){_(x,L);function M(){this.constructor=x}x.prototype=L===null?Object.create(L):(M.prototype=L.prototype,new M)}}(),Gr=function(_){Ki(x,_);function x(L){var M=_.call(this,function(N,G){zt.debug("No callbacks on user for "+N)})||this;return M.signin_requested=!1,M.user_data=null,M.serverToUserChannel=null,M.signinDonePromise=null,M._signinDoneResolve=null,M._onAuthorize=function(N,G){if(N){zt.warn("Error during signin: "+N),M._cleanup();return}M.pusher.send_event("pusher:signin",{auth:G.auth,user_data:G.user_data})},M.pusher=L,M.pusher.connection.bind("state_change",function(N){var G=N.previous,Re=N.current;G!=="connected"&&Re==="connected"&&M._signin(),G==="connected"&&Re!=="connected"&&(M._cleanup(),M._newSigninPromiseIfNeeded())}),M.pusher.connection.bind("message",function(N){var G=N.event;G==="pusher:signin_success"&&M._onSigninSuccess(N.data),M.serverToUserChannel&&M.serverToUserChannel.name===N.channel&&M.serverToUserChannel.handleEvent(N)}),M}return x.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},x.prototype._signin=function(){!this.signin_requested||(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},x.prototype._onSigninSuccess=function(L){try{this.user_data=JSON.parse(L.user_data)}catch{zt.error("Failed parsing user data after signin: "+L.user_data),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){zt.error("user_data doesn't contain an id. user_data: "+this.user_data),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()},x.prototype._subscribeChannels=function(){var L=this,M=function(N){N.subscriptionPending&&N.subscriptionCancelled?N.reinstateSubscription():!N.subscriptionPending&&L.pusher.connection.state==="connected"&&N.subscribe()};this.serverToUserChannel=new wr("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global(function(N,G){N.indexOf("pusher_internal:")===0||N.indexOf("pusher:")===0||L.emit(N,G)}),M(this.serverToUserChannel)},x.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},x.prototype._newSigninPromiseIfNeeded=function(){if(!!this.signin_requested&&!(this.signinDonePromise&&!this.signinDonePromise.done)){var L=Ns(),M=L.promise,N=L.resolve,G=L.reject;M.done=!1;var Re=function(){M.done=!0};M.then(Re).catch(Re),this.signinDonePromise=M,this._signinDoneResolve=N}},x}(Rn),X=Gr,ii=function(){function _(x,L){var M=this;if(Vs(x),L=L||{},!L.cluster&&!(L.wsHost||L.httpHost)){var N=Z.buildLogSuffix("javascriptQuickStart");zt.warn("You should always specify a cluster when connecting. "+N)}"disableStats"in L&&zt.warn("The disableStats option is deprecated in favor of enableStats"),this.key=x,this.config=ms(L,this),this.channels=ti.createChannels(),this.global_emitter=new Rn,this.sessionID=Math.floor(Math.random()*1e9),this.timeline=new ya(this.key,this.sessionID,{cluster:this.config.cluster,features:_.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:No.INFO,version:te.VERSION}),this.config.enableStats&&(this.timelineSender=ti.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Xt.TimelineTransport.name}));var G=function(Re){return Xt.getDefaultStrategy(M.config,Re,s1)};this.connection=ti.createConnectionManager(this.key,{getStrategy:G,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",function(){M.subscribeAll(),M.timelineSender&&M.timelineSender.send(M.connection.isUsingTLS())}),this.connection.bind("message",function(Re){var Ke=Re.event,_t=Ke.indexOf("pusher_internal:")===0;if(Re.channel){var nt=M.channel(Re.channel);nt&&nt.handleEvent(Re)}_t||M.global_emitter.emit(Re.event,Re.data)}),this.connection.bind("connecting",function(){M.channels.disconnect()}),this.connection.bind("disconnected",function(){M.channels.disconnect()}),this.connection.bind("error",function(Re){zt.warn(Re)}),_.instances.push(this),this.timeline.info({instances:_.instances.length}),this.user=new X(this),_.isReady&&this.connect()}return _.ready=function(){_.isReady=!0;for(var x=0,L=_.instances.length;x<L;x++)_.instances[x].connect()},_.getClientFeatures=function(){return Rr(Qt({ws:Xt.Transports.ws},function(x){return x.isSupported({})}))},_.prototype.channel=function(x){return this.channels.find(x)},_.prototype.allChannels=function(){return this.channels.all()},_.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var x=this.connection.isUsingTLS(),L=this.timelineSender;this.timelineSenderTimer=new Xe(6e4,function(){L.send(x)})}},_.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},_.prototype.bind=function(x,L,M){return this.global_emitter.bind(x,L,M),this},_.prototype.unbind=function(x,L,M){return this.global_emitter.unbind(x,L,M),this},_.prototype.bind_global=function(x){return this.global_emitter.bind_global(x),this},_.prototype.unbind_global=function(x){return this.global_emitter.unbind_global(x),this},_.prototype.unbind_all=function(x){return this.global_emitter.unbind_all(),this},_.prototype.subscribeAll=function(){var x;for(x in this.channels.channels)this.channels.channels.hasOwnProperty(x)&&this.subscribe(x)},_.prototype.subscribe=function(x){var L=this.channels.add(x,this);return L.subscriptionPending&&L.subscriptionCancelled?L.reinstateSubscription():!L.subscriptionPending&&this.connection.state==="connected"&&L.subscribe(),L},_.prototype.unsubscribe=function(x){var L=this.channels.find(x);L&&L.subscriptionPending?L.cancelSubscription():(L=this.channels.remove(x),L&&L.subscribed&&L.unsubscribe())},_.prototype.send_event=function(x,L,M){return this.connection.send_event(x,L,M)},_.prototype.shouldUseTLS=function(){return this.config.useTLS},_.prototype.signin=function(){this.user.signin()},_.instances=[],_.isReady=!1,_.logToConsole=!1,_.Runtime=Xt,_.ScriptReceivers=Xt.ScriptReceivers,_.DependenciesReceivers=Xt.DependenciesReceivers,_.auth_callbacks=Xt.auth_callbacks,_}(),pn=q.default=ii;function Vs(_){if(_==null)throw"You must pass your app key when you instantiate Pusher."}Xt.setup(ii)}])})},6127:(gt,ue,q)=>{"use strict";function W(pe){return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pe){return typeof Pe}:function(Pe){return Pe&&typeof Symbol=="function"&&Pe.constructor===Symbol&&Pe!==Symbol.prototype?"symbol":typeof Pe},W(pe)}Object.defineProperty(ue,"__esModule",{value:!0}),Object.defineProperty(ue,"DraggableCore",{enumerable:!0,get:function(){return fe.default}}),ue.default=void 0;var u=ie(q(8160)),oe=Z(q(9386)),xe=Z(q(9004)),te=Z(q(4013)),ae=q(4958),D=q(9680),ee=q(4142),fe=Z(q(4017)),P=Z(q(90)),be=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function Z(pe){return pe&&pe.__esModule?pe:{default:pe}}function Q(pe){if(typeof WeakMap!="function")return null;var Pe=new WeakMap,je=new WeakMap;return(Q=function(Xe){return Xe?je:Pe})(pe)}function ie(pe,Pe){if(!Pe&&pe&&pe.__esModule)return pe;if(pe===null||W(pe)!=="object"&&typeof pe!="function")return{default:pe};var je=Q(Pe);if(je&&je.has(pe))return je.get(pe);var Ue={},Xe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var dt in pe)if(dt!=="default"&&Object.prototype.hasOwnProperty.call(pe,dt)){var ht=Xe?Object.getOwnPropertyDescriptor(pe,dt):null;ht&&(ht.get||ht.set)?Object.defineProperty(Ue,dt,ht):Ue[dt]=pe[dt]}return Ue.default=pe,je&&je.set(pe,Ue),Ue}function he(){return he=Object.assign||function(pe){for(var Pe=1;Pe<arguments.length;Pe++){var je=arguments[Pe];for(var Ue in je)Object.prototype.hasOwnProperty.call(je,Ue)&&(pe[Ue]=je[Ue])}return pe},he.apply(this,arguments)}function ve(pe,Pe){if(pe==null)return{};var je=Je(pe,Pe),Ue,Xe;if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(pe);for(Xe=0;Xe<dt.length;Xe++)Ue=dt[Xe],!(Pe.indexOf(Ue)>=0)&&(!Object.prototype.propertyIsEnumerable.call(pe,Ue)||(je[Ue]=pe[Ue]))}return je}function Je(pe,Pe){if(pe==null)return{};var je={},Ue=Object.keys(pe),Xe,dt;for(dt=0;dt<Ue.length;dt++)Xe=Ue[dt],!(Pe.indexOf(Xe)>=0)&&(je[Xe]=pe[Xe]);return je}function rt(pe,Pe){var je=Object.keys(pe);if(Object.getOwnPropertySymbols){var Ue=Object.getOwnPropertySymbols(pe);Pe&&(Ue=Ue.filter(function(Xe){return Object.getOwnPropertyDescriptor(pe,Xe).enumerable})),je.push.apply(je,Ue)}return je}function K(pe){for(var Pe=1;Pe<arguments.length;Pe++){var je=arguments[Pe]!=null?arguments[Pe]:{};Pe%2?rt(Object(je),!0).forEach(function(Ue){$t(pe,Ue,je[Ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(je)):rt(Object(je)).forEach(function(Ue){Object.defineProperty(pe,Ue,Object.getOwnPropertyDescriptor(je,Ue))})}return pe}function St(pe,Pe){return yt(pe)||It(pe,Pe)||He(pe,Pe)||Se()}function Se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function He(pe,Pe){if(!!pe){if(typeof pe=="string")return Qe(pe,Pe);var je=Object.prototype.toString.call(pe).slice(8,-1);if(je==="Object"&&pe.constructor&&(je=pe.constructor.name),je==="Map"||je==="Set")return Array.from(pe);if(je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(je))return Qe(pe,Pe)}}function Qe(pe,Pe){(Pe==null||Pe>pe.length)&&(Pe=pe.length);for(var je=0,Ue=new Array(Pe);je<Pe;je++)Ue[je]=pe[je];return Ue}function It(pe,Pe){var je=pe==null?null:typeof Symbol<"u"&&pe[Symbol.iterator]||pe["@@iterator"];if(je!=null){var Ue=[],Xe=!0,dt=!1,ht,Pt;try{for(je=je.call(pe);!(Xe=(ht=je.next()).done)&&(Ue.push(ht.value),!(Pe&&Ue.length===Pe));Xe=!0);}catch(jt){dt=!0,Pt=jt}finally{try{!Xe&&je.return!=null&&je.return()}finally{if(dt)throw Pt}}return Ue}}function yt(pe){if(Array.isArray(pe))return pe}function Ut(pe,Pe){if(!(pe instanceof Pe))throw new TypeError("Cannot call a class as a function")}function wt(pe,Pe){for(var je=0;je<Pe.length;je++){var Ue=Pe[je];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(pe,Ue.key,Ue)}}function we(pe,Pe,je){return Pe&&wt(pe.prototype,Pe),je&&wt(pe,je),Object.defineProperty(pe,"prototype",{writable:!1}),pe}function De(pe,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Super expression must either be null or a function");pe.prototype=Object.create(Pe&&Pe.prototype,{constructor:{value:pe,writable:!0,configurable:!0}}),Object.defineProperty(pe,"prototype",{writable:!1}),Pe&&Ze(pe,Pe)}function Ze(pe,Pe){return Ze=Object.setPrototypeOf||function(Ue,Xe){return Ue.__proto__=Xe,Ue},Ze(pe,Pe)}function Ht(pe){var Pe=at();return function(){var Ue=Ae(pe),Xe;if(Pe){var dt=Ae(this).constructor;Xe=Reflect.construct(Ue,arguments,dt)}else Xe=Ue.apply(this,arguments);return Le(this,Xe)}}function Le(pe,Pe){if(Pe&&(W(Pe)==="object"||typeof Pe=="function"))return Pe;if(Pe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fe(pe)}function Fe(pe){if(pe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pe}function at(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ae(pe){return Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(je){return je.__proto__||Object.getPrototypeOf(je)},Ae(pe)}function $t(pe,Pe,je){return Pe in pe?Object.defineProperty(pe,Pe,{value:je,enumerable:!0,configurable:!0,writable:!0}):pe[Pe]=je,pe}var Zt=function(pe){De(je,pe);var Pe=Ht(je);function je(Ue){var Xe;return Ut(this,je),Xe=Pe.call(this,Ue),$t(Fe(Xe),"onDragStart",function(dt,ht){(0,P.default)("Draggable: onDragStart: %j",ht);var Pt=Xe.props.onStart(dt,(0,D.createDraggableData)(Fe(Xe),ht));if(Pt===!1)return!1;Xe.setState({dragging:!0,dragged:!0})}),$t(Fe(Xe),"onDrag",function(dt,ht){if(!Xe.state.dragging)return!1;(0,P.default)("Draggable: onDrag: %j",ht);var Pt=(0,D.createDraggableData)(Fe(Xe),ht),jt={x:Pt.x,y:Pt.y};if(Xe.props.bounds){var Lr=jt.x,dr=jt.y;jt.x+=Xe.state.slackX,jt.y+=Xe.state.slackY;var Rr=(0,D.getBoundPosition)(Fe(Xe),jt.x,jt.y),Jr=St(Rr,2),Qr=Jr[0],Tt=Jr[1];jt.x=Qr,jt.y=Tt,jt.slackX=Xe.state.slackX+(Lr-jt.x),jt.slackY=Xe.state.slackY+(dr-jt.y),Pt.x=jt.x,Pt.y=jt.y,Pt.deltaX=jt.x-Xe.state.x,Pt.deltaY=jt.y-Xe.state.y}var Kt=Xe.props.onDrag(dt,Pt);if(Kt===!1)return!1;Xe.setState(jt)}),$t(Fe(Xe),"onDragStop",function(dt,ht){if(!Xe.state.dragging)return!1;var Pt=Xe.props.onStop(dt,(0,D.createDraggableData)(Fe(Xe),ht));if(Pt===!1)return!1;(0,P.default)("Draggable: onDragStop: %j",ht);var jt={dragging:!1,slackX:0,slackY:0},Lr=Boolean(Xe.props.position);if(Lr){var dr=Xe.props.position,Rr=dr.x,Jr=dr.y;jt.x=Rr,jt.y=Jr}Xe.setState(jt)}),Xe.state={dragging:!1,dragged:!1,x:Ue.position?Ue.position.x:Ue.defaultPosition.x,y:Ue.position?Ue.position.y:Ue.defaultPosition.y,prevPropsPosition:K({},Ue.position),slackX:0,slackY:0,isElementSVG:!1},Ue.position&&!(Ue.onDrag||Ue.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),Xe}return we(je,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var Xe,dt,ht;return(Xe=(dt=this.props)===null||dt===void 0||(ht=dt.nodeRef)===null||ht===void 0?void 0:ht.current)!==null&&Xe!==void 0?Xe:xe.default.findDOMNode(this)}},{key:"render",value:function(){var Xe,dt=this.props,ht=dt.axis,Pt=dt.bounds,jt=dt.children,Lr=dt.defaultPosition,dr=dt.defaultClassName,Rr=dt.defaultClassNameDragging,Jr=dt.defaultClassNameDragged,Qr=dt.position,Tt=dt.positionOffset,Kt=dt.scale,Yt=ve(dt,be),Qt={},Nr=null,yr=Boolean(Qr),vr=!yr||this.state.dragging,nn=Qr||Lr,Xr={x:(0,D.canDragX)(this)&&vr?this.state.x:nn.x,y:(0,D.canDragY)(this)&&vr?this.state.y:nn.y};this.state.isElementSVG?Nr=(0,ae.createSVGTransform)(Xr,Tt):Qt=(0,ae.createCSSTransform)(Xr,Tt);var en=(0,te.default)(jt.props.className||"",dr,(Xe={},$t(Xe,Rr,this.state.dragging),$t(Xe,Jr,this.state.dragged),Xe));return u.createElement(fe.default,he({},Yt,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),u.cloneElement(u.Children.only(jt),{className:en,style:K(K({},jt.props.style),Qt),transform:Nr}))}}],[{key:"getDerivedStateFromProps",value:function(Xe,dt){var ht=Xe.position,Pt=dt.prevPropsPosition;return ht&&(!Pt||ht.x!==Pt.x||ht.y!==Pt.y)?((0,P.default)("Draggable: getDerivedStateFromProps %j",{position:ht,prevPropsPosition:Pt}),{x:ht.x,y:ht.y,prevPropsPosition:K({},ht)}):null}}]),je}(u.Component);ue.default=Zt,$t(Zt,"displayName","Draggable"),$t(Zt,"propTypes",K(K({},fe.default.propTypes),{},{axis:oe.default.oneOf(["both","x","y","none"]),bounds:oe.default.oneOfType([oe.default.shape({left:oe.default.number,right:oe.default.number,top:oe.default.number,bottom:oe.default.number}),oe.default.string,oe.default.oneOf([!1])]),defaultClassName:oe.default.string,defaultClassNameDragging:oe.default.string,defaultClassNameDragged:oe.default.string,defaultPosition:oe.default.shape({x:oe.default.number,y:oe.default.number}),positionOffset:oe.default.shape({x:oe.default.oneOfType([oe.default.number,oe.default.string]),y:oe.default.oneOfType([oe.default.number,oe.default.string])}),position:oe.default.shape({x:oe.default.number,y:oe.default.number}),className:ee.dontSetMe,style:ee.dontSetMe,transform:ee.dontSetMe})),$t(Zt,"defaultProps",K(K({},fe.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},4017:(gt,ue,q)=>{"use strict";function W(Le){return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Fe){return typeof Fe}:function(Fe){return Fe&&typeof Symbol=="function"&&Fe.constructor===Symbol&&Fe!==Symbol.prototype?"symbol":typeof Fe},W(Le)}Object.defineProperty(ue,"__esModule",{value:!0}),ue.default=void 0;var u=be(q(8160)),oe=fe(q(9386)),xe=fe(q(9004)),te=q(4958),ae=q(9680),D=q(4142),ee=fe(q(90));function fe(Le){return Le&&Le.__esModule?Le:{default:Le}}function P(Le){if(typeof WeakMap!="function")return null;var Fe=new WeakMap,at=new WeakMap;return(P=function($t){return $t?at:Fe})(Le)}function be(Le,Fe){if(!Fe&&Le&&Le.__esModule)return Le;if(Le===null||W(Le)!=="object"&&typeof Le!="function")return{default:Le};var at=P(Fe);if(at&&at.has(Le))return at.get(Le);var Ae={},$t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Zt in Le)if(Zt!=="default"&&Object.prototype.hasOwnProperty.call(Le,Zt)){var pe=$t?Object.getOwnPropertyDescriptor(Le,Zt):null;pe&&(pe.get||pe.set)?Object.defineProperty(Ae,Zt,pe):Ae[Zt]=Le[Zt]}return Ae.default=Le,at&&at.set(Le,Ae),Ae}function Z(Le,Fe){return Je(Le)||ve(Le,Fe)||ie(Le,Fe)||Q()}function Q(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ie(Le,Fe){if(!!Le){if(typeof Le=="string")return he(Le,Fe);var at=Object.prototype.toString.call(Le).slice(8,-1);if(at==="Object"&&Le.constructor&&(at=Le.constructor.name),at==="Map"||at==="Set")return Array.from(Le);if(at==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(at))return he(Le,Fe)}}function he(Le,Fe){(Fe==null||Fe>Le.length)&&(Fe=Le.length);for(var at=0,Ae=new Array(Fe);at<Fe;at++)Ae[at]=Le[at];return Ae}function ve(Le,Fe){var at=Le==null?null:typeof Symbol<"u"&&Le[Symbol.iterator]||Le["@@iterator"];if(at!=null){var Ae=[],$t=!0,Zt=!1,pe,Pe;try{for(at=at.call(Le);!($t=(pe=at.next()).done)&&(Ae.push(pe.value),!(Fe&&Ae.length===Fe));$t=!0);}catch(je){Zt=!0,Pe=je}finally{try{!$t&&at.return!=null&&at.return()}finally{if(Zt)throw Pe}}return Ae}}function Je(Le){if(Array.isArray(Le))return Le}function rt(Le,Fe){if(!(Le instanceof Fe))throw new TypeError("Cannot call a class as a function")}function K(Le,Fe){for(var at=0;at<Fe.length;at++){var Ae=Fe[at];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(Le,Ae.key,Ae)}}function St(Le,Fe,at){return Fe&&K(Le.prototype,Fe),at&&K(Le,at),Object.defineProperty(Le,"prototype",{writable:!1}),Le}function Se(Le,Fe){if(typeof Fe!="function"&&Fe!==null)throw new TypeError("Super expression must either be null or a function");Le.prototype=Object.create(Fe&&Fe.prototype,{constructor:{value:Le,writable:!0,configurable:!0}}),Object.defineProperty(Le,"prototype",{writable:!1}),Fe&&He(Le,Fe)}function He(Le,Fe){return He=Object.setPrototypeOf||function(Ae,$t){return Ae.__proto__=$t,Ae},He(Le,Fe)}function Qe(Le){var Fe=Ut();return function(){var Ae=wt(Le),$t;if(Fe){var Zt=wt(this).constructor;$t=Reflect.construct(Ae,arguments,Zt)}else $t=Ae.apply(this,arguments);return It(this,$t)}}function It(Le,Fe){if(Fe&&(W(Fe)==="object"||typeof Fe=="function"))return Fe;if(Fe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yt(Le)}function yt(Le){if(Le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Le}function Ut(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wt(Le){return wt=Object.setPrototypeOf?Object.getPrototypeOf:function(at){return at.__proto__||Object.getPrototypeOf(at)},wt(Le)}function we(Le,Fe,at){return Fe in Le?Object.defineProperty(Le,Fe,{value:at,enumerable:!0,configurable:!0,writable:!0}):Le[Fe]=at,Le}var De={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Ze=De.mouse,Ht=function(Le){Se(at,Le);var Fe=Qe(at);function at(){var Ae;rt(this,at);for(var $t=arguments.length,Zt=new Array($t),pe=0;pe<$t;pe++)Zt[pe]=arguments[pe];return Ae=Fe.call.apply(Fe,[this].concat(Zt)),we(yt(Ae),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),we(yt(Ae),"mounted",!1),we(yt(Ae),"handleDragStart",function(Pe){if(Ae.props.onMouseDown(Pe),!Ae.props.allowAnyClick&&typeof Pe.button=="number"&&Pe.button!==0)return!1;var je=Ae.findDOMNode();if(!je||!je.ownerDocument||!je.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Ue=je.ownerDocument;if(!(Ae.props.disabled||!(Pe.target instanceof Ue.defaultView.Node)||Ae.props.handle&&!(0,te.matchesSelectorAndParentsTo)(Pe.target,Ae.props.handle,je)||Ae.props.cancel&&(0,te.matchesSelectorAndParentsTo)(Pe.target,Ae.props.cancel,je))){Pe.type==="touchstart"&&Pe.preventDefault();var Xe=(0,te.getTouchIdentifier)(Pe);Ae.setState({touchIdentifier:Xe});var dt=(0,ae.getControlPosition)(Pe,Xe,yt(Ae));if(dt!=null){var ht=dt.x,Pt=dt.y,jt=(0,ae.createCoreData)(yt(Ae),ht,Pt);(0,ee.default)("DraggableCore: handleDragStart: %j",jt),(0,ee.default)("calling",Ae.props.onStart);var Lr=Ae.props.onStart(Pe,jt);Lr===!1||Ae.mounted===!1||(Ae.props.enableUserSelectHack&&(0,te.addUserSelectStyles)(Ue),Ae.setState({dragging:!0,lastX:ht,lastY:Pt}),(0,te.addEvent)(Ue,Ze.move,Ae.handleDrag),(0,te.addEvent)(Ue,Ze.stop,Ae.handleDragStop))}}}),we(yt(Ae),"handleDrag",function(Pe){var je=(0,ae.getControlPosition)(Pe,Ae.state.touchIdentifier,yt(Ae));if(je!=null){var Ue=je.x,Xe=je.y;if(Array.isArray(Ae.props.grid)){var dt=Ue-Ae.state.lastX,ht=Xe-Ae.state.lastY,Pt=(0,ae.snapToGrid)(Ae.props.grid,dt,ht),jt=Z(Pt,2);if(dt=jt[0],ht=jt[1],!dt&&!ht)return;Ue=Ae.state.lastX+dt,Xe=Ae.state.lastY+ht}var Lr=(0,ae.createCoreData)(yt(Ae),Ue,Xe);(0,ee.default)("DraggableCore: handleDrag: %j",Lr);var dr=Ae.props.onDrag(Pe,Lr);if(dr===!1||Ae.mounted===!1){try{Ae.handleDragStop(new MouseEvent("mouseup"))}catch{var Rr=document.createEvent("MouseEvents");Rr.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Ae.handleDragStop(Rr)}return}Ae.setState({lastX:Ue,lastY:Xe})}}),we(yt(Ae),"handleDragStop",function(Pe){if(!!Ae.state.dragging){var je=(0,ae.getControlPosition)(Pe,Ae.state.touchIdentifier,yt(Ae));if(je!=null){var Ue=je.x,Xe=je.y;if(Array.isArray(Ae.props.grid)){var dt=Ue-Ae.state.lastX||0,ht=Xe-Ae.state.lastY||0,Pt=(0,ae.snapToGrid)(Ae.props.grid,dt,ht),jt=Z(Pt,2);dt=jt[0],ht=jt[1],Ue=Ae.state.lastX+dt,Xe=Ae.state.lastY+ht}var Lr=(0,ae.createCoreData)(yt(Ae),Ue,Xe),dr=Ae.props.onStop(Pe,Lr);if(dr===!1||Ae.mounted===!1)return!1;var Rr=Ae.findDOMNode();Rr&&Ae.props.enableUserSelectHack&&(0,te.removeUserSelectStyles)(Rr.ownerDocument),(0,ee.default)("DraggableCore: handleDragStop: %j",Lr),Ae.setState({dragging:!1,lastX:NaN,lastY:NaN}),Rr&&((0,ee.default)("DraggableCore: Removing handlers"),(0,te.removeEvent)(Rr.ownerDocument,Ze.move,Ae.handleDrag),(0,te.removeEvent)(Rr.ownerDocument,Ze.stop,Ae.handleDragStop))}}}),we(yt(Ae),"onMouseDown",function(Pe){return Ze=De.mouse,Ae.handleDragStart(Pe)}),we(yt(Ae),"onMouseUp",function(Pe){return Ze=De.mouse,Ae.handleDragStop(Pe)}),we(yt(Ae),"onTouchStart",function(Pe){return Ze=De.touch,Ae.handleDragStart(Pe)}),we(yt(Ae),"onTouchEnd",function(Pe){return Ze=De.touch,Ae.handleDragStop(Pe)}),Ae}return St(at,[{key:"componentDidMount",value:function(){this.mounted=!0;var $t=this.findDOMNode();$t&&(0,te.addEvent)($t,De.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var $t=this.findDOMNode();if($t){var Zt=$t.ownerDocument;(0,te.removeEvent)(Zt,De.mouse.move,this.handleDrag),(0,te.removeEvent)(Zt,De.touch.move,this.handleDrag),(0,te.removeEvent)(Zt,De.mouse.stop,this.handleDragStop),(0,te.removeEvent)(Zt,De.touch.stop,this.handleDragStop),(0,te.removeEvent)($t,De.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,te.removeUserSelectStyles)(Zt)}}},{key:"findDOMNode",value:function(){var $t,Zt,pe;return($t=this.props)!==null&&$t!==void 0&&$t.nodeRef?(Zt=this.props)===null||Zt===void 0||(pe=Zt.nodeRef)===null||pe===void 0?void 0:pe.current:xe.default.findDOMNode(this)}},{key:"render",value:function(){return u.cloneElement(u.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),at}(u.Component);ue.default=Ht,we(Ht,"displayName","DraggableCore"),we(Ht,"propTypes",{allowAnyClick:oe.default.bool,disabled:oe.default.bool,enableUserSelectHack:oe.default.bool,offsetParent:function(Fe,at){if(Fe[at]&&Fe[at].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:oe.default.arrayOf(oe.default.number),handle:oe.default.string,cancel:oe.default.string,nodeRef:oe.default.object,onStart:oe.default.func,onDrag:oe.default.func,onStop:oe.default.func,onMouseDown:oe.default.func,scale:oe.default.number,className:D.dontSetMe,style:D.dontSetMe,transform:D.dontSetMe}),we(Ht,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},6938:(gt,ue,q)=>{"use strict";var W=q(6127),u=W.default,oe=W.DraggableCore;gt.exports=u,gt.exports.default=u,gt.exports.DraggableCore=oe},4958:(gt,ue,q)=>{"use strict";function W(we){return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(De){return typeof De}:function(De){return De&&typeof Symbol=="function"&&De.constructor===Symbol&&De!==Symbol.prototype?"symbol":typeof De},W(we)}Object.defineProperty(ue,"__esModule",{value:!0}),ue.addClassName=Ut,ue.addEvent=Z,ue.addUserSelectStyles=It,ue.createCSSTransform=K,ue.createSVGTransform=St,ue.getTouch=He,ue.getTouchIdentifier=Qe,ue.getTranslation=Se,ue.innerHeight=ve,ue.innerWidth=Je,ue.matchesSelector=P,ue.matchesSelectorAndParentsTo=be,ue.offsetXYFromParent=rt,ue.outerHeight=ie,ue.outerWidth=he,ue.removeClassName=wt,ue.removeEvent=Q,ue.removeUserSelectStyles=yt;var u=q(4142),oe=te(q(4693));function xe(we){if(typeof WeakMap!="function")return null;var De=new WeakMap,Ze=new WeakMap;return(xe=function(Le){return Le?Ze:De})(we)}function te(we,De){if(!De&&we&&we.__esModule)return we;if(we===null||W(we)!=="object"&&typeof we!="function")return{default:we};var Ze=xe(De);if(Ze&&Ze.has(we))return Ze.get(we);var Ht={},Le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Fe in we)if(Fe!=="default"&&Object.prototype.hasOwnProperty.call(we,Fe)){var at=Le?Object.getOwnPropertyDescriptor(we,Fe):null;at&&(at.get||at.set)?Object.defineProperty(Ht,Fe,at):Ht[Fe]=we[Fe]}return Ht.default=we,Ze&&Ze.set(we,Ht),Ht}function ae(we,De){var Ze=Object.keys(we);if(Object.getOwnPropertySymbols){var Ht=Object.getOwnPropertySymbols(we);De&&(Ht=Ht.filter(function(Le){return Object.getOwnPropertyDescriptor(we,Le).enumerable})),Ze.push.apply(Ze,Ht)}return Ze}function D(we){for(var De=1;De<arguments.length;De++){var Ze=arguments[De]!=null?arguments[De]:{};De%2?ae(Object(Ze),!0).forEach(function(Ht){ee(we,Ht,Ze[Ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(we,Object.getOwnPropertyDescriptors(Ze)):ae(Object(Ze)).forEach(function(Ht){Object.defineProperty(we,Ht,Object.getOwnPropertyDescriptor(Ze,Ht))})}return we}function ee(we,De,Ze){return De in we?Object.defineProperty(we,De,{value:Ze,enumerable:!0,configurable:!0,writable:!0}):we[De]=Ze,we}var fe="";function P(we,De){return fe||(fe=(0,u.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(Ze){return(0,u.isFunction)(we[Ze])})),(0,u.isFunction)(we[fe])?we[fe](De):!1}function be(we,De,Ze){var Ht=we;do{if(P(Ht,De))return!0;if(Ht===Ze)return!1;Ht=Ht.parentNode}while(Ht);return!1}function Z(we,De,Ze,Ht){if(!!we){var Le=D({capture:!0},Ht);we.addEventListener?we.addEventListener(De,Ze,Le):we.attachEvent?we.attachEvent("on"+De,Ze):we["on"+De]=Ze}}function Q(we,De,Ze,Ht){if(!!we){var Le=D({capture:!0},Ht);we.removeEventListener?we.removeEventListener(De,Ze,Le):we.detachEvent?we.detachEvent("on"+De,Ze):we["on"+De]=null}}function ie(we){var De=we.clientHeight,Ze=we.ownerDocument.defaultView.getComputedStyle(we);return De+=(0,u.int)(Ze.borderTopWidth),De+=(0,u.int)(Ze.borderBottomWidth),De}function he(we){var De=we.clientWidth,Ze=we.ownerDocument.defaultView.getComputedStyle(we);return De+=(0,u.int)(Ze.borderLeftWidth),De+=(0,u.int)(Ze.borderRightWidth),De}function ve(we){var De=we.clientHeight,Ze=we.ownerDocument.defaultView.getComputedStyle(we);return De-=(0,u.int)(Ze.paddingTop),De-=(0,u.int)(Ze.paddingBottom),De}function Je(we){var De=we.clientWidth,Ze=we.ownerDocument.defaultView.getComputedStyle(we);return De-=(0,u.int)(Ze.paddingLeft),De-=(0,u.int)(Ze.paddingRight),De}function rt(we,De,Ze){var Ht=De===De.ownerDocument.body,Le=Ht?{left:0,top:0}:De.getBoundingClientRect(),Fe=(we.clientX+De.scrollLeft-Le.left)/Ze,at=(we.clientY+De.scrollTop-Le.top)/Ze;return{x:Fe,y:at}}function K(we,De){var Ze=Se(we,De,"px");return ee({},(0,oe.browserPrefixToKey)("transform",oe.default),Ze)}function St(we,De){var Ze=Se(we,De,"");return Ze}function Se(we,De,Ze){var Ht=we.x,Le=we.y,Fe="translate(".concat(Ht).concat(Ze,",").concat(Le).concat(Ze,")");if(De){var at="".concat(typeof De.x=="string"?De.x:De.x+Ze),Ae="".concat(typeof De.y=="string"?De.y:De.y+Ze);Fe="translate(".concat(at,", ").concat(Ae,")")+Fe}return Fe}function He(we,De){return we.targetTouches&&(0,u.findInArray)(we.targetTouches,function(Ze){return De===Ze.identifier})||we.changedTouches&&(0,u.findInArray)(we.changedTouches,function(Ze){return De===Ze.identifier})}function Qe(we){if(we.targetTouches&&we.targetTouches[0])return we.targetTouches[0].identifier;if(we.changedTouches&&we.changedTouches[0])return we.changedTouches[0].identifier}function It(we){if(!!we){var De=we.getElementById("react-draggable-style-el");De||(De=we.createElement("style"),De.type="text/css",De.id="react-draggable-style-el",De.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,De.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,we.getElementsByTagName("head")[0].appendChild(De)),we.body&&Ut(we.body,"react-draggable-transparent-selection")}}function yt(we){if(!!we)try{if(we.body&&wt(we.body,"react-draggable-transparent-selection"),we.selection)we.selection.empty();else{var De=(we.defaultView||window).getSelection();De&&De.type!=="Caret"&&De.removeAllRanges()}}catch{}}function Ut(we,De){we.classList?we.classList.add(De):we.className.match(new RegExp("(?:^|\\s)".concat(De,"(?!\\S)")))||(we.className+=" ".concat(De))}function wt(we,De){we.classList?we.classList.remove(De):we.className=we.className.replace(new RegExp("(?:^|\\s)".concat(De,"(?!\\S)"),"g"),"")}},4693:(gt,ue)=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0}),ue.browserPrefixToKey=u,ue.browserPrefixToStyle=oe,ue.default=void 0,ue.getPrefix=W;var q=["Moz","Webkit","O","ms"];function W(){var ae,D,ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var fe=(ae=window.document)===null||ae===void 0||(D=ae.documentElement)===null||D===void 0?void 0:D.style;if(!fe||ee in fe)return"";for(var P=0;P<q.length;P++)if(u(ee,q[P])in fe)return q[P];return""}function u(ae,D){return D?"".concat(D).concat(xe(ae)):ae}function oe(ae,D){return D?"-".concat(D.toLowerCase(),"-").concat(ae):ae}function xe(ae){for(var D="",ee=!0,fe=0;fe<ae.length;fe++)ee?(D+=ae[fe].toUpperCase(),ee=!1):ae[fe]==="-"?ee=!0:D+=ae[fe];return D}var te=W();ue.default=te},90:(gt,ue)=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0}),ue.default=q;function q(){var W}},9680:(gt,ue,q)=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0}),ue.canDragX=te,ue.canDragY=ae,ue.createCoreData=ee,ue.createDraggableData=fe,ue.getBoundPosition=oe,ue.getControlPosition=D,ue.snapToGrid=xe;var W=q(4142),u=q(4958);function oe(Z,Q,ie){if(!Z.props.bounds)return[Q,ie];var he=Z.props.bounds;he=typeof he=="string"?he:P(he);var ve=be(Z);if(typeof he=="string"){var Je=ve.ownerDocument,rt=Je.defaultView,K;if(he==="parent"?K=ve.parentNode:K=Je.querySelector(he),!(K instanceof rt.HTMLElement))throw new Error('Bounds selector "'+he+'" could not find an element.');var St=K,Se=rt.getComputedStyle(ve),He=rt.getComputedStyle(St);he={left:-ve.offsetLeft+(0,W.int)(He.paddingLeft)+(0,W.int)(Se.marginLeft),top:-ve.offsetTop+(0,W.int)(He.paddingTop)+(0,W.int)(Se.marginTop),right:(0,u.innerWidth)(St)-(0,u.outerWidth)(ve)-ve.offsetLeft+(0,W.int)(He.paddingRight)-(0,W.int)(Se.marginRight),bottom:(0,u.innerHeight)(St)-(0,u.outerHeight)(ve)-ve.offsetTop+(0,W.int)(He.paddingBottom)-(0,W.int)(Se.marginBottom)}}return(0,W.isNum)(he.right)&&(Q=Math.min(Q,he.right)),(0,W.isNum)(he.bottom)&&(ie=Math.min(ie,he.bottom)),(0,W.isNum)(he.left)&&(Q=Math.max(Q,he.left)),(0,W.isNum)(he.top)&&(ie=Math.max(ie,he.top)),[Q,ie]}function xe(Z,Q,ie){var he=Math.round(Q/Z[0])*Z[0],ve=Math.round(ie/Z[1])*Z[1];return[he,ve]}function te(Z){return Z.props.axis==="both"||Z.props.axis==="x"}function ae(Z){return Z.props.axis==="both"||Z.props.axis==="y"}function D(Z,Q,ie){var he=typeof Q=="number"?(0,u.getTouch)(Z,Q):null;if(typeof Q=="number"&&!he)return null;var ve=be(ie),Je=ie.props.offsetParent||ve.offsetParent||ve.ownerDocument.body;return(0,u.offsetXYFromParent)(he||Z,Je,ie.props.scale)}function ee(Z,Q,ie){var he=Z.state,ve=!(0,W.isNum)(he.lastX),Je=be(Z);return ve?{node:Je,deltaX:0,deltaY:0,lastX:Q,lastY:ie,x:Q,y:ie}:{node:Je,deltaX:Q-he.lastX,deltaY:ie-he.lastY,lastX:he.lastX,lastY:he.lastY,x:Q,y:ie}}function fe(Z,Q){var ie=Z.props.scale;return{node:Q.node,x:Z.state.x+Q.deltaX/ie,y:Z.state.y+Q.deltaY/ie,deltaX:Q.deltaX/ie,deltaY:Q.deltaY/ie,lastX:Z.state.x,lastY:Z.state.y}}function P(Z){return{left:Z.left,top:Z.top,right:Z.right,bottom:Z.bottom}}function be(Z){var Q=Z.findDOMNode();if(!Q)throw new Error("<DraggableCore>: Unmounted during event!");return Q}},4142:(gt,ue)=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0}),ue.dontSetMe=xe,ue.findInArray=q,ue.int=oe,ue.isFunction=W,ue.isNum=u;function q(te,ae){for(var D=0,ee=te.length;D<ee;D++)if(ae.apply(ae,[te[D],D,te]))return te[D]}function W(te){return typeof te=="function"||Object.prototype.toString.call(te)==="[object Function]"}function u(te){return typeof te=="number"&&!isNaN(te)}function oe(te){return parseInt(te,10)}function xe(te,ae,D){if(te[ae])return new Error("Invalid prop ".concat(ae," passed to ").concat(D," - do not set this, set it on the child."))}},6808:function(gt,ue,q){(function(W,u){u(ue,q(8160))})(this,function(W,u){"use strict";function oe(Z){if(Z&&Z.__esModule)return Z;var Q=Object.create(null);return Z&&Object.keys(Z).forEach(function(ie){if(ie!=="default"){var he=Object.getOwnPropertyDescriptor(Z,ie);Object.defineProperty(Q,ie,he.get?he:{enumerable:!0,get:function(){return Z[ie]}})}}),Q.default=Z,Object.freeze(Q)}var xe=oe(u);function te(Z,Q){return te=Object.setPrototypeOf||function(he,ve){return he.__proto__=ve,he},te(Z,Q)}function ae(Z,Q){Z.prototype=Object.create(Q.prototype),Z.prototype.constructor=Z,te(Z,Q)}var D=function(Q,ie){return Q===void 0&&(Q=[]),ie===void 0&&(ie=[]),Q.length!==ie.length||Q.some(function(he,ve){return!Object.is(he,ie[ve])})},ee={error:null},fe=function(Z){ae(Q,Z);function Q(){for(var he,ve=arguments.length,Je=new Array(ve),rt=0;rt<ve;rt++)Je[rt]=arguments[rt];return he=Z.call.apply(Z,[this].concat(Je))||this,he.state=ee,he.resetErrorBoundary=function(){for(var K,St=arguments.length,Se=new Array(St),He=0;He<St;He++)Se[He]=arguments[He];he.props.onReset==null||(K=he.props).onReset.apply(K,Se),he.reset()},he}Q.getDerivedStateFromError=function(ve){return{error:ve}};var ie=Q.prototype;return ie.reset=function(){this.setState(ee)},ie.componentDidCatch=function(ve,Je){var rt,K;(rt=(K=this.props).onError)==null||rt.call(K,ve,Je)},ie.componentDidUpdate=function(ve,Je){var rt=this.state.error,K=this.props.resetKeys;if(rt!==null&&Je.error!==null&&D(ve.resetKeys,K)){var St,Se;(St=(Se=this.props).onResetKeysChange)==null||St.call(Se,ve.resetKeys,K),this.reset()}},ie.render=function(){var ve=this.state.error,Je=this.props,rt=Je.fallbackRender,K=Je.FallbackComponent,St=Je.fallback;if(ve!==null){var Se={error:ve,resetErrorBoundary:this.resetErrorBoundary};if(xe.isValidElement(St))return St;if(typeof rt=="function")return rt(Se);if(K)return xe.createElement(K,Se);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},Q}(xe.Component);function P(Z,Q){var ie=function(Je){return xe.createElement(fe,Q,xe.createElement(Z,Je))},he=Z.displayName||Z.name||"Unknown";return ie.displayName="withErrorBoundary("+he+")",ie}function be(Z){var Q=xe.useState(null),ie=Q[0],he=Q[1];if(Z!=null)throw Z;if(ie!=null)throw ie;return he}W.ErrorBoundary=fe,W.useErrorHandler=be,W.withErrorBoundary=P,Object.defineProperty(W,"__esModule",{value:!0})})},7627:(gt,ue)=>{"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q=typeof Symbol=="function"&&Symbol.for,W=q?Symbol.for("react.element"):60103,u=q?Symbol.for("react.portal"):60106,oe=q?Symbol.for("react.fragment"):60107,xe=q?Symbol.for("react.strict_mode"):60108,te=q?Symbol.for("react.profiler"):60114,ae=q?Symbol.for("react.provider"):60109,D=q?Symbol.for("react.context"):60110,ee=q?Symbol.for("react.async_mode"):60111,fe=q?Symbol.for("react.concurrent_mode"):60111,P=q?Symbol.for("react.forward_ref"):60112,be=q?Symbol.for("react.suspense"):60113,Z=q?Symbol.for("react.suspense_list"):60120,Q=q?Symbol.for("react.memo"):60115,ie=q?Symbol.for("react.lazy"):60116,he=q?Symbol.for("react.block"):60121,ve=q?Symbol.for("react.fundamental"):60117,Je=q?Symbol.for("react.responder"):60118,rt=q?Symbol.for("react.scope"):60119;function K(Se){if(typeof Se=="object"&&Se!==null){var He=Se.$$typeof;switch(He){case W:switch(Se=Se.type,Se){case ee:case fe:case oe:case te:case xe:case be:return Se;default:switch(Se=Se&&Se.$$typeof,Se){case D:case P:case ie:case Q:case ae:return Se;default:return He}}case u:return He}}}function St(Se){return K(Se)===fe}ue.AsyncMode=ee,ue.ConcurrentMode=fe,ue.ContextConsumer=D,ue.ContextProvider=ae,ue.Element=W,ue.ForwardRef=P,ue.Fragment=oe,ue.Lazy=ie,ue.Memo=Q,ue.Portal=u,ue.Profiler=te,ue.StrictMode=xe,ue.Suspense=be,ue.isAsyncMode=function(Se){return St(Se)||K(Se)===ee},ue.isConcurrentMode=St,ue.isContextConsumer=function(Se){return K(Se)===D},ue.isContextProvider=function(Se){return K(Se)===ae},ue.isElement=function(Se){return typeof Se=="object"&&Se!==null&&Se.$$typeof===W},ue.isForwardRef=function(Se){return K(Se)===P},ue.isFragment=function(Se){return K(Se)===oe},ue.isLazy=function(Se){return K(Se)===ie},ue.isMemo=function(Se){return K(Se)===Q},ue.isPortal=function(Se){return K(Se)===u},ue.isProfiler=function(Se){return K(Se)===te},ue.isStrictMode=function(Se){return K(Se)===xe},ue.isSuspense=function(Se){return K(Se)===be},ue.isValidElementType=function(Se){return typeof Se=="string"||typeof Se=="function"||Se===oe||Se===fe||Se===te||Se===xe||Se===be||Se===Z||typeof Se=="object"&&Se!==null&&(Se.$$typeof===ie||Se.$$typeof===Q||Se.$$typeof===ae||Se.$$typeof===D||Se.$$typeof===P||Se.$$typeof===ve||Se.$$typeof===Je||Se.$$typeof===rt||Se.$$typeof===he)},ue.typeOf=K},9333:(gt,ue,q)=>{"use strict";gt.exports=q(7627)},8379:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>D});var W=q(8160),u=q(8523),oe=q.n(u),xe=q(5460),te=q(4168),ae=function(ee,fe,P){P===void 0&&(P={});var be=P.video,Z=P.onClose,Q=Z===void 0?te.ZT:Z,ie=(0,W.useState)(fe),he=ie[0],ve=ie[1];return(0,xe.Z)(function(){if(!!fe&&!!ee.current){var Je=function(){be?.current&&(0,te.S1)(be.current,"webkitendfullscreen",Je),Q()},rt=function(){if(oe().isEnabled){var K=oe().isFullscreen;ve(K),K||Q()}};if(oe().isEnabled){try{oe().request(ee.current),ve(!0)}catch(K){Q(K),ve(!1)}oe().on("change",rt)}else be&&be.current&&be.current.webkitEnterFullscreen?(be.current.webkitEnterFullscreen(),(0,te.on)(be.current,"webkitendfullscreen",Je),ve(!0)):(Q(),ve(!1));return function(){if(ve(!1),oe().isEnabled)try{oe().off("change",rt),oe().exit()}catch{}else be&&be.current&&be.current.webkitExitFullscreen&&((0,te.S1)(be.current,"webkitendfullscreen",Je),be.current.webkitExitFullscreen())}}},[fe,be,ee]),he};const D=ae},3738:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>u});var W=q(8160);function u(oe){var xe=(0,W.useRef)();return(0,W.useEffect)(function(){xe.current=oe}),xe.current}},1438:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>xe});var W=q(8160),u=function(te,ae){return typeof ae=="boolean"?ae:!te},oe=function(te){return(0,W.useReducer)(u,te)};const xe=oe},8523:gt=>{/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(){"use strict";var ue=typeof window<"u"&&typeof window.document<"u"?window.document:{},q=gt.exports,W=function(){for(var xe,te=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],ae=0,D=te.length,ee={};ae<D;ae++)if(xe=te[ae],xe&&xe[1]in ue){for(ae=0;ae<xe.length;ae++)ee[te[0][ae]]=xe[ae];return ee}return!1}(),u={change:W.fullscreenchange,error:W.fullscreenerror},oe={request:function(xe,te){return new Promise(function(ae,D){var ee=function(){this.off("change",ee),ae()}.bind(this);this.on("change",ee),xe=xe||ue.documentElement;var fe=xe[W.requestFullscreen](te);fe instanceof Promise&&fe.then(ee).catch(D)}.bind(this))},exit:function(){return new Promise(function(xe,te){if(!this.isFullscreen){xe();return}var ae=function(){this.off("change",ae),xe()}.bind(this);this.on("change",ae);var D=ue[W.exitFullscreen]();D instanceof Promise&&D.then(ae).catch(te)}.bind(this))},toggle:function(xe,te){return this.isFullscreen?this.exit():this.request(xe,te)},onchange:function(xe){this.on("change",xe)},onerror:function(xe){this.on("error",xe)},on:function(xe,te){var ae=u[xe];ae&&ue.addEventListener(ae,te,!1)},off:function(xe,te){var ae=u[xe];ae&&ue.removeEventListener(ae,te,!1)},raw:W};if(!W){q?gt.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(oe,{isFullscreen:{get:function(){return Boolean(ue[W.fullscreenElement])}},element:{enumerable:!0,get:function(){return ue[W.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(ue[W.fullscreenEnabled])}}}),q?gt.exports=oe:window.screenfull=oe})()},1771:(gt,ue,q)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W=q(8160);function u(Z,Q){return Z===Q&&(Z!==0||1/Z===1/Q)||Z!==Z&&Q!==Q}var oe=typeof Object.is=="function"?Object.is:u,xe=W.useState,te=W.useEffect,ae=W.useLayoutEffect,D=W.useDebugValue;function ee(Z,Q){var ie=Q(),he=xe({inst:{value:ie,getSnapshot:Q}}),ve=he[0].inst,Je=he[1];return ae(function(){ve.value=ie,ve.getSnapshot=Q,fe(ve)&&Je({inst:ve})},[Z,ie,Q]),te(function(){return fe(ve)&&Je({inst:ve}),Z(function(){fe(ve)&&Je({inst:ve})})},[Z]),D(ie),ie}function fe(Z){var Q=Z.getSnapshot;Z=Z.value;try{var ie=Q();return!oe(Z,ie)}catch{return!0}}function P(Z,Q){return Q()}var be=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?P:ee;ue.useSyncExternalStore=W.useSyncExternalStore!==void 0?W.useSyncExternalStore:be},6165:(gt,ue,q)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W=q(8160),u=q(4361);function oe(P,be){return P===be&&(P!==0||1/P===1/be)||P!==P&&be!==be}var xe=typeof Object.is=="function"?Object.is:oe,te=u.useSyncExternalStore,ae=W.useRef,D=W.useEffect,ee=W.useMemo,fe=W.useDebugValue;ue.useSyncExternalStoreWithSelector=function(P,be,Z,Q,ie){var he=ae(null);if(he.current===null){var ve={hasValue:!1,value:null};he.current=ve}else ve=he.current;he=ee(function(){function rt(Qe){if(!K){if(K=!0,St=Qe,Qe=Q(Qe),ie!==void 0&&ve.hasValue){var It=ve.value;if(ie(It,Qe))return Se=It}return Se=Qe}if(It=Se,xe(St,Qe))return It;var yt=Q(Qe);return ie!==void 0&&ie(It,yt)?It:(St=Qe,Se=yt)}var K=!1,St,Se,He=Z===void 0?null:Z;return[function(){return rt(be())},He===null?void 0:function(){return rt(He())}]},[be,Z,Q,ie]);var Je=te(P,he[0],he[1]);return D(function(){ve.hasValue=!0,ve.value=Je},[Je]),fe(Je),Je}},4361:(gt,ue,q)=>{"use strict";gt.exports=q(1771)},1942:(gt,ue,q)=>{"use strict";gt.exports=q(6165)},5106:(gt,ue,q)=>{"use strict";q.d(ue,{gr:()=>P,iK:()=>Z});var W=q(7924);const u=Q=>Q.method!==void 0&&Q.method==="call",oe=Q=>Q.error===null&&typeof Q.id=="number",xe=Q=>{const ie=new Map([[0,()=>{}]]),he=new Map([[0,()=>{}]]),ve=new Map,Je=new Worker(Q);return Je.addEventListener("message",({data:He})=>{if(u(He)){const{params:{timerId:Qe,timerType:It}}=He;if(It==="interval"){const yt=ie.get(Qe);if(typeof yt=="number"){const Ut=ve.get(yt);if(Ut===void 0||Ut.timerId!==Qe||Ut.timerType!==It)throw new Error("The timer is in an undefined state.")}else if(typeof yt<"u")yt();else throw new Error("The timer is in an undefined state.")}else if(It==="timeout"){const yt=he.get(Qe);if(typeof yt=="number"){const Ut=ve.get(yt);if(Ut===void 0||Ut.timerId!==Qe||Ut.timerType!==It)throw new Error("The timer is in an undefined state.")}else if(typeof yt<"u")yt(),he.delete(Qe);else throw new Error("The timer is in an undefined state.")}}else if(oe(He)){const{id:Qe}=He,It=ve.get(Qe);if(It===void 0)throw new Error("The timer is in an undefined state.");const{timerId:yt,timerType:Ut}=It;ve.delete(Qe),Ut==="interval"?ie.delete(yt):he.delete(yt)}else{const{error:{message:Qe}}=He;throw new Error(Qe)}}),{clearInterval:He=>{const Qe=(0,W.generateUniqueNumber)(ve);ve.set(Qe,{timerId:He,timerType:"interval"}),ie.set(He,Qe),Je.postMessage({id:Qe,method:"clear",params:{timerId:He,timerType:"interval"}})},clearTimeout:He=>{const Qe=(0,W.generateUniqueNumber)(ve);ve.set(Qe,{timerId:He,timerType:"timeout"}),he.set(He,Qe),Je.postMessage({id:Qe,method:"clear",params:{timerId:He,timerType:"timeout"}})},setInterval:(He,Qe)=>{const It=(0,W.generateUniqueNumber)(ie);return ie.set(It,()=>{He(),typeof ie.get(It)=="function"&&Je.postMessage({id:null,method:"set",params:{delay:Qe,now:performance.now(),timerId:It,timerType:"interval"}})}),Je.postMessage({id:null,method:"set",params:{delay:Qe,now:performance.now(),timerId:It,timerType:"interval"}}),It},setTimeout:(He,Qe)=>{const It=(0,W.generateUniqueNumber)(he);return he.set(It,He),Je.postMessage({id:null,method:"set",params:{delay:Qe,now:performance.now(),timerId:It,timerType:"timeout"}}),It}}};let te=null;const ee=((Q,ie)=>()=>{if(te!==null)return te;const he=new Blob([ie],{type:"application/javascript; charset=utf-8"}),ve=URL.createObjectURL(he);return te=Q(ve),te.setTimeout(()=>URL.revokeObjectURL(ve),0),te})(xe,`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`),fe=Q=>ee().clearInterval(Q),P=Q=>ee().clearTimeout(Q),be=(Q,ie)=>ee().setInterval(Q,ie),Z=(Q,ie)=>ee().setTimeout(Q,ie)},5836:(gt,ue,q)=>{"use strict";q.d(ue,{Dr:()=>cee});var W={};q.r(W),q.d(W,{directoryOpen:()=>v5,directoryOpenLegacy:()=>Nc,directoryOpenModern:()=>$c,fileOpen:()=>U0,fileOpenLegacy:()=>Hc,fileOpenModern:()=>Oc,fileSave:()=>Mc,fileSaveLegacy:()=>Vc,fileSaveModern:()=>Fc,supported:()=>ea});var u=q(8160),oe=Object.defineProperty,xe=(e,t,r)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,te=(e,t,r)=>(xe(e,typeof t!="symbol"?t+"":t,r),r),ae=class{static clamp(e,t,r){return Math.max(t,typeof r<"u"?Math.min(e,r):e)}static clampV(e,t,r){return e.map(i=>r?ae.clamp(i,t,r):ae.clamp(i,t))}static cross(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}static snap(e,t=1){return[Math.round(e[0]/t)*t,Math.round(e[1]/t)*t]}},D=ae;te(D,"neg",e=>[-e[0],-e[1]]),te(D,"add",(e,t)=>[e[0]+t[0],e[1]+t[1]]),te(D,"addScalar",(e,t)=>[e[0]+t,e[1]+t]),te(D,"sub",(e,t)=>[e[0]-t[0],e[1]-t[1]]),te(D,"subScalar",(e,t)=>[e[0]-t,e[1]-t]),te(D,"vec",(e,t)=>[t[0]-e[0],t[1]-e[1]]),te(D,"mul",(e,t)=>[e[0]*t,e[1]*t]),te(D,"mulV",(e,t)=>[e[0]*t[0],e[1]*t[1]]),te(D,"div",(e,t)=>[e[0]/t,e[1]/t]),te(D,"divV",(e,t)=>[e[0]/t[0],e[1]/t[1]]),te(D,"per",e=>[e[1],-e[0]]),te(D,"dpr",(e,t)=>e[0]*t[0]+e[1]*t[1]),te(D,"cpr",(e,t)=>e[0]*t[1]-t[0]*e[1]),te(D,"len2",e=>e[0]*e[0]+e[1]*e[1]),te(D,"len",e=>Math.hypot(e[0],e[1])),te(D,"pry",(e,t)=>ae.dpr(e,t)/ae.len(t)),te(D,"uni",e=>ae.div(e,ae.len(e))),te(D,"normalize",e=>ae.uni(e)),te(D,"tangent",(e,t)=>ae.uni(ae.sub(e,t))),te(D,"dist2",(e,t)=>ae.len2(ae.sub(e,t))),te(D,"dist",(e,t)=>Math.hypot(e[1]-t[1],e[0]-t[0])),te(D,"fastDist",(e,t)=>{let r=[t[0]-e[0],t[1]-e[1]],i=[Math.abs(r[0]),Math.abs(r[1])],s=1/Math.max(i[0],i[1]);return s=s*(1.29289-(i[0]+i[1])*s*.29289),[r[0]*s,r[1]*s]}),te(D,"ang",(e,t)=>Math.atan2(ae.cpr(e,t),ae.dpr(e,t))),te(D,"angle",(e,t)=>Math.atan2(t[1]-e[1],t[0]-e[0])),te(D,"med",(e,t)=>ae.mul(ae.add(e,t),.5)),te(D,"rot",(e,t=0)=>[e[0]*Math.cos(t)-e[1]*Math.sin(t),e[0]*Math.sin(t)+e[1]*Math.cos(t)]),te(D,"rotWith",(e,t,r=0)=>{if(r===0)return e;let i=Math.sin(r),s=Math.cos(r),l=e[0]-t[0],h=e[1]-t[1],g=l*s-h*i,f=l*i+h*s;return[g+t[0],f+t[1]]}),te(D,"isEqual",(e,t)=>e[0]===t[0]&&e[1]===t[1]),te(D,"lrp",(e,t,r)=>ae.add(e,ae.mul(ae.sub(t,e),r))),te(D,"int",(e,t,r,i,s=1)=>{let l=(ae.clamp(r,i)-r)/(i-r);return ae.add(ae.mul(e,1-l),ae.mul(t,s))}),te(D,"ang3",(e,t,r)=>{let i=ae.vec(t,e),s=ae.vec(t,r);return ae.ang(i,s)}),te(D,"abs",e=>[Math.abs(e[0]),Math.abs(e[1])]),te(D,"rescale",(e,t)=>{let r=ae.len(e);return[t*e[0]/r,t*e[1]/r]}),te(D,"isLeft",(e,t,r)=>(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])),te(D,"clockwise",(e,t,r)=>ae.isLeft(e,t,r)>0),te(D,"toFixed",e=>e.map(t=>Math.round(t*100)/100)),te(D,"nearestPointOnLineThroughPoint",(e,t,r)=>ae.add(e,ae.mul(t,ae.pry(ae.sub(r,e),t)))),te(D,"distanceToLineThroughPoint",(e,t,r)=>ae.dist(r,ae.nearestPointOnLineThroughPoint(e,t,r))),te(D,"nearestPointOnLineSegment",(e,t,r,i=!0)=>{let s=ae.uni(ae.sub(t,e)),l=ae.add(e,ae.mul(s,ae.pry(ae.sub(r,e),s)));if(i){if(l[0]<Math.min(e[0],t[0]))return e[0]<t[0]?e:t;if(l[0]>Math.max(e[0],t[0]))return e[0]>t[0]?e:t;if(l[1]<Math.min(e[1],t[1]))return e[1]<t[1]?e:t;if(l[1]>Math.max(e[1],t[1]))return e[1]>t[1]?e:t}return l}),te(D,"distanceToLineSegment",(e,t,r,i=!0)=>ae.dist(r,ae.nearestPointOnLineSegment(e,t,r,i))),te(D,"nearestPointOnBounds",(e,t)=>[ae.clamp(t[0],e.minX,e.maxX),ae.clamp(t[1],e.minY,e.maxY)]),te(D,"distanceToBounds",(e,t)=>ae.dist(t,ae.nearestPointOnBounds(e,t))),te(D,"nudge",(e,t,r)=>ae.isEqual(e,t)?e:ae.add(e,ae.mul(ae.uni(ae.sub(t,e)),r))),te(D,"nudgeAtAngle",(e,t,r)=>[Math.cos(t)*r+e[0],Math.sin(t)*r+e[1]]),te(D,"toPrecision",(e,t=4)=>[+e[0].toPrecision(t),+e[1].toPrecision(t)]),te(D,"pointsBetween",(e,t,r=6)=>Array.from(Array(r)).map((i,s)=>{let l=s/(r-1),h=Math.min(1,.5+Math.abs(.5-l));return[...ae.lrp(e,t,l),h]})),te(D,"slope",(e,t)=>e[0]===t[0]?NaN:(e[1]-t[1])/(e[0]-t[0])),te(D,"max",(...e)=>[Math.max(...e.map(t=>t[0])),Math.max(...e.map(t=>t[1]))]),te(D,"min",(...e)=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1]))]);var ee=D;function fe(e,t,r){return Math.max(t,Math.min(e,r))}const P={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function be(e,t,r){return t===0||Math.abs(t)===1/0?Math.pow(e,r*5):e*t*r/(t+r*e)}function Z(e,t,r,i=.15){return i===0?fe(e,t,r):e<t?-be(t-e,r-t,i)+t:e>r?+be(e-r,r-t,i)+r:e}function Q(e,[t,r],[i,s]){const[[l,h],[g,f]]=e;return[Z(t,l,h,i),Z(r,g,f,s)]}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?he(Object(r),!0).forEach(function(i){ie(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}const Je={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function rt(e){return e?e[0].toUpperCase()+e.slice(1):""}const K=["enter","leave"];function St(e=!1,t){return e&&!K.includes(t)}function Se(e,t="",r=!1){const i=Je[e],s=i&&i[t]||t;return"on"+rt(e)+rt(s)+(St(r,s)?"Capture":"")}const He=["gotpointercapture","lostpointercapture"];function Qe(e){let t=e.substring(2).toLowerCase();const r=!!~t.indexOf("passive");r&&(t=t.replace("passive",""));const i=He.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(i);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:r}}function It(e,t=""){const r=Je[e],i=r&&r[t]||t;return e+i}function yt(e){return"touches"in e}function Ut(e){return yt(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function wt(e){return Array.from(e.touches).filter(t=>{var r,i;return t.target===e.currentTarget||((r=e.currentTarget)===null||r===void 0||(i=r.contains)===null||i===void 0?void 0:i.call(r,t.target))})}function we(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function De(e){return yt(e)?we(e)[0]:e}function Ze(e,t){const r=t.clientX-e.clientX,i=t.clientY-e.clientY,s=(t.clientX+e.clientX)/2,l=(t.clientY+e.clientY)/2,h=Math.hypot(r,i);return{angle:-(Math.atan2(r,i)*180)/Math.PI,distance:h,origin:[s,l]}}function Ht(e){return wt(e).map(t=>t.identifier)}function Le(e,t){const[r,i]=Array.from(e.touches).filter(s=>t.includes(s.identifier));return Ze(r,i)}function Fe(e){const t=De(e);return yt(e)?t.identifier:t.pointerId}function at(e){const t=De(e);return[t.clientX,t.clientY]}const Ae=40,$t=800;function Zt(e){let{deltaX:t,deltaY:r,deltaMode:i}=e;return i===1?(t*=Ae,r*=Ae):i===2&&(t*=$t,r*=$t),[t,r]}function pe(e){var t,r;const{scrollX:i,scrollY:s,scrollLeft:l,scrollTop:h}=e.currentTarget;return[(t=i??l)!==null&&t!==void 0?t:0,(r=s??h)!==null&&r!==void 0?r:0]}function Pe(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:r,altKey:i,metaKey:s,ctrlKey:l}=e;Object.assign(t,{shiftKey:r,altKey:i,metaKey:s,ctrlKey:l})}return t}function je(e,...t){return typeof e=="function"?e(...t):e}function Ue(){}function Xe(...e){return e.length===0?Ue:e.length===1?e[0]:function(){let t;for(const r of e)t=r.apply(this,arguments)||t;return t}}function dt(e,t){return Object.assign({},t,e||{})}const ht=32;class Pt{constructor(t,r,i){this.ctrl=t,this.args=r,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:r,ingKey:i,args:s}=this;r[i]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=s,t.axis=void 0,t.memo=void 0,t.elapsedTime=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const r=this.state,i=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=t.target,r.currentTarget=t.currentTarget,r.lastOffset=i.from?je(i.from,r):r.offset,r.offset=r.lastOffset),r.startTime=r.timeStamp=t.timeStamp}computeValues(t){const r=this.state;r._values=t,r.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:r,config:i,shared:s}=this;r.args=this.args;let l=0;if(t&&(r.event=t,i.preventDefault&&t.cancelable&&r.event.preventDefault(),r.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,Pe(t)),s.down=s.pressed=s.buttons%2===1||s.touches>0,l=t.timeStamp-r.timeStamp,r.timeStamp=t.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const ne=r._delta.map(Math.abs);P.addTo(r._distance,ne)}this.axisIntent&&this.axisIntent(t);const[h,g]=r._movement,[f,C]=i.threshold,{_step:y,values:b}=r;if(i.hasCustomTransform?(y[0]===!1&&(y[0]=Math.abs(h)>=f&&b[0]),y[1]===!1&&(y[1]=Math.abs(g)>=C&&b[1])):(y[0]===!1&&(y[0]=Math.abs(h)>=f&&Math.sign(h)*f),y[1]===!1&&(y[1]=Math.abs(g)>=C&&Math.sign(g)*C)),r.intentional=y[0]!==!1||y[1]!==!1,!r.intentional)return;const R=[0,0];if(i.hasCustomTransform){const[ne,le]=b;R[0]=y[0]!==!1?ne-y[0]:0,R[1]=y[1]!==!1?le-y[1]:0}else R[0]=y[0]!==!1?h-y[0]:0,R[1]=y[1]!==!1?g-y[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(R);const k=r.offset,A=r._active&&!r._blocked||r.active;A&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=s[this.ingKey]=r._active,t&&(r.first&&("bounds"in i&&(r._bounds=je(i.bounds,r)),this.setup&&this.setup()),r.movement=R,this.computeOffset()));const[O,B]=r.offset,[[F,j],[J,ce]]=r._bounds;r.overflow=[O<F?-1:O>j?1:0,B<J?-1:B>ce?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const re=r._active?i.rubberband||[0,0]:[0,0];if(r.offset=Q(r._bounds,r.offset,re),r.delta=P.sub(r.offset,k),this.computeMovement(),A&&(!r.last||l>ht)){r.delta=P.sub(r.offset,k);const ne=r.delta.map(Math.abs);P.addTo(r.distance,ne),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&l>0&&(r.velocity=[ne[0]/l,ne[1]/l])}}emit(){const t=this.state,r=this.shared,i=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!i.triggerAllEvents)return;const s=this.handler(ve(ve(ve({},r),t),{},{[this.aliasKey]:t.values}));s!==void 0&&(t.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function jt([e,t],r){const i=Math.abs(e),s=Math.abs(t);if(i>s&&i>r)return"x";if(s>i&&s>r)return"y"}class Lr extends Pt{constructor(...t){super(...t),ie(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=P.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=P.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const r=this.state,i=this.config;if(!r.axis&&t){const s=typeof i.axisThreshold=="object"?i.axisThreshold[Ut(t)]:i.axisThreshold;r.axis=jt(r._movement,s)}r._blocked=(i.lockDirection||!!i.axis)&&!r.axis||!!i.axis&&i.axis!==r.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const dr=e=>e,Rr=.15,Jr={enabled(e=!0){return e},eventOptions(e,t,r){return ve(ve({},r.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[Rr,Rr];case!1:return[0,0];default:return P.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return P.toVector(e)},transform(e,t,r){const i=e||r.shared.transform;return this.hasCustomTransform=!!i,i||dr},threshold(e){return P.toVector(e,0)}},Qr=0,Tt=ve(ve({},Jr),{},{axis(e,t,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(e=Qr){return e},bounds(e={}){if(typeof e=="function")return l=>Tt.bounds(e(l));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:r=1/0,top:i=-1/0,bottom:s=1/0}=e;return[[t,r],[i,s]]}}),Kt=10,Yt={ArrowRight:(e=1)=>[Kt*e,0],ArrowLeft:(e=1)=>[-Kt*e,0],ArrowUp:(e=1)=>[0,-Kt*e],ArrowDown:(e=1)=>[0,Kt*e]};class Qt extends Lr{constructor(...t){super(...t),ie(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const r=t._bounds.getBoundingClientRect(),i=t.currentTarget.getBoundingClientRect(),s={left:r.left-i.left+t.offset[0],right:r.right-i.right+t.offset[0],top:r.top-i.top+t.offset[1],bottom:r.bottom-i.bottom+t.offset[1]};t._bounds=Tt.bounds(s)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const r=this.config,i=this.state;if(t.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(t.buttons):r.pointerButtons!==-1&&r.pointerButtons!==t.buttons))return;const s=this.ctrl.setEventIds(t);r.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(s&&s.size>1&&i._pointerActive)&&(this.start(t),this.setupPointer(t),i._pointerId=Fe(t),i._pointerActive=!0,this.computeValues(at(t)),this.computeInitial(),r.preventScrollAxis&&Ut(t)!=="mouse"?(i._active=!1,this.setupScrollPrevention(t)):r.delay>0?(this.setupDelayTrigger(t),r.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const r=this.state,i=this.config;if(!r._pointerActive||r.type===t.type&&t.timeStamp===r.timeStamp)return;const s=Fe(t);if(r._pointerId!==void 0&&s!==r._pointerId)return;const l=at(t);if(document.pointerLockElement===t.target?r._delta=[t.movementX,t.movementY]:(r._delta=P.sub(l,r._values),this.computeValues(l)),P.addTo(r._movement,r._delta),this.compute(t),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(t);return}if(i.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const r=this.state,i=this.config;if(!r._active||!r._pointerActive)return;const s=Fe(t);if(r._pointerId!==void 0&&s!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[l,h]=r._distance;if(r.tap=l<=i.tapsThreshold&&h<=i.tapsThreshold,r.tap&&i.filterTaps)r._force=!0;else{const[g,f]=r.direction,[C,y]=r.velocity,[b,R]=r.movement,[k,A]=i.swipe.velocity,[O,B]=i.swipe.distance,F=i.swipe.duration;r.elapsedTime<F&&(Math.abs(C)>k&&Math.abs(b)>O&&(r.swipe[0]=g),Math.abs(y)>A&&Math.abs(R)>B&&(r.swipe[1]=f))}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const r=this.config,i=r.device;r.pointerLock&&t.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,Nr(t);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const r=Yt[t.key];if(r){const i=this.state,s=t.shiftKey?10:t.altKey?.1:1;this.start(t),i._delta=r(s),i._keyboardActive=!0,P.addTo(i._movement,i._delta),this.compute(t),this.emit()}}keyUp(t){t.key in Yt&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const r=this.config.device;t(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(r,"change",this.pointerMove.bind(this)),t(r,"end",this.pointerUp.bind(this)),t(r,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Nr(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const yr=typeof window<"u"&&window.document&&window.document.createElement;function vr(){return yr&&"ontouchstart"in window}function nn(){return vr()||yr&&window.navigator.maxTouchPoints>1}function Xr(){return yr&&"onpointerdown"in window}function en(){return yr&&"exitPointerLock"in window.document}function on(){try{return"constructor"in GestureEvent}catch{return!1}}const lr={isBrowser:yr,gesture:on(),touch:nn(),touchscreen:nn(),pointer:Xr(),pointerLock:en()},zt=250,zr=180,Vr=.5,wn=50,bi=250,Ln={mouse:0,touch:0,pen:8},Ir=ve(ve({},Tt),{},{device(e,t,{pointer:{touch:r=!1,lock:i=!1,mouse:s=!1}={}}){return this.pointerLock=i&&lr.pointerLock,lr.touch&&r?"touch":this.pointerLock?"mouse":lr.pointer&&!s?"pointer":lr.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&e?zt:void 0,!(!lr.touchscreen||r===!1))return e||(r!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:r=!0,buttons:i=1}={}}){return this.pointerButtons=i,!this.pointerLock&&this.device==="pointer"&&r},keys(e=!0){return e},threshold(e,t,{filterTaps:r=!1,tapsThreshold:i=3,axis:s=void 0}){const l=P.toVector(e,r?i:s?1:0);return this.filterTaps=r,this.tapsThreshold=i,l},swipe({velocity:e=Vr,distance:t=wn,duration:r=bi}={}){return{velocity:this.transform(P.toVector(e)),distance:this.transform(P.toVector(t)),duration:r}},delay(e=0){switch(e){case!0:return zr;case!1:return 0;default:return e}},axisThreshold(e){return e?ve(ve({},Ln),e):Ln}}),Pn=30,Mt=100;class _o extends Pt{constructor(...t){super(...t),ie(this,"ingKey","pinching"),ie(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:r,lastOffset:i}=this.state;t==="wheel"?this.state.offset=P.add(r,i):this.state.offset=[(1+r[0])*i[0],r[1]+i[1]]}computeMovement(){const{offset:t,lastOffset:r}=this.state;this.state.movement=[t[0]/r[0],t[1]-r[1]]}axisIntent(){const t=this.state,[r,i]=t._movement;if(!t.axis){const s=Math.abs(r)*Pn-Math.abs(i);s<0?t.axis="angle":s>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const r=this.state,i=this.ctrl.touchIds;if(r._active&&r._touchIds.every(l=>i.has(l))||i.size<2)return;this.start(t),r._touchIds=Array.from(i).slice(0,2);const s=Le(t,r._touchIds);this.pinchStart(t,s)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const r=this.state,i=r._pointerEvents,s=this.ctrl.pointerIds;if(r._active&&Array.from(i.keys()).every(h=>s.has(h))||(i.size<2&&i.set(t.pointerId,t),r._pointerEvents.size<2))return;this.start(t);const l=Ze(...Array.from(i.values()));this.pinchStart(t,l)}pinchStart(t,r){const i=this.state;i.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const r=Le(t,this.state._touchIds);this.pinchMove(t,r)}pointerMove(t){const r=this.state._pointerEvents;if(r.has(t.pointerId)&&r.set(t.pointerId,t),!this.state._active)return;const i=Ze(...Array.from(r.values()));this.pinchMove(t,i)}pinchMove(t,r){const i=this.state,s=i._values[1],l=r.angle-s;let h=0;Math.abs(l)>270&&(h+=Math.sign(l)),this.computeValues([r.distance,r.angle-360*h]),i.origin=r.origin,i.turns=h,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),!!this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const r=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}r._pointerEvents.has(t.pointerId)&&r._pointerEvents.delete(t.pointerId),!!r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const r=this.state;r._active||(this.start(t),this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY];const i=r._movement;r._movement=[t.scale-1,t.rotation],r._delta=P.sub(r._movement,i),this.compute(t),this.emit()}gestureEnd(t){!this.state._active||(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const r=this.config.modifierKey;r&&!t[r]||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const i=this.state;i._delta=[-Zt(t)[1]/Mt*i.offset[0],0],P.addTo(i._movement,i._delta),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(t){const r=this.config.device;r&&(t(r,"start",this[r+"Start"].bind(this)),t(r,"change",this[r+"Move"].bind(this)),t(r,"end",this[r+"End"].bind(this)),t(r,"cancel",this[r+"End"].bind(this))),t("wheel","",this.wheel.bind(this),{passive:!1})}}const xi=ve(ve({},Jr),{},{device(e,t,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!lr.touch&&lr.gesture)return"gesture";if(lr.touch&&i)return"touch";if(lr.touchscreen){if(lr.pointer)return"pointer";if(lr.touch)return"touch"}},bounds(e,t,{scaleBounds:r={},angleBounds:i={}}){const s=h=>{const g=dt(je(r,h),{min:-1/0,max:1/0});return[g.min,g.max]},l=h=>{const g=dt(je(i,h),{min:-1/0,max:1/0});return[g.min,g.max]};return typeof r!="function"&&typeof i!="function"?[s(),l()]:h=>[s(h),l(h)]},threshold(e,t,r){return this.lockDirection=r.axis==="lock",P.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e}});class er extends Lr{constructor(...t){super(...t),ie(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(at(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const r=at(t),i=this.state;i._delta=P.sub(r,i._values),P.addTo(i._movement,i._delta),this.computeValues(r),this.compute(t),this.emit()}moveEnd(t){!this.state._active||(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const ts=ve(ve({},Tt),{},{mouseOnly:(e=!0)=>e});class So extends Lr{constructor(...t){super(...t),ie(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const r=this.state,i=pe(t);r._delta=P.sub(i,r._values),P.addTo(r._movement,r._delta),this.computeValues(i),this.compute(t),this.emit()}scrollEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const Lo=Tt;class Bi extends Lr{constructor(...t){super(...t),ie(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const r=this.state;r._delta=Zt(t),P.addTo(r._movement,r._delta);const[i,s]=r.overflow,[l,h]=r._delta,[g,f]=r._direction;(i<0&&l>0&&g<0||i>0&&l<0&&g>0)&&(r._movement[0]=r._movementBound[0]),(s<0&&h>0&&f<0||s>0&&h<0&&f>0)&&(r._movement[1]=r._movementBound[1]),this.compute(t),this.emit()}wheelEnd(){!this.state._active||(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const Fn=Tt;class $i extends Lr{constructor(...t){super(...t),ie(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(at(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const i=at(t);r._movement=r._delta=P.sub(i,r._values),this.computeValues(i),this.compute(t),r.delta=r.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const Ro=ve(ve({},Tt),{},{mouseOnly:(e=!0)=>e}),Rn=new Map,Io=new Map;function Jn(e){Rn.set(e.key,e.engine),Io.set(e.key,e.resolver)}const To={key:"drag",engine:Qt,resolver:Ir},rs={key:"hover",engine:$i,resolver:Ro},di={key:"move",engine:er,resolver:ts},Do={key:"pinch",engine:_o,resolver:xi},oo={key:"scroll",engine:So,resolver:Lo},Ao={key:"wheel",engine:Bi,resolver:Fn};function ko(e,t){if(e==null)return{};var r={},i=Object.keys(e),s,l;for(l=0;l<i.length;l++)s=i[l],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Fi(e,t){if(e==null)return{};var r=ko(e,t),i,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)i=l[s],!(t.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,i)||(r[i]=e[i]))}return r}const ns={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=lr.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},Hi=["target","eventOptions","window","enabled","transform"];function Hn(e={},t){const r={};for(const[i,s]of Object.entries(t))switch(typeof s){case"function":r[i]=s.call(r,e[i],i,e);break;case"object":r[i]=Hn(e[i],s);break;case"boolean":s&&(r[i]=e[i]);break}return r}function Ni(e,t,r={}){const i=e,{target:s,eventOptions:l,window:h,enabled:g,transform:f}=i,C=Fi(i,Hi);if(r.shared=Hn({target:s,eventOptions:l,window:h,enabled:g,transform:f},ns),t){const y=Io.get(t);r[t]=Hn(ve({shared:r.shared},C),y)}else for(const y in C){const b=Io.get(y);b&&(r[y]=Hn(ve({shared:r.shared},C[y]),b))}return r}class so{constructor(t,r){ie(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=r}add(t,r,i,s,l){const h=this._listeners,g=It(r,i),f=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},C=ve(ve({},f),l);t.addEventListener(g,s,C);const y=()=>{t.removeEventListener(g,s,C),h.delete(y)};return h.add(y),y}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class ao{constructor(){ie(this,"_timeouts",new Map)}add(t,r,i=140,...s){this.remove(t),this._timeouts.set(t,window.setTimeout(r,i,...s))}remove(t){const r=this._timeouts.get(t);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class sn{constructor(t){ie(this,"gestures",new Set),ie(this,"_targetEventStore",new so(this)),ie(this,"gestureEventStores",{}),ie(this,"gestureTimeoutStores",{}),ie(this,"handlers",{}),ie(this,"config",{}),ie(this,"pointerIds",new Set),ie(this,"touchIds",new Set),ie(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Me(this,t)}setEventIds(t){if(yt(t))return this.touchIds=new Set(Ht(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,r){this.handlers=t,this.nativeHandlers=r}applyConfig(t,r){this.config=Ni(t,r,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const r=this.config.shared,i={};let s;if(!(r.target&&(s=r.target(),!s))){if(r.enabled){for(const h of this.gestures){const g=this.config[h],f=Ne(i,g.eventOptions,!!s);if(g.enabled){const C=Rn.get(h);new C(this,t,h).bind(f)}}const l=Ne(i,r.eventOptions,!!s);for(const h in this.nativeHandlers)l(h,"",g=>this.nativeHandlers[h](ve(ve({},this.state.shared),{},{event:g,args:t})),void 0,!0)}for(const l in i)i[l]=Xe(...i[l]);if(!s)return i;for(const l in i){const{device:h,capture:g,passive:f}=Qe(l);this._targetEventStore.add(s,h,"",i[l],{capture:g,passive:f})}}}}function ge(e,t){e.gestures.add(t),e.gestureEventStores[t]=new so(e,t),e.gestureTimeoutStores[t]=new ao}function Me(e,t){t.drag&&ge(e,"drag"),t.wheel&&ge(e,"wheel"),t.scroll&&ge(e,"scroll"),t.move&&ge(e,"move"),t.pinch&&ge(e,"pinch"),t.hover&&ge(e,"hover")}const Ne=(e,t,r)=>(i,s,l,h={},g=!1)=>{var f,C;const y=(f=h.capture)!==null&&f!==void 0?f:t.capture,b=(C=h.passive)!==null&&C!==void 0?C:t.passive;let R=g?i:Se(i,s,y);r&&b&&(R+="Passive"),e[R]=e[R]||[],e[R].push(l)},Te=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function ze(e){const t={},r={},i=new Set;for(let s in e)Te.test(s)?(i.add(RegExp.lastMatch),r[s]=e[s]):t[s]=e[s];return[r,t,i]}function We(e,t,r,i,s,l){if(!e.has(r)||!Rn.has(i))return;const h=r+"Start",g=r+"End",f=C=>{let y;return C.first&&h in t&&t[h](C),r in t&&(y=t[r](C)),C.last&&g in t&&t[g](C),y};s[i]=f,l[i]=l[i]||{}}function mt(e,t){const[r,i,s]=ze(e),l={};return We(s,r,"onDrag","drag",l,t),We(s,r,"onWheel","wheel",l,t),We(s,r,"onScroll","scroll",l,t),We(s,r,"onPinch","pinch",l,t),We(s,r,"onMove","move",l,t),We(s,r,"onHover","hover",l,t),{handlers:l,config:t,nativeHandlers:i}}function tt(e,t={},r,i){const s=u.useMemo(()=>new sn(e),[]);if(s.applyHandlers(e,i),s.applyConfig(t,r),u.useEffect(s.effect.bind(s)),u.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function xt(e,t){return registerAction(dragAction),tt({drag:e},t||{},"drag")}function Lt(e,t){return registerAction(pinchAction),tt({pinch:e},t||{},"pinch")}function Rt(e,t){return registerAction(wheelAction),tt({wheel:e},t||{},"wheel")}function Et(e,t){return registerAction(scrollAction),tt({scroll:e},t||{},"scroll")}function vt(e,t){return registerAction(moveAction),tt({move:e},t||{},"move")}function ur(e,t){return registerAction(hoverAction),tt({hover:e},t||{},"hover")}function hr(e){return e.forEach(Jn),function(r,i){const{handlers:s,nativeHandlers:l,config:h}=mt(r,i||{});return tt(s,h,void 0,l)}}function jr(e,t){return hr([To,Do,oo,Ao,di,rs])(e,t||{})}function Mr(e,t,r,i=s=>s){return e*i(.5-t*(.5-r))}function Or(e){return[-e[0],-e[1]]}function wr(e,t){return[e[0]+t[0],e[1]+t[1]]}function Br(e,t){return[e[0]-t[0],e[1]-t[1]]}function At(e,t){return[e[0]*t,e[1]*t]}function bt(e,t){return[e[0]/t,e[1]/t]}function mr(e){return[e[1],-e[0]]}function an(e,t){return e[0]*t[0]+e[1]*t[1]}function bn(e,t){return e[0]===t[0]&&e[1]===t[1]}function hi(e){return Math.hypot(e[0],e[1])}function lo(e){return e[0]*e[0]+e[1]*e[1]}function Qn(e,t){return lo(Br(e,t))}function Vi(e){return bt(e,hi(e))}function is(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function _i(e,t,r){let i=Math.sin(r),s=Math.cos(r),l=e[0]-t[0],h=e[1]-t[1],g=l*s-h*i,f=l*i+h*s;return[g+t[0],f+t[1]]}function xn(e,t,r){return wr(e,At(Br(t,e),r))}function Ds(e,t,r){return wr(e,At(t,r))}var{min:fi,PI:Po}=Math,Mo=.275,uo=Po+1e-4;function os(e,t={}){let{size:r=16,smoothing:i=.5,thinning:s=.5,simulatePressure:l=!0,easing:h=Ge=>Ge,start:g={},end:f={},last:C=!1}=t,{cap:y=!0,easing:b=Ge=>Ge*(2-Ge)}=g,{cap:R=!0,easing:k=Ge=>--Ge*Ge*Ge+1}=f;if(e.length===0||r<=0)return[];let A=e[e.length-1].runningLength,O=g.taper===!1?0:g.taper===!0?Math.max(r,A):g.taper,B=f.taper===!1?0:f.taper===!0?Math.max(r,A):f.taper,F=Math.pow(r*i,2),j=[],J=[],ce=e.slice(0,10).reduce((Ge,Gt)=>{let Jt=Gt.pressure;if(l){let nr=fi(1,Gt.distance/r),kn=fi(1,1-nr);Jt=fi(1,Ge+(kn-Ge)*(nr*Mo))}return(Ge+Jt)/2},e[0].pressure),re=Mr(r,s,e[e.length-1].pressure,h),ne,le=e[0].vector,me=e[0].point,Ve=me,lt=me,Ye=Ve,ct=!1;for(let Ge=0;Ge<e.length;Ge++){let{pressure:Gt}=e[Ge],{point:Jt,vector:nr,distance:kn,runningLength:cr}=e[Ge];if(Ge<e.length-1&&A-cr<3)continue;if(s){if(l){let no=fi(1,kn/r),sa=fi(1,1-no);Gt=fi(1,ce+(sa-ce)*(no*Mo))}re=Mr(r,s,Gt,h)}else re=r/2;ne===void 0&&(ne=re);let qn=cr<O?b(cr/O):1,vn=A-cr<B?k((A-cr)/B):1;re=Math.max(.01,re*Math.min(qn,vn));let yn=(Ge<e.length-1?e[Ge+1]:e[Ge]).vector,ci=Ge<e.length-1?an(nr,yn):1,xo=an(nr,le)<0&&!ct,Ts=ci!==null&&ci<0;if(xo||Ts){let no=At(mr(le),re);for(let sa=1/13,aa=0;aa<=1;aa+=sa)lt=_i(Br(Jt,no),Jt,uo*aa),j.push(lt),Ye=_i(wr(Jt,no),Jt,uo*-aa),J.push(Ye);me=lt,Ve=Ye,Ts&&(ct=!0);continue}if(ct=!1,Ge===e.length-1){let no=At(mr(nr),re);j.push(Br(Jt,no)),J.push(wr(Jt,no));continue}let Ll=At(mr(xn(yn,nr,ci)),re);lt=Br(Jt,Ll),(Ge<=1||Qn(me,lt)>F)&&(j.push(lt),me=lt),Ye=wr(Jt,Ll),(Ge<=1||Qn(Ve,Ye)>F)&&(J.push(Ye),Ve=Ye),ce=Gt,le=nr}let pt=e[0].point.slice(0,2),tr=e.length>1?e[e.length-1].point.slice(0,2):wr(e[0].point,[1,1]),qt=[],_r=[];if(e.length===1){if(!(O||B)||C){let Ge=Ds(pt,Vi(mr(Br(pt,tr))),-(ne||re)),Gt=[];for(let Jt=1/13,nr=Jt;nr<=1;nr+=Jt)Gt.push(_i(Ge,pt,uo*2*nr));return Gt}}else{if(!(O||B&&e.length===1))if(y)for(let Gt=1/13,Jt=Gt;Jt<=1;Jt+=Gt){let nr=_i(J[0],pt,uo*Jt);qt.push(nr)}else{let Gt=Br(j[0],J[0]),Jt=At(Gt,.5),nr=At(Gt,.51);qt.push(Br(pt,Jt),Br(pt,nr),wr(pt,nr),wr(pt,Jt))}let Ge=mr(Or(e[e.length-1].vector));if(B||O&&e.length===1)_r.push(tr);else if(R){let Gt=Ds(tr,Ge,re);for(let Jt=1/29,nr=Jt;nr<1;nr+=Jt)_r.push(_i(Gt,tr,uo*3*nr))}else _r.push(wr(tr,At(Ge,re)),wr(tr,At(Ge,re*.99)),Br(tr,At(Ge,re*.99)),Br(tr,At(Ge,re)))}return j.concat(_r,J.reverse(),qt)}function ji(e,t={}){var r;let{streamline:i=.5,size:s=16,last:l=!1}=t;if(e.length===0)return[];let h=.15+(1-i)*.85,g=Array.isArray(e[0])?e:e.map(({x:k,y:A,pressure:O=.5})=>[k,A,O]);if(g.length===2){let k=g[1];g=g.slice(0,-1);for(let A=1;A<5;A++)g.push(xn(g[0],k,A/4))}g.length===1&&(g=[...g,[...wr(g[0],[1,1]),...g[0].slice(2)]]);let f=[{point:[g[0][0],g[0][1]],pressure:g[0][2]>=0?g[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],C=!1,y=0,b=f[0],R=g.length-1;for(let k=1;k<g.length;k++){let A=l&&k===R?g[k].slice(0,2):xn(b.point,g[k],h);if(bn(b.point,A))continue;let O=is(A,b.point);if(y+=O,k<R&&!C){if(y<s)continue;C=!0}b={point:A,pressure:g[k][2]>=0?g[k][2]:.5,vector:Vi(Br(b.point,A)),distance:O,runningLength:y},f.push(b)}return f[0].vector=((r=f[1])==null?void 0:r.vector)||[0,0],f}function ss(e,t={}){return os(ji(e,t),t)}var ei=ss,ti=Object.defineProperty,As=Object.defineProperties,Ui=Object.getOwnPropertyDescriptors,Oo=Object.getOwnPropertySymbols,pi=Object.prototype.hasOwnProperty,ua=Object.prototype.propertyIsEnumerable,Bo=(e,t,r)=>t in e?ti(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,as=(e,t)=>{for(var r in t||(t={}))pi.call(t,r)&&Bo(e,r,t[r]);if(Oo)for(var r of Oo(t))ua.call(t,r)&&Bo(e,r,t[r]);return e},ls=(e,t)=>As(e,Ui(t));function ir(e,...t){return{didIntersect:t.length>0,message:e,points:t}}function Nn(e,t,r=0){let i=[e[0]+t[0]/2,e[1]+t[1]/2],s=D.rotWith(e,i,r),l=D.rotWith(D.add(e,[t[0],0]),i,r),h=D.rotWith(D.add(e,t),i,r),g=D.rotWith(D.add(e,[0,t[1]]),i,r);return[["top",[s,l]],["right",[l,h]],["bottom",[h,g]],["left",[g,s]]]}function ca(e,t,r){if(r===e||r===t)return!0;let i=Math.PI*2,s=(t-e+i)%i,l=(r-e+i)%i;return s<=Math.PI!=l>s}function us(e,t){let r=D.slope(e[0],e[1]),i=D.slope(t[0],t[1]);if(r===i)return;if(Number.isNaN(r)&&!Number.isNaN(i))return[e[0][0],(e[0][0]-t[0][0])*i+t[0][1]];if(Number.isNaN(i)&&!Number.isNaN(r))return[t[0][0],(t[0][0]-e[0][0])*r+e[0][1]];let s=(r*e[0][0]-i*t[0][0]+t[0][1]-e[0][1])/(r-i),l=i*(s-t[0][0])+t[0][1];return[s,l]}function da(e,t,r,i){let s=r[0]-e[0],l=r[1]-e[1],h=i[0]*t[1]-i[1]*t[0],g=(l*i[0]-s*i[1])/h,f=(l*t[0]-s*t[1])/h;if(g<0||f<0)return ir("miss");let C=t[1]/t[0],y=i[1]/i[0],b=e[1]-C*e[0],R=(r[1]-y*r[0]-b)/(C-y),k=C*R+b;return Number.isFinite(R)?ir("intersection",[R,k]):ir("parallel")}function Zi(e,t,r,i){let[s,l]=e,[h,g]=t,[f,C]=r,[y,b]=i;if(g/h!==(b-C)/(y-f)){let R=h*(b-C)-g*(y-f);if(R!==0){let k=((l-C)*(y-f)-(s-f)*(b-C))/R,A=((l-C)*h-(s-f)*g)/R;if(k>=0&&A>=0&&A<=1)return ir("intersection",[s+k*h,l+k*g])}}return ir("no intersection")}function zi(e,t,r,i,s=0){return ga(r,i,s,e,t)}function $o(e,t,r,i,s,l){let h=e,g=D.mul(t,999999999);return Vn(h,g,r,i,s,l)}function ri(e,t,r,i=0){let{minX:s,minY:l,width:h,height:g}=r;return zi(e,t,[s,l],[h,g],i)}function ha(e,t,r,i){return Zi(r,i,e,t)}function In(e,t,r,i){let s=D.sub(e,r),l=D.sub(i,r),h=D.sub(t,e),g=l[0]*s[1]-l[1]*s[0],f=h[0]*s[1]-h[1]*s[0],C=l[1]*h[0]-l[0]*h[1];if(g===0||f===0)return ir("coincident");if(C===0)return ir("parallel");if(C!==0){let y=g/C,b=f/C;if(0<=y&&y<=1&&0<=b&&b<=1)return ir("intersection",D.add(e,D.mul(h,y)))}return ir("no intersection")}function fa(e,t,r,i){return fn(r,i,e,t)}function ks(e,t,r,i,s,l){let h=D.angle(r,s),g=D.angle(r,l),f=Bs(r,i,i,0,e,t);if(!f.didIntersect)return ir("no intersection");let C=f.points.filter(y=>ca(h,g,D.angle(r,y)));return C.length===0?ir("no intersection"):ir("intersection",...C)}function Si(e,t,r,i){let s=(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]),l=2*((t[0]-e[0])*(e[0]-r[0])+(t[1]-e[1])*(e[1]-r[1])),h=r[0]*r[0]+r[1]*r[1]+e[0]*e[0]+e[1]*e[1]-2*(r[0]*e[0]+r[1]*e[1])-i*i,g=l*l-4*s*h;if(g<0)return ir("outside");if(g===0)return ir("tangent");let f=Math.sqrt(g),C=(-l+f)/(2*s),y=(-l-f)/(2*s);if((C<0||C>1)&&(y<0||y>1))return C<0&&y<0||C>1&&y>1?ir("outside"):ir("inside");let b=[];return 0<=C&&C<=1&&b.push(D.lrp(e,t,C)),0<=y&&y<=1&&b.push(D.lrp(e,t,y)),ir("intersection",...b)}function Vn(e,t,r,i,s,l=0){if(i===0||s===0||D.isEqual(e,t))return ir("no intersection");i=i<0?i:-i,s=s<0?s:-s,e=D.sub(D.rotWith(e,r,-l),r),t=D.sub(D.rotWith(t,r,-l),r);let h=D.sub(t,e),g=h[0]*h[0]/i/i+h[1]*h[1]/s/s,f=2*e[0]*h[0]/i/i+2*e[1]*h[1]/s/s,C=e[0]*e[0]/i/i+e[1]*e[1]/s/s-1,y=[],b=f*f-4*g*C;if(b===0)y.push(-f/2/g);else if(b>0){let k=Math.sqrt(b);y.push((-f+k)/2/g),y.push((-f-k)/2/g)}let R=y.filter(k=>k>=0&&k<=1).map(k=>D.add(r,D.add(e,D.mul(D.sub(t,e),k)))).map(k=>D.rotWith(k,r,l));return ir("intersection",...R)}function co(e,t,r){return Ho(r,e,t)}function ho(e,t,r){let i=[];for(let s=1;s<r.length;s++){let l=In(e,t,r[s-1],r[s]);l&&i.push(...l.points)}return i.length===0?ir("no intersection"):ir("intersection",...r)}function pa(e,t,r){let i=[];for(let s=1;s<r.length+1;s++){let l=In(e,t,r[s-1],r[s%r.length]);l&&i.push(...l.points)}return i.length===0?ir("no intersection"):ir("intersection",...r)}function ga(e,t,r,i,s){return Nn(e,t,r).reduce((l,[h,[g,f]])=>{let C=Zi(i,s,g,f);return C&&l.push(ir(h,...C.points)),l},[]).filter(l=>l.didIntersect)}function fn(e,t,r,i){return Nn(e,t).reduce((s,[l,[h,g]])=>{let f=In(r,i,h,g);return f&&s.push(ir(l,...f.points)),s},[]).filter(s=>s.didIntersect)}function Cn(e,t,r,i){return Nn(e,t).reduce((s,[l,[h,g]])=>{let f=fn(r,i,h,g);return s.push(...f.map(C=>ir(`${l} ${C.message}`,...C.points))),s},[]).filter(s=>s.didIntersect)}function ma(e,t,r,i,s,l){return Nn(e,t).reduce((h,[g,[f,C]])=>{let y=Ms(r,i,s,l,f,C);return y&&h.push(ls(as({},y),{message:g})),h},[]).filter(h=>h.didIntersect)}function Ps(e,t,r,i){return Nn(e,t).reduce((s,[l,[h,g]])=>{let f=Si(h,g,r,i);return f&&s.push(ls(as({},f),{message:l})),s},[]).filter(s=>s.didIntersect)}function fo(e,t,r,i,s,l=0){return Nn(e,t).reduce((h,[g,[f,C]])=>{let y=Vn(f,C,r,i,s,l);return y&&h.push(ls(as({},y),{message:g})),h},[]).filter(h=>h.didIntersect)}function gi(e,t,r){let{minX:i,minY:s,width:l,height:h}=r;return Cn(e,t,[i,s],[l,h])}function cs(e,t,r){return Nn(e,t).reduce((i,[s,[l,h]])=>{let g=ho(l,h,r);return g.didIntersect&&i.push(ir(s,...g.points)),i},[]).filter(i=>i.didIntersect)}function Fo(e,t,r){return Nn(e,t).reduce((i,[s,[l,h]])=>{let g=pa(l,h,r);return g.didIntersect&&i.push(ir(s,...g.points)),i},[]).filter(i=>i.didIntersect)}function Ms(e,t,r,i,s,l){return ks(s,l,e,t,r,i)}function ln(e,t,r,i,s,l){return ma(s,l,e,t,r,i)}function Os(e,t,r,i,s){let{minX:l,minY:h,width:g,height:f}=s;return ln(e,t,r,i,[l,h],[g,f])}function ds(e,t,r,i){return Si(r,i,e,t)}function ni(e,t,r,i){let s=r[0]-e[0],l=r[1]-e[1],h=Math.sqrt(s*s+l*l),g=(h*h-i*i+t*t)/(2*h),f=Math.sqrt(t*t-g*g);return s/=h,l/=h,ir("intersection",[e[0]+s*g-l*f,e[1]+l*g+s*f],[e[0]+s*g+l*f,e[1]+l*g-s*f])}function hs(e,t,r,i){return Ps(r,i,e,t)}function t1(e,t,r){let{minX:i,minY:s,width:l,height:h}=r;return hs(e,t,[i,s],[l,h])}function va(e,t,r,i,s,l){return $o(s,l,e,t,r,i)}function Bs(e,t,r,i=0,s,l){return t===r?Si(s,l,e,t):Vn(s,l,e,t,r,i)}function jn(e,t,r,i=0,s,l){return t===r?Ps(s,l,e,t):fo(s,l,e,t,r,i)}function Ca(e,t,r,i,s,l,h,g){return ir("no intersection")}function r1(e,t,r,i,s,l){return Ca(e,t,r,i,s,l,l,0)}function Ea(e,t,r,i,s){let{minX:l,minY:h,width:g,height:f}=s;return jn(e,t,r,i,[l,h],[g,f])}function kr(e,t,r){let{minX:i,minY:s,width:l,height:h}=e;return zi(t,r,[i,s],[l,h])}function Ho(e,t,r){let{minX:i,minY:s,width:l,height:h}=e;return fa(t,r,[i,s],[l,h])}function fs(e,t,r){let{minX:i,minY:s,width:l,height:h}=e;return Cn(t,r,[i,s],[l,h])}function $s(e,t){return Cn([e.minX,e.minY],[e.width,e.height],[t.minX,t.minY],[t.width,t.height])}function Xt(e,t,r,i,s){let{minX:l,minY:h,width:g,height:f}=e;return ln(t,r,i,s,[l,h],[g,f])}function Fs(e,t,r){let{minX:i,minY:s,width:l,height:h}=e;return hs(t,r,[i,s],[l,h])}function No(e,t,r,i,s=0){let{minX:l,minY:h,width:g,height:f}=e;return jn(t,r,i,s,[l,h],[g,f])}function Vo(e,t){return ps(t,e)}function ya(e,t){return Hs(t,e)}function n1(e,t,r){return ho(t,r,e)}function i1(e,t,r){return cs(t,r,e)}function ps(e,t){return cs([t.minX,t.minY],[t.width,t.height],e)}function o1(e,t,r){return ho(t,r,e)}function s1(e,t,r){return cs(t,r,e)}function Hs(e,t){return Fo([t.minX,t.minY],[t.width,t.height],e)}function a1(e,t,r){return wa(r,!0).reduce((i,[s,l],h)=>{let g=Zi(e,t,s,l);return g&&i.push(ir(h.toString(),...g.points)),i},[]).filter(i=>i.didIntersect)}function wa(e,t=!1){let r=[];for(let i=1;i<e.length;i++)r.push([e[i-1],e[i]]);return t&&r.push([e[e.length-1],e[0]]),r}var gs=Object.defineProperty,ba=Object.defineProperties,Be=Object.getOwnPropertyDescriptors,Gi=Object.getOwnPropertySymbols,jo=Object.prototype.hasOwnProperty,Wi=Object.prototype.propertyIsEnumerable,ms=(e,t,r)=>t in e?gs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,or=(e,t)=>{for(var r in t||(t={}))jo.call(t,r)&&ms(e,r,t[r]);if(Gi)for(var r of Gi(t))Wi.call(t,r)&&ms(e,r,t[r]);return e},Un=(e,t)=>ba(e,Be(t)),Li=(e,t)=>{var r={};for(var i in e)jo.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&Gi)for(var i of Gi(e))t.indexOf(i)<0&&Wi.call(e,i)&&(r[i]=e[i]);return r},Tr=(e,t,r)=>(ms(e,typeof t!="symbol"?t+"":t,r),r),Tn=u.createContext({});function tn(){return u.useContext(Tn)}var xa=(e=>(e.TransformSelected="transform_selected",e.TranslateSelected="translate_selected",e.TransformAll="transform_all",e.TranslateAll="translate_all",e))(xa||{}),_a=(e=>(e.Top="top_edge",e.Right="right_edge",e.Bottom="bottom_edge",e.Left="left_edge",e))(_a||{}),Dn=(e=>(e.TopLeft="top_left_corner",e.TopRight="top_right_corner",e.BottomRight="bottom_right_corner",e.BottomLeft="bottom_left_corner",e))(Dn||{}),Ns=(e=>(e.minX="minX",e.midX="midX",e.maxX="maxX",e.minY="minY",e.midY="midY",e.maxY="maxY",e))(Ns||{});String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return Object.prototype.toString.call(e).toLowerCase()==="[object regexp]"?this.replace(e,t):this.replace(new RegExp(e,"g"),t)});var Ki=Math.PI*2,Gr=class{static lerp(e,t,r){return r=Gr.clamp(r,0,1),e*(1-r)+t*r}static lerpColor(e,t,r=.5){function i(f){let C=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f);return[parseInt(C[1],16),parseInt(C[2],16),parseInt(C[3],16)]}function s(f){return"#"+((1<<24)+(f[0]<<16)+(f[1]<<8)+f[2]).toString(16).slice(1)}let l=i(e)||[0,0,0],h=i(t)||[0,0,0],g=l.slice();for(let f=0;f<3;f++)g[f]=Math.round(g[f]+r*(h[f]-l[f]));return s(g)}static modulate(e,t,r,i=!1){let[s,l]=t,[h,g]=r,f=h+(e-s)/(l-s)*(g-h);return i?h<g?Math.max(Math.min(f,g),h):Math.max(Math.min(f,h),g):f}static clamp(e,t,r){return Math.max(t,typeof r<"u"?Math.min(e,r):e)}static deepClone(e){if(e===null)return e;if(Array.isArray(e))return[...e];if(typeof e=="object"){let t=or({},e);return Object.keys(t).forEach(r=>t[r]=typeof e[r]=="object"?Gr.deepClone(e[r]):e[r]),t}return e}static rng(e=""){let t=0,r=0,i=0,s=0;function l(){let h=t^t<<11;return t=r,r=i,i=s,s^=(s>>>19^h^h>>>8)>>>0,s/4294967296}for(let h=0;h<e.length+64;h++)t^=e.charCodeAt(h)|0,l();return l}static pointsToLineSegments(e,t=!1){let r=[];for(let i=1;i<e.length;i++)r.push([e[i-1],e[i]]);return t&&r.push([e[e.length-1],e[0]]),r}static getRectangleSides(e,t,r=0){let i=[e[0]+t[0]/2,e[1]+t[1]/2],s=D.rotWith(e,i,r),l=D.rotWith(D.add(e,[t[0],0]),i,r),h=D.rotWith(D.add(e,t),i,r),g=D.rotWith(D.add(e,[0,t[1]]),i,r);return[["top",[s,l]],["right",[l,h]],["bottom",[h,g]],["left",[g,s]]]}static circleFromThreePoints(e,t,r){let[i,s]=e,[l,h]=t,[g,f]=r,C=i*(h-f)-s*(l-g)+l*f-g*h,y=(i*i+s*s)*(f-h)+(l*l+h*h)*(s-f)+(g*g+f*f)*(h-s),b=(i*i+s*s)*(l-g)+(l*l+h*h)*(g-i)+(g*g+f*f)*(i-l),R=-y/(2*C),k=-b/(2*C);return[R,k,Math.hypot(R-i,k-s)]}static perimeterOfEllipse(e,t){let r=Math.pow(e-t,2)/Math.pow(e+t,2);return Math.PI*(e+t)*(1+3*r/(10+Math.sqrt(4-3*r)))}static shortAngleDist(e,t){let r=Math.PI*2,i=(t-e)%r;return 2*i%r-i}static longAngleDist(e,t){return Math.PI*2-Gr.shortAngleDist(e,t)}static lerpAngles(e,t,r){return e+Gr.shortAngleDist(e,t)*r}static angleDelta(e,t){return Gr.shortAngleDist(e,t)}static getSweep(e,t,r){return Gr.angleDelta(D.angle(e,t),D.angle(e,r))}static clampRadians(e){return(Math.PI*2+e)%(Math.PI*2)}static snapAngleToSegments(e,t){let r=Math.PI*2/t;return Math.floor((Gr.clampRadians(e)+r/2)/r)*r}static isAngleBetween(e,t,r){if(r===e||r===t)return!0;let i=(t-e+Ki)%Ki,s=(r-e+Ki)%Ki;return i<=Math.PI!=s>i}static degreesToRadians(e){return e*Math.PI/180}static radiansToDegrees(e){return e*180/Math.PI}static getArcLength(e,t,r,i){let s=Gr.getSweep(e,r,i);return t*(2*Math.PI)*(s/(2*Math.PI))}static getSweepFlag(e,t,r){let i=D.angle(e,r);return(D.angle(e,t)-i+3*Math.PI)%(2*Math.PI)-Math.PI>0?0:1}static getLargeArcFlag(e,t,r){let i=D.angle(r,e),s=(D.angle(r,t)-i+3*Math.PI)%(2*Math.PI)-Math.PI;return Math.abs(s)>Math.PI/2?0:1}static getArcDashOffset(e,t,r,i,s){let l=Gr.getSweepFlag(e,r,i),h=Gr.getArcLength(e,t,r,i);return-(l<0?h:2*Math.PI*e[2]-h)/2+s}static getEllipseDashOffset(e,t){return-(2*Math.PI*e[2])/2+-t}static pointInCircle(e,t,r){return D.dist(e,t)<=r}static pointInEllipse(e,t,r,i,s=0){s=s||0;let l=Math.cos(s),h=Math.sin(s),g=D.sub(e,t),f=l*g[0]+h*g[1],C=h*g[0]-l*g[1];return f*f/(r*r)+C*C/(i*i)<=1}static pointInRect(e,t){return!(e[0]<t[0]||e[0]>e[0]+t[0]||e[1]<t[1]||e[1]>e[1]+t[1])}static pointInPolygon(e,t){let r=0;return t.forEach((i,s)=>{let l=t[(s+1)%t.length];i[1]<=e[1]?l[1]>e[1]&&D.cross(i,l,e)>0&&(r+=1):l[1]<=e[1]&&D.cross(i,l,e)<0&&(r-=1)}),r!==0}static pointInBounds(e,t){return!(e[0]<t.minX||e[0]>t.maxX||e[1]<t.minY||e[1]>t.maxY)}static pointInPolyline(e,t,r=3){for(let i=1;i<t.length;i++)if(D.distanceToLineSegment(t[i-1],t[i],e)<r)return!0;return!1}static getBoundsSides(e){return this.getRectangleSides([e.minX,e.minY],[e.width,e.height])}static expandBounds(e,t){return{minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,width:e.width+t*2,height:e.height+t*2}}static boundsCollide(e,t){return!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY)}static boundsContain(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX}static boundsContained(e,t){return Gr.boundsContain(t,e)}static boundsAreEqual(e,t){return!(t.maxX!==e.maxX||t.minX!==e.minX||t.maxY!==e.maxY||t.minY!==e.minY)}static getBoundsFromPoints(e,t=0){let r=1/0,i=1/0,s=-1/0,l=-1/0;if(e.length<2)r=0,i=0,s=1,l=1;else for(let[h,g]of e)r=Math.min(h,r),i=Math.min(g,i),s=Math.max(h,s),l=Math.max(g,l);return t!==0?Gr.getBoundsFromPoints(e.map(h=>D.rotWith(h,[(r+s)/2,(i+l)/2],t))):{minX:r,minY:i,maxX:s,maxY:l,width:Math.max(1,s-r),height:Math.max(1,l-i)}}static centerBounds(e,t){let r=this.getBoundsCenter(e),i=t[0]-r[0],s=t[1]-r[1];return this.translateBounds(e,[i,s])}static snapBoundsToGrid(e,t){let r=Math.round(e.minX/t)*t,i=Math.round(e.minY/t)*t,s=Math.round(e.maxX/t)*t,l=Math.round(e.maxY/t)*t;return{minX:r,minY:i,maxX:s,maxY:l,width:Math.max(1,s-r),height:Math.max(1,l-i)}}static translateBounds(e,t){return{minX:e.minX+t[0],minY:e.minY+t[1],maxX:e.maxX+t[0],maxY:e.maxY+t[1],width:e.width,height:e.height}}static rotateBounds(e,t,r){let[i,s]=D.rotWith([e.minX,e.minY],t,r),[l,h]=D.rotWith([e.maxX,e.maxY],t,r);return{minX:i,minY:s,maxX:l,maxY:h,width:e.width,height:e.height}}static getRotatedEllipseBounds(e,t,r,i,s=0){let l=Math.cos(s),h=Math.sin(s),g=Math.hypot(r*l,i*h),f=Math.hypot(r*h,i*l);return{minX:e+r-g,minY:t+i-f,maxX:e+r+g,maxY:t+i+f,width:g*2,height:f*2}}static getExpandedBounds(e,t){let r=Math.min(e.minX,t.minX),i=Math.min(e.minY,t.minY),s=Math.max(e.maxX,t.maxX),l=Math.max(e.maxY,t.maxY),h=Math.abs(s-r),g=Math.abs(l-i);return{minX:r,minY:i,maxX:s,maxY:l,width:h,height:g}}static getCommonBounds(e){if(e.length<2)return e[0];let t=e[0];for(let r=1;r<e.length;r++)t=Gr.getExpandedBounds(t,e[r]);return t}static getRotatedCorners(e,t=0){let r=[e.minX+e.width/2,e.minY+e.height/2];return[[e.minX,e.minY],[e.maxX,e.minY],[e.maxX,e.maxY],[e.minX,e.maxY]].map(i=>D.rotWith(i,r,t))}static getTransformedBoundingBox(e,t,r,i=0,s=!1){let[l,h]=[e.minX,e.minY],[g,f]=[e.maxX,e.maxY],[C,y]=[e.minX,e.minY],[b,R]=[e.maxX,e.maxY];if(t==="center")return{minX:C+r[0],minY:y+r[1],maxX:b+r[0],maxY:R+r[1],width:b-C,height:R-y,scaleX:1,scaleY:1};let[k,A]=D.rot(r,-i);switch(t){case"top_edge":case"top_left_corner":case"top_right_corner":{y+=A;break}case"bottom_edge":case"bottom_left_corner":case"bottom_right_corner":{R+=A;break}}switch(t){case"left_edge":case"top_left_corner":case"bottom_left_corner":{C+=k;break}case"right_edge":case"top_right_corner":case"bottom_right_corner":{b+=k;break}}let O=g-l,B=f-h,F=(b-C)/O,j=(R-y)/B,J=F<0,ce=j<0,re=Math.abs(b-C),ne=Math.abs(R-y);if(s){let le=O/B,me=le<re/ne,Ve=re*(j<0?1:-1)*(1/le),lt=ne*(F<0?1:-1)*le;switch(t){case"top_left_corner":{me?y=R+Ve:C=b+lt;break}case"top_right_corner":{me?y=R+Ve:b=C-lt;break}case"bottom_right_corner":{me?R=y-Ve:b=C-lt;break}case"bottom_left_corner":{me?R=y-Ve:C=b+lt;break}case"bottom_edge":case"top_edge":{let Ye=(C+b)/2,ct=ne*le;C=Ye-ct/2,b=Ye+ct/2;break}case"left_edge":case"right_edge":{let Ye=(y+R)/2,ct=re/le;y=Ye-ct/2,R=Ye+ct/2;break}}}if(i%(Math.PI*2)!==0){let le=[0,0],me=D.med([l,h],[g,f]),Ve=D.med([C,y],[b,R]);switch(t){case"top_left_corner":{le=D.sub(D.rotWith([b,R],Ve,i),D.rotWith([g,f],me,i));break}case"top_right_corner":{le=D.sub(D.rotWith([C,R],Ve,i),D.rotWith([l,f],me,i));break}case"bottom_right_corner":{le=D.sub(D.rotWith([C,y],Ve,i),D.rotWith([l,h],me,i));break}case"bottom_left_corner":{le=D.sub(D.rotWith([b,y],Ve,i),D.rotWith([g,h],me,i));break}case"top_edge":{le=D.sub(D.rotWith(D.med([C,R],[b,R]),Ve,i),D.rotWith(D.med([l,f],[g,f]),me,i));break}case"left_edge":{le=D.sub(D.rotWith(D.med([b,y],[b,R]),Ve,i),D.rotWith(D.med([g,h],[g,f]),me,i));break}case"bottom_edge":{le=D.sub(D.rotWith(D.med([C,y],[b,y]),Ve,i),D.rotWith(D.med([l,h],[g,h]),me,i));break}case"right_edge":{le=D.sub(D.rotWith(D.med([C,y],[C,R]),Ve,i),D.rotWith(D.med([l,h],[l,f]),me,i));break}}[C,y]=D.sub([C,y],le),[b,R]=D.sub([b,R],le)}return b<C&&([b,C]=[C,b]),R<y&&([R,y]=[y,R]),{minX:C,minY:y,maxX:b,maxY:R,width:b-C,height:R-y,scaleX:(b-C)/(g-l||1)*(J?-1:1),scaleY:(R-y)/(f-h||1)*(ce?-1:1)}}static getTransformAnchor(e,t,r){let i=e;switch(e){case"top_left_corner":{t&&r?i="bottom_right_corner":t?i="top_right_corner":r?i="bottom_left_corner":i="bottom_right_corner";break}case"top_right_corner":{t&&r?i="bottom_left_corner":t?i="top_left_corner":r?i="bottom_right_corner":i="bottom_left_corner";break}case"bottom_right_corner":{t&&r?i="top_left_corner":t?i="bottom_left_corner":r?i="top_right_corner":i="top_left_corner";break}case"bottom_left_corner":{t&&r?i="top_right_corner":t?i="bottom_right_corner":r?i="top_left_corner":i="top_right_corner";break}}return i}static getRelativeTransformedBoundingBox(e,t,r,i,s){let l=(i?t.maxX-r.maxX:r.minX-t.minX)/t.width,h=(s?t.maxY-r.maxY:r.minY-t.minY)/t.height,g=r.width/t.width,f=r.height/t.height,C=e.minX+e.width*l,y=e.minY+e.height*h,b=e.width*g,R=e.height*f;return{minX:C,minY:y,maxX:C+b,maxY:y+R,width:b,height:R}}static getRotatedSize(e,t){let r=D.div(e,2),i=[[0,0],[e[0],0],e,[0,e[1]]].map(l=>D.rotWith(l,r,t)),s=Gr.getBoundsFromPoints(i);return[s.width,s.height]}static getBoundsCenter(e){return[e.minX+e.width/2,e.minY+e.height/2]}static getBoundsWithCenter(e){let t=Gr.getBoundsCenter(e);return Un(or({},e),{midX:t[0],midY:t[1]})}static getCommonTopLeft(e){let t=[1/0,1/0];return e.forEach(r=>{t[0]=Math.min(t[0],r[0]),t[1]=Math.min(t[1],r[1])}),t}static getFromCache(e,t,r){let i=e.get(t);if(i===void 0&&(e.set(t,r()),i=e.get(t),i===void 0))throw Error("Cache did not include item!");return i}static uniqueId(e=""){return e?((Number(e)^Math.random()*16)>>Number(e)/4).toString(16):`${1e7}-${1e3}-${4e3}-${8e3}-${1e11}`.replace(/[018]/g,Gr.uniqueId)}static rotateArray(e,t){return e.map((r,i)=>e[(i+t)%e.length])}static debounce(e,t=0){let r;return function(...i){clearTimeout(r),r=setTimeout(()=>e.apply(i),t)}}static getSvgPathFromStroke(e,t=!0){let r=e.length;if(r<4)return"";let i=e[0],s=e[1],l=e[2],h=`M${i[0].toFixed(2)},${i[1].toFixed(2)} Q${s[0].toFixed(2)},${s[1].toFixed(2)} ${ii(s[0],l[0]).toFixed(2)},${ii(s[1],l[1]).toFixed(2)} T`;for(let g=2,f=r-1;g<f;g++)i=e[g],s=e[g+1],h+=`${ii(i[0],s[0]).toFixed(2)},${ii(i[1],s[1]).toFixed(2)} `;return t&&(h+="Z"),h}static getSvgPathFromStrokePoints(e,t=!1){let r=e.length;if(r<4)return"";let i=e[0].point,s=e[1].point,l=e[2].point,h=`M${i[0].toFixed(2)},${i[1].toFixed(2)} Q${s[0].toFixed(2)},${s[1].toFixed(2)} ${ii(s[0],l[0]).toFixed(2)},${ii(s[1],l[1]).toFixed(2)} T`;for(let g=2,f=r-1;g<f;g++)i=e[g].point,s=e[g+1].point,h+=`${ii(i[0],s[0]).toFixed(2)},${ii(i[1],s[1]).toFixed(2)} `;return t&&(h+="Z"),h}static getPerfectDashProps(e,t,r,i=1,s=!0,l=2){let h,g,f;if(r.toLowerCase()==="dashed")h=t*l,f=1,g=s?(h/2).toString():"0";else if(r.toLowerCase()==="dotted")h=t/100,f=100,g="0";else return{strokeDasharray:"none",strokeDashoffset:"none"};let C=Math.floor(e/h/(2*f));C-=C%i,C=Math.max(C,4);let y=Math.max(h,(e-C*h)/(s?C:C-1));return{strokeDasharray:[h,y].join(" "),strokeDashoffset:g}}static isMobileSafari(){if(typeof window>"u")return!1;let e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),r=!!e.match(/WebKit/i);return t&&r&&!e.match(/CriOS/i)}static throttle(e,t){let r,i;return function(...s){return r||(r=!0,setTimeout(()=>r=!1,t),i=e(...s)),i}}static isDarwin(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}static metaKey(e){return Gr.isDarwin()?e.metaKey:e.ctrlKey}static lns(e){let t=e.split("");return t.push(...t.splice(0,Math.round(t.length/5))),t.push(...t.splice(0,Math.round(t.length/4))),t.push(...t.splice(0,Math.round(t.length/3))),t.push(...t.splice(0,Math.round(t.length/2))),t.reverse().map(r=>+r?+r<5?5+ +r:+r>5?+r-5:r:r).join("")}},X=Gr;Tr(X,"getSnapPoints",(e,t,r)=>{let i=or({},e),s=[0,0],l=[],h={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},g=["midX","minX","maxX"],f=["midY","minY","maxY"],C=t.map(A=>{let O=g.flatMap((F,j)=>g.map((J,ce)=>{let re=i[F]-A[J],ne=Math.abs(re);return{f:F,t:J,gap:re,distance:ne,isCareful:j===0||j+ce===3}})),B=f.flatMap((F,j)=>f.map((J,ce)=>{let re=i[F]-A[J],ne=Math.abs(re);return{f:F,t:J,gap:re,distance:ne,isCareful:j===0||j+ce===3}}));return[A,O,B]}),y=1/0,b=1/0,R=1/0,k=1/0;return C.forEach(([A,O,B])=>{O.forEach(F=>{F.distance<r&&F.distance<R&&(R=F.distance,y=F.gap)}),B.forEach(F=>{F.distance<r&&F.distance<k&&(k=F.distance,b=F.gap)})}),C.forEach(([A,O,B])=>{y!==1/0&&O.forEach(F=>{Math.abs(F.gap-y)<2&&(h[F.f]=Un(or({},h[F.f]),{isSnapped:!0,to:A[F.t],B:A,distance:F.distance}))}),b!==1/0&&B.forEach(F=>{Math.abs(F.gap-b)<2&&(h[F.f]=Un(or({},h[F.f]),{isSnapped:!0,to:A[F.t],B:A,distance:F.distance}))})}),s[0]=y===1/0?0:y,s[1]=b===1/0?0:b,i.minX-=s[0],i.midX-=s[0],i.maxX-=s[0],i.minY-=s[1],i.midY-=s[1],i.maxY-=s[1],g.forEach(A=>{let O=h[A];if(!O.isSnapped)return;let{id:B,B:F}=O,j=i[B];l.push(B==="minX"?[[j,i.midY],[j,F.minY],[j,F.maxY]]:[[j,i.minY],[j,i.maxY],[j,F.minY],[j,F.maxY]])}),f.forEach(A=>{let O=h[A];if(!O.isSnapped)return;let{id:B,B:F}=O,j=i[B];l.push(B==="midY"?[[i.midX,j],[F.minX,j],[F.maxX,j]]:[[i.minX,j],[i.maxX,j],[F.minX,j],[F.maxX,j]])}),{offset:s,snapLines:l}}),Tr(X,"deepMerge",(e,t)=>{let r=or({},e),i=Object.entries(t);for(let[s,l]of i)r[s]=l===Object(l)&&!Array.isArray(l)?Gr.deepMerge(r[s],l):l;return r});function ii(e,t){return(e+t)/2}var pn=X;function Vs(e,t){let r=u.useRef(void 0),i=u.useRef(void 0),s=u.useRef([0,0]),{inputs:l,bounds:h,callbacks:g}=tn();u.useEffect(()=>{let R=k=>k.preventDefault();return document.addEventListener("gesturestart",R),document.addEventListener("gesturechange",R),()=>{document.removeEventListener("gesturestart",R),document.removeEventListener("gesturechange",R)}},[]);let f=u.useCallback(({event:R})=>{var k,A,O,B;if(R.preventDefault(),l.isPinching)return;let[F,j,J]=x(R);if((R.altKey||R.ctrlKey||R.metaKey)&&R.buttons===0){let ne=[...(A=(k=l.pointer)==null?void 0:k.point)!=null?A:[h.width/2,h.height/2],J*.618],le=l.pan(ne,R);(O=g.onZoom)==null||O.call(g,Un(or({},le),{delta:ne}),R);return}let ce=D.mul(R.shiftKey&&!pn.isDarwin?[j,0]:[F,j],.5);if(D.isEqual(ce,[0,0]))return;let re=l.pan(ce,R);(B=g.onPan)==null||B.call(g,re,R)},[g,l,h]),C=u.useCallback(({origin:R,event:k})=>{var A;if(k instanceof WheelEvent)return;let O=t.current;if(!O||!(k.target===O||O.contains(k.target)))return;let B=l.pinch(R,R);l.isPinching=!0,(A=g.onPinchStart)==null||A.call(g,B,k),i.current=B.point,r.current=B.origin,s.current=[0,0]},[g,l,h]),y=u.useCallback(({origin:R,offset:k,event:A})=>{var O;if(A instanceof WheelEvent)return;let B=t.current;if(!(A.target===B||B?.contains(A.target))||!r.current)return;let F=l.pinch(R,r.current),j=D.sub(F.delta,s.current);s.current=F.delta,(O=g.onPinch)==null||O.call(g,Un(or({},F),{point:F.point,origin:r.current,delta:[...j,k[0]]}),A),i.current=R},[g,l,h]),b=u.useCallback(({origin:R,event:k})=>{var A;let O=t.current;if(!(k.target===O||O?.contains(k.target)))return;let B=l.pinch(R,R);l.isPinching=!1,(A=g.onPinchEnd)==null||A.call(g,B,k),i.current=void 0,r.current=void 0,s.current=[0,0]},[]);jr({onWheel:f,onPinchStart:C,onPinch:y,onPinchEnd:b},{target:t,eventOptions:{passive:!1},pinch:{from:[e.current,0],scaleBounds:()=>({from:e.current,max:5,min:.1})}})}var _=10;function x(e){let{deltaY:t,deltaX:r}=e,i=0;if(e.ctrlKey||e.metaKey){let s=Math.sign(e.deltaY),l=Math.abs(e.deltaY),h=t;l>_&&(h=_*s),i=h}return[r,t,i]}function L(){let{callbacks:e}=tn();(0,u.useEffect)(()=>{function t(){var r;(r=e.onShapeBlur)==null||r.call(e)}return pn.isMobileSafari()?(document.addEventListener("focusout",t),()=>document.removeEventListener("focusout",t)):()=>null},[e])}function M(){let{callbacks:e,inputs:t}=tn();return u.useMemo(()=>({onPointerDown:r=>{var i,s,l;if(r.dead||(r.dead=!0,!t.pointerIsValid(r)))return;if(r.button===2){(i=e.onRightPointCanvas)==null||i.call(e,t.pointerDown(r,"canvas"),r);return}r.currentTarget.setPointerCapture(r.pointerId);let h=t.pointerDown(r,"canvas");r.button===0&&((s=e.onPointCanvas)==null||s.call(e,h,r)),(l=e.onPointerDown)==null||l.call(e,h,r)},onPointerMove:r=>{var i,s;if(r.dead||(r.dead=!0,!t.pointerIsValid(r)))return;let l=t.pointerMove(r,"canvas");r.buttons===1&&r.currentTarget.hasPointerCapture(r.pointerId)&&((i=e.onDragCanvas)==null||i.call(e,l,r)),(s=e.onPointerMove)==null||s.call(e,l,r)},onPointerUp:r=>{var i,s,l,h;if(r.dead||(r.dead=!0,t.activePointer=void 0,!t.pointerIsValid(r))||r.button===2)return;let g=t.pointerUp(r,"canvas"),f=t.isDoubleClick();r.currentTarget.hasPointerCapture(r.pointerId)&&((i=r.currentTarget)==null||i.releasePointerCapture(r.pointerId)),r.button===0&&(f&&!(g.altKey||g.metaKey)&&((s=e.onDoubleClickCanvas)==null||s.call(e,g,r)),(l=e.onReleaseCanvas)==null||l.call(e,g,r)),(h=e.onPointerUp)==null||h.call(e,g,r)},onDrop:e.onDrop,onDragOver:e.onDragOver}),[e,t])}function N(e){let{rPageState:t,rSelectionBounds:r,callbacks:i,inputs:s}=u.useContext(Tn);return u.useMemo(()=>({onPointerDown:l=>{var h,g,f,C,y,b,R;if(l.dead||(l.dead=!0,!s.pointerIsValid(l)))return;if(l.button===2){(h=i.onRightPointShape)==null||h.call(i,s.pointerDown(l,e),l);return}let k=s.pointerDown(l,e);if((g=l.currentTarget)==null||g.setPointerCapture(l.pointerId),r.current&&X.pointInBounds(k.point,r.current)&&!t.current.selectedIds.includes(e)){l.button===0&&((f=i.onPointBounds)==null||f.call(i,s.pointerDown(l,"bounds"),l),(C=i.onPointShape)==null||C.call(i,k,l)),(y=i.onPointerDown)==null||y.call(i,k,l);return}l.button===0&&((b=i.onPointShape)==null||b.call(i,k,l)),(R=i.onPointerDown)==null||R.call(i,k,l)},onPointerUp:l=>{var h,g,f,C;if(l.dead||(l.dead=!0,!s.pointerIsValid(l))||l.button===2)return;s.activePointer=void 0;let y=s.isDoubleClick(),b=s.pointerUp(l,e);l.pointerId&&l.currentTarget.hasPointerCapture(l.pointerId)&&((h=l.currentTarget)==null||h.releasePointerCapture(l.pointerId)),l.button===0&&(y&&!(b.altKey||b.metaKey)&&((g=i.onDoubleClickShape)==null||g.call(i,b,l)),(f=i.onReleaseShape)==null||f.call(i,b,l)),(C=i.onPointerUp)==null||C.call(i,b,l)},onPointerMove:l=>{var h,g;if(l.dead||(l.dead=!0,l.buttons===2||!s.pointerIsValid(l)||s.pointer&&l.pointerId!==s.pointer.pointerId))return;let f=s.pointerMove(l,e);l.buttons===1&&l.currentTarget.hasPointerCapture(l.pointerId)&&((h=i.onDragShape)==null||h.call(i,f,l)),(g=i.onPointerMove)==null||g.call(i,f,l)},onPointerEnter:l=>{var h;if(!s.pointerIsValid(l))return;let g=s.pointerEnter(l,e);(h=i.onHoverShape)==null||h.call(i,g,l)},onPointerLeave:l=>{var h;if(!s.pointerIsValid(l))return;let g=s.pointerEnter(l,e);(h=i.onUnhoverShape)==null||h.call(i,g,l)}}),[s,i,e])}function G(e,t,r,i,s,l=!1,h=!1,g,f){let C={shape:e,asset:e.assetId?s[e.assetId]:void 0,meta:g,isChildOfSelected:h,isGhost:e.isGhost||l,isEditing:i.editingId===e.id,isBinding:f===e.id,isSelected:i.selectedIds.includes(e.id),isHovered:i.hoveredId===e.id||e.children!==void 0&&(i.hoveredId&&e.children.includes(i.hoveredId)||e.children.some(y=>i.selectedIds.includes(y)))};t.push(C),e.children&&(C.children=[],e.children.map(y=>r[y]).filter(y=>r[y.id]).sort((y,b)=>y.childIndex-b.childIndex).forEach(y=>G(y,C.children,r,i,s,C.isGhost,C.isSelected||C.isChildOfSelected,g)))}function Re(e,t){return X.boundsContain(t,e)||X.boundsCollide(t,e)}function Ke(e,t,r,i){let{callbacks:s,shapeUtils:l,bounds:h}=tn(),g=u.useRef(),f=u.useRef(-1),C=u.useRef(new Set),y=u.useRef(new Set),{selectedIds:b,camera:R}=t,[k,A]=D.sub(D.div([0,0],R.zoom),R.point),[O,B]=D.sub(D.div([h.width,h.height],R.zoom),R.point),F={minX:k,minY:A,maxX:O,maxY:B,height:O-k,width:B-A},j=y.current,J=C.current;j.clear(),J.clear(),Object.values(e.shapes).filter(ne=>l[ne.type].isStateful||b.includes(ne.id)||Re(l[ne.type].getBounds(ne),F)).forEach(ne=>{if(ne.parentId===e.id){J.add(ne.id),j.add(ne);return}let le=e.shapes[ne.parentId];if(le===void 0)throw Error(`A shape (${ne.id}) has a parent (${ne.parentId}) that does not exist!`);J.add(le.id),j.add(le)}),j.size!==f.current&&(g.current&&clearTimeout(g.current),g.current=requestAnimationFrame(()=>{var ne;(ne=s.onRenderCountChange)==null||ne.call(s,Array.from(J.values()))}),f.current=j.size);let ce=t.bindingId?e.bindings[t.bindingId].toId:void 0,re=[];return j.forEach(ne=>{if(ne===void 0)throw Error("Rendered shapes included a missing shape");G(ne,re,e.shapes,t,r,ne.isGhost,!1,i,ce)}),re.sort((ne,le)=>ne.shape.childIndex-le.shape.childIndex),re}var _t=new Map;function nt(e,t){return Object.keys(t).reduce((r,i)=>{let s=t[i];return s?r+`${`--${e}-${i}`}: ${s};
`:r},"")}function sr(e,t,r=":root"){u.useLayoutEffect(()=>{let i=document.createElement("style"),s=nt(e,t);return i.setAttribute("id",`${e}-theme`),i.setAttribute("data-selector",r),i.innerHTML=`
        ${r} {
          ${s}
        }
      `,document.head.appendChild(i),()=>{i&&document.head.contains(i)&&document.head.removeChild(i)}},[e,t,r])}function un(e,t){u.useLayoutEffect(()=>{if(_t.get(e))return()=>{};let r=document.createElement("style");return r.innerHTML=t,r.setAttribute("id",e),document.head.appendChild(r),_t.set(e,r),()=>{r&&document.head.contains(r)&&(document.head.removeChild(r),_t.delete(e))}},[e,t])}var Mn=(e,...t)=>e.reduce((r,i,s)=>r+i+(s<t.length?t[s]:""),""),vs={accent:"rgb(255, 0, 0)",brushFill:"rgba(0,0,0,.05)",brushStroke:"rgba(0,0,0,.25)",brushDashStroke:"rgba(0,0,0,.6)",selectStroke:"rgb(66, 133, 244)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.12)",background:"rgb(248, 249, 250)",foreground:"rgb(51, 51, 51)",grid:"rgba(144, 144, 144, 1)"},Cs=Mn`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: calc(64px * max(1, var(--tl-scale)));
    --tl-performance-all: auto;
    --tl-performance-selected: auto;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    z-index: 100;
    overflow: hidden;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
  }
  .tl-container * {
    box-sizing: border-box;
  }
  .tl-overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }
  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }
  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }
  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }
  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
  }
  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }
  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }
  .tl-positioned {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
    will-change: var(--tl-performance-all);
  }
  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
  }
  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
    padding: var(--tl-padding);
    overflow: hidden;
    contain: layout style size;
  }
  .tl-positioned-selected {
    will-change: var(--tl-performance-selected);
  }
  .tl-inner-div {
    position: relative;
    width: 100%;
    height: 100%;
  }
  .tl-stroke-hitarea {
    fill: none;
    stroke: transparent;
    stroke-width: calc(24px * var(--tl-scale));
    pointer-events: stroke;
    stroke-linecap: round;
    stroke-linejoin: round;
  }
  .tl-fill-hitarea {
    fill: transparent;
    stroke: transparent;
    stroke-width: calc(24px * var(--tl-scale));
    pointer-events: all;
    stroke-linecap: round;
    stroke-linejoin: round;
  }
  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }
  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }
  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }
  .tl-cursor-ns {
    cursor: ns-resize;
  }
  .tl-cursor-ew {
    cursor: ew-resize;
  }
  .tl-cursor-nesw {
    cursor: nesw-resize;
  }
  .tl-cursor-nwse {
    cursor: nwse-resize;
  }
  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }
  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
    cursor: grab;
  }
  .tl-binding {
    fill: var(--tl-selectFill);
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }
  .tl-user {
    left: calc(-15px * var(--tl-scale));
    top: calc(-15px * var(--tl-scale));
    height: calc(35px * var(--tl-scale));
    width: calc(35px * var(--tl-scale));
    transform: scale(var(--tl-scale));
    pointer-events: none;
    will-change: transform;
  }
  .tl-animated {
    transition: transform 200ms linear;
  }
  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }
  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }
  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }
  .tl-selected {
    stroke: var(--tl-selectStroke);
  }
  .tl-locked {
    stroke-dasharray: calc(3px * var(--tl-scale)) calc(3px * var(--tl-scale));
  }
  .tl-editing {
    stroke-width: calc(2.5px * min(5, var(--tl-scale)));
  }
  .tl-performance {
    will-change: transform, contents;
  }
  .tl-clone-target {
    pointer-events: all;
  }
  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }
  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }
  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }
  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }
  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }
  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }
  .tl-bounds-center {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }
  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
    contain: layout style size;
  }
  .tl-dashed-brush-line {
    fill: none;
    stroke: var(--tl-brushDashStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }
  .tl-brush.dashed {
    stroke: none;
  }
  .tl-handle {
    pointer-events: all;
    cursor: grab;
  }
  .tl-handle:hover .tl-handle-bg {
    fill: var(--tl-selectFill);
  }
  .tl-handle:hover .tl-handle-bg > * {
    stroke: var(--tl-selectFill);
  }
  .tl-handle:active .tl-handle-bg {
    cursor: grabbing;
    fill: var(--tl-selectFill);
  }
  .tl-handle:active .tl-handle-bg > * {
    stroke: var(--tl-selectFill);
  }
  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
  }
  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    pointer-events: all;
    r: calc(16px / max(1, var(--tl-zoom)));
  }
  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }
  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }
  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }
  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }
  .tl-grid-dot {
    fill: var(--tl-grid);
  }
  .tl-erase-line {
    stroke-linejoin: round;
    stroke-linecap: round;
    pointer-events: none;
    fill: var(--tl-grid);
    opacity: 0.32;
  }
`;function Sa(e,t){let r=u.useMemo(()=>or(or({},vs),e),[e]);sr("tl",r,t),un("tl-canvas",Cs)}function Ri(e){let{callbacks:t,inputs:r}=tn(),i=u.useCallback(f=>{var C,y,b;if(f.dead||(f.dead=!0,!r.pointerIsValid(f)))return;let R=r.pointerDown(f,e);if(f.button===2){(C=t.onRightPointBoundsHandle)==null||C.call(t,R,f);return}f.button===0&&((y=t.onPointBoundsHandle)==null||y.call(t,R,f)),(b=t.onPointerDown)==null||b.call(t,R,f)},[r,t,e]),s=u.useCallback(f=>{var C,y,b;if(f.dead||(f.dead=!0,f.button===2||!r.pointerIsValid(f)))return;let R=r.pointerUp(f,e),k=r.isDoubleClick();f.button===0&&(k&&!(R.altKey||R.metaKey)&&((C=t.onDoubleClickBoundsHandle)==null||C.call(t,R,f)),(y=t.onReleaseBoundsHandle)==null||y.call(t,R,f)),(b=t.onPointerUp)==null||b.call(t,R,f)},[r,t,e]),l=u.useCallback(f=>{var C,y;if(f.dead||(f.dead=!0,!r.pointerIsValid(f))||f.buttons===2)return;let b=r.pointerMove(f,e);f.buttons===1&&f.currentTarget.hasPointerCapture(f.pointerId)&&((C=t.onDragBoundsHandle)==null||C.call(t,b,f)),(y=t.onPointerMove)==null||y.call(t,b,f)},[r,t,e]),h=u.useCallback(f=>{var C;!r.pointerIsValid(f)||(C=t.onHoverBoundsHandle)==null||C.call(t,r.pointerEnter(f,e),f)},[r,t,e]),g=u.useCallback(f=>{var C;!r.pointerIsValid(f)||(C=t.onUnhoverBoundsHandle)==null||C.call(t,r.pointerEnter(f,e),f)},[r,t,e]);return{onPointerDown:i,onPointerUp:s,onPointerEnter:h,onPointerMove:l,onPointerLeave:g}}function js(e,t,r){let i=u.useRef(),s=u.useRef();u.useLayoutEffect(()=>{let{zoom:l,point:h}=r.camera,g=l!==i.current,f=h!==s.current;if(i.current=l,s.current=h,g||f){let C=e.current;if(t&&"current"in t){let y=t.current;g&&y&&y.style.setProperty("--tl-zoom",l.toString()),C&&C.style.setProperty("transform",`scale(${l}) translateX(${h[0]}px) translateY(${h[1]}px)`)}}},[r.camera.zoom,r.camera.point])}function Es(e,t){return[(e[0]+t.point[0])*t.zoom,(e[1]+t.point[1])*t.zoom]}function cn(e,t){return e[t.type]}function mi(e,t,r){let{rSelectionBounds:i}=tn(),{selectedIds:s}=t,l=u.useRef(),h,g=0,f=!1,C=!1;if(s.length===1){let b=s[0],R=e.shapes[b];if(!R)throw Error(`selectedIds is set to the id of a shape that doesn't exist: ${b}`);g=R.rotation||0,f=R.isLocked||!1;let k=cn(r,R);h=k.hideBounds?void 0:k.getBounds(R)}else if(s.length>1){let b=s.map(R=>e.shapes[R]);g=0,f=b.every(R=>R.isLocked),h=b.reduce((R,k,A)=>A===0?cn(r,k).getRotatedBounds(k):pn.getExpandedBounds(R,cn(r,k).getRotatedBounds(k)),{})}if(h){let[b,R]=Es([h.minX,h.minY],t.camera),[k,A]=Es([h.maxX,h.maxY],t.camera);C=!!Object.values(e.bindings).find(O=>s.includes(O.toId)||s.includes(O.fromId)),i.current={minX:b,minY:R,maxX:k,maxY:A,width:k-b,height:A-R}}else i.current=null;let y=l.current;return!y||!h?l.current=h:h&&y.minX===h.minX&&y.minY===h.minY&&y.maxX===h.maxX&&y.maxY===h.maxY&&(h=l.current),{bounds:h,rotation:g,isLocked:f,isLinked:C}}function po(e){let{inputs:t,callbacks:r}=tn();return u.useMemo(()=>({onPointerDown:i=>{var s,l,h;if(i.dead||(i.dead=!0,!t.pointerIsValid(i))||i.button===2)return;(s=i.currentTarget)==null||s.setPointerCapture(i.pointerId);let g=t.pointerDown(i,e);i.button===0&&((l=r.onPointHandle)==null||l.call(r,g,i)),(h=r.onPointerDown)==null||h.call(r,g,i)},onPointerUp:i=>{var s,l,h,g;if(i.dead||(i.dead=!0,!t.pointerIsValid(i))||i.button===2)return;let f=t.isDoubleClick(),C=t.pointerUp(i,e);i.currentTarget.hasPointerCapture(i.pointerId)&&((s=i.currentTarget)==null||s.releasePointerCapture(i.pointerId),i.button===0&&(f&&!(C.altKey||C.metaKey)&&((l=r.onDoubleClickHandle)==null||l.call(r,C,i)),(h=r.onReleaseHandle)==null||h.call(r,C,i))),(g=r.onPointerUp)==null||g.call(r,C,i)},onPointerMove:i=>{var s,l;if(i.dead||(i.dead=!0,!t.pointerIsValid(i))||i.buttons===2)return;let h=t.pointerMove(i,e);i.buttons===1&&i.currentTarget.hasPointerCapture(i.pointerId)&&((s=r.onDragHandle)==null||s.call(r,h,i)),(l=r.onPointerMove)==null||l.call(r,h,i)},onPointerEnter:i=>{var s;if(!t.pointerIsValid(i))return;let l=t.pointerEnter(i,e);(s=r.onHoverHandle)==null||s.call(r,l,i)},onPointerLeave:i=>{var s;if(!t.pointerIsValid(i))return;let l=t.pointerEnter(i,e);(s=r.onUnhoverHandle)==null||s.call(r,l,i)}}),[t,r,e])}function Uo(e){let{bounds:t}=tn();u.useEffect(()=>{let r=l=>{l.preventDefault()},i=l=>{let h=l.touches[0].pageX,g=l.touches[0].radiusX||0;(h-g<10||h+g>t.width-10)&&l.preventDefault()},s=e.current;return s?(s.addEventListener("gestureend",r),s.addEventListener("gesturechange",r),s.addEventListener("gesturestart",r),s.addEventListener("touchstart",i),()=>{s&&(s.removeEventListener("gestureend",r),s.removeEventListener("gesturechange",r),s.removeEventListener("gesturestart",r),s.removeEventListener("touchstart",i))}):()=>{}},[e,t.width])}function Us(){let{callbacks:e,inputs:t}=tn();return u.useMemo(()=>({onPointerDown:r=>{var i,s,l,h;if(r.dead||(r.dead=!0,!t.pointerIsValid(r)))return;if(r.button===2){(i=e.onRightPointBounds)==null||i.call(e,t.pointerDown(r,"bounds"),r);return}let g=t.pointerDown(r,"bounds");(s=r.currentTarget)==null||s.setPointerCapture(r.pointerId),r.button===0&&((l=e.onPointBounds)==null||l.call(e,g,r)),(h=e.onPointerDown)==null||h.call(e,g,r)},onPointerUp:r=>{var i,s,l,h;if(r.dead||(r.dead=!0,r.button===2)||(t.activePointer=void 0,!t.pointerIsValid(r)))return;let g=t.isDoubleClick(),f=t.pointerUp(r,"bounds");r.currentTarget.hasPointerCapture(r.pointerId)&&((i=r.currentTarget)==null||i.releasePointerCapture(r.pointerId)),r.button===0&&(g&&!(f.altKey||f.metaKey)&&((s=e.onDoubleClickBounds)==null||s.call(e,f,r)),(l=e.onReleaseBounds)==null||l.call(e,f,r)),(h=e.onPointerUp)==null||h.call(e,f,r)},onPointerMove:r=>{var i,s;if(r.dead||(r.dead=!0,!t.pointerIsValid(r)))return;r.buttons===1&&r.currentTarget.hasPointerCapture(r.pointerId)&&((i=e.onDragBounds)==null||i.call(e,t.pointerMove(r,"bounds"),r));let l=t.pointerMove(r,"bounds");(s=e.onPointerMove)==null||s.call(e,l,r)},onPointerEnter:r=>{var i;!t.pointerIsValid(r)||(i=e.onHoverBounds)==null||i.call(e,t.pointerEnter(r,"bounds"),r)},onPointerLeave:r=>{var i;!t.pointerIsValid(r)||(i=e.onUnhoverBounds)==null||i.call(e,t.pointerEnter(r,"bounds"),r)}}),[t,e])}function Zo(e,t=0){let r=u.useRef(null);return u.useLayoutEffect(()=>{let i=r.current,s=`
    translate(
      calc(${e.minX}px - var(--tl-padding)),
      calc(${e.minY}px - var(--tl-padding))
    )
    rotate(${t+(e.rotation||0)}rad)`;i.style.setProperty("transform",s),i.style.setProperty("width",`calc(${Math.floor(e.width)}px + (var(--tl-padding) * 2))`),i.style.setProperty("height",`calc(${Math.floor(e.height)}px + (var(--tl-padding) * 2))`)},[e,t]),r}function vi(){let{inputs:e,callbacks:t}=tn();u.useEffect(()=>{let r=s=>{var l;(l=t.onKeyDown)==null||l.call(t,s.key,e.keydown(s),s)},i=s=>{var l;e.keyup(s),(l=t.onKeyUp)==null||l.call(t,s.key,e.keyup(s),s)};return window.addEventListener("keydown",r),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",r),window.removeEventListener("keyup",i)}},[e,t])}function zo(e,t){u.useLayoutEffect(()=>{if(t&&"current"in t){let r=t?.current;if(!r)return;switch(e){case"transform_selected":{r.style.setProperty("--tl-performance-all","auto"),r.style.setProperty("--tl-performance-selected","transform, contents");break}case"transform_all":{r.style.setProperty("--tl-performance-all","transform, contents"),r.style.setProperty("--tl-performance-selected","transform, contents");break}case"translate_selected":{r.style.setProperty("--tl-performance-all","auto"),r.style.setProperty("--tl-performance-selected","transform");break}case"translate_all":{r.style.setProperty("--tl-performance-all","transform"),r.style.setProperty("--tl-performance-selected","transform");break}default:r.style.setProperty("--tl-performance-all","auto"),r.style.setProperty("--tl-performance-selected","auto")}}},[e])}function La(e){var t=e,{id:r,bounds:i,rotation:s=0,isGhost:l=!1,isSelected:h=!1,children:g}=t,f=Li(t,["id","bounds","rotation","isGhost","isSelected","children"]);let C=Zo(i,s);return u.createElement("div",or({id:r,ref:C,className:`tl-positioned${l?" tl-ghost":""}${h?" tl-positioned-selected":""}`,"aria-label":"container","data-testid":"container"},f),g)}var Yi=u.memo(La);function Ci({brush:e,zoom:t,dashed:r}){return u.createElement(Yi,{bounds:e,rotation:0},u.createElement(_n,null,u.createElement("rect",{className:"tl-brush"+(r?" dashed":""),opacity:1,x:0,y:0,width:e.width,height:e.height,"aria-label":"brush"}),r&&u.createElement("g",{className:"tl-dashed-brush-line"},u.createElement(Xi,{x1:0,y1:0,x2:e.width,y2:0,zoom:t}),u.createElement(Xi,{x1:e.width,y1:0,x2:e.width,y2:e.height,zoom:t}),u.createElement(Xi,{x1:0,y1:e.height,x2:e.width,y2:e.height,zoom:t}),u.createElement(Xi,{x1:0,y1:0,x2:0,y2:e.height,zoom:t}))))}var Ce=u.memo(Ci);function Xi({x1:e,y1:t,x2:r,y2:i,zoom:s}){let l=pn.getPerfectDashProps(Math.hypot(r-e,i-t),1/s,"dashed",1,!0,3);return u.createElement("line",{x1:e,y1:t,x2:r,y2:i,strokeWidth:1/s,strokeDasharray:l.strokeDasharray,strokeDashoffset:l.strokeDashoffset})}var Ra=u.memo(({color:e})=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35 35",fill:"none",fillRule:"evenodd"},u.createElement("g",{fill:"rgba(0,0,0,.2)",transform:"translate(1,1)"},u.createElement("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),u.createElement("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})),u.createElement("g",{fill:"white"},u.createElement("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),u.createElement("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})),u.createElement("g",{fill:e},u.createElement("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),u.createElement("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"}))));function Il({points:e,zoom:t}){if(e.length===0)return null;let r=pn.getSvgPathFromStroke(ei(e,{size:16/t,start:{taper:!0}}));return u.createElement("path",{d:r,className:"tl-erase-line"})}var ys=u.memo(Il),l1=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]];function Tl({grid:e,camera:t}){return u.createElement("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},u.createElement("defs",null,l1.map(([r,i,s],l)=>{let h=s*e*t.zoom,g=t.point[0]*t.zoom,f=t.point[1]*t.zoom,C=g>0?g%h:h+g%h,y=f>0?f%h:h+f%h,b=t.zoom<i?pn.modulate(t.zoom,[r,i],[0,1]):1;return u.createElement("pattern",{key:`grid-pattern-${l}`,id:`grid-${l}`,width:h,height:h,patternUnits:"userSpaceOnUse"},u.createElement("circle",{className:"tl-grid-dot",cx:C,cy:y,r:1,opacity:b}))})),l1.map((r,i)=>u.createElement("rect",{key:`grid-rect-${i}`,width:"100%",height:"100%",fill:`url(#grid-${i})`})))}function u1({camera:{zoom:e,point:t},children:r}){let i=2.5/e;return u.createElement("svg",{className:"tl-overlay"},u.createElement("defs",null,u.createElement("g",{id:"tl-snap-point"},u.createElement("path",{className:"tl-snap-point",d:`M ${-i},${-i} L ${i},${i} M ${-i},${i} L ${i},${-i}`}))),u.createElement("g",{transform:`scale(${e}) translate(${t})`},r))}var Dl=u.memo(u1),_n=u.memo(u.forwardRef(function(e,t){var r=e,{id:i,className:s="",children:l}=r,h=Li(r,["id","className","children"]);return u.createElement("svg",or({ref:t,className:`tl-positioned-svg ${s}`},h),u.createElement("g",{id:i,className:"tl-centered-g"},l))}));function Ia({bounds:e,isLocked:t,isHidden:r}){return u.createElement("rect",{className:["tl-bounds-center",t?"tl-dashed":""].join(" "),x:-1,y:-1,width:e.width+2,height:e.height+2,opacity:r?0:1,pointerEvents:"none","aria-label":"center handle"})}var Ta=u.memo(Ia),Zn={right:0,bottomRight:45,bottom:90,bottomLeft:135,left:180,topLeft:225,top:270,topRight:315};function Al({bounds:e,side:t,targetSize:r,size:i}){let s=r*2,l={left:-s,topLeft:-s,bottomLeft:-s,right:e.width,topRight:e.width,bottomRight:e.width,top:e.width/2-s/2,bottom:e.width/2-s/2}[t],h={left:e.height/2-s/2,right:e.height/2-s/2,top:-s*2,topLeft:-s,topRight:-s,bottom:e.height,bottomLeft:e.height,bottomRight:e.height}[t],{callbacks:g,inputs:f}=tn(),C=u.useCallback(y=>{var b;y.stopPropagation();let R=f.pointerDown(y,t);(b=g.onShapeClone)==null||b.call(g,R,y)},[g.onShapeClone]);return u.createElement("g",{className:"tl-clone-target",transform:`translate(${l}, ${h})`,"aria-label":"clone button"},u.createElement("rect",{className:"tl-transparent",width:r*2,height:r*2}),u.createElement("g",{className:"tl-clone-button-target",onPointerDown:C,transform:`translate(${r}, ${r}) rotate(${Zn[t]})`},u.createElement("circle",{className:"tl-transparent ",r}),u.createElement("path",{className:"tl-clone-button",d:`M -${i/2},-${i/2} L ${i/2},0 -${i/2},${i/2} Z`,strokeLinejoin:"round"})))}var Ii=u.memo(Al);function c1({targetSize:e,size:t,bounds:r}){return u.createElement(u.Fragment,null,u.createElement(Ii,{targetSize:e,size:t,bounds:r,side:"top"}),u.createElement(Ii,{targetSize:e,size:t,bounds:r,side:"right"}),u.createElement(Ii,{targetSize:e,size:t,bounds:r,side:"bottom"}),u.createElement(Ii,{targetSize:e,size:t,bounds:r,side:"left"}),u.createElement(Ii,{targetSize:e,size:t,bounds:r,side:"topLeft"}),u.createElement(Ii,{targetSize:e,size:t,bounds:r,side:"topRight"}),u.createElement(Ii,{targetSize:e,size:t,bounds:r,side:"bottomLeft"}),u.createElement(Ii,{targetSize:e,size:t,bounds:r,side:"bottomRight"}))}var d1=u.memo(c1),kl={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"};function Pl({size:e,targetSize:t,isHidden:r,corner:i,bounds:s}){let l=Ri(i),h=i==="top_left_corner"||i==="top_right_corner",g=i==="top_left_corner"||i==="bottom_left_corner";return u.createElement("g",{opacity:r?0:1},u.createElement("rect",or({className:"tl-transparent "+(r?"":kl[i]),"aria-label":"corner transparent",x:(g?-1:s.width+1)-t,y:(h?-1:s.height+1)-t,width:t*2,height:t*2,pointerEvents:r?"none":"all"},l)),u.createElement("rect",{className:"tl-corner-handle","aria-label":"corner handle",x:(g?-1:s.width+1)-e/2,y:(h?-1:s.height+1)-e/2,width:e,height:e,pointerEvents:"none"}))}var Zs=u.memo(Pl),h1={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"};function Ti({size:e,isHidden:t,bounds:r,edge:i}){let s=Ri(i),l=i==="top_edge"||i==="bottom_edge",h=i==="right_edge"||i==="bottom_edge",{height:g,width:f}=r;return u.createElement("rect",or({pointerEvents:t?"none":"all",className:"tl-transparent tl-edge-handle "+(t?"":h1[i]),"aria-label":`${i} handle`,opacity:t?0:1,x:l?e/2:(h?f+1:-1)-e/2,y:l?(h?g+1:-1)-e/2:e/2,width:l?Math.max(0,f+1-e):e,height:l?e:Math.max(0,g+1-e)},s))}var Go=u.memo(Ti);function f1({size:e,bounds:t,isHidden:r}){let i=Ri("left"),s=Ri("center"),l=Ri("right");return u.createElement("g",{cursor:"grab",transform:`translate(${t.width/2-e*4}, ${t.height+e*2})`,"aria-label":"link handle"},u.createElement("g",{className:"tl-transparent",pointerEvents:r?"none":"all"},u.createElement("rect",or({x:0,y:0,width:e*2,height:e*2},i)),u.createElement("rect",or({x:e*3,y:0,width:e*2,height:e*2},s)),u.createElement("rect",or({x:e*6,y:0,width:e*2,height:e*2},l))),u.createElement("g",{className:"tl-rotate-handle",transform:`translate(${e/2}, ${e/2})`,"aria-label":"link rotate handle"},u.createElement("path",{d:`M 0,${e/2} L ${e},${e} ${e},0 Z`,pointerEvents:"none",opacity:r?0:1}),u.createElement("path",{transform:`translate(${e*3}, 0)`,d:`M 0,0 L ${e},0 ${e/2},${e} Z`,pointerEvents:"none",opacity:r?0:1}),u.createElement("path",{transform:`translate(${e*6}, 0)`,d:`M ${e},${e/2} L 0,0 0,${e} Z`,pointerEvents:"none",opacity:r?0:1})))}var Ml=u.memo(f1);function Da({bounds:e,targetSize:t,size:r,isHidden:i}){let s=Ri("rotate");return u.createElement("g",{cursor:"grab",opacity:i?0:1},u.createElement("circle",or({className:"tl-transparent","aria-label":"rotate handle transparent",cx:e.width/2,cy:r*-2,r:t,pointerEvents:i?"none":"all"},s)),u.createElement("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:e.width/2,cy:r*-2,r:r/2,pointerEvents:"none"}))}var zs=u.memo(Da),Ol=function({zoom:e,bounds:t,viewportWidth:r,rotation:i,isHidden:s,isLocked:l,hideCloneHandles:h,hideResizeHandles:g,hideRotateHandle:f,hideBindingHandles:C}){let y=(r<768?16:8)/e,b=8/e,R=Math.min(t.width,t.height)*e,k=!f&&!s&&!l&&R>32,A=!s&&!l&&R>24,O=!s&&!l&&R>20,B=!h&&R>24;return u.createElement(Yi,{bounds:t,rotation:i},u.createElement(_n,null,u.createElement(Ta,{bounds:t,isLocked:l,isHidden:s}),!g&&!l?u.createElement(u.Fragment,null,u.createElement(Go,{targetSize:y,size:b,bounds:t,edge:"top_edge",isHidden:!A}),u.createElement(Go,{targetSize:y,size:b,bounds:t,edge:"right_edge",isHidden:!A}),u.createElement(Go,{targetSize:y,size:b,bounds:t,edge:"bottom_edge",isHidden:!A}),u.createElement(Go,{targetSize:y,size:b,bounds:t,edge:"left_edge",isHidden:!A}),u.createElement(Zs,{targetSize:y,size:b,bounds:t,isHidden:s||!O,corner:"top_left_corner"}),u.createElement(Zs,{targetSize:y,size:b,bounds:t,isHidden:s||!O,corner:"top_right_corner"}),u.createElement(Zs,{targetSize:y,size:b,bounds:t,isHidden:s||!O,corner:"bottom_right_corner"}),u.createElement(Zs,{targetSize:y,size:b,bounds:t,isHidden:s||!O,corner:"bottom_left_corner"})):null,k&&u.createElement(zs,{targetSize:y,size:b,bounds:t,isHidden:!A}),B&&u.createElement(d1,{bounds:t,targetSize:y,size:b}),!C&&u.createElement(Ml,{targetSize:y,size:b,bounds:t,isHidden:!A})))},Bl=u.memo(Ol);function ws({bounds:e,rotation:t,isHidden:r}){let i=Us();return u.createElement(Yi,{bounds:e,rotation:t},u.createElement(_n,null,u.createElement("rect",or({className:"tl-bounds-bg","aria-label":"bounds bg",width:e.width,height:e.height,opacity:r?0:1},i))))}var $l=u.memo(ws);function Aa({id:e,point:t}){let r=po(e);return u.createElement(Yi,{bounds:pn.translateBounds({minX:0,minY:0,maxX:0,maxY:0,width:0,height:0},t)},u.createElement(_n,null,u.createElement("g",or({className:"tl-handle","aria-label":"handle"},r),u.createElement("circle",{className:"tl-handle-bg",pointerEvents:"all"}),u.createElement("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4}))))}var p1=u.memo(Aa);function Fl({shape:e,zoom:t}){if(e.handles===void 0)return null;let r=null,i=Object.values(e.handles).reduce((s,l)=>{let h=D.add(l.point,e.point);return(!r||D.dist(h,r)*t>=32)&&(s.push(l),r=h),s},[]);return i.length===1?null:u.createElement(u.Fragment,null,i.map(s=>u.createElement(p1,{key:e.id+"_"+s.id,id:s.id,point:D.add(s.point,e.point)})))}var ka=u.memo(Fl);function Hl(e){let t=e.utils.getRef(e.shape);return u.createElement(e.utils.Component,or({ref:t},e))}var Nl=u.memo(Hl,(e,t)=>e.isHovered!==t.isHovered||e.isSelected!==t.isSelected||e.isEditing!==t.isEditing||e.isBinding!==t.isBinding||e.isGhost!==t.isGhost||e.meta!==t.meta?!1:t.shape!==e.shape?!t.utils.shouldRender(t.shape,e.shape):!0);function Vl(e){var t=e,{shape:r,utils:i,meta:s}=t,l=Li(t,["shape","utils","meta"]);let{callbacks:h}=tn(),g=i.getBounds(r),f=N(r.id);return u.createElement(Yi,{id:r.id,bounds:g,rotation:r.rotation,"data-shape":r.type,isGhost:l.isGhost,isSelected:l.isSelected},u.createElement(Nl,or({shape:r,utils:i,meta:s,events:f,bounds:g,onShapeChange:h.onShapeChange,onShapeBlur:h.onShapeBlur},l)))}var jl=u.memo(Vl);function Ul(e){var t=e,{shape:r,utils:i,meta:s,children:l}=t,h=Li(t,["shape","utils","meta","children"]);return u.createElement(u.Fragment,null,u.createElement(jl,or({shape:r,utils:i[r.type],meta:s},h)),l&&l.map(g=>u.createElement(go,or({key:g.shape.id,utils:i},g))))}var go=u.memo(Ul);function Zl({isHovered:e=!1,isSelected:t=!1,isEditing:r=!1,shape:i,user:s,meta:l}){let{shapeUtils:h}=tn(),g=h[i.type],f=g.getBounds(i),C=Zo(f,i.rotation);return u.createElement("div",{ref:C,draggable:!1,className:["tl-indicator","tl-absolute",t&&!s?"tl-selected":"tl-hovered",r?"tl-editing":"",i.isLocked?"tl-locked":""].join(" ")},u.createElement("svg",{width:"100%",height:"100%"},u.createElement("g",{className:"tl-centered-g",stroke:s?.color},u.createElement(g.Indicator,{shape:i,meta:l,user:s,bounds:f,isSelected:t,isHovered:e}))))}var Pa=u.memo(Zl);function g1({page:e,pageState:t,assets:r,hideBounds:i,hideHandles:s,hideIndicators:l,hideBindingHandles:h,hideCloneHandles:g,hideRotateHandle:f,hideResizeHandles:C,meta:y}){let{bounds:b,shapeUtils:R}=tn(),k=Ke(e,t,r,y),{bounds:A,isLinked:O,isLocked:B,rotation:F}=mi(e,t,R),{selectedIds:j,hoveredId:J,editingId:ce,camera:{zoom:re}}=t,ne=l,le=!0,me=!1,Ve,lt=j.map(Ye=>e.shapes[Ye]);if(lt.length===1){let Ye=lt[0];me=ce===Ye.id,me&&(ne=!0);let ct=R[Ye.type];le=g||!ct.showCloneHandles,Ye.handles!==void 0&&!me&&(Ve=Ye)}return u.createElement(u.Fragment,null,A&&u.createElement($l,{bounds:A,rotation:F,isHidden:i}),k.map(Ye=>u.createElement(go,or({key:Ye.shape.id,utils:R},Ye))),!ne&&lt.map(Ye=>u.createElement(Pa,{key:"selected_"+Ye.id,shape:Ye,meta:y,isSelected:!0,isEditing:me})),!ne&&J&&J!==ce&&u.createElement(Pa,{key:"hovered_"+J,shape:e.shapes[J],meta:y,isHovered:!0}),A&&u.createElement(Bl,{zoom:re,bounds:A,viewportWidth:b.width,isLocked:B,rotation:F,isHidden:i,hideRotateHandle:f,hideResizeHandles:C,hideBindingHandles:h||!O,hideCloneHandles:le}),!s&&Ve&&u.createElement(ka,{shape:Ve,zoom:re}))}var zl=u.memo(g1);function m1({snapLines:e}){return u.createElement(u.Fragment,null,e.map((t,r)=>u.createElement(Wl,{key:r,snapLine:t})))}function Gl({snapLine:e}){let t=pn.getBoundsFromPoints(e);return u.createElement(u.Fragment,null,u.createElement("line",{className:"tl-snap-line",x1:t.minX,y1:t.minY,x2:t.maxX,y2:t.maxY}),e.map(([r,i],s)=>u.createElement("use",{key:s,href:"#tl-snap-point",x:r,y:i})))}var Wl=u.memo(Gl),v1=u.memo(m1);function Kl({user:e,Cursor:t}){let r=u.useRef(null);return u.useLayoutEffect(()=>{r.current&&(r.current.style.transform=`translate(${e.point[0]}px, ${e.point[1]}px)`)},[e.point]),u.createElement("div",{ref:r,className:`tl-absolute tl-user tl-counter-scaled ${e.session?"":"tl-animated"}`},u.createElement(t,{id:e.id,color:e.color}))}function C1({userId:e,users:t,Cursor:r}){return u.createElement(u.Fragment,null,Object.values(t).filter(i=>i&&i.id!==e).map(i=>u.createElement(Kl,{key:i.id,user:i,Cursor:r})))}function Yl({userId:e,users:t,meta:r,page:i}){let{shapeUtils:s}=tn();return u.createElement(u.Fragment,null,Object.values(t).filter(Boolean).filter(l=>l.id!==e&&l.selectedIds.length>0).map(l=>{let h=l.selectedIds.map(f=>i.shapes[f]).filter(Boolean);if(h.length===0)return null;let g=pn.getCommonBounds(h.map(f=>s[f.type].getBounds(f)));return u.createElement(u.Fragment,{key:l.id+"_shapes"},u.createElement("div",{className:"tl-absolute tl-user-indicator-bounds",style:{backgroundColor:l.color+"0d",borderColor:l.color+"78",transform:`translate(${g.minX}px, ${g.minY}px)`,width:g.width,height:g.height,pointerEvents:"none"}}),h.map(f=>u.createElement(Pa,{key:`${l.id}_${f.id}_indicator`,shape:f,user:l,meta:r,isHovered:!0})))}))}var Xl=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;let{overflowY:r}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(r==="auto"||r==="scroll"||r==="overlay"))return t;t=t.parentElement}return document};function ql(e,t){let{inputs:r,callbacks:i}=tn(),s=u.useRef(!1),l=u.useCallback(()=>{var h,g;if(s.current){let f=(h=e.current)==null?void 0:h.getBoundingClientRect();if(f){let C={minX:f.left,maxX:f.left+f.width,minY:f.top,maxY:f.top+f.height,width:f.width,height:f.height};r.bounds=C,t(C),(g=i.onBoundsChange)==null||g.call(i,C)}}else s.current=!0},[e,r,i.onBoundsChange]);u.useEffect(()=>{let h=e.current?Xl(e.current):document,g=X.debounce(l,100);return h.addEventListener("scroll",g),window.addEventListener("resize",g),()=>{h.removeEventListener("scroll",g),window.removeEventListener("resize",g)}},[]),u.useEffect(()=>{let h=new ResizeObserver(g=>{r.isPinching||g[0].contentRect&&l()});return e.current&&h.observe(e.current),()=>{h.disconnect()}},[e,r]),u.useEffect(()=>{l()},[e])}function Ma({id:e,page:t,pageState:r,assets:i,snapLines:s,eraseLine:l,grid:h,users:g,userId:f,components:C={},meta:y,performanceMode:b,showDashedBrush:R,hideHandles:k,hideBounds:A,hideIndicators:O,hideBindingHandles:B,hideCloneHandles:F,hideResizeHandles:j,hideRotateHandle:J,hideGrid:ce,onBoundsChange:re,hideCursors:ne}){var le;let me=u.useRef(null),Ve=u.useRef(r.camera.zoom);Ve.current=r.camera.zoom,Vs(Ve,me),ql(me,re),L(),Uo(me);let lt=u.useRef(null),Ye=u.useRef(null);js(Ye,lt,r),zo(b,lt),vi();let ct=M();return u.createElement("div",{id:e,className:"tl-container",ref:lt},u.createElement("div",or({id:"canvas",className:"tl-absolute tl-canvas",ref:me},ct),!ce&&h&&u.createElement(Tl,{grid:h,camera:r.camera}),u.createElement("div",{ref:Ye,className:"tl-absolute tl-layer","data-testid":"layer"},u.createElement(zl,{page:t,pageState:r,assets:i,hideBounds:A,hideIndicators:O,hideHandles:k,hideBindingHandles:B,hideCloneHandles:F,hideResizeHandles:j,hideRotateHandle:J,meta:y}),g&&f&&u.createElement(Yl,{userId:f,users:g,page:t,meta:y}),r.brush&&u.createElement(Ce,{brush:r.brush,dashed:R,zoom:r.camera.zoom}),g&&!ne&&u.createElement(C1,{userId:f,users:g,Cursor:(le=C?.Cursor)!=null?le:Ra})),u.createElement(Dl,{camera:r.camera},l&&u.createElement(ys,{points:l,zoom:r.camera.zoom}),s&&u.createElement(v1,{snapLines:s}))))}var Jl=u.memo(Ma),E1=250,Wr=class{constructor(){Tr(this,"pointer"),Tr(this,"keyboard"),Tr(this,"keys",{}),Tr(this,"isPinching",!1),Tr(this,"bounds",{minX:0,maxX:640,minY:0,maxY:480,width:640,height:480}),Tr(this,"pointerUpTime",0),Tr(this,"activePointer"),Tr(this,"panStart",e=>{var t,r;let{shiftKey:i,ctrlKey:s,metaKey:l,altKey:h}=e,g={target:"wheel",pointerId:((t=this.pointer)==null?void 0:t.pointerId)||0,origin:((r=this.pointer)==null?void 0:r.origin)||[0,0],delta:[0,0],pressure:.5,point:Wr.getPoint(e,this.bounds),shiftKey:i,ctrlKey:s,metaKey:l,altKey:h,spaceKey:this.keys[" "]};return this.pointer=g,g}),Tr(this,"pan",(e,t)=>{if(!this.pointer||this.pointer.target!=="wheel")return this.panStart(t);let{shiftKey:r,ctrlKey:i,metaKey:s,altKey:l}=t,h=this.pointer,g=Wr.getPoint(t,this.bounds),f=Un(or({},h),{target:"wheel",delta:e,point:g,shiftKey:r,ctrlKey:i,metaKey:s,altKey:l,spaceKey:this.keys[" "]});return this.pointer=f,f}),Tr(this,"keydown",e=>{var t,r;let{shiftKey:i,ctrlKey:s,metaKey:l,altKey:h}=e;return this.keys[e.key]=!0,{point:((t=this.pointer)==null?void 0:t.point)||[0,0],origin:((r=this.pointer)==null?void 0:r.origin)||[0,0],key:e.key,keys:Object.keys(this.keys),shiftKey:i,ctrlKey:s,metaKey:X.isDarwin()?l:s,altKey:h}}),Tr(this,"keyup",e=>{var t,r;let{shiftKey:i,ctrlKey:s,metaKey:l,altKey:h}=e;return delete this.keys[e.key],{point:((t=this.pointer)==null?void 0:t.point)||[0,0],origin:((r=this.pointer)==null?void 0:r.origin)||[0,0],key:e.key,keys:Object.keys(this.keys),shiftKey:i,ctrlKey:s,metaKey:X.isDarwin()?l:s,altKey:h}})}pointerIsValid(e){if("pointerId"in e&&this.activePointer&&this.activePointer!==e.pointerId)return!1;if("touches"in e){let t=e.changedTouches[0];if(this.activePointer&&this.activePointer!==t.identifier)return!1}return!0}touchStart(e,t){let{shiftKey:r,ctrlKey:i,metaKey:s,altKey:l}=e,h=e.changedTouches[0];this.activePointer=h.identifier;let g={target:t,pointerId:h.identifier,origin:Wr.getPoint(h,this.bounds),delta:[0,0],point:Wr.getPoint(h,this.bounds),pressure:Wr.getPressure(h),shiftKey:r,ctrlKey:i,metaKey:X.isDarwin()?s:i,altKey:l,spaceKey:this.keys[" "]};return this.pointer=g,g}touchEnd(e,t){let{shiftKey:r,ctrlKey:i,metaKey:s,altKey:l}=e,h=e.changedTouches[0],g={target:t,pointerId:h.identifier,origin:Wr.getPoint(h,this.bounds),delta:[0,0],point:Wr.getPoint(h,this.bounds),pressure:Wr.getPressure(h),shiftKey:r,ctrlKey:i,metaKey:X.isDarwin()?s:i,altKey:l,spaceKey:this.keys[" "]};return this.pointer=g,this.activePointer=void 0,g}touchMove(e,t){let{shiftKey:r,ctrlKey:i,metaKey:s,altKey:l}=e,h=e.changedTouches[0],g=this.pointer,f=Wr.getPoint(h,this.bounds),C=g?.point?D.sub(f,g.point):[0,0],y=Un(or({origin:f},g),{target:t,pointerId:h.identifier,point:f,delta:C,pressure:Wr.getPressure(h),shiftKey:r,ctrlKey:i,metaKey:X.isDarwin()?s:i,altKey:l,spaceKey:this.keys[" "]});return this.pointer=y,y}pointerDown(e,t){let{shiftKey:r,ctrlKey:i,metaKey:s,altKey:l}=e,h=Wr.getPoint(e,this.bounds);this.activePointer=e.pointerId;let g={target:t,pointerId:e.pointerId,origin:h,point:h,delta:[0,0],pressure:Wr.getPressure(e),shiftKey:r,ctrlKey:i,metaKey:X.isDarwin()?s:i,altKey:l,spaceKey:this.keys[" "]};return this.pointer=g,g}pointerEnter(e,t){let{shiftKey:r,ctrlKey:i,metaKey:s,altKey:l}=e,h=Wr.getPoint(e,this.bounds),g={target:t,pointerId:e.pointerId,origin:h,delta:[0,0],point:h,pressure:Wr.getPressure(e),shiftKey:r,ctrlKey:i,metaKey:X.isDarwin()?s:i,altKey:l,spaceKey:this.keys[" "]};return this.pointer=g,g}pointerMove(e,t){let{shiftKey:r,ctrlKey:i,metaKey:s,altKey:l}=e,h=this.pointer,g=Wr.getPoint(e,this.bounds),f=h?.point?D.sub(g,h.point):[0,0],C=Un(or({origin:g},h),{target:t,pointerId:e.pointerId,point:g,delta:f,pressure:Wr.getPressure(e),shiftKey:r,ctrlKey:i,metaKey:X.isDarwin()?s:i,altKey:l,spaceKey:this.keys[" "]});return this.pointer=C,C}pointerUp(e,t){let{shiftKey:r,ctrlKey:i,metaKey:s,altKey:l}=e,h=this.pointer,g=Wr.getPoint(e,this.bounds),f=h?.point?D.sub(g,h.point):[0,0];this.activePointer=void 0;let C=Un(or({origin:g},h),{target:t,pointerId:e.pointerId,point:g,delta:f,pressure:Wr.getPressure(e),shiftKey:r,ctrlKey:i,metaKey:X.isDarwin()?s:i,altKey:l,spaceKey:this.keys[" "]});return this.pointer=C,this.pointerUpTime=performance.now(),C}isDoubleClick(){if(!this.pointer)return!1;let{origin:e,point:t}=this.pointer,r=performance.now()-this.pointerUpTime<E1&&D.dist(e,t)<4;return r&&(this.activePointer=void 0),r}clear(){this.pointer=void 0}resetDoubleClick(){this.pointerUpTime=0}pinch(e,t){let{shiftKey:r,ctrlKey:i,metaKey:s,altKey:l}=this.keys,h=D.sub(t,e),g={pointerId:0,target:"pinch",origin:t,delta:h,point:D.sub(D.toFixed(e),[this.bounds.minX,this.bounds.minY]),pressure:.5,shiftKey:r,ctrlKey:i,metaKey:X.isDarwin()?s:i,altKey:l,spaceKey:this.keys[" "]};return this.pointer=g,g}reset(){this.pointerUpTime=0,this.pointer=void 0,this.keyboard=void 0,this.activePointer=void 0,this.keys={}}static getPoint(e,t){return[+e.clientX.toFixed(2)-t.minX,+e.clientY.toFixed(2)-t.minY]}static getPressure(e){return"pressure"in e&&+e.pressure.toFixed(2)||.5}static commandKey(){return X.isDarwin()?"\u2318":"Ctrl"}},wu=new Wr,y1=Object.freeze({});function w1(e){var t=e,{id:r="tl",shapeUtils:i,page:s,pageState:l,assets:h=y1,users:g,userId:f,theme:C,meta:y,snapLines:b,eraseLine:R,grid:k,containerRef:A,performanceMode:O,components:B,hideHandles:F=!1,hideIndicators:j=!1,hideCloneHandles:J=!1,hideBindingHandles:ce=!1,hideResizeHandles:re=!1,hideRotateHandles:ne=!1,hideBounds:le=!1,hideGrid:me=!0,showDashedBrush:Ve=!1,hideCursors:lt}=t,Ye=Li(t,["id","shapeUtils","page","pageState","assets","users","userId","theme","meta","snapLines","eraseLine","grid","containerRef","performanceMode","components","hideHandles","hideIndicators","hideCloneHandles","hideBindingHandles","hideResizeHandles","hideRotateHandles","hideBounds","hideGrid","showDashedBrush","hideCursors"]);Sa(C,"#"+r);let ct=u.useRef(null),pt=u.useRef(l);u.useEffect(()=>{pt.current=l},[l]);let[tr,qt]=u.useState(()=>({callbacks:Ye,shapeUtils:i,rSelectionBounds:ct,rPageState:pt,bounds:{minX:0,minY:0,maxX:1/0,maxY:1/0,width:1/0,height:1/0},inputs:new Wr})),_r=u.useCallback(Ge=>{qt(Gt=>Un(or({},Gt),{bounds:Ge}))},[]);return u.createElement(Tn.Provider,{value:tr},u.createElement(Jl,{id:r,page:s,pageState:l,assets:h,snapLines:b,eraseLine:R,grid:k,users:g,userId:f,externalContainerRef:A,hideBounds:le,hideIndicators:j,hideHandles:F,hideCloneHandles:J,hideBindingHandles:ce,hideRotateHandle:ne,hideResizeHandles:re,hideGrid:me,showDashedBrush:Ve,onBoundsChange:_r,performanceMode:O,components:B,meta:y,hideCursors:lt}))}var oi=u.memo(w1),zn=u.memo(u.forwardRef(function(e,t){var r=e,{children:i,className:s=""}=r,l=Li(r,["children","className"]);return u.createElement("div",or({ref:t,className:`tl-positioned-div ${s}`,draggable:!1},l),u.createElement("div",{className:"tl-inner-div"},i))})),Oa=class{constructor(){Tr(this,"refMap",new Map),Tr(this,"boundsCache",new WeakMap),Tr(this,"showCloneHandles",!1),Tr(this,"hideBounds",!1),Tr(this,"isStateful",!1),Tr(this,"shouldRender",(e,t)=>!0),Tr(this,"getRef",e=>(this.refMap.has(e.id)||this.refMap.set(e.id,u.createRef()),this.refMap.get(e.id))),Tr(this,"hitTestBounds",(e,t)=>{let r=this.getBounds(e),i=pn.getRotatedCorners(r,e.rotation);return i.every(s=>pn.pointInBounds(s,t))||Hs(i,t).length>0}),Tr(this,"getRotatedBounds",e=>pn.getBoundsFromPoints(pn.getRotatedCorners(this.getBounds(e),e.rotation)))}};Tr(Oa,"Component",e=>u.forwardRef(e)),Tr(Oa,"Indicator",e=>e);/**
 * String.prototype.replaceAll() polyfill
 * https://gomakethings.com/how-to-replace-a-section-of-a-string-with-another-one-with-vanilla-js/
 * @author Chris Ferdinandi
 * @license MIT
 */var Ql=q(6808),et=q(6753),bu=q(335);function e0(e){return e.displayName||e.name||"Component"}var Ba=u.createContext(null),mo=Ba.Consumer,b1=Ba.Provider,t0=b1,r0=Ba;function x1(e,t){var r=t||{},i=r.intlPropName,s=i===void 0?"intl":i,l=r.forwardRef,h=l===void 0?!1:l,g=r.enforceContext,f=g===void 0?!0:g,C=function(y){return React.createElement(mo,null,function(b){var R;f&&invariantIntlContext(b);var k=(R={},R[s]=b,R);return React.createElement(e,__assign({},y,k,{ref:h?y.forwardedRef:null}))})};return C.displayName="injectIntl(".concat(e0(e),")"),C.WrappedComponent=e,h?hoistNonReactStatics(React.forwardRef(function(y,b){return React.createElement(C,__assign({},y,{forwardedRef:b}))}),e):hoistNonReactStatics(C,e)}function n0(e){return Math.floor(Math.log(e)*Math.LOG10E)}function i0(e,t){if(typeof e.repeat=="function")return e.repeat(t);for(var r=new Array(t),i=0;i<r.length;i++)r[i]=e;return r.join("")}function Wo(e,t,r,i){e.get(t)||e.set(t,Object.create(null));var s=e.get(t);s[r]=i}function o0(e,t,r){for(var i=0,s=Object.keys(r);i<s.length;i++){var l=s[i];Wo(e,t,l,r[l])}}function s0(e,t,r){return Gs(e,t,r)[r]}function Gs(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s=e.get(t);if(!s)throw new TypeError("".concat(t," InternalSlot has not been initialized"));return r.reduce(function(l,h){return l[h]=s[h],l},Object.create(null))}function _1(e){return e.type==="literal"}function xu(e,t,r){var i=r.value;Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:i})}var a0=/-u(?:-[0-9a-z]{2,8})+/gi;function S1(e,t,r){if(r===void 0&&(r=Error),!e)throw new r(t)}var rr;(function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(rr||(rr={}));var Cr;(function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"})(Cr||(Cr={}));var Di;(function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"})(Di||(Di={}));function L1(e){return e.type===Cr.literal}function R1(e){return e.type===Cr.argument}function I1(e){return e.type===Cr.number}function T1(e){return e.type===Cr.date}function Ws(e){return e.type===Cr.time}function D1(e){return e.type===Cr.select}function Ks(e){return e.type===Cr.plural}function $a(e){return e.type===Cr.pound}function A1(e){return e.type===Cr.tag}function k1(e){return!!(e&&typeof e=="object"&&e.type===Di.number)}function bs(e){return!!(e&&typeof e=="object"&&e.type===Di.dateTime)}function l0(e){return{type:Cr.literal,value:e}}function u0(e,t){return{type:Cr.number,value:e,style:t}}var P1=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,c0=/[\t-\r \x85\u200E\u200F\u2028\u2029]/,d0=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function Fa(e){var t={};return e.replace(d0,function(r){var i=r.length;switch(r[0]){case"G":t.era=i===4?"long":i===5?"narrow":"short";break;case"y":t.year=i===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][i-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][i-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=i===4?"short":i===5?"narrow":"short";break;case"e":if(i<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][i-4];break;case"c":if(i<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][i-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][i-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][i-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][i-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][i-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][i-1];break;case"s":t.second=["numeric","2-digit"][i-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=i<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),t}var M1=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function O1(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");for(var t=e.split(M1).filter(function(R){return R.length>0}),r=[],i=0,s=t;i<s.length;i++){var l=s[i],h=l.split("/");if(h.length===0)throw new Error("Invalid number skeleton");for(var g=h[0],f=h.slice(1),C=0,y=f;C<y.length;C++){var b=y[C];if(b.length===0)throw new Error("Invalid number skeleton")}r.push({stem:g,options:f})}return r}function h0(e){return e.replace(/^(.*?)-/,"")}var Ys=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Ha=/^(@+)?(\+|#+)?[rs]?$/g,Na=/(\*)(0+)|(#+)(0+)|(0+)/g,B1=/^(0+)$/;function $1(e){var t={};return e[e.length-1]==="r"?t.roundingPriority="morePrecision":e[e.length-1]==="s"&&(t.roundingPriority="lessPrecision"),e.replace(Ha,function(r,i,s){return typeof s!="string"?(t.minimumSignificantDigits=i.length,t.maximumSignificantDigits=i.length):s==="+"?t.minimumSignificantDigits=i.length:i[0]==="#"?t.maximumSignificantDigits=i.length:(t.minimumSignificantDigits=i.length,t.maximumSignificantDigits=i.length+(typeof s=="string"?s.length:0)),""}),t}function F1(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function f0(e){var t;if(e[0]==="E"&&e[1]==="E"?(t={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(t={notation:"scientific"},e=e.slice(1)),t){var r=e.slice(0,2);if(r==="+!"?(t.signDisplay="always",e=e.slice(2)):r==="+?"&&(t.signDisplay="exceptZero",e=e.slice(2)),!B1.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function H1(e){var t={},r=F1(e);return r||t}function N1(e){for(var t={},r=0,i=e;r<i.length;r++){var s=i[r];switch(s.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=s.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=h0(s.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=(0,et.pi)((0,et.pi)((0,et.pi)({},t),{notation:"scientific"}),s.options.reduce(function(f,C){return(0,et.pi)((0,et.pi)({},f),H1(C))},{}));continue;case"engineering":t=(0,et.pi)((0,et.pi)((0,et.pi)({},t),{notation:"engineering"}),s.options.reduce(function(f,C){return(0,et.pi)((0,et.pi)({},f),H1(C))},{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(s.options[0]);continue;case"integer-width":if(s.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");s.options[0].replace(Na,function(f,C,y,b,R,k){if(C)t.minimumIntegerDigits=y.length;else{if(b&&R)throw new Error("We currently do not support maximum integer digits");if(k)throw new Error("We currently do not support exact integer digits")}return""});continue}if(B1.test(s.stem)){t.minimumIntegerDigits=s.stem.length;continue}if(Ys.test(s.stem)){if(s.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");s.stem.replace(Ys,function(f,C,y,b,R,k){return y==="*"?t.minimumFractionDigits=C.length:b&&b[0]==="#"?t.maximumFractionDigits=b.length:R&&k?(t.minimumFractionDigits=R.length,t.maximumFractionDigits=R.length+k.length):(t.minimumFractionDigits=C.length,t.maximumFractionDigits=C.length),""});var l=s.options[0];l==="w"?t=(0,et.pi)((0,et.pi)({},t),{trailingZeroDisplay:"stripIfInteger"}):l&&(t=(0,et.pi)((0,et.pi)({},t),$1(l)));continue}if(Ha.test(s.stem)){t=(0,et.pi)((0,et.pi)({},t),$1(s.stem));continue}var h=F1(s.stem);h&&(t=(0,et.pi)((0,et.pi)({},t),h));var g=f0(s.stem);g&&(t=(0,et.pi)((0,et.pi)({},t),g))}return t}var Ko={AX:["H"],BQ:["H"],CP:["H"],CZ:["H"],DK:["H"],FI:["H"],ID:["H"],IS:["H"],ML:["H"],NE:["H"],RU:["H"],SE:["H"],SJ:["H"],SK:["H"],AS:["h","H"],BT:["h","H"],DJ:["h","H"],ER:["h","H"],GH:["h","H"],IN:["h","H"],LS:["h","H"],PG:["h","H"],PW:["h","H"],SO:["h","H"],TO:["h","H"],VU:["h","H"],WS:["h","H"],"001":["H","h"],AL:["h","H","hB"],TD:["h","H","hB"],"ca-ES":["H","h","hB"],CF:["H","h","hB"],CM:["H","h","hB"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],LU:["H","h","hB"],NP:["H","h","hB"],PF:["H","h","hB"],SC:["H","h","hB"],SM:["H","h","hB"],SN:["H","h","hB"],TF:["H","h","hB"],VA:["H","h","hB"],CY:["h","H","hb","hB"],GR:["h","H","hb","hB"],CO:["h","H","hB","hb"],DO:["h","H","hB","hb"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],NA:["h","H","hB","hb"],PA:["h","H","hB","hb"],PR:["h","H","hB","hb"],VE:["h","H","hB","hb"],AC:["H","h","hb","hB"],AI:["H","h","hb","hB"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CC:["H","h","hb","hB"],CK:["H","h","hb","hB"],CX:["H","h","hb","hB"],DG:["H","h","hb","hB"],FK:["H","h","hb","hB"],GB:["H","h","hb","hB"],GG:["H","h","hb","hB"],GI:["H","h","hb","hB"],IE:["H","h","hb","hB"],IM:["H","h","hb","hB"],IO:["H","h","hb","hB"],JE:["H","h","hb","hB"],LT:["H","h","hb","hB"],MK:["H","h","hb","hB"],MN:["H","h","hb","hB"],MS:["H","h","hb","hB"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],PN:["H","h","hb","hB"],SH:["H","h","hb","hB"],SX:["H","h","hb","hB"],TA:["H","h","hb","hB"],ZA:["H","h","hb","hB"],"af-ZA":["H","h","hB","hb"],AR:["H","h","hB","hb"],CL:["H","h","hB","hb"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],EA:["H","h","hB","hb"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],GT:["H","h","hB","hb"],HN:["H","h","hB","hb"],IC:["H","h","hB","hb"],KG:["H","h","hB","hb"],KM:["H","h","hB","hb"],LK:["H","h","hB","hb"],MA:["H","h","hB","hb"],MX:["H","h","hB","hb"],NI:["H","h","hB","hb"],PY:["H","h","hB","hb"],SV:["H","h","hB","hb"],UY:["H","h","hB","hb"],JP:["H","h","K"],AD:["H","hB"],AM:["H","hB"],AO:["H","hB"],AT:["H","hB"],AW:["H","hB"],BE:["H","hB"],BF:["H","hB"],BJ:["H","hB"],BL:["H","hB"],BR:["H","hB"],CG:["H","hB"],CI:["H","hB"],CV:["H","hB"],DE:["H","hB"],EE:["H","hB"],FR:["H","hB"],GA:["H","hB"],GF:["H","hB"],GN:["H","hB"],GP:["H","hB"],GW:["H","hB"],HR:["H","hB"],IL:["H","hB"],IT:["H","hB"],KZ:["H","hB"],MC:["H","hB"],MD:["H","hB"],MF:["H","hB"],MQ:["H","hB"],MZ:["H","hB"],NC:["H","hB"],NL:["H","hB"],PM:["H","hB"],PT:["H","hB"],RE:["H","hB"],RO:["H","hB"],SI:["H","hB"],SR:["H","hB"],ST:["H","hB"],TG:["H","hB"],TR:["H","hB"],WF:["H","hB"],YT:["H","hB"],BD:["h","hB","H"],PK:["h","hB","H"],AZ:["H","hB","h"],BA:["H","hB","h"],BG:["H","hB","h"],CH:["H","hB","h"],GE:["H","hB","h"],LI:["H","hB","h"],ME:["H","hB","h"],RS:["H","hB","h"],UA:["H","hB","h"],UZ:["H","hB","h"],XK:["H","hB","h"],AG:["h","hb","H","hB"],AU:["h","hb","H","hB"],BB:["h","hb","H","hB"],BM:["h","hb","H","hB"],BS:["h","hb","H","hB"],CA:["h","hb","H","hB"],DM:["h","hb","H","hB"],"en-001":["h","hb","H","hB"],FJ:["h","hb","H","hB"],FM:["h","hb","H","hB"],GD:["h","hb","H","hB"],GM:["h","hb","H","hB"],GU:["h","hb","H","hB"],GY:["h","hb","H","hB"],JM:["h","hb","H","hB"],KI:["h","hb","H","hB"],KN:["h","hb","H","hB"],KY:["h","hb","H","hB"],LC:["h","hb","H","hB"],LR:["h","hb","H","hB"],MH:["h","hb","H","hB"],MP:["h","hb","H","hB"],MW:["h","hb","H","hB"],NZ:["h","hb","H","hB"],SB:["h","hb","H","hB"],SG:["h","hb","H","hB"],SL:["h","hb","H","hB"],SS:["h","hb","H","hB"],SZ:["h","hb","H","hB"],TC:["h","hb","H","hB"],TT:["h","hb","H","hB"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],VC:["h","hb","H","hB"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],ZM:["h","hb","H","hB"],BO:["H","hB","h","hb"],EC:["H","hB","h","hb"],ES:["H","hB","h","hb"],GQ:["H","hB","h","hb"],PE:["H","hB","h","hb"],AE:["h","hB","hb","H"],"ar-001":["h","hB","hb","H"],BH:["h","hB","hb","H"],DZ:["h","hB","hb","H"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],HK:["h","hB","hb","H"],IQ:["h","hB","hb","H"],JO:["h","hB","hb","H"],KW:["h","hB","hb","H"],LB:["h","hB","hb","H"],LY:["h","hB","hb","H"],MO:["h","hB","hb","H"],MR:["h","hB","hb","H"],OM:["h","hB","hb","H"],PH:["h","hB","hb","H"],PS:["h","hB","hb","H"],QA:["h","hB","hb","H"],SA:["h","hB","hb","H"],SD:["h","hB","hb","H"],SY:["h","hB","hb","H"],TN:["h","hB","hb","H"],YE:["h","hB","hb","H"],AF:["H","hb","hB","h"],LA:["H","hb","hB","h"],CN:["H","hB","hb","h"],LV:["H","hB","hb","h"],TL:["H","hB","hb","h"],"zu-ZA":["H","hB","hb","h"],CD:["hB","H"],IR:["hB","H"],"hi-IN":["hB","h","H"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"te-IN":["hB","h","H"],KH:["hB","h","H","hb"],"ta-IN":["hB","h","hb","H"],BN:["hb","hB","h","H"],MY:["hb","hB","h","H"],ET:["hB","hb","h","H"],"gu-IN":["hB","hb","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],TW:["hB","hb","h","H"],KE:["hB","hb","H","h"],MM:["hB","hb","H","h"],TZ:["hB","hb","H","h"],UG:["hB","hb","H","h"]};function p0(e,t){for(var r="",i=0;i<e.length;i++){var s=e.charAt(i);if(s==="j"){for(var l=0;i+1<e.length&&e.charAt(i+1)===s;)l++,i++;var h=1+(l&1),g=l<2?1:3+(l>>1),f="a",C=Xs(t);for((C=="H"||C=="k")&&(g=0);g-- >0;)r+=f;for(;h-- >0;)r=C+r}else s==="J"?r+="H":r+=s}return r}function Xs(e){var t=e.hourCycle;if(t===void 0&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var r=e.language,i;r!=="root"&&(i=e.maximize().region);var s=Ko[i||""]||Ko[r||""]||Ko["".concat(r,"-001")]||Ko["001"];return s[0]}var qi,Gn=new RegExp("^".concat(P1.source,"*")),g0=new RegExp("".concat(P1.source,"*$"));function Nt(e,t){return{start:e,end:t}}var m0=!!String.prototype.startsWith,Ji=!!String.fromCodePoint,v0=!!Object.fromEntries,C0=!!String.prototype.codePointAt,V1=!!String.prototype.trimStart,j1=!!String.prototype.trimEnd,E0=!!Number.isSafeInteger,U1=E0?Number.isSafeInteger:function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},Va=!0;try{var y0=G1("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Va=((qi=y0.exec("a"))===null||qi===void 0?void 0:qi[0])==="a"}catch{Va=!1}var ja=m0?function(t,r,i){return t.startsWith(r,i)}:function(t,r,i){return t.slice(i,i+r.length)===r},Ua=Ji?String.fromCodePoint:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var i="",s=t.length,l=0,h;s>l;){if(h=t[l++],h>1114111)throw RangeError(h+" is not a valid code point");i+=h<65536?String.fromCharCode(h):String.fromCharCode(((h-=65536)>>10)+55296,h%1024+56320)}return i},Z1=v0?Object.fromEntries:function(t){for(var r={},i=0,s=t;i<s.length;i++){var l=s[i],h=l[0],g=l[1];r[h]=g}return r},z1=C0?function(t,r){return t.codePointAt(r)}:function(t,r){var i=t.length;if(!(r<0||r>=i)){var s=t.charCodeAt(r),l;return s<55296||s>56319||r+1===i||(l=t.charCodeAt(r+1))<56320||l>57343?s:(s-55296<<10)+(l-56320)+65536}},w0=V1?function(t){return t.trimStart()}:function(t){return t.replace(Gn,"")},b0=j1?function(t){return t.trimEnd()}:function(t){return t.replace(g0,"")};function G1(e,t){return new RegExp(e,t)}var Za;if(Va){var W1=G1("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Za=function(t,r){var i;W1.lastIndex=r;var s=W1.exec(t);return(i=s[1])!==null&&i!==void 0?i:""}}else Za=function(t,r){for(var i=[];;){var s=z1(t,r);if(s===void 0||K1(s)||vo(s))break;i.push(s),r+=s>=65536?2:1}return Ua.apply(void 0,i)};var x0=function(){function e(t,r){r===void 0&&(r={}),this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!r.ignoreTag,this.locale=r.locale,this.requiresOtherClause=!!r.requiresOtherClause,this.shouldParseSkeletons=!!r.shouldParseSkeletons}return e.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(t,r,i){for(var s=[];!this.isEOF();){var l=this.char();if(l===123){var h=this.parseArgument(t,i);if(h.err)return h;s.push(h.val)}else{if(l===125&&t>0)break;if(l===35&&(r==="plural"||r==="selectordinal")){var g=this.clonePosition();this.bump(),s.push({type:Cr.pound,location:Nt(g,this.clonePosition())})}else if(l===60&&!this.ignoreTag&&this.peek()===47){if(i)break;return this.error(rr.UNMATCHED_CLOSING_TAG,Nt(this.clonePosition(),this.clonePosition()))}else if(l===60&&!this.ignoreTag&&za(this.peek()||0)){var h=this.parseTag(t,r);if(h.err)return h;s.push(h.val)}else{var h=this.parseLiteral(t,r);if(h.err)return h;s.push(h.val)}}}return{val:s,err:null}},e.prototype.parseTag=function(t,r){var i=this.clonePosition();this.bump();var s=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Cr.literal,value:"<".concat(s,"/>"),location:Nt(i,this.clonePosition())},err:null};if(this.bumpIf(">")){var l=this.parseMessage(t+1,r,!0);if(l.err)return l;var h=l.val,g=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!za(this.char()))return this.error(rr.INVALID_TAG,Nt(g,this.clonePosition()));var f=this.clonePosition(),C=this.parseTagName();return s!==C?this.error(rr.UNMATCHED_CLOSING_TAG,Nt(f,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Cr.tag,value:s,children:h,location:Nt(i,this.clonePosition())},err:null}:this.error(rr.INVALID_TAG,Nt(g,this.clonePosition())))}else return this.error(rr.UNCLOSED_TAG,Nt(i,this.clonePosition()))}else return this.error(rr.INVALID_TAG,Nt(i,this.clonePosition()))},e.prototype.parseTagName=function(){var t=this.offset();for(this.bump();!this.isEOF()&&Ga(this.char());)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(t,r){for(var i=this.clonePosition(),s="";;){var l=this.tryParseQuote(r);if(l){s+=l;continue}var h=this.tryParseUnquoted(t,r);if(h){s+=h;continue}var g=this.tryParseLeftAngleBracket();if(g){s+=g;continue}break}var f=Nt(i,this.clonePosition());return{val:{type:Cr.literal,value:s,location:f},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!_0(this.peek()||0))?(this.bump(),"<"):null},e.prototype.tryParseQuote=function(t){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(t==="plural"||t==="selectordinal")break;return null;default:return null}this.bump();var r=[this.char()];for(this.bump();!this.isEOF();){var i=this.char();if(i===39)if(this.peek()===39)r.push(39),this.bump();else{this.bump();break}else r.push(i);this.bump()}return Ua.apply(void 0,r)},e.prototype.tryParseUnquoted=function(t,r){if(this.isEOF())return null;var i=this.char();return i===60||i===123||i===35&&(r==="plural"||r==="selectordinal")||i===125&&t>0?null:(this.bump(),Ua(i))},e.prototype.parseArgument=function(t,r){var i=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(rr.EXPECT_ARGUMENT_CLOSING_BRACE,Nt(i,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(rr.EMPTY_ARGUMENT,Nt(i,this.clonePosition()));var s=this.parseIdentifierIfPossible().value;if(!s)return this.error(rr.MALFORMED_ARGUMENT,Nt(i,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(rr.EXPECT_ARGUMENT_CLOSING_BRACE,Nt(i,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Cr.argument,value:s,location:Nt(i,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(rr.EXPECT_ARGUMENT_CLOSING_BRACE,Nt(i,this.clonePosition())):this.parseArgumentOptions(t,r,s,i);default:return this.error(rr.MALFORMED_ARGUMENT,Nt(i,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var t=this.clonePosition(),r=this.offset(),i=Za(this.message,r),s=r+i.length;this.bumpTo(s);var l=this.clonePosition(),h=Nt(t,l);return{value:i,location:h}},e.prototype.parseArgumentOptions=function(t,r,i,s){var l,h=this.clonePosition(),g=this.parseIdentifierIfPossible().value,f=this.clonePosition();switch(g){case"":return this.error(rr.EXPECT_ARGUMENT_TYPE,Nt(h,f));case"number":case"date":case"time":{this.bumpSpace();var C=null;if(this.bumpIf(",")){this.bumpSpace();var y=this.clonePosition(),b=this.parseSimpleArgStyleIfPossible();if(b.err)return b;var R=b0(b.val);if(R.length===0)return this.error(rr.EXPECT_ARGUMENT_STYLE,Nt(this.clonePosition(),this.clonePosition()));var k=Nt(y,this.clonePosition());C={style:R,styleLocation:k}}var A=this.tryParseArgumentClose(s);if(A.err)return A;var O=Nt(s,this.clonePosition());if(C&&ja(C?.style,"::",0)){var B=w0(C.style.slice(2));if(g==="number"){var b=this.parseNumberSkeletonFromString(B,C.styleLocation);return b.err?b:{val:{type:Cr.number,value:i,location:O,style:b.val},err:null}}else{if(B.length===0)return this.error(rr.EXPECT_DATE_TIME_SKELETON,O);var F=B;this.locale&&(F=p0(B,this.locale));var R={type:Di.dateTime,pattern:F,location:C.styleLocation,parsedOptions:this.shouldParseSkeletons?Fa(F):{}},j=g==="date"?Cr.date:Cr.time;return{val:{type:j,value:i,location:O,style:R},err:null}}}return{val:{type:g==="number"?Cr.number:g==="date"?Cr.date:Cr.time,value:i,location:O,style:(l=C?.style)!==null&&l!==void 0?l:null},err:null}}case"plural":case"selectordinal":case"select":{var J=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(rr.EXPECT_SELECT_ARGUMENT_OPTIONS,Nt(J,(0,et.pi)({},J)));this.bumpSpace();var ce=this.parseIdentifierIfPossible(),re=0;if(g!=="select"&&ce.value==="offset"){if(!this.bumpIf(":"))return this.error(rr.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Nt(this.clonePosition(),this.clonePosition()));this.bumpSpace();var b=this.tryParseDecimalInteger(rr.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,rr.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(b.err)return b;this.bumpSpace(),ce=this.parseIdentifierIfPossible(),re=b.val}var ne=this.tryParsePluralOrSelectOptions(t,g,r,ce);if(ne.err)return ne;var A=this.tryParseArgumentClose(s);if(A.err)return A;var le=Nt(s,this.clonePosition());return g==="select"?{val:{type:Cr.select,value:i,options:Z1(ne.val),location:le},err:null}:{val:{type:Cr.plural,value:i,options:Z1(ne.val),offset:re,pluralType:g==="plural"?"cardinal":"ordinal",location:le},err:null}}default:return this.error(rr.INVALID_ARGUMENT_TYPE,Nt(h,f))}},e.prototype.tryParseArgumentClose=function(t){return this.isEOF()||this.char()!==125?this.error(rr.EXPECT_ARGUMENT_CLOSING_BRACE,Nt(t,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var t=0,r=this.clonePosition();!this.isEOF();){var i=this.char();switch(i){case 39:{this.bump();var s=this.clonePosition();if(!this.bumpUntil("'"))return this.error(rr.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Nt(s,this.clonePosition()));this.bump();break}case 123:{t+=1,this.bump();break}case 125:{if(t>0)t-=1;else return{val:this.message.slice(r.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(r.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(t,r){var i=[];try{i=O1(t)}catch{return this.error(rr.INVALID_NUMBER_SKELETON,r)}return{val:{type:Di.number,tokens:i,location:r,parsedOptions:this.shouldParseSkeletons?N1(i):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(t,r,i,s){for(var l,h=!1,g=[],f=new Set,C=s.value,y=s.location;;){if(C.length===0){var b=this.clonePosition();if(r!=="select"&&this.bumpIf("=")){var R=this.tryParseDecimalInteger(rr.EXPECT_PLURAL_ARGUMENT_SELECTOR,rr.INVALID_PLURAL_ARGUMENT_SELECTOR);if(R.err)return R;y=Nt(b,this.clonePosition()),C=this.message.slice(b.offset,this.offset())}else break}if(f.has(C))return this.error(r==="select"?rr.DUPLICATE_SELECT_ARGUMENT_SELECTOR:rr.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,y);C==="other"&&(h=!0),this.bumpSpace();var k=this.clonePosition();if(!this.bumpIf("{"))return this.error(r==="select"?rr.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:rr.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Nt(this.clonePosition(),this.clonePosition()));var A=this.parseMessage(t+1,r,i);if(A.err)return A;var O=this.tryParseArgumentClose(k);if(O.err)return O;g.push([C,{value:A.val,location:Nt(k,this.clonePosition())}]),f.add(C),this.bumpSpace(),l=this.parseIdentifierIfPossible(),C=l.value,y=l.location}return g.length===0?this.error(r==="select"?rr.EXPECT_SELECT_ARGUMENT_SELECTOR:rr.EXPECT_PLURAL_ARGUMENT_SELECTOR,Nt(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!h?this.error(rr.MISSING_OTHER_CLAUSE,Nt(this.clonePosition(),this.clonePosition())):{val:g,err:null}},e.prototype.tryParseDecimalInteger=function(t,r){var i=1,s=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(i=-1);for(var l=!1,h=0;!this.isEOF();){var g=this.char();if(g>=48&&g<=57)l=!0,h=h*10+(g-48),this.bump();else break}var f=Nt(s,this.clonePosition());return l?(h*=i,U1(h)?{val:h,err:null}:this.error(r,f)):this.error(t,f)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");var r=z1(this.message,t);if(r===void 0)throw Error("Offset ".concat(t," is at invalid UTF-16 code unit boundary"));return r},e.prototype.error=function(t,r){return{val:null,err:{kind:t,message:this.message,location:r}}},e.prototype.bump=function(){if(!this.isEOF()){var t=this.char();t===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}},e.prototype.bumpIf=function(t){if(ja(this.message,t,this.offset())){for(var r=0;r<t.length;r++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(t){var r=this.offset(),i=this.message.indexOf(t,r);return i>=0?(this.bumpTo(i),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(t){if(this.offset()>t)throw Error("targetOffset ".concat(t," must be greater than or equal to the current offset ").concat(this.offset()));for(t=Math.min(t,this.message.length);;){var r=this.offset();if(r===t)break;if(r>t)throw Error("targetOffset ".concat(t," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&K1(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var t=this.char(),r=this.offset(),i=this.message.charCodeAt(r+(t>=65536?2:1));return i??null},e}();function za(e){return e>=97&&e<=122||e>=65&&e<=90}function _0(e){return za(e)||e===47}function Ga(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function K1(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function vo(e){return e>=33&&e<=35||e===36||e>=37&&e<=39||e===40||e===41||e===42||e===43||e===44||e===45||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||e===91||e===92||e===93||e===94||e===96||e===123||e===124||e===125||e===126||e===161||e>=162&&e<=165||e===166||e===167||e===169||e===171||e===172||e===174||e===176||e===177||e===182||e===187||e===191||e===215||e===247||e>=8208&&e<=8213||e>=8214&&e<=8215||e===8216||e===8217||e===8218||e>=8219&&e<=8220||e===8221||e===8222||e===8223||e>=8224&&e<=8231||e>=8240&&e<=8248||e===8249||e===8250||e>=8251&&e<=8254||e>=8257&&e<=8259||e===8260||e===8261||e===8262||e>=8263&&e<=8273||e===8274||e===8275||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||e===8608||e>=8609&&e<=8610||e===8611||e>=8612&&e<=8613||e===8614||e>=8615&&e<=8621||e===8622||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||e===8658||e===8659||e===8660||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||e===8968||e===8969||e===8970||e===8971||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||e===9001||e===9002||e>=9003&&e<=9083||e===9084||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||e===9655||e>=9656&&e<=9664||e===9665||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||e===9839||e>=9840&&e<=10087||e===10088||e===10089||e===10090||e===10091||e===10092||e===10093||e===10094||e===10095||e===10096||e===10097||e===10098||e===10099||e===10100||e===10101||e>=10132&&e<=10175||e>=10176&&e<=10180||e===10181||e===10182||e>=10183&&e<=10213||e===10214||e===10215||e===10216||e===10217||e===10218||e===10219||e===10220||e===10221||e===10222||e===10223||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||e===10627||e===10628||e===10629||e===10630||e===10631||e===10632||e===10633||e===10634||e===10635||e===10636||e===10637||e===10638||e===10639||e===10640||e===10641||e===10642||e===10643||e===10644||e===10645||e===10646||e===10647||e===10648||e>=10649&&e<=10711||e===10712||e===10713||e===10714||e===10715||e>=10716&&e<=10747||e===10748||e===10749||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||e===11158||e>=11159&&e<=11263||e>=11776&&e<=11777||e===11778||e===11779||e===11780||e===11781||e>=11782&&e<=11784||e===11785||e===11786||e===11787||e===11788||e===11789||e>=11790&&e<=11798||e===11799||e>=11800&&e<=11801||e===11802||e===11803||e===11804||e===11805||e>=11806&&e<=11807||e===11808||e===11809||e===11810||e===11811||e===11812||e===11813||e===11814||e===11815||e===11816||e===11817||e>=11818&&e<=11822||e===11823||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||e===11840||e===11841||e===11842||e>=11843&&e<=11855||e>=11856&&e<=11857||e===11858||e>=11859&&e<=11903||e>=12289&&e<=12291||e===12296||e===12297||e===12298||e===12299||e===12300||e===12301||e===12302||e===12303||e===12304||e===12305||e>=12306&&e<=12307||e===12308||e===12309||e===12310||e===12311||e===12312||e===12313||e===12314||e===12315||e===12316||e===12317||e>=12318&&e<=12319||e===12320||e===12336||e===64830||e===64831||e>=65093&&e<=65094}function m(e){e.forEach(function(t){if(delete t.location,D1(t)||Ks(t))for(var r in t.options)delete t.options[r].location,m(t.options[r].value);else I1(t)&&k1(t.style)||(T1(t)||Ws(t))&&bs(t.style)?delete t.style.location:A1(t)&&m(t.children)})}function n(e,t){t===void 0&&(t={}),t=(0,et.pi)({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var r=new x0(e,t).parse();if(r.err){var i=SyntaxError(rr[r.err.kind]);throw i.location=r.err.location,i.originalMessage=r.err.message,i}return t?.captureLocation||m(r.val),r.val}var o=null;function a(e,t){var r=t&&t.cache?t.cache:H,i=t&&t.serializer?t.serializer:T,s=t&&t.strategy?t.strategy:E;return s(e,{cache:r,serializer:i})}function c(e){return e==null||typeof e=="number"||typeof e=="boolean"}function d(e,t,r,i){var s=c(i)?i:r(i),l=t.get(s);return typeof l>"u"&&(l=e.call(this,i),t.set(s,l)),l}function p(e,t,r){var i=Array.prototype.slice.call(arguments,3),s=r(i),l=t.get(s);return typeof l>"u"&&(l=e.apply(this,i),t.set(s,l)),l}function v(e,t,r,i,s){return r.bind(t,e,i,s)}function E(e,t){var r=e.length===1?d:p;return v(e,this,r,t.cache.create(),t.serializer)}function w(e,t){return v(e,this,p,t.cache.create(),t.serializer)}function I(e,t){return v(e,this,d,t.cache.create(),t.serializer)}var T=function(){return JSON.stringify(arguments)};function $(){this.cache=Object.create(null)}$.prototype.get=function(e){return this.cache[e]},$.prototype.set=function(e,t){this.cache[e]=t};var H={create:function(){return new $}},V={variadic:w,monadic:I},U;(function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"})(U||(U={}));var z=function(e){(0,et.ZT)(t,e);function t(r,i,s){var l=e.call(this,r)||this;return l.code=i,l.originalMessage=s,l}return t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),se=function(e){(0,et.ZT)(t,e);function t(r,i,s,l){return e.call(this,'Invalid values for "'.concat(r,'": "').concat(i,'". Options are "').concat(Object.keys(s).join('", "'),'"'),U.INVALID_VALUE,l)||this}return t}(z),Ee=function(e){(0,et.ZT)(t,e);function t(r,i,s){return e.call(this,'Value for "'.concat(r,'" must be of type ').concat(i),U.INVALID_VALUE,s)||this}return t}(z),de=function(e){(0,et.ZT)(t,e);function t(r,i){return e.call(this,'The intl string context variable "'.concat(r,'" was not provided to the string "').concat(i,'"'),U.MISSING_VALUE,i)||this}return t}(z),ke;(function(e){e[e.literal=0]="literal",e[e.object=1]="object"})(ke||(ke={}));function Ie(e){return e.length<2?e:e.reduce(function(t,r){var i=t[t.length-1];return!i||i.type!==ke.literal||r.type!==ke.literal?t.push(r):i.value+=r.value,t},[])}function it(e){return typeof e=="function"}function $e(e,t,r,i,s,l,h){if(e.length===1&&L1(e[0]))return[{type:ke.literal,value:e[0].value}];for(var g=[],f=0,C=e;f<C.length;f++){var y=C[f];if(L1(y)){g.push({type:ke.literal,value:y.value});continue}if($a(y)){typeof l=="number"&&g.push({type:ke.literal,value:r.getNumberFormat(t).format(l)});continue}var b=y.value;if(!(s&&b in s))throw new de(b,h);var R=s[b];if(R1(y)){(!R||typeof R=="string"||typeof R=="number")&&(R=typeof R=="string"||typeof R=="number"?String(R):""),g.push({type:typeof R=="string"?ke.literal:ke.object,value:R});continue}if(T1(y)){var k=typeof y.style=="string"?i.date[y.style]:bs(y.style)?y.style.parsedOptions:void 0;g.push({type:ke.literal,value:r.getDateTimeFormat(t,k).format(R)});continue}if(Ws(y)){var k=typeof y.style=="string"?i.time[y.style]:bs(y.style)?y.style.parsedOptions:i.time.medium;g.push({type:ke.literal,value:r.getDateTimeFormat(t,k).format(R)});continue}if(I1(y)){var k=typeof y.style=="string"?i.number[y.style]:k1(y.style)?y.style.parsedOptions:void 0;k&&k.scale&&(R=R*(k.scale||1)),g.push({type:ke.literal,value:r.getNumberFormat(t,k).format(R)});continue}if(A1(y)){var A=y.children,O=y.value,B=s[O];if(!it(B))throw new Ee(O,"function",h);var F=$e(A,t,r,i,s,l),j=B(F.map(function(re){return re.value}));Array.isArray(j)||(j=[j]),g.push.apply(g,j.map(function(re){return{type:typeof re=="string"?ke.literal:ke.object,value:re}}))}if(D1(y)){var J=y.options[R]||y.options.other;if(!J)throw new se(y.value,R,Object.keys(y.options),h);g.push.apply(g,$e(J.value,t,r,i,s));continue}if(Ks(y)){var J=y.options["=".concat(R)];if(!J){if(!Intl.PluralRules)throw new z(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,U.MISSING_INTL_API,h);var ce=r.getPluralRules(t,{type:y.pluralType}).select(R-(y.offset||0));J=y.options[ce]||y.options.other}if(!J)throw new se(y.value,R,Object.keys(y.options),h);g.push.apply(g,$e(J.value,t,r,i,s,R-(y.offset||0)));continue}}return Ie(g)}function ot(e,t){return t?(0,et.pi)((0,et.pi)((0,et.pi)({},e||{}),t||{}),Object.keys(e).reduce(function(r,i){return r[i]=(0,et.pi)((0,et.pi)({},e[i]),t[i]||{}),r},{})):e}function ut(e,t){return t?Object.keys(e).reduce(function(r,i){return r[i]=ot(e[i],t[i]),r},(0,et.pi)({},e)):e}function Oe(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}function Ot(e){return e===void 0&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:a(function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((t=Intl.NumberFormat).bind.apply(t,(0,et.ev)([void 0],r,!1)))},{cache:Oe(e.number),strategy:V.variadic}),getDateTimeFormat:a(function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((t=Intl.DateTimeFormat).bind.apply(t,(0,et.ev)([void 0],r,!1)))},{cache:Oe(e.dateTime),strategy:V.variadic}),getPluralRules:a(function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((t=Intl.PluralRules).bind.apply(t,(0,et.ev)([void 0],r,!1)))},{cache:Oe(e.pluralRules),strategy:V.variadic})}}var ft=function(){function e(t,r,i,s){r===void 0&&(r=e.defaultLocale);var l=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(h){var g=l.formatToParts(h);if(g.length===1)return g[0].value;var f=g.reduce(function(C,y){return!C.length||y.type!==ke.literal||typeof C[C.length-1]!="string"?C.push(y.value):C[C.length-1]+=y.value,C},[]);return f.length<=1?f[0]||"":f},this.formatToParts=function(h){return $e(l.ast,l.locales,l.formatters,l.formats,h,void 0,l.message)},this.resolvedOptions=function(){var h;return{locale:((h=l.resolvedLocale)===null||h===void 0?void 0:h.toString())||Intl.NumberFormat.supportedLocalesOf(l.locales)[0]}},this.getAst=function(){return l.ast},this.locales=r,this.resolvedLocale=e.resolveLocale(r),typeof t=="string"){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{ignoreTag:s?.ignoreTag,locale:this.resolvedLocale})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=ut(e.formats,i),this.formatters=s&&s.formatters||Ot(this.formatterCache)}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(t){if(!(typeof Intl.Locale>"u")){var r=Intl.NumberFormat.supportedLocalesOf(t);return r.length>0?new Intl.Locale(r[0]):new Intl.Locale(typeof t=="string"?t:t[0])}},e.__parse=n,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}(),Wt;(function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"})(Wt||(Wt={}));var br=function(e){(0,et.ZT)(t,e);function t(r,i,s){var l=this,h=s?s instanceof Error?s:new Error(String(s)):void 0;return l=e.call(this,"[@formatjs/intl Error ".concat(r,"] ").concat(i,`
`).concat(h?`
`.concat(h.message,`
`).concat(h.stack):""))||this,l.code=r,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(l,t),l}return t}(Error),$r=function(e){(0,et.ZT)(t,e);function t(r,i){return e.call(this,Wt.UNSUPPORTED_FORMATTER,r,i)||this}return t}(br),Ur=function(e){(0,et.ZT)(t,e);function t(r,i){return e.call(this,Wt.INVALID_CONFIG,r,i)||this}return t}(br),Pr=function(e){(0,et.ZT)(t,e);function t(r,i){return e.call(this,Wt.MISSING_DATA,r,i)||this}return t}(br),Ct=function(e){(0,et.ZT)(t,e);function t(r,i,s){return e.call(this,Wt.FORMAT_ERROR,"".concat(r,`
Locale: `).concat(i,`
`),s)||this}return t}(br),kt=function(e){(0,et.ZT)(t,e);function t(r,i,s,l){var h=e.call(this,"".concat(r,`
MessageID: `).concat(s?.id,`
Default Message: `).concat(s?.defaultMessage,`
Description: `).concat(s?.description,`
`),i,l)||this;return h.descriptor=s,h}return t}(Ct),Sr=function(e){(0,et.ZT)(t,e);function t(r,i){var s=e.call(this,Wt.MISSING_TRANSLATION,'Missing message: "'.concat(r.id,'" for locale "').concat(i,'", using ').concat(r.defaultMessage?"default message (".concat(typeof r.defaultMessage=="string"?r.defaultMessage:r.defaultMessage.map(function(l){var h;return(h=l.value)!==null&&h!==void 0?h:JSON.stringify(l)}).join(),")"):"id"," as fallback."))||this;return s.descriptor=r,s}return t}(br);function pr(e,t,r){return r===void 0&&(r={}),t.reduce(function(i,s){return s in e?i[s]=e[s]:s in r&&(i[s]=r[s]),i},{})}var Er=function(e){},rn=function(e){},On={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:Er,onWarn:rn};function Wn(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function dn(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}function Co(e){e===void 0&&(e=Wn());var t=Intl.RelativeTimeFormat,r=Intl.ListFormat,i=Intl.DisplayNames,s=a(function(){for(var g,f=[],C=0;C<arguments.length;C++)f[C]=arguments[C];return new((g=Intl.DateTimeFormat).bind.apply(g,(0,et.ev)([void 0],f,!1)))},{cache:dn(e.dateTime),strategy:V.variadic}),l=a(function(){for(var g,f=[],C=0;C<arguments.length;C++)f[C]=arguments[C];return new((g=Intl.NumberFormat).bind.apply(g,(0,et.ev)([void 0],f,!1)))},{cache:dn(e.number),strategy:V.variadic}),h=a(function(){for(var g,f=[],C=0;C<arguments.length;C++)f[C]=arguments[C];return new((g=Intl.PluralRules).bind.apply(g,(0,et.ev)([void 0],f,!1)))},{cache:dn(e.pluralRules),strategy:V.variadic});return{getDateTimeFormat:s,getNumberFormat:l,getMessageFormat:a(function(g,f,C,y){return new ft(g,f,C,(0,et.pi)({formatters:{getNumberFormat:l,getDateTimeFormat:s,getPluralRules:h}},y||{}))},{cache:dn(e.message),strategy:V.variadic}),getRelativeTimeFormat:a(function(){for(var g=[],f=0;f<arguments.length;f++)g[f]=arguments[f];return new(t.bind.apply(t,(0,et.ev)([void 0],g,!1)))},{cache:dn(e.relativeTime),strategy:V.variadic}),getPluralRules:h,getListFormat:a(function(){for(var g=[],f=0;f<arguments.length;f++)g[f]=arguments[f];return new(r.bind.apply(r,(0,et.ev)([void 0],g,!1)))},{cache:dn(e.list),strategy:V.variadic}),getDisplayNames:a(function(){for(var g=[],f=0;f<arguments.length;f++)g[f]=arguments[f];return new(i.bind.apply(i,(0,et.ev)([void 0],g,!1)))},{cache:dn(e.displayNames),strategy:V.variadic})}}function xs(e,t,r,i){var s=e&&e[t],l;if(s&&(l=s[r]),l)return l;i(new $r("No ".concat(t," format named: ").concat(r)))}function _u(e){S1(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var Su=(0,et.pi)((0,et.pi)({},On),{textComponent:u.Fragment});function d2(e){return function(t){return e(u.Children.toArray(t))}}function S0(e,t){if(e===t)return!0;if(!e||!t)return!1;var r=Object.keys(e),i=Object.keys(t),s=r.length;if(i.length!==s)return!1;for(var l=0;l<s;l++){var h=r[l];if(e[h]!==t[h]||!Object.prototype.hasOwnProperty.call(t,h))return!1}return!0}function Y1(e,t){return Object.keys(e).reduce(function(r,i){return r[i]=(0,et.pi)({timeZone:t},e[i]),r},{})}function Lu(e,t){var r=Object.keys((0,et.pi)((0,et.pi)({},e),t));return r.reduce(function(i,s){return i[s]=(0,et.pi)((0,et.pi)({},e[s]||{}),t[s]||{}),i},{})}function Ru(e,t){if(!t)return e;var r=ft.formats;return(0,et.pi)((0,et.pi)((0,et.pi)({},r),e),{date:Lu(Y1(r.date,t),Y1(e.date||{},t)),time:Lu(Y1(r.time,t),Y1(e.time||{},t))})}var L0=function(e,t,r,i,s){var l=e.locale,h=e.formats,g=e.messages,f=e.defaultLocale,C=e.defaultFormats,y=e.fallbackOnEmptyString,b=e.onError,R=e.timeZone,k=e.defaultRichTextElements;r===void 0&&(r={id:""});var A=r.id,O=r.defaultMessage;S1(!!A,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var B=String(A),F=g&&Object.prototype.hasOwnProperty.call(g,B)&&g[B];if(Array.isArray(F)&&F.length===1&&F[0].type===Cr.literal)return F[0].value;if(!i&&F&&typeof F=="string"&&!k)return F.replace(/'\{(.*?)\}'/gi,"{$1}");if(i=(0,et.pi)((0,et.pi)({},k),i||{}),h=Ru(h,R),C=Ru(C,R),!F){if(y===!1&&F==="")return F;if((!O||l&&l.toLowerCase()!==f.toLowerCase())&&b(new Sr(r,l)),O)try{var j=t.getMessageFormat(O,f,C,s);return j.format(i)}catch(J){return b(new kt('Error formatting default message for: "'.concat(B,'", rendering default message verbatim'),l,r,J)),typeof O=="string"?O:B}return B}try{var j=t.getMessageFormat(F,l,h,(0,et.pi)({formatters:t},s||{}));return j.format(i)}catch(J){b(new kt('Error formatting message: "'.concat(B,'", using ').concat(O?"default message":"id"," as fallback."),l,r,J))}if(O)try{var j=t.getMessageFormat(O,f,C,s);return j.format(i)}catch(J){b(new kt('Error formatting the default message for: "'.concat(B,'", rendering message verbatim'),l,r,J))}return typeof F=="string"?F:typeof O=="string"?O:B},h2=["style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function Iu(e,t,r){var i=e.locale,s=e.formats,l=e.onError;r===void 0&&(r={});var h=r.format,g=h&&xs(s,"number",h,l)||{},f=pr(r,h2,g);return t(i,f)}function f2(e,t,r,i){i===void 0&&(i={});try{return Iu(e,t,i).format(r)}catch(s){e.onError(new br(Wt.FORMAT_ERROR,"Error formatting number.",s))}return String(r)}function p2(e,t,r,i){i===void 0&&(i={});try{return Iu(e,t,i).formatToParts(r)}catch(s){e.onError(new br(Wt.FORMAT_ERROR,"Error formatting number.",s))}return[]}var g2=["numeric","style"];function m2(e,t,r){var i=e.locale,s=e.formats,l=e.onError;r===void 0&&(r={});var h=r.format,g=!!h&&xs(s,"relative",h,l)||{},f=pr(r,g2,g);return t(i,f)}function v2(e,t,r,i,s){s===void 0&&(s={}),i||(i="second");var l=Intl.RelativeTimeFormat;l||e.onError(new z(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,U.MISSING_INTL_API));try{return m2(e,t,s).format(r,i)}catch(h){e.onError(new Ct("Error formatting relative time.",e.locale,h))}return String(r)}var Tu=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function X1(e,t,r,i){var s=e.locale,l=e.formats,h=e.onError,g=e.timeZone;i===void 0&&(i={});var f=i.format,C=(0,et.pi)((0,et.pi)({},g&&{timeZone:g}),f&&xs(l,t,f,h)),y=pr(i,Tu,C);return t==="time"&&!y.hour&&!y.minute&&!y.second&&!y.timeStyle&&!y.dateStyle&&(y=(0,et.pi)((0,et.pi)({},y),{hour:"numeric",minute:"numeric"})),r(s,y)}function C2(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s=r[0],l=r[1],h=l===void 0?{}:l,g=typeof s=="string"?new Date(s||0):s;try{return X1(e,"date",t,h).format(g)}catch(f){e.onError(new br(Wt.FORMAT_ERROR,"Error formatting date.",f))}return String(g)}function E2(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s=r[0],l=r[1],h=l===void 0?{}:l,g=typeof s=="string"?new Date(s||0):s;try{return X1(e,"time",t,h).format(g)}catch(f){e.onError(new br(Wt.FORMAT_ERROR,"Error formatting time.",f))}return String(g)}function y2(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s=r[0],l=r[1],h=r[2],g=h===void 0?{}:h,f=e.timeZone,C=e.locale,y=e.onError,b=pr(g,Tu,f?{timeZone:f}:{});try{return t(C,b).formatRange(s,l)}catch(R){y(new br(Wt.FORMAT_ERROR,"Error formatting date time range.",R))}return String(s)}function w2(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s=r[0],l=r[1],h=l===void 0?{}:l,g=typeof s=="string"?new Date(s||0):s;try{return X1(e,"date",t,h).formatToParts(g)}catch(f){e.onError(new br(Wt.FORMAT_ERROR,"Error formatting date.",f))}return[]}function b2(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s=r[0],l=r[1],h=l===void 0?{}:l,g=typeof s=="string"?new Date(s||0):s;try{return X1(e,"time",t,h).formatToParts(g)}catch(f){e.onError(new br(Wt.FORMAT_ERROR,"Error formatting time.",f))}return[]}var x2=["type"];function _2(e,t,r,i){var s=e.locale,l=e.onError;i===void 0&&(i={}),Intl.PluralRules||l(new z(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,U.MISSING_INTL_API));var h=pr(i,x2);try{return t(s,h).select(r)}catch(g){l(new Ct("Error formatting plural.",s,g))}return"other"}var S2=["type","style"],Du=Date.now();function L2(e){return"".concat(Du,"_").concat(e,"_").concat(Du)}function R2(e,t,r,i){i===void 0&&(i={});var s=Au(e,t,r,i).reduce(function(l,h){var g=h.value;return typeof g!="string"?l.push(g):typeof l[l.length-1]=="string"?l[l.length-1]+=g:l.push(g),l},[]);return s.length===1?s[0]:s.length===0?"":s}function Au(e,t,r,i){var s=e.locale,l=e.onError;i===void 0&&(i={});var h=Intl.ListFormat;h||l(new z(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,U.MISSING_INTL_API));var g=pr(i,S2);try{var f={},C=r.map(function(y,b){if(typeof y=="object"){var R=L2(b);return f[R]=y,R}return String(y)});return t(s,g).formatToParts(C).map(function(y){return y.type==="literal"?y:(0,et.pi)((0,et.pi)({},y),{value:f[y.value]||y.value})})}catch(y){l(new br(Wt.FORMAT_ERROR,"Error formatting list.",y))}return r}var I2=["style","type","fallback"];function T2(e,t,r,i){var s=e.locale,l=e.onError,h=Intl.DisplayNames;h||l(new z(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,U.MISSING_INTL_API));var g=pr(i,I2);try{return t(s,g).of(r)}catch(f){l(new br(Wt.FORMAT_ERROR,"Error formatting display name.",f))}}function D2(e){var t=e?e[Object.keys(e)[0]]:void 0;return typeof t=="string"}function A2(e){e.onWarn&&e.defaultRichTextElements&&D2(e.messages||{})&&e.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.io/docs/getting-started/message-distribution`)}function k2(e,t){var r=Co(t),i=(0,et.pi)((0,et.pi)({},On),e),s=i.locale,l=i.defaultLocale,h=i.onError;return s?!Intl.NumberFormat.supportedLocalesOf(s).length&&h?h(new Pr('Missing locale data for locale: "'.concat(s,'" in Intl.NumberFormat. Using default locale: "').concat(l,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(s).length&&h&&h(new Pr('Missing locale data for locale: "'.concat(s,'" in Intl.DateTimeFormat. Using default locale: "').concat(l,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(h&&h(new Ur('"locale" was not configured, using "'.concat(l,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),i.locale=i.defaultLocale||"en"),A2(i),(0,et.pi)((0,et.pi)({},i),{formatters:r,formatNumber:f2.bind(null,i,r.getNumberFormat),formatNumberToParts:p2.bind(null,i,r.getNumberFormat),formatRelativeTime:v2.bind(null,i,r.getRelativeTimeFormat),formatDate:C2.bind(null,i,r.getDateTimeFormat),formatDateToParts:w2.bind(null,i,r.getDateTimeFormat),formatTime:E2.bind(null,i,r.getDateTimeFormat),formatDateTimeRange:y2.bind(null,i,r.getDateTimeFormat),formatTimeToParts:b2.bind(null,i,r.getDateTimeFormat),formatPlural:_2.bind(null,i,r.getPluralRules),formatMessage:L0.bind(null,i,r),$t:L0.bind(null,i,r),formatList:R2.bind(null,i,r.getListFormat),formatListToParts:Au.bind(null,i,r.getListFormat),formatDisplayName:T2.bind(null,i,r.getDisplayNames)})}function R0(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}function ku(e){return e&&Object.keys(e).reduce(function(t,r){var i=e[r];return t[r]=it(i)?d2(i):i,t},{})}var Pu=function(e,t,r,i){for(var s=[],l=4;l<arguments.length;l++)s[l-4]=arguments[l];var h=ku(i),g=L0.apply(void 0,(0,et.ev)([e,t,r,h],s,!1));return Array.isArray(g)?u.Children.toArray(g):g},Mu=function(e,t){var r=e.defaultRichTextElements,i=(0,et._T)(e,["defaultRichTextElements"]),s=ku(r),l=k2((0,et.pi)((0,et.pi)((0,et.pi)({},Su),i),{defaultRichTextElements:s}),t),h={locale:l.locale,timeZone:l.timeZone,fallbackOnEmptyString:l.fallbackOnEmptyString,formats:l.formats,defaultLocale:l.defaultLocale,defaultFormats:l.defaultFormats,messages:l.messages,onError:l.onError,defaultRichTextElements:s};return(0,et.pi)((0,et.pi)({},l),{formatMessage:Pu.bind(null,h,l.formatters),$t:Pu.bind(null,h,l.formatters)})},P2=function(e){(0,et.ZT)(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.cache=Wn(),r.state={cache:r.cache,intl:Mu(R0(r.props),r.cache),prevConfig:R0(r.props)},r}return t.getDerivedStateFromProps=function(r,i){var s=i.prevConfig,l=i.cache,h=R0(r);return S0(s,h)?null:{intl:Mu(h,l),prevConfig:h}},t.prototype.render=function(){return _u(this.state.intl),u.createElement(t0,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=Su,t}(u.PureComponent);const M2=P2;var Fr=q(8886),qs=q(9600),Ou=q(8841),O2=q(3118),En=q(2486),B2=q(3084),$2=q(440),F2=Object.defineProperty,H2=Object.defineProperties,N2=Object.getOwnPropertyDescriptors,q1=Object.getOwnPropertySymbols,Bu=Object.prototype.hasOwnProperty,$u=Object.prototype.propertyIsEnumerable,Fu=(e,t,r)=>t in e?F2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,J1=(e,t)=>{for(var r in t||(t={}))Bu.call(t,r)&&Fu(e,r,t[r]);if(q1)for(var r of q1(t))$u.call(t,r)&&Fu(e,r,t[r]);return e},Hu=(e,t)=>H2(e,N2(t)),Kn=(e,t)=>{var r={};for(var i in e)Bu.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&q1)for(var i of q1(e))t.indexOf(i)<0&&$u.call(e,i)&&(r[i]=e[i]);return r};const I0="ContextMenu",[V2,Cee]=(0,Ou.b)(I0,[En.Wf]),An=(0,En.Wf)(),[j2,Nu]=V2(I0),Vu=e=>{const{__scopeContextMenu:t,children:r,onOpenChange:i,dir:s,modal:l=!0}=e,[h,g]=(0,u.useState)(!1),f=An(t),C=(0,B2.W)(i),y=(0,u.useCallback)(b=>{g(b),C(b)},[C]);return(0,u.createElement)(j2,{scope:t,open:h,onOpenChange:y,modal:l},(0,u.createElement)(En.fC,(0,Fr.Z)({},f,{dir:s,open:h,onOpenChange:y,modal:l}),r))},ju="ContextMenuTrigger",Uu=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=Nu(ju,i),h=An(i),g=(0,u.useRef)({x:0,y:0}),f=(0,u.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(J1({width:0,height:0},g.current))}),C=(0,u.useRef)(0),y=(0,u.useCallback)(()=>window.clearTimeout(C.current),[]),b=R=>{g.current={x:R.clientX,y:R.clientY},l.onOpenChange(!0)};return(0,u.useEffect)(()=>y,[y]),(0,u.createElement)(u.Fragment,null,(0,u.createElement)(En.ee,(0,Fr.Z)({},h,{virtualRef:f})),(0,u.createElement)(O2.WV.span,(0,Fr.Z)({"data-state":l.open?"open":"closed"},s,{ref:t,style:J1({WebkitTouchCallout:"none"},e.style),onContextMenu:(0,qs.M)(e.onContextMenu,R=>{y(),b(R),R.preventDefault()}),onPointerDown:(0,qs.M)(e.onPointerDown,Q1(R=>{y(),C.current=window.setTimeout(()=>b(R),700)})),onPointerMove:(0,qs.M)(e.onPointerMove,Q1(y)),onPointerCancel:(0,qs.M)(e.onPointerCancel,Q1(y)),onPointerUp:(0,qs.M)(e.onPointerUp,Q1(y))})))}),U2="ContextMenuPortal",Zu=e=>{const t=e,{__scopeContextMenu:r}=t,i=Kn(t,["__scopeContextMenu"]),s=An(r);return(0,u.createElement)(En.h_,(0,Fr.Z)({},s,i))},zu="ContextMenuContent",Gu=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=Nu(zu,i),h=An(i),g=(0,u.useRef)(!1);return(0,u.createElement)(En.VY,(0,Fr.Z)({},h,s,{ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:f=>{var C;(C=e.onCloseAutoFocus)===null||C===void 0||C.call(e,f),!f.defaultPrevented&&g.current&&f.preventDefault(),g.current=!1},onInteractOutside:f=>{var C;(C=e.onInteractOutside)===null||C===void 0||C.call(e,f),!f.defaultPrevented&&!l.modal&&(g.current=!0)},style:Hu(J1({},e.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Z2="ContextMenuGroup",z2=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=An(i);return(0,u.createElement)(En.ZA,(0,Fr.Z)({},l,s,{ref:t}))}),G2="ContextMenuLabel",W2=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=An(i);return(0,u.createElement)(En.__,(0,Fr.Z)({},l,s,{ref:t}))}),K2="ContextMenuItem",T0=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=An(i);return(0,u.createElement)(En.ck,(0,Fr.Z)({},l,s,{ref:t}))}),Y2="ContextMenuCheckboxItem",X2=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=An(i);return(0,u.createElement)(En.oC,(0,Fr.Z)({},l,s,{ref:t}))}),q2="ContextMenuRadioGroup",J2=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=An(i);return(0,u.createElement)(En.Ee,(0,Fr.Z)({},l,s,{ref:t}))}),Q2="ContextMenuRadioItem",e9=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=An(i);return(0,u.createElement)(En.Rk,(0,Fr.Z)({},l,s,{ref:t}))}),t9="ContextMenuItemIndicator",r9=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=An(i);return(0,u.createElement)(En.wU,(0,Fr.Z)({},l,s,{ref:t}))}),n9="ContextMenuSeparator",i9=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=An(i);return(0,u.createElement)(En.Z0,(0,Fr.Z)({},l,s,{ref:t}))}),o9="ContextMenuArrow",Wu=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=An(i);return(0,u.createElement)(En.Eh,(0,Fr.Z)({},l,s,{ref:t}))}),s9="ContextMenuSub",Ku=e=>{const{__scopeContextMenu:t,children:r,onOpenChange:i,open:s,defaultOpen:l}=e,h=An(t),[g,f]=(0,$2.T)({prop:s,defaultProp:l,onChange:i});return(0,u.createElement)(En.Tr,(0,Fr.Z)({},h,{open:g,onOpenChange:f}),r)},a9="ContextMenuSubTrigger",Yu=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=An(i);return(0,u.createElement)(En.fF,(0,Fr.Z)({},l,s,{ref:t}))}),l9="ContextMenuSubContent",Xu=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeContextMenu:i}=r,s=Kn(r,["__scopeContextMenu"]),l=An(i);return(0,u.createElement)(En.tu,(0,Fr.Z)({},l,s,{ref:t,style:Hu(J1({},e.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))});function Q1(e){return t=>t.pointerType!=="mouse"?e(t):void 0}const u9=Vu,c9=Uu,el=Zu,d9=Gu,Eee=null,yee=null,wee=null,bee=null,xee=null,_ee=null,See=null,Lee=null,Ree=null,D0=Ku,h9=Yu,A0=Xu;function Vt(e,t){if(e==null)return{};var r={},i=Object.keys(e),s,l;for(l=0;l<i.length;l++)s=i[l],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}var Iee=null,Tee=null,Dee=null,Aee=null,kee=null,Pee=null,f9=["color"],qu=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,f9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M9 3C9 2.44772 8.55229 2 8 2H7C6.44772 2 6 2.44772 6 3L6 14H1.5C1.22386 14 1 14.2239 1 14.5C1 14.7761 1.22386 15 1.5 15L6 15H9H13.5C13.7761 15 14 14.7761 14 14.5C14 14.2239 13.7761 14 13.5 14H9V3Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),p9=["color"],Ju=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,p9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M1.99988 6C1.44759 6 0.999877 6.44772 0.999877 7L0.999877 8C0.999877 8.55228 1.44759 9 1.99988 9L6.99988 9L6.99988 13.5C6.99988 13.7761 7.22374 14 7.49988 14C7.77602 14 7.99988 13.7761 7.99988 13.5L7.99988 9L12.9999 9C13.5522 9 13.9999 8.55228 13.9999 8L13.9999 7C13.9999 6.44772 13.5522 6 12.9999 6L7.99988 6L7.99988 1.5C7.99988 1.22386 7.77602 1 7.49988 1C7.22373 1 6.99988 1.22386 6.99988 1.5L6.99988 6L1.99988 6Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),g9=["color"],Qu=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,g9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M6.99988 1C6.44759 1 5.99988 1.44772 5.99988 2V7H1.49988C1.22374 7 0.999878 7.22386 0.999878 7.5C0.999878 7.77614 1.22374 8 1.49988 8H5.99988V13C5.99988 13.5523 6.44759 14 6.99988 14H7.99988C8.55216 14 8.99988 13.5523 8.99988 13V8H13.4999C13.776 8 13.9999 7.77614 13.9999 7.5C13.9999 7.22386 13.776 7 13.4999 7H8.99988V2C8.99988 1.44772 8.55216 1 7.99988 1L6.99988 1Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),m9=["color"],ec=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,m9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M0.499995 0.999995C0.223855 0.999995 -5.58458e-07 1.22385 -5.46388e-07 1.49999L-2.18554e-08 13.4999C-9.78492e-09 13.776 0.223855 13.9999 0.499995 13.9999C0.776136 13.9999 0.999991 13.776 0.999991 13.4999L0.999991 8.99993L12 8.99993C12.5523 8.99993 13 8.55222 13 7.99993L13 6.99994C13 6.44766 12.5523 5.99995 12 5.99995L0.999991 5.99995L0.999991 1.49999C0.999991 1.22385 0.776135 0.999995 0.499995 0.999995Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),v9=["color"],tc=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,v9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M14.4999 1C14.2237 1 13.9999 1.22386 13.9999 1.5L13.9999 6L2.99988 6C2.44759 6 1.99988 6.44772 1.99988 7L1.99988 8C1.99988 8.55228 2.44759 9 2.99988 9L13.9999 9L13.9999 13.5C13.9999 13.7761 14.2237 14 14.4999 14C14.776 14 14.9999 13.7761 14.9999 13.5L14.9999 9L14.9999 6L14.9999 1.5C14.9999 1.22386 14.776 1 14.4999 1Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),C9=["color"],rc=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,C9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M1.5 0C1.22386 0 1 0.223858 1 0.5C1 0.776142 1.22386 1 1.5 1H6V12C6 12.5523 6.44772 13 7 13H8C8.55228 13 9 12.5523 9 12V1H13.5C13.7761 1 14 0.776142 14 0.5C14 0.223858 13.7761 0 13.5 0H9H6H1.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Mee=null,Oee=null,E9=["color"],y9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,E9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M8.8914 2.1937C9.1158 2.35464 9.16725 2.66701 9.00631 2.89141L2.47388 12H13.5C13.7761 12 14 12.2239 14 12.5C14 12.7762 13.7761 13 13.5 13H1.5C1.31254 13 1.14082 12.8952 1.0552 12.7284C0.969578 12.5616 0.984438 12.361 1.09369 12.2086L8.19369 2.30862C8.35462 2.08422 8.667 2.03277 8.8914 2.1937ZM11.1 6.50001C11.1 6.22387 11.3238 6.00001 11.6 6.00001C11.8761 6.00001 12.1 6.22387 12.1 6.50001C12.1 6.77615 11.8761 7.00001 11.6 7.00001C11.3238 7.00001 11.1 6.77615 11.1 6.50001ZM10.4 4.00001C10.1239 4.00001 9.90003 4.22387 9.90003 4.50001C9.90003 4.77615 10.1239 5.00001 10.4 5.00001C10.6762 5.00001 10.9 4.77615 10.9 4.50001C10.9 4.22387 10.6762 4.00001 10.4 4.00001ZM12.1 8.50001C12.1 8.22387 12.3238 8.00001 12.6 8.00001C12.8761 8.00001 13.1 8.22387 13.1 8.50001C13.1 8.77615 12.8761 9.00001 12.6 9.00001C12.3238 9.00001 12.1 8.77615 12.1 8.50001ZM13.4 10C13.1239 10 12.9 10.2239 12.9 10.5C12.9 10.7761 13.1239 11 13.4 11C13.6762 11 13.9 10.7761 13.9 10.5C13.9 10.2239 13.6762 10 13.4 10Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Bee=null,$ee=null,Fee=null,Hee=null,Nee=null,Vee=null,w9=["color"],b9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,w9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M7.5 2C7.77614 2 8 2.22386 8 2.5L8 11.2929L11.1464 8.14645C11.3417 7.95118 11.6583 7.95118 11.8536 8.14645C12.0488 8.34171 12.0488 8.65829 11.8536 8.85355L7.85355 12.8536C7.75979 12.9473 7.63261 13 7.5 13C7.36739 13 7.24021 12.9473 7.14645 12.8536L3.14645 8.85355C2.95118 8.65829 2.95118 8.34171 3.14645 8.14645C3.34171 7.95118 3.65829 7.95118 3.85355 8.14645L7 11.2929L7 2.5C7 2.22386 7.22386 2 7.5 2Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),jee=null,Uee=null,Zee=null,zee=null,Gee=null,Wee=null,x9=["color"],_9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,x9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),S9=["color"],L9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,S9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M7.14645 2.14645C7.34171 1.95118 7.65829 1.95118 7.85355 2.14645L11.8536 6.14645C12.0488 6.34171 12.0488 6.65829 11.8536 6.85355C11.6583 7.04882 11.3417 7.04882 11.1464 6.85355L8 3.70711L8 12.5C8 12.7761 7.77614 13 7.5 13C7.22386 13 7 12.7761 7 12.5L7 3.70711L3.85355 6.85355C3.65829 7.04882 3.34171 7.04882 3.14645 6.85355C2.95118 6.65829 2.95118 6.34171 3.14645 6.14645L7.14645 2.14645Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),R9=["color"],I9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,R9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M2.5 2H12.5C12.7761 2 13 2.22386 13 2.5V12.5C13 12.7761 12.7761 13 12.5 13H2.5C2.22386 13 2 12.7761 2 12.5V2.5C2 2.22386 2.22386 2 2.5 2ZM1 2.5C1 1.67157 1.67157 1 2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5ZM7.5 4C7.77614 4 8 3.77614 8 3.5C8 3.22386 7.77614 3 7.5 3C7.22386 3 7 3.22386 7 3.5C7 3.77614 7.22386 4 7.5 4ZM8 5.5C8 5.77614 7.77614 6 7.5 6C7.22386 6 7 5.77614 7 5.5C7 5.22386 7.22386 5 7.5 5C7.77614 5 8 5.22386 8 5.5ZM7.5 8C7.77614 8 8 7.77614 8 7.5C8 7.22386 7.77614 7 7.5 7C7.22386 7 7 7.22386 7 7.5C7 7.77614 7.22386 8 7.5 8ZM10 7.5C10 7.77614 9.77614 8 9.5 8C9.22386 8 9 7.77614 9 7.5C9 7.22386 9.22386 7 9.5 7C9.77614 7 10 7.22386 10 7.5ZM11.5 8C11.7761 8 12 7.77614 12 7.5C12 7.22386 11.7761 7 11.5 7C11.2239 7 11 7.22386 11 7.5C11 7.77614 11.2239 8 11.5 8Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Kee=null,Yee=null,Xee=null,qee=null,Jee=null,Qee=null,ete=null,tte=null,rte=null,nte=null,ite=null,ote=null,ste=null,ate=null,lte=null,ute=null,cte=null,dte=null,hte=null,fte=null,pte=null,gte=null,mte=null,vte=null,Cte=null,Ete=null,yte=null,wte=null,bte=null,xte=null,_te=null,Ste=null,Lte=null,Rte=null,Ite=null,Tte=null,Dte=null,Ate=null,kte=null,Pte=null,T9=["color"],D9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,T9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M12.5 2H2.5C2.22386 2 2 2.22386 2 2.5V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V2.5C13 2.22386 12.7761 2 12.5 2ZM2.5 1C1.67157 1 1 1.67157 1 2.5V12.5C1 13.3284 1.67157 14 2.5 14H12.5C13.3284 14 14 13.3284 14 12.5V2.5C14 1.67157 13.3284 1 12.5 1H2.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Mte=null,Ote=null,Bte=null,$te=null,Fte=null,Hte=null,Nte=null,Vte=null,jte=null,Ute=null,Zte=null,zte=null,Gte=null,Wte=null,Kte=null,Yte=null,Xte=null,qte=null,Jte=null,Qte=null,ere=null,tre=null,rre=null,nre=null,ire=null,ore=null,A9=["color"],tl=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,A9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),sre=null,are=null,lre=null,ure=null,cre=null,dre=null,hre=null,fre=null,k9=["color"],P9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,k9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),pre=null,gre=null,M9=["color"],O9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,M9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M0.877075 7.49991C0.877075 3.84222 3.84222 0.877075 7.49991 0.877075C11.1576 0.877075 14.1227 3.84222 14.1227 7.49991C14.1227 11.1576 11.1576 14.1227 7.49991 14.1227C3.84222 14.1227 0.877075 11.1576 0.877075 7.49991ZM7.49991 1.82708C4.36689 1.82708 1.82708 4.36689 1.82708 7.49991C1.82708 10.6329 4.36689 13.1727 7.49991 13.1727C10.6329 13.1727 13.1727 10.6329 13.1727 7.49991C13.1727 4.36689 10.6329 1.82708 7.49991 1.82708Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),mre=null,vre=null,B9=["color"],nc=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,B9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM11 2V2.25C11 2.66421 10.6642 3 10.25 3H4.75C4.33579 3 4 2.66421 4 2.25V2H3.5C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V2.5C12 2.22386 11.7761 2 11.5 2H11Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Cre=null,Ere=null,yre=null,wre=null,bre=null,xre=null,_re=null,Sre=null,Lre=null,Rre=null,Ire=null,Tre=null,Dre=null,Are=null,kre=null,Pre=null,Mre=null,Ore=null,Bre=null,$re=null,Fre=null,Hre=null,Nre=null,Vre=null,jre=null,Ure=null,Zre=null,zre=null,Gre=null,Wre=null,Kre=null,Yre=null,$9=["color"],F9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,$9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Xre=null,qre=null,Jre=null,Qre=null,ene=null,tne=null,rne=null,nne=null,ine=null,one=null,sne=null,ane=null,lne=null,une=null,cne=null,dne=null,hne=null,fne=null,H9=["color"],N9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,H9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),pne=null,gne=null,mne=null,vne=null,Cne=null,Ene=null,yne=null,wne=null,bne=null,xne=null,V9=["color"],j9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,V9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M3.29227 0.048984C3.47033 -0.032338 3.67946 -0.00228214 3.8274 0.125891L12.8587 7.95026C13.0134 8.08432 13.0708 8.29916 13.0035 8.49251C12.9362 8.68586 12.7578 8.81866 12.5533 8.82768L9.21887 8.97474L11.1504 13.2187C11.2648 13.47 11.1538 13.7664 10.9026 13.8808L8.75024 14.8613C8.499 14.9758 8.20255 14.8649 8.08802 14.6137L6.15339 10.3703L3.86279 12.7855C3.72196 12.934 3.50487 12.9817 3.31479 12.9059C3.1247 12.8301 3 12.6461 3 12.4414V0.503792C3 0.308048 3.11422 0.130306 3.29227 0.048984ZM4 1.59852V11.1877L5.93799 9.14425C6.05238 9.02363 6.21924 8.96776 6.38319 8.99516C6.54715 9.02256 6.68677 9.12965 6.75573 9.2809L8.79056 13.7441L10.0332 13.178L8.00195 8.71497C7.93313 8.56376 7.94391 8.38824 8.03072 8.24659C8.11753 8.10494 8.26903 8.01566 8.435 8.00834L11.2549 7.88397L4 1.59852Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),_ne=null,Sne=null,Lne=null,Rne=null,Ine=null,Tne=null,Dne=null,Ane=null,kne=null,Pne=null,Mne=null,One=null,Bne=null,$ne=null,Fne=null,Hne=null,Nne=null,Vne=null,jne=null,Une=null,U9=["color"],Z9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,U9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:i}))}),z9=["color"],G9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,z9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Zne=null,zne=null,Gne=null,Wne=null,Kne=null,Yne=null,Xne=null,qne=null,Jne=null,Qne=null,eie=null,tie=null,rie=null,nie=null,iie=null,oie=null,sie=null,aie=null,lie=null,uie=null,cie=null,die=null,hie=null,fie=null,pie=null,gie=null,mie=null,vie=null,Cie=null,Eie=null,yie=null,wie=null,bie=null,xie=null,_ie=null,Sie=null,Lie=null,Rie=null,Iie=null,Tie=null,Die=null,Aie=null,W9=["color"],K9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,W9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M3 2C2.44772 2 2 2.44772 2 3V12C2 12.5523 2.44772 13 3 13H12C12.5523 13 13 12.5523 13 12V8.5C13 8.22386 12.7761 8 12.5 8C12.2239 8 12 8.22386 12 8.5V12H3V3L6.5 3C6.77614 3 7 2.77614 7 2.5C7 2.22386 6.77614 2 6.5 2H3ZM12.8536 2.14645C12.9015 2.19439 12.9377 2.24964 12.9621 2.30861C12.9861 2.36669 12.9996 2.4303 13 2.497L13 2.5V2.50049V5.5C13 5.77614 12.7761 6 12.5 6C12.2239 6 12 5.77614 12 5.5V3.70711L6.85355 8.85355C6.65829 9.04882 6.34171 9.04882 6.14645 8.85355C5.95118 8.65829 5.95118 8.34171 6.14645 8.14645L11.2929 3H9.5C9.22386 3 9 2.77614 9 2.5C9 2.22386 9.22386 2 9.5 2H12.4999H12.5C12.5678 2 12.6324 2.01349 12.6914 2.03794C12.7504 2.06234 12.8056 2.09851 12.8536 2.14645Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),kie=null,Pie=null,Mie=null,Oie=null,Bie=null,$ie=null,Fie=null,Hie=null,Nie=null,Vie=null,jie=null,Uie=null,Zie=null,zie=null,Gie=null,Wie=null,Kie=null,Yie=null,Xie=null,qie=null,Jie=null,Qie=null,eoe=null,toe=null,roe=null,noe=null,ioe=null,ooe=null,soe=null,aoe=null,loe=null,uoe=null,coe=null,doe=null,hoe=null,foe=null,Y9=["color"],X9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,Y9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),poe=null,goe=null,moe=null,voe=null,q9=["color"],J9=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,q9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M1.44995 0.949951C1.31734 0.949951 1.19016 1.00263 1.0964 1.0964C1.00263 1.19017 0.949951 1.31735 0.949951 1.44995L0.949966 3.44995C0.949969 3.7261 1.17383 3.94995 1.44997 3.94995C1.72611 3.94995 1.94997 3.72609 1.94997 3.44995L1.94995 1.94995H3.44997C3.72611 1.94995 3.94997 1.72609 3.94997 1.44995C3.94997 1.17381 3.72611 0.949951 3.44997 0.949951H1.44995ZM5.94995 0.949951C5.67381 0.949951 5.44995 1.17381 5.44995 1.44995C5.44995 1.72609 5.67381 1.94995 5.94995 1.94995H8.94995C9.22609 1.94995 9.44995 1.72609 9.44995 1.44995C9.44995 1.17381 9.22609 0.949951 8.94995 0.949951H5.94995ZM5.44995 13.45C5.44995 13.1738 5.67381 12.95 5.94995 12.95H8.94995C9.22609 12.95 9.44995 13.1738 9.44995 13.45C9.44995 13.7261 9.22609 13.95 8.94995 13.95H5.94995C5.67381 13.95 5.44995 13.7261 5.44995 13.45ZM1.94995 5.94995C1.94995 5.67381 1.72609 5.44995 1.44995 5.44995C1.17381 5.44995 0.949951 5.67381 0.949951 5.94995V8.94995C0.949951 9.22609 1.17381 9.44995 1.44995 9.44995C1.72609 9.44995 1.94995 9.22609 1.94995 8.94995V5.94995ZM13.45 5.44995C13.7261 5.44995 13.95 5.67381 13.95 5.94995V8.94995C13.95 9.22609 13.7261 9.44995 13.45 9.44995C13.1738 9.44995 12.95 9.22609 12.95 8.94995V5.94995C12.95 5.67381 13.1738 5.44995 13.45 5.44995ZM11.45 0.949951C11.1738 0.949951 10.95 1.17381 10.95 1.44995C10.95 1.72609 11.1738 1.94995 11.45 1.94995H12.9499V3.44995C12.9499 3.72609 13.1738 3.94995 13.4499 3.94995C13.7261 3.94995 13.9499 3.72609 13.9499 3.44995V1.44995C13.9499 1.17381 13.7252 0.949951 13.449 0.949951H11.45ZM1.44995 10.95C1.72609 10.95 1.94995 11.1738 1.94995 11.45V12.95H3.44997C3.72611 12.95 3.94997 13.1738 3.94997 13.45C3.94997 13.7261 3.72611 13.95 3.44997 13.95H1.44995C1.17381 13.95 0.949951 13.7261 0.949951 13.45V11.45C0.949951 11.1738 1.17381 10.95 1.44995 10.95ZM13.95 11.45C13.95 11.1738 13.7261 10.95 13.45 10.95C13.1738 10.9499 12.95 11.1738 12.95 11.4499L12.9491 12.95H11.45C11.1738 12.95 10.95 13.1738 10.95 13.45C10.95 13.7261 11.1738 13.95 11.45 13.95H13.4499C13.7261 13.95 13.9499 13.7261 13.9499 13.45L13.95 11.45Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Coe=null,Eoe=null,yoe=null,woe=null,Q9=["color"],e4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,Q9);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M1.5 3C1.22386 3 1 3.22386 1 3.5C1 3.77614 1.22386 4 1.5 4H13.5C13.7761 4 14 3.77614 14 3.5C14 3.22386 13.7761 3 13.5 3H1.5ZM1 7.5C1 7.22386 1.22386 7 1.5 7H13.5C13.7761 7 14 7.22386 14 7.5C14 7.77614 13.7761 8 13.5 8H1.5C1.22386 8 1 7.77614 1 7.5ZM1 11.5C1 11.2239 1.22386 11 1.5 11H13.5C13.7761 11 14 11.2239 14 11.5C14 11.7761 13.7761 12 13.5 12H1.5C1.22386 12 1 11.7761 1 11.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),boe=null,xoe=null,_oe=null,Soe=null,Loe=null,Roe=null,t4=["color"],r4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,t4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M1.35248 4.90532C1.35248 2.94498 2.936 1.35248 4.89346 1.35248C6.25769 1.35248 6.86058 1.92336 7.50002 2.93545C8.13946 1.92336 8.74235 1.35248 10.1066 1.35248C12.064 1.35248 13.6476 2.94498 13.6476 4.90532C13.6476 6.74041 12.6013 8.50508 11.4008 9.96927C10.2636 11.3562 8.92194 12.5508 8.00601 13.3664C7.94645 13.4194 7.88869 13.4709 7.83291 13.5206C7.64324 13.6899 7.3568 13.6899 7.16713 13.5206C7.11135 13.4709 7.05359 13.4194 6.99403 13.3664C6.0781 12.5508 4.73641 11.3562 3.59926 9.96927C2.39872 8.50508 1.35248 6.74041 1.35248 4.90532Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Ioe=null,Toe=null,Doe=null,Aoe=null,koe=null,Poe=null,Moe=null,Ooe=null,Boe=null,$oe=null,n4=["color"],i4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,n4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Foe=null,Hoe=null,Noe=null,Voe=null,joe=null,Uoe=null,Zoe=null,zoe=null,Goe=null,Woe=null,Koe=null,Yoe=null,Xoe=null,qoe=null,Joe=null,Qoe=null,ese=null,tse=null,rse=null,nse=null,ise=null,ose=null,sse=null,ase=null,lse=null,use=null,cse=null,dse=null,hse=null,fse=null,pse=null,gse=null,mse=null,vse=null,Cse=null,Ese=null,yse=null,wse=null,bse=null,xse=null,_se=null,Sse=null,Lse=null,Rse=null,Ise=null,Tse=null,o4=["color"],s4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,o4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),a4=["color"],l4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,a4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M7.4986 0C6.3257 0 5.36107 0.38943 4.73753 1.19361C4.23745 1.83856 4 2.68242 4 3.63325H5C5 2.84313 5.19691 2.23312 5.5278 1.80636C5.91615 1.30552 6.55152 1 7.4986 1C8.35683 1 8.96336 1.26502 9.35846 1.68623C9.75793 2.11211 10 2.76044 10 3.63601V6H3C2.44772 6 2 6.44772 2 7V13C2 13.5523 2.44772 14 3 14H12C12.5523 14 13 13.5523 13 13V7C13 6.44771 12.5523 6 12 6H11V3.63601C11 2.58135 10.7065 1.66167 10.0878 1.0021C9.46477 0.337871 8.57061 0 7.4986 0ZM3 7H12V13H3V7Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Dse=null,Ase=null,kse=null,Pse=null,Mse=null,Ose=null,Bse=null,$se=null,Fse=null,Hse=null,Nse=null,Vse=null,jse=null,Use=null,Zse=null,zse=null,Gse=null,Wse=null,Kse=null,Yse=null,Xse=null,qse=null,u4=["color"],c4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,u4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M5 1.5C5 1.22386 4.77614 1 4.5 1C4.22386 1 4 1.22386 4 1.5L4 7C4 7.01671 4.00082 7.03323 4.00242 7.04952C2.86009 7.28022 2 8.28967 2 9.5C2 10.7103 2.86009 11.7198 4.00242 11.9505C4.00082 11.9668 4 11.9833 4 12V13.5C4 13.7761 4.22386 14 4.5 14C4.77614 14 5 13.7761 5 13.5V12C5 11.9833 4.99918 11.9668 4.99758 11.9505C6.1399 11.7198 7 10.7103 7 9.5C7 8.28967 6.1399 7.28022 4.99758 7.04952C4.99918 7.03323 5 7.01671 5 7L5 1.5ZM11 1.5C11 1.22386 10.7761 1 10.5 1C10.2239 1 10 1.22386 10 1.5V3C10 3.01671 10.0008 3.03323 10.0024 3.04952C8.8601 3.28022 8 4.28967 8 5.5C8 6.71033 8.8601 7.71978 10.0024 7.95048C10.0008 7.96677 10 7.98329 10 8V13.5C10 13.7761 10.2239 14 10.5 14C10.7761 14 11 13.7761 11 13.5V8C11 7.98329 10.9992 7.96677 10.9976 7.95048C12.1399 7.71978 13 6.71033 13 5.5C13 4.28967 12.1399 3.28022 10.9976 3.04952C10.9992 3.03323 11 3.01671 11 3V1.5ZM4.5 8C3.67157 8 3 8.67157 3 9.5C3 10.3284 3.67157 11 4.5 11C5.32843 11 6 10.3284 6 9.5C6 8.67157 5.32843 8 4.5 8ZM9 5.5C9 4.67157 9.67157 4 10.5 4C11.3284 4 12 4.67157 12 5.5C12 6.32843 11.3284 7 10.5 7C9.67157 7 9 6.32843 9 5.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Jse=null,Qse=null,eae=null,tae=null,rae=null,nae=null,iae=null,oae=null,sae=null,aae=null,lae=null,uae=null,cae=null,dae=null,hae=null,fae=null,pae=null,gae=null,mae=null,vae=null,Cae=null,Eae=null,d4=["color"],k0=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,d4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M11.8536 1.14645C11.6583 0.951184 11.3417 0.951184 11.1465 1.14645L3.71455 8.57836C3.62459 8.66832 3.55263 8.77461 3.50251 8.89155L2.04044 12.303C1.9599 12.491 2.00189 12.709 2.14646 12.8536C2.29103 12.9981 2.50905 13.0401 2.69697 12.9596L6.10847 11.4975C6.2254 11.4474 6.3317 11.3754 6.42166 11.2855L13.8536 3.85355C14.0488 3.65829 14.0488 3.34171 13.8536 3.14645L11.8536 1.14645ZM4.42166 9.28547L11.5 2.20711L12.7929 3.5L5.71455 10.5784L4.21924 11.2192L3.78081 10.7808L4.42166 9.28547Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),h4=["color"],f4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,h4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M12.1464 1.14645C12.3417 0.951184 12.6583 0.951184 12.8535 1.14645L14.8535 3.14645C15.0488 3.34171 15.0488 3.65829 14.8535 3.85355L10.9109 7.79618C10.8349 7.87218 10.7471 7.93543 10.651 7.9835L6.72359 9.94721C6.53109 10.0435 6.29861 10.0057 6.14643 9.85355C5.99425 9.70137 5.95652 9.46889 6.05277 9.27639L8.01648 5.34897C8.06455 5.25283 8.1278 5.16507 8.2038 5.08907L12.1464 1.14645ZM12.5 2.20711L8.91091 5.79618L7.87266 7.87267L8.12731 8.12732L10.2038 7.08907L13.7929 3.5L12.5 2.20711ZM9.99998 2L8.99998 3H4.9C4.47171 3 4.18056 3.00039 3.95552 3.01877C3.73631 3.03668 3.62421 3.06915 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3.06915 3.62421 3.03669 3.73631 3.01878 3.95552C3.00039 4.18056 3 4.47171 3 4.9V11.1C3 11.5283 3.00039 11.8194 3.01878 12.0445C3.03669 12.2637 3.06915 12.3758 3.10899 12.454C3.20487 12.6422 3.35785 12.7951 3.54601 12.891C3.62421 12.9309 3.73631 12.9633 3.95552 12.9812C4.18056 12.9996 4.47171 13 4.9 13H11.1C11.5283 13 11.8194 12.9996 12.0445 12.9812C12.2637 12.9633 12.3758 12.9309 12.454 12.891C12.6422 12.7951 12.7951 12.6422 12.891 12.454C12.9309 12.3758 12.9633 12.2637 12.9812 12.0445C12.9996 11.8194 13 11.5283 13 11.1V6.99998L14 5.99998V11.1V11.1207C14 11.5231 14 11.8553 13.9779 12.1259C13.9549 12.407 13.9057 12.6653 13.782 12.908C13.5903 13.2843 13.2843 13.5903 12.908 13.782C12.6653 13.9057 12.407 13.9549 12.1259 13.9779C11.8553 14 11.5231 14 11.1207 14H11.1H4.9H4.87934C4.47686 14 4.14468 14 3.87409 13.9779C3.59304 13.9549 3.33469 13.9057 3.09202 13.782C2.7157 13.5903 2.40973 13.2843 2.21799 12.908C2.09434 12.6653 2.04506 12.407 2.0221 12.1259C1.99999 11.8553 1.99999 11.5231 2 11.1207V11.1206V11.1V4.9V4.87935V4.87932V4.87931C1.99999 4.47685 1.99999 4.14468 2.0221 3.87409C2.04506 3.59304 2.09434 3.33469 2.21799 3.09202C2.40973 2.71569 2.7157 2.40973 3.09202 2.21799C3.33469 2.09434 3.59304 2.04506 3.87409 2.0221C4.14468 1.99999 4.47685 1.99999 4.87932 2H4.87935H4.9H9.99998Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),yae=null,wae=null,bae=null,xae=null,_ae=null,Sae=null,p4=["color"],g4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,p4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M13.5 13.95C13.7485 13.95 13.95 13.7485 13.95 13.5C13.95 13.2514 13.7485 13.05 13.5 13.05L1.49995 13.05C1.25142 13.05 1.04995 13.2514 1.04995 13.5C1.04995 13.7485 1.25142 13.95 1.49995 13.95L13.5 13.95ZM11.0681 7.5683C11.2439 7.39257 11.2439 7.10764 11.0681 6.93191C10.8924 6.75617 10.6075 6.75617 10.4317 6.93191L7.94993 9.41371L7.94993 1.49998C7.94993 1.25146 7.74846 1.04998 7.49993 1.04998C7.2514 1.04998 7.04993 1.25146 7.04993 1.49998L7.04993 9.41371L4.56813 6.93191C4.39239 6.75617 4.10746 6.75617 3.93173 6.93191C3.75599 7.10764 3.75599 7.39257 3.93173 7.5683L7.18173 10.8183C7.35746 10.994 7.64239 10.994 7.81812 10.8183L11.0681 7.5683Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Lae=null,Rae=null,Iae=null,Tae=null,m4=["color"],v4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,m4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M1.50005 1.05005C1.25152 1.05005 1.05005 1.25152 1.05005 1.50005C1.05005 1.74858 1.25152 1.95005 1.50005 1.95005L13.5 1.95005C13.7486 1.95005 13.95 1.74858 13.95 1.50005C13.95 1.25152 13.7486 1.05005 13.5 1.05005H1.50005ZM3.93188 7.43169C3.75614 7.60743 3.75614 7.89236 3.93188 8.06809C4.10761 8.24383 4.39254 8.24383 4.56827 8.06809L7.05007 5.58629V13.5C7.05007 13.7485 7.25155 13.95 7.50007 13.95C7.7486 13.95 7.95007 13.7485 7.95007 13.5L7.95007 5.58629L10.4319 8.06809C10.6076 8.24383 10.8925 8.24383 11.0683 8.06809C11.244 7.89235 11.244 7.60743 11.0683 7.43169L7.81827 4.18169C7.64254 4.00596 7.35761 4.00596 7.18188 4.18169L3.93188 7.43169Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Dae=null,Aae=null,C4=["color"],E4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,C4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),kae=null,Pae=null,y4=["color"],w4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,y4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M5.07505 4.10001C5.07505 2.91103 6.25727 1.92502 7.50005 1.92502C8.74283 1.92502 9.92505 2.91103 9.92505 4.10001C9.92505 5.19861 9.36782 5.71436 8.61854 6.37884L8.58757 6.4063C7.84481 7.06467 6.92505 7.87995 6.92505 9.5C6.92505 9.81757 7.18248 10.075 7.50005 10.075C7.81761 10.075 8.07505 9.81757 8.07505 9.5C8.07505 8.41517 8.62945 7.90623 9.38156 7.23925L9.40238 7.22079C10.1496 6.55829 11.075 5.73775 11.075 4.10001C11.075 2.12757 9.21869 0.775024 7.50005 0.775024C5.7814 0.775024 3.92505 2.12757 3.92505 4.10001C3.92505 4.41758 4.18249 4.67501 4.50005 4.67501C4.81761 4.67501 5.07505 4.41758 5.07505 4.10001ZM7.50005 13.3575C7.9833 13.3575 8.37505 12.9657 8.37505 12.4825C8.37505 11.9992 7.9833 11.6075 7.50005 11.6075C7.0168 11.6075 6.62505 11.9992 6.62505 12.4825C6.62505 12.9657 7.0168 13.3575 7.50005 13.3575Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Mae=null,Oae=null,Bae=null,$ae=null,Fae=null,Hae=null,Nae=null,Vae=null,jae=null,Uae=null,Zae=null,zae=null,Gae=null,Wae=null,Kae=null,Yae=null,b4=["color"],x4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,b4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M7.59664 2.93628C7.76085 3.06401 8.00012 2.94698 8.00012 2.73895V1.99998C9.98143 2 11.1848 2.3637 11.9105 3.08945C12.6363 3.81522 13 5.0186 13 6.99998C13 7.27613 13.2239 7.49998 13.5 7.49998C13.7761 7.49998 14 7.27613 14 6.99998C14 4.9438 13.6325 3.39719 12.6176 2.38234C11.6028 1.36752 10.0562 0.999999 8.00012 0.999984V0.261266C8.00012 0.0532293 7.76085 -0.0637944 7.59664 0.063928L6.00384 1.30277C5.87516 1.40286 5.87516 1.59735 6.00384 1.69744L7.59664 2.93628ZM9.5 5H2.5C2.22386 5 2 5.22386 2 5.5V12.5C2 12.7761 2.22386 13 2.5 13H9.5C9.77614 13 10 12.7761 10 12.5V5.5C10 5.22386 9.77614 5 9.5 5ZM2.5 4C1.67157 4 1 4.67157 1 5.5V12.5C1 13.3284 1.67157 14 2.5 14H9.5C10.3284 14 11 13.3284 11 12.5V5.5C11 4.67157 10.3284 4 9.5 4H2.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Xae=null,qae=null,Jae=null,Qae=null,e1e=null,t1e=null,r1e=null,n1e=null,i1e=null,o1e=null,s1e=null,a1e=null,l1e=null,u1e=null,c1e=null,d1e=null,h1e=null,f1e=null,p1e=null,g1e=null,m1e=null,v1e=null,C1e=null,E1e=null,y1e=null,w1e=null,b1e=null,x1e=null,_1e=null,S1e=null,L1e=null,R1e=null,I1e=null,T1e=null,D1e=null,A1e=null,k1e=null,P1e=null,M1e=null,O1e=null,B1e=null,$1e=null,_4=["color"],ic=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,_4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M14.4999 0.999992C14.2237 0.999992 13.9999 1.22385 13.9999 1.49999L13.9999 13.4999C13.9999 13.776 14.2237 13.9999 14.4999 13.9999C14.776 13.9999 14.9999 13.776 14.9999 13.4999L14.9999 1.49999C14.9999 1.22385 14.776 0.999992 14.4999 0.999992ZM0.499996 0.999992C0.223856 0.999992 -9.78509e-09 1.22385 -2.18556e-08 1.49999L4.07279e-07 13.4999C3.95208e-07 13.776 0.223855 13.9999 0.499996 13.9999C0.776136 13.9999 0.999992 13.776 0.999992 13.4999L0.999992 1.49999C0.999992 1.22385 0.776136 0.999992 0.499996 0.999992ZM1.99998 6.99994C1.99998 6.44766 2.44769 5.99995 2.99998 5.99995L5.99995 5.99995C6.55223 5.99995 6.99994 6.44766 6.99994 6.99994L6.99994 7.99993C6.99994 8.55221 6.55223 8.99992 5.99995 8.99992L2.99998 8.99992C2.4477 8.99992 1.99998 8.55221 1.99998 7.99993L1.99998 6.99994ZM8.99993 5.99995C8.44765 5.99995 7.99993 6.44766 7.99993 6.99994L7.99993 7.99993C7.99993 8.55221 8.44765 8.99992 8.99993 8.99992L11.9999 8.99992C12.5522 8.99992 12.9999 8.55221 12.9999 7.99993L12.9999 6.99994C12.9999 6.44766 12.5522 5.99995 11.9999 5.99995L8.99993 5.99995Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),S4=["color"],oc=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,S4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M0.999878 0.5C0.999878 0.223858 1.22374 0 1.49988 0H13.4999C13.776 0 13.9999 0.223858 13.9999 0.5C13.9999 0.776142 13.776 1 13.4999 1H1.49988C1.22374 1 0.999878 0.776142 0.999878 0.5ZM7 2C6.44772 2 6 2.44772 6 3V6C6 6.55228 6.44772 7 7 7H8C8.55228 7 9 6.55228 9 6V3C9 2.44772 8.55228 2 8 2H7ZM7 8C6.44772 8 6 8.44771 6 9V12C6 12.5523 6.44772 13 7 13H8C8.55228 13 9 12.5523 9 12V9C9 8.44772 8.55228 8 8 8H7ZM1.49988 14C1.22374 14 0.999878 14.2239 0.999878 14.5C0.999878 14.7761 1.22374 15 1.49988 15H13.4999C13.776 15 13.9999 14.7761 13.9999 14.5C13.9999 14.2239 13.776 14 13.4999 14H1.49988Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),F1e=null,H1e=null,N1e=null,V1e=null,j1e=null,U1e=null,Z1e=null,z1e=null,L4=["color"],R4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,L4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M1 1H1.5H13.5H14V1.5V13.5V14H13.5H1.5H1V13.5V1.5V1ZM2 2V13H13V2H2Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),G1e=null,W1e=null,K1e=null,Y1e=null,X1e=null,q1e=null,J1e=null,Q1e=null,ele=null,tle=null,rle=null,nle=null,I4=["color"],sc=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,I4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M14.4999 0.999992C14.2237 0.999992 13.9999 1.22385 13.9999 1.49999L13.9999 5.99995L0.999992 5.99995L0.999992 1.49999C0.999992 1.22385 0.776136 0.999992 0.499996 0.999992C0.223856 0.999992 -9.78509e-09 1.22385 -2.18556e-08 1.49999L4.07279e-07 13.4999C3.95208e-07 13.776 0.223855 13.9999 0.499996 13.9999C0.776136 13.9999 0.999992 13.776 0.999992 13.4999L0.999992 8.99992L13.9999 8.99992L13.9999 13.4999C13.9999 13.776 14.2237 13.9999 14.4999 13.9999C14.776 13.9999 14.9999 13.776 14.9999 13.4999L14.9999 1.49999C14.9999 1.22385 14.776 0.999992 14.4999 0.999992Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),T4=["color"],ac=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,T4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M0.999878 0.5C0.999878 0.223858 1.22374 0 1.49988 0H13.4999C13.776 0 13.9999 0.223858 13.9999 0.5C13.9999 0.776142 13.776 1 13.4999 1H6H1.49988C1.22374 1 0.999878 0.776142 0.999878 0.5ZM9 14V1L6 1V14H1.49988C1.22374 14 0.999878 14.2239 0.999878 14.5C0.999878 14.7761 1.22374 15 1.49988 15H13.4999C13.776 15 13.9999 14.7761 13.9999 14.5C13.9999 14.2239 13.776 14 13.4999 14H9Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),ile=null,ole=null,sle=null,ale=null,lle=null,ule=null,cle=null,dle=null,hle=null,fle=null,ple=null,gle=null,D4=["color"],A4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,D4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M3.94993 2.95002L3.94993 4.49998C3.94993 4.74851 3.74845 4.94998 3.49993 4.94998C3.2514 4.94998 3.04993 4.74851 3.04993 4.49998V2.50004C3.04993 2.45246 3.05731 2.40661 3.07099 2.36357C3.12878 2.18175 3.29897 2.05002 3.49993 2.05002H11.4999C11.6553 2.05002 11.7922 2.12872 11.8731 2.24842C11.9216 2.32024 11.9499 2.40682 11.9499 2.50002L11.9499 2.50004V4.49998C11.9499 4.74851 11.7485 4.94998 11.4999 4.94998C11.2514 4.94998 11.0499 4.74851 11.0499 4.49998V2.95002H8.04993V12.05H9.25428C9.50281 12.05 9.70428 12.2515 9.70428 12.5C9.70428 12.7486 9.50281 12.95 9.25428 12.95H5.75428C5.50575 12.95 5.30428 12.7486 5.30428 12.5C5.30428 12.2515 5.50575 12.05 5.75428 12.05H6.94993V2.95002H3.94993Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),mle=null,vle=null,k4=["color"],P4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,k4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H10.5C10.7761 7 11 7.22386 11 7.5C11 7.77614 10.7761 8 10.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM3 10.5C3 10.2239 3.22386 10 3.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H3.5C3.22386 11 3 10.7761 3 10.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),M4=["color"],O4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,M4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),B4=["color"],$4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,B4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H7.5C7.77614 7 8 7.22386 8 7.5C8 7.77614 7.77614 8 7.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H10.5C10.7761 10 11 10.2239 11 10.5C11 10.7761 10.7761 11 10.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),Cle=null,Ele=null,F4=["color"],H4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,F4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM7 7.5C7 7.22386 7.22386 7 7.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H7.5C7.22386 8 7 7.77614 7 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H4.5C4.22386 11 4 10.7761 4 10.5Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),yle=null,wle=null,ble=null,xle=null,_le=null,Sle=null,Lle=null,Rle=null,Ile=null,Tle=null,Dle=null,Ale=null,kle=null,Ple=null,Mle=null,Ole=null,Ble=null,$le=null,Fle=null,Hle=null,Nle=null,Vle=null,jle=null,Ule=null,Zle=null,zle=null,Gle=null,Wle=null,Kle=null,Yle=null,Xle=null,qle=null,Jle=null,Qle=null,N4=["color"],V4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,N4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M7.23336 4.69629C7.23336 2.96884 8.63335 1.56857 10.36 1.56857C11.3736 1.56857 12.183 2.04804 12.7254 2.74385C13.3079 2.62467 13.8557 2.40913 14.3513 2.11508C14.1559 2.72598 13.7424 3.2396 13.2033 3.56463C13.2038 3.56568 13.2042 3.56674 13.2047 3.56779C13.7334 3.50361 14.2364 3.36302 14.7048 3.15546L14.7037 3.15715C14.3667 3.66183 13.9431 4.10736 13.4561 4.47034C13.4823 4.64672 13.4956 4.82427 13.4956 5.00079C13.4956 8.6871 10.6873 12.9746 5.52122 12.9746C3.93906 12.9746 2.46544 12.511 1.22505 11.7152C0.992632 11.5661 0.925108 11.2568 1.07423 11.0244C1.0874 11.0038 1.10183 10.9846 1.11734 10.9666C1.20582 10.8202 1.37438 10.7309 1.5554 10.7522C2.47066 10.8601 3.38568 10.7485 4.19219 10.3962C3.39226 10.0434 2.77129 9.35975 2.50204 8.51974C2.45359 8.3686 2.48835 8.20311 2.59351 8.08422C2.59716 8.0801 2.60087 8.07606 2.60464 8.0721C1.96391 7.50819 1.55973 6.68208 1.55973 5.76143V5.72759C1.55973 5.56814 1.64411 5.42059 1.78155 5.33974C1.82671 5.31317 1.87537 5.29511 1.92532 5.28558C1.70549 4.86154 1.58116 4.37984 1.58116 3.86958C1.58116 3.40165 1.58384 2.81192 1.91332 2.28081C1.98718 2.16175 2.10758 2.08915 2.2364 2.07195C2.42588 2.01237 2.64087 2.06969 2.77406 2.23302C3.86536 3.57126 5.44066 4.49583 7.23366 4.73961L7.23336 4.69629ZM5.52122 11.9746C4.73387 11.9746 3.97781 11.8435 3.27248 11.6023C4.13012 11.4538 4.95307 11.1159 5.66218 10.5602C5.81211 10.4427 5.87182 10.2435 5.81126 10.0629C5.7507 9.88234 5.583 9.75943 5.39255 9.75607C4.68968 9.74366 4.06712 9.39716 3.67793 8.86845C3.86828 8.85306 4.05428 8.82039 4.23445 8.77167C4.43603 8.71716 4.57363 8.53114 4.56674 8.32243C4.55985 8.11372 4.41029 7.93718 4.20555 7.89607C3.42694 7.73977 2.79883 7.16764 2.56169 6.42174C2.76255 6.47025 2.97102 6.4991 3.18482 6.5061C3.38563 6.51267 3.56646 6.38533 3.62795 6.19405C3.68943 6.00277 3.61666 5.79391 3.44963 5.68224C2.86523 5.29155 2.48116 4.62464 2.48116 3.86958C2.48116 3.70213 2.48352 3.55268 2.49355 3.41719C3.85115 4.79913 5.70873 5.68931 7.77588 5.79338C7.93225 5.80126 8.08328 5.73543 8.18395 5.61553C8.28463 5.49562 8.32332 5.33548 8.28851 5.18284C8.25255 5.02517 8.23336 4.86284 8.23336 4.69629C8.23336 3.52085 9.18591 2.56857 10.36 2.56857C11.5943 2.56857 12.4956 3.71208 12.4956 5.00079C12.4956 8.25709 10.0202 11.9746 5.52122 11.9746Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),e0e=null,t0e=null,r0e=null,n0e=null,i0e=null,o0e=null,s0e=null,a0e=null,l0e=null,u0e=null,j4=["color"],U4=(0,u.forwardRef)(function(e,t){var r=e.color,i=r===void 0?"currentColor":r,s=Vt(e,j4);return(0,u.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,u.createElement)("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))}),c0e=null,d0e=null,h0e=null,f0e=null,p0e=null,g0e=null,m0e=null,v0e=null,C0e=null,E0e=null,y0e=null,w0e=null,b0e=null,x0e=null,_0e=null,S0e=null;function Yn(){var e=u.useContext(r0);return _u(e),e}function Z4(e,t){var r=e.values,i=(0,et._T)(e,["values"]),s=t.values,l=(0,et._T)(t,["values"]);return S0(s,r)&&S0(i,l)}function lc(e){var t=Yn(),r=t.formatMessage,i=t.textComponent,s=i===void 0?u.Fragment:i,l=e.id,h=e.description,g=e.defaultMessage,f=e.values,C=e.children,y=e.tagName,b=y===void 0?s:y,R=e.ignoreTag,k={id:l,description:h,defaultMessage:g},A=r(k,f,{ignoreTag:R});return typeof C=="function"?C(Array.isArray(A)?A:[A]):b?u.createElement(b,null,u.Children.toArray(A)):u.createElement(u.Fragment,null,A)}lc.displayName="FormattedMessage";var uc=u.memo(lc,Z4);uc.displayName="MemoizedFormattedMessage";const st=uc;var Js=q(7807),fr=q(863),Wa=q(4867),P0=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function M0(e,t,r,i){e.addEventListener?e.addEventListener(t,r,i):e.attachEvent&&e.attachEvent("on".concat(t),function(){r(window.event)})}function cc(e,t){for(var r=t.slice(0,t.length-1),i=0;i<r.length;i++)r[i]=e[r[i].toLowerCase()];return r}function dc(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");for(var t=e.split(","),r=t.lastIndexOf("");r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}function z4(e,t){for(var r=e.length>=t.length?e:t,i=e.length>=t.length?t:e,s=!0,l=0;l<r.length;l++)i.indexOf(r[l])===-1&&(s=!1);return s}for(var O0={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":P0?173:189,"=":P0?61:187,";":P0?59:186,"'":222,"[":219,"]":221,"\\":220},Yo={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},B0={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Sn={16:!1,18:!1,17:!1,91:!1},hn={},rl=1;rl<20;rl++)O0["f".concat(rl)]=111+rl;var Zr=[],hc=!1,fc="all",pc=[],nl=function(t){return O0[t.toLowerCase()]||Yo[t.toLowerCase()]||t.toUpperCase().charCodeAt(0)};function gc(e){fc=e||"all"}function Ka(){return fc||"all"}function G4(){return Zr.slice(0)}function W4(e){var t=e.target||e.srcElement,r=t.tagName,i=!0;return(t.isContentEditable||(r==="INPUT"||r==="TEXTAREA"||r==="SELECT")&&!t.readOnly)&&(i=!1),i}function K4(e){return typeof e=="string"&&(e=nl(e)),Zr.indexOf(e)!==-1}function Y4(e,t){var r,i;e||(e=Ka());for(var s in hn)if(Object.prototype.hasOwnProperty.call(hn,s))for(r=hn[s],i=0;i<r.length;)r[i].scope===e?r.splice(i,1):i++;Ka()===e&&gc(t||"all")}function X4(e){var t=e.keyCode||e.which||e.charCode,r=Zr.indexOf(t);if(r>=0&&Zr.splice(r,1),e.key&&e.key.toLowerCase()==="meta"&&Zr.splice(0,Zr.length),(t===93||t===224)&&(t=91),t in Sn){Sn[t]=!1;for(var i in Yo)Yo[i]===t&&(si[i]=!1)}}function q4(e){if(typeof e>"u")Object.keys(hn).forEach(function(h){return delete hn[h]});else if(Array.isArray(e))e.forEach(function(h){h.key&&$0(h)});else if(typeof e=="object")e.key&&$0(e);else if(typeof e=="string"){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var s=r[0],l=r[1];typeof s=="function"&&(l=s,s=""),$0({key:e,scope:s,method:l,splitKey:"+"})}}var $0=function(t){var r=t.key,i=t.scope,s=t.method,l=t.splitKey,h=l===void 0?"+":l,g=dc(r);g.forEach(function(f){var C=f.split(h),y=C.length,b=C[y-1],R=b==="*"?"*":nl(b);if(!!hn[R]){i||(i=Ka());var k=y>1?cc(Yo,C):[];hn[R]=hn[R].filter(function(A){var O=s?A.method===s:!0;return!(O&&A.scope===i&&z4(A.mods,k))})}})};function mc(e,t,r,i){if(t.element===i){var s;if(t.scope===r||t.scope==="all"){s=t.mods.length>0;for(var l in Sn)Object.prototype.hasOwnProperty.call(Sn,l)&&(!Sn[l]&&t.mods.indexOf(+l)>-1||Sn[l]&&t.mods.indexOf(+l)===-1)&&(s=!1);(t.mods.length===0&&!Sn[16]&&!Sn[18]&&!Sn[17]&&!Sn[91]||s||t.shortcut==="*")&&t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function vc(e,t){var r=hn["*"],i=e.keyCode||e.which||e.charCode;if(!!si.filter.call(this,e)){if((i===93||i===224)&&(i=91),Zr.indexOf(i)===-1&&i!==229&&Zr.push(i),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(A){var O=B0[A];e[A]&&Zr.indexOf(O)===-1?Zr.push(O):!e[A]&&Zr.indexOf(O)>-1?Zr.splice(Zr.indexOf(O),1):A==="metaKey"&&e[A]&&Zr.length===3&&(e.ctrlKey||e.shiftKey||e.altKey||(Zr=Zr.slice(Zr.indexOf(O))))}),i in Sn){Sn[i]=!0;for(var s in Yo)Yo[s]===i&&(si[s]=!0);if(!r)return}for(var l in Sn)Object.prototype.hasOwnProperty.call(Sn,l)&&(Sn[l]=e[B0[l]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(Zr.indexOf(17)===-1&&Zr.push(17),Zr.indexOf(18)===-1&&Zr.push(18),Sn[17]=!0,Sn[18]=!0);var h=Ka();if(r)for(var g=0;g<r.length;g++)r[g].scope===h&&(e.type==="keydown"&&r[g].keydown||e.type==="keyup"&&r[g].keyup)&&mc(e,r[g],h,t);if(i in hn){for(var f=0;f<hn[i].length;f++)if((e.type==="keydown"&&hn[i][f].keydown||e.type==="keyup"&&hn[i][f].keyup)&&hn[i][f].key){for(var C=hn[i][f],y=C.splitKey,b=C.key.split(y),R=[],k=0;k<b.length;k++)R.push(nl(b[k]));R.sort().join("")===Zr.sort().join("")&&mc(e,C,h,t)}}}}function J4(e){return pc.indexOf(e)>-1}function si(e,t,r){Zr=[];var i=dc(e),s=[],l="all",h=document,g=0,f=!1,C=!0,y="+",b=!1;for(r===void 0&&typeof t=="function"&&(r=t),Object.prototype.toString.call(t)==="[object Object]"&&(t.scope&&(l=t.scope),t.element&&(h=t.element),t.keyup&&(f=t.keyup),t.keydown!==void 0&&(C=t.keydown),t.capture!==void 0&&(b=t.capture),typeof t.splitKey=="string"&&(y=t.splitKey)),typeof t=="string"&&(l=t);g<i.length;g++)e=i[g].split(y),s=[],e.length>1&&(s=cc(Yo,e)),e=e[e.length-1],e=e==="*"?"*":nl(e),e in hn||(hn[e]=[]),hn[e].push({keyup:f,keydown:C,scope:l,mods:s,shortcut:i[g],method:r,key:i[g],splitKey:y,element:h});typeof h<"u"&&!J4(h)&&window&&(pc.push(h),M0(h,"keydown",function(R){vc(R,h)},b),hc||(hc=!0,M0(window,"focus",function(){Zr=[]},b)),M0(h,"keyup",function(R){vc(R,h),X4(R)},b))}function Q4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(hn).forEach(function(r){var i=hn[r].find(function(s){return s.scope===t&&s.shortcut===e});i&&i.method&&i.method()})}var F0={setScope:gc,getScope:Ka,deleteScope:Y4,getPressedKeyCodes:G4,isPressed:K4,filter:W4,trigger:Q4,unbind:q4,keyMap:O0,modifier:Yo,modifierMap:B0};for(var H0 in F0)Object.prototype.hasOwnProperty.call(F0,H0)&&(si[H0]=F0[H0]);if(typeof window<"u"){var e5=window.hotkeys;si.noConflict=function(e){return e&&window.hotkeys===si&&(window.hotkeys=e5),si},window.hotkeys=si}function L0e(){return hotkeys.isPressed}si.filter=function(){return!0};var Cc=function(t,r){var i=t.target,s=i&&i.tagName;return Boolean(s&&r&&r.includes(s))},t5=function(t){return Cc(t,["INPUT","TEXTAREA","SELECT"])};function Bt(e,t,r,i){r instanceof Array&&(i=r,r=void 0);var s=r||{},l=s.enableOnTags,h=s.filter,g=s.keyup,f=s.keydown,C=s.filterPreventDefault,y=C===void 0?!0:C,b=s.enabled,R=b===void 0?!0:b,k=s.enableOnContentEditable,A=k===void 0?!1:k,O=(0,u.useRef)(null),B=(0,u.useCallback)(function(F,j){var J,ce;return h&&!h(F)?!y:t5(F)&&!Cc(F,l)||(J=F.target)!=null&&J.isContentEditable&&!A?!0:O.current===null||document.activeElement===O.current||(ce=O.current)!=null&&ce.contains(document.activeElement)?(t(F,j),!0):!1},i?[O,l,h].concat(i):[O,l,h]);return(0,u.useEffect)(function(){if(!R){si.unbind(e,B);return}return g&&f!==!0&&(r.keydown=!1),si(e,r||{},B),function(){return si.unbind(e,B)}},[B,e,R]),O}var R0e=si.isPressed,Ec=q(4135),gn=q(3688),r5=q(8210),yc=Object.getOwnPropertySymbols,n5=Object.prototype.hasOwnProperty,i5=Object.prototype.propertyIsEnumerable,Eo=(e,t)=>{var r={};for(var i in e)n5.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&yc)for(var i of yc(e))t.indexOf(i)<0&&i5.call(e,i)&&(r[i]=e[i]);return r};const wc="AlertDialog",[o5,I0e]=(0,Ou.b)(wc,[gn.p8]),yo=(0,gn.p8)(),bc=e=>{const t=e,{__scopeAlertDialog:r}=t,i=Eo(t,["__scopeAlertDialog"]),s=yo(r);return(0,u.createElement)(gn.fC,(0,Fr.Z)({},s,i,{modal:!0}))},s5="AlertDialogTrigger",xc=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeAlertDialog:i}=r,s=Eo(r,["__scopeAlertDialog"]),l=yo(i);return(0,u.createElement)(gn.xz,(0,Fr.Z)({},l,s,{ref:t}))}),a5="AlertDialogPortal",_c=e=>{const t=e,{__scopeAlertDialog:r}=t,i=Eo(t,["__scopeAlertDialog"]),s=yo(r);return(0,u.createElement)(gn.h_,(0,Fr.Z)({},s,i))},l5="AlertDialogOverlay",Sc=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeAlertDialog:i}=r,s=Eo(r,["__scopeAlertDialog"]),l=yo(i);return(0,u.createElement)(gn.aV,(0,Fr.Z)({},l,s,{ref:t}))}),Qs="AlertDialogContent",[u5,c5]=o5(Qs),Lc=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeAlertDialog:i,children:s}=r,l=Eo(r,["__scopeAlertDialog","children"]),h=yo(i),g=(0,u.useRef)(null),f=(0,Ec.e)(t,g),C=(0,u.useRef)(null);return(0,u.createElement)(gn.jm,{contentName:Qs,titleName:Rc,docsSlug:"alert-dialog"},(0,u.createElement)(u5,{scope:i,cancelRef:C},(0,u.createElement)(gn.VY,(0,Fr.Z)({role:"alertdialog"},h,l,{ref:f,onOpenAutoFocus:(0,qs.M)(l.onOpenAutoFocus,y=>{var b;y.preventDefault(),(b=C.current)===null||b===void 0||b.focus({preventScroll:!0})}),onPointerDownOutside:y=>y.preventDefault(),onInteractOutside:y=>y.preventDefault()}),(0,u.createElement)(r5.A4,null,s),!1)))}),Rc="AlertDialogTitle",d5=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeAlertDialog:i}=r,s=Eo(r,["__scopeAlertDialog"]),l=yo(i);return(0,u.createElement)(gn.Dx,(0,Fr.Z)({},l,s,{ref:t}))}),Ic="AlertDialogDescription",Tc=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeAlertDialog:i}=r,s=Eo(r,["__scopeAlertDialog"]),l=yo(i);return(0,u.createElement)(gn.dk,(0,Fr.Z)({},l,s,{ref:t}))}),h5="AlertDialogAction",Dc=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeAlertDialog:i}=r,s=Eo(r,["__scopeAlertDialog"]),l=yo(i);return(0,u.createElement)(gn.x8,(0,Fr.Z)({},l,s,{ref:t}))}),Ac="AlertDialogCancel",kc=(0,u.forwardRef)((e,t)=>{const r=e,{__scopeAlertDialog:i}=r,s=Eo(r,["__scopeAlertDialog"]),{cancelRef:l}=c5(Ac,i),h=yo(i),g=(0,Ec.e)(t,l);return(0,u.createElement)(gn.x8,(0,Fr.Z)({},h,s,{ref:g}))}),T0e=({contentRef:e})=>{const t=`\`${Qs}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Qs}\` by passing a \`${Ic}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Qs}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return $4k4D0$useEffect(()=>{var r;document.getElementById((r=e.current)===null||r===void 0?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},N0=bc,f5=xc,V0=_c,il=Sc,j0=Lc,ol=Dc,Pc=kc,D0e=null,p5=Tc;var sl=q(6811),ai=(e,t,r)=>new Promise((i,s)=>{var l=f=>{try{g(r.next(f))}catch(C){s(C)}},h=f=>{try{g(r.throw(f))}catch(C){s(C)}},g=f=>f.done?i(f.value):Promise.resolve(f.value).then(l,h);g((r=r.apply(e,t)).next())});const ea=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),g5=ea?Promise.resolve().then(function(){return y5}):Promise.resolve().then(function(){return x5});function U0(...e){return ai(this,null,function*(){return(yield g5).default(...e)})}const m5=ea?Promise.resolve().then(function(){return w5}):Promise.resolve().then(function(){return _5});function v5(...e){return ai(this,null,function*(){return(yield m5).default(...e)})}const C5=ea?Promise.resolve().then(function(){return b5}):Promise.resolve().then(function(){return S5});function Mc(...e){return ai(this,null,function*(){return(yield C5).default(...e)})}const E5=e=>ai(void 0,null,function*(){const t=yield e.getFile();return t.handle=e,t});var Oc=(...e)=>ai(void 0,[...e],function*(t=[{}]){Array.isArray(t)||(t=[t]);const r=[];t.forEach((l,h)=>{r[h]={description:l.description||"Files",accept:{}},l.mimeTypes?l.mimeTypes.map(g=>{r[h].accept[g]=l.extensions||[]}):r[h].accept["*/*"]=l.extensions||[]});const i=yield window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:r,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),s=yield Promise.all(i.map(E5));return t[0].multiple?s:s[0]}),y5={__proto__:null,default:Oc};function al(e){function t(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var i=r.done;return Promise.resolve(r.value).then(function(s){return{value:s,done:i}})}return al=function(r){this.s=r,this.n=r.next},al.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(r){var i=this.s.return;return i===void 0?Promise.resolve({value:r,done:!0}):t(i.apply(this.s,arguments))},throw:function(r){var i=this.s.return;return i===void 0?Promise.reject(r):t(i.apply(this.s,arguments))}},new al(e)}const Bc=(e,t,...r)=>ai(void 0,[e,t,...r],function*(i,s,l=i.name,h){const g=[],f=[];var C,y=!1,b=!1;try{for(var R,k=function(A){var O,B,F,j=2;for(typeof Symbol<"u"&&(B=Symbol.asyncIterator,F=Symbol.iterator);j--;){if(B&&(O=A[B])!=null)return O.call(A);if(F&&(O=A[F])!=null)return new al(O.call(A));B="@@asyncIterator",F="@@iterator"}throw new TypeError("Object is not async iterable")}(i.values());y=!(R=yield k.next()).done;y=!1){const A=R.value,O=`${l}/${A.name}`;A.kind==="file"?f.push(A.getFile().then(B=>(B.directoryHandle=i,B.handle=A,Object.defineProperty(B,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>O})))):A.kind!=="directory"||!s||h&&h(A)||g.push(Bc(A,s,O,h))}}catch(A){b=!0,C=A}finally{try{y&&k.return!=null&&(yield k.return())}finally{if(b)throw C}}return[...(yield Promise.all(g)).flat(),...yield Promise.all(f)]});var $c=(...e)=>ai(void 0,[...e],function*(t={}){t.recursive=t.recursive||!1,t.mode=t.mode||"read";const r=yield window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return Bc(r,t.recursive,void 0,t.skipDirectory)}),w5={__proto__:null,default:$c},Fc=(e,...t)=>ai(void 0,[e,...t],function*(r,i=[{}],s=null,l=!1,h=null){Array.isArray(i)||(i=[i]),i[0].fileName=i[0].fileName||"Untitled";const g=[];let f=null;if(r instanceof Blob&&r.type?f=r.type:r.headers&&r.headers.get("content-type")&&(f=r.headers.get("content-type")),i.forEach((b,R)=>{g[R]={description:b.description||"Files",accept:{}},b.mimeTypes?(R===0&&f&&b.mimeTypes.push(f),b.mimeTypes.map(k=>{g[R].accept[k]=b.extensions||[]})):f?g[R].accept[f]=b.extensions||[]:g[R].accept["*/*"]=b.extensions||[]}),s)try{yield s.getFile()}catch(b){if(s=null,l)throw b}const C=s||(yield window.showSaveFilePicker({suggestedName:i[0].fileName,id:i[0].id,startIn:i[0].startIn,types:g,excludeAcceptAllOption:i[0].excludeAcceptAllOption||!1}));!s&&h&&h(C);const y=yield C.createWritable();return"stream"in r?(yield r.stream().pipeTo(y),C):"body"in r?(yield r.body.pipeTo(y),C):(yield y.write(yield r),yield y.close(),C)}),b5={__proto__:null,default:Fc},Hc=(...e)=>ai(void 0,[...e],function*(t=[{}]){return Array.isArray(t)||(t=[t]),new Promise((r,i)=>{const s=document.createElement("input");s.type="file";const l=[...t.map(C=>C.mimeTypes||[]),...t.map(C=>C.extensions||[])].join();s.multiple=t[0].multiple||!1,s.accept=l||"",s.style.display="none",document.body.append(s);const h=C=>{typeof g=="function"&&g(),r(C)},g=t[0].legacySetup&&t[0].legacySetup(h,()=>g(i),s),f=()=>{window.removeEventListener("focus",f),s.remove()};s.addEventListener("click",()=>{window.addEventListener("focus",f)}),s.addEventListener("change",()=>{window.removeEventListener("focus",f),s.remove(),h(s.multiple?Array.from(s.files):s.files[0])}),s.click()})}),x5={__proto__:null,default:Hc},Nc=(...e)=>ai(void 0,[...e],function*(t=[{}]){return Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((r,i)=>{const s=document.createElement("input");s.type="file",s.webkitdirectory=!0;const l=g=>{typeof h=="function"&&h(),r(g)},h=t[0].legacySetup&&t[0].legacySetup(l,()=>h(i),s);s.addEventListener("change",()=>{let g=Array.from(s.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(g=g.filter(f=>f.webkitRelativePath.split("/").every(C=>!t[0].skipDirectory({name:C,kind:"directory"})))):g=g.filter(f=>f.webkitRelativePath.split("/").length===2),l(g)}),s.click()})}),_5={__proto__:null,default:Nc},Vc=(e,...t)=>ai(void 0,[e,...t],function*(r,i={}){Array.isArray(i)&&(i=i[0]);const s=document.createElement("a");let l=r;"body"in r&&(l=yield function(f,C){return ai(this,null,function*(){const y=f.getReader(),b=new ReadableStream({start:A=>function O(){return ai(this,null,function*(){return y.read().then(({done:B,value:F})=>{if(!B)return A.enqueue(F),O();A.close()})})}()}),R=new Response(b),k=yield R.blob();return y.releaseLock(),new Blob([k],{type:C})})}(r.body,r.headers.get("content-type"))),s.download=i.fileName||"Untitled",s.href=URL.createObjectURL(yield l);const h=()=>{typeof g=="function"&&g()},g=i.legacySetup&&i.legacySetup(h,()=>g(),s);return s.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(s.href),3e4),h()}),s.click(),null}),S5={__proto__:null,default:Vc};function Xn(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function L5(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const i=Xn(r);return(s,l)=>i.then(h=>l(h.transaction(t,s).objectStore(t)))}let Z0;function Ai(){return Z0||(Z0=L5("keyval-store","keyval")),Z0}function ll(e,t=Ai()){return t("readonly",r=>Xn(r.get(e)))}function Ya(e,t,r=Ai()){return r("readwrite",i=>(i.put(t,e),Xn(i.transaction)))}function A0e(e,t=Ai()){return t("readwrite",r=>(e.forEach(i=>r.put(i[1],i[0])),Xn(r.transaction)))}function k0e(e,t=Ai()){return t("readonly",r=>Promise.all(e.map(i=>Xn(r.get(i)))))}function P0e(e,t,r=Ai()){return r("readwrite",i=>new Promise((s,l)=>{i.get(e).onsuccess=function(){try{i.put(t(this.result),e),s(Xn(i.transaction))}catch(h){l(h)}}}))}function M0e(e,t=Ai()){return t("readwrite",r=>(r.delete(e),Xn(r.transaction)))}function O0e(e,t=Ai()){return t("readwrite",r=>(e.forEach(i=>r.delete(i)),Xn(r.transaction)))}function B0e(e=Ai()){return e("readwrite",t=>(t.clear(),Xn(t.transaction)))}function z0(e,t){return e.openCursor().onsuccess=function(){!this.result||(t(this.result),this.result.continue())},Xn(e.transaction)}function $0e(e=Ai()){return e("readonly",t=>{if(t.getAllKeys)return Xn(t.getAllKeys());const r=[];return z0(t,i=>r.push(i.key)).then(()=>r)})}function F0e(e=Ai()){return e("readonly",t=>{if(t.getAll)return Xn(t.getAll());const r=[];return z0(t,i=>r.push(i.value)).then(()=>r)})}function H0e(e=Ai()){return e("readonly",t=>{if(t.getAll&&t.getAllKeys)return Promise.all([Xn(t.getAllKeys()),Xn(t.getAll())]).then(([i,s])=>i.map((l,h)=>[l,s[h]]));const r=[];return e("readonly",i=>z0(i,s=>r.push([s.key,s.value])).then(()=>r))})}const jc=e=>{let t;const r=new Set,i=(f,C)=>{const y=typeof f=="function"?f(t):f;if(y!==t){const b=t;t=C??typeof y!="object"?y:Object.assign({},t,y),r.forEach(R=>R(t,b))}},s=()=>t,g={setState:i,getState:s,subscribe:f=>(r.add(f),()=>r.delete(f)),destroy:()=>r.clear()};return t=e(i,s,g),g},Uc=e=>e?jc(e):jc;var R5=q(1942);const{useSyncExternalStoreWithSelector:I5}=R5;function T5(e,t=e.getState,r){const i=I5(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return(0,u.useDebugValue)(i),i}const Zc=e=>{const t=typeof e=="function"?Uc(e):e,r=(i,s)=>T5(t,i,s);return Object.assign(r,t),r};var D5=e=>e?Zc(e):Zc,G0=Object.defineProperty,A5=Object.defineProperties,k5=Object.getOwnPropertyDescriptor,P5=Object.getOwnPropertyDescriptors,M5=Object.getOwnPropertyNames,ul=Object.getOwnPropertySymbols,W0=Object.prototype.hasOwnProperty,zc=Object.prototype.propertyIsEnumerable,K0=(e,t,r)=>t in e?G0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Y=(e,t)=>{for(var r in t||(t={}))W0.call(t,r)&&K0(e,r,t[r]);if(ul)for(var r of ul(t))zc.call(t,r)&&K0(e,r,t[r]);return e},ye=(e,t)=>A5(e,P5(t)),Ei=(e,t)=>{var r={};for(var i in e)W0.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&ul)for(var i of ul(e))t.indexOf(i)<0&&zc.call(e,i)&&(r[i]=e[i]);return r},O5=(e,t)=>{for(var r in t)G0(e,r,{get:t[r],enumerable:!0})},B5=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of M5(t))!W0.call(e,s)&&(r||s!=="default")&&G0(e,s,{get:()=>t[s],enumerable:!(i=k5(t,s))||i.enumerable});return e},S=(e,t,r)=>(K0(e,typeof t!="symbol"?t+"":t,r),r),Ft=(e,t,r)=>new Promise((i,s)=>{var l=f=>{try{g(r.next(f))}catch(C){s(C)}},h=f=>{try{g(r.throw(f))}catch(C){s(C)}},g=f=>f.done?i(f.value):Promise.resolve(f.value).then(l,h);g((r=r.apply(e,t)).next())}),{styled:qe,createTheme:$5}=(0,Js.Th)({themeMap:Y({},Js.E6),theme:{colors:{bounds:"rgba(65, 132, 244, 1.000)",boundsBg:"rgba(65, 132, 244, 0.05)",hover:"#ececec",overlay:"rgba(0, 0, 0, 0.15)",overlayContrast:"rgba(255, 255, 255, 0.15)",panel:"#fefefe",panelContrast:"#ffffff",selected:"rgba(66, 133, 244, 1.000)",selectedContrast:"#fefefe",text:"#333333",tooltip:"#1d1d1d",tooltipContrast:"#ffffff",warn:"rgba(255, 100, 100, 1)",canvas:"rgb(248, 249, 250)"},shadows:{2:"0px 1px 1px rgba(0, 0, 0, 0.14)",3:"0px 2px 3px rgba(0, 0, 0, 0.14)",4:"0px 4px 5px -1px rgba(0, 0, 0, 0.14)",8:"0px 12px 17px rgba(0, 0, 0, 0.14)",12:"0px 12px 17px rgba(0, 0, 0, 0.14)",24:"0px 24px 38px rgba(0, 0, 0, 0.14)",key:"1px 1px rgba(0,0,0,1)",panel:`0px 0px 16px -1px rgba(0, 0, 0, 0.05), 
        0px 0px 16px -8px rgba(0, 0, 0, 0.05), 
        0px 0px 16px -12px rgba(0, 0, 0, 0.12),
        0px 0px 2px 0px rgba(0, 0, 0, 0.08)`},space:{0:"2px",1:"3px",2:"4px",3:"8px",4:"12px",5:"16px",6:"32px",7:"48px"},fontSizes:{0:"10px",1:"12px",2:"13px",3:"16px",4:"18px"},fonts:{ui:'"Recursive", system-ui, sans-serif',body:'"Recursive", system-ui, sans-serif',mono:'"Recursive Mono", monospace'},fontWeights:{},lineHeights:{},letterSpacings:{},sizes:{},borderWidths:{0:"$1"},borderStyles:{},radii:{0:"2px",1:"4px",2:"8px",3:"12px",4:"16px"},zIndices:{},transitions:{}},media:{micro:"(max-width: 370px)",sm:"(min-width: 640px)",md:"(min-width: 768px)",lg:"(min-width: 1024px)"},utils:{zStrokeWidth:()=>e=>Array.isArray(e)?{strokeWidth:`calc(${e[0]}px / var(--camera-zoom))`}:{strokeWidth:`calc(${e}px / var(--camera-zoom))`}}}),Gc=$5({colors:{bounds:"rgba(38, 150, 255, 1.000)",boundsBg:"rgba(38, 150, 255, 0.05)",hover:"#444A50",overlay:"rgba(0, 0, 0, 0.15)",overlayContrast:"rgba(255, 255, 255, 0.15)",panel:"#363D44",panelContrast:"#49555f",selected:"rgba(38, 150, 255, 1.000)",selectedContrast:"#fefefe",text:"#f8f9fa",tooltip:"#1d1d1d",tooltipContrast:"#ffffff",canvas:"#212529"},shadows:{2:"0px 1px 1px rgba(0, 0, 0, 0.24)",3:"0px 2px 3px rgba(0, 0, 0, 0.24)",4:"0px 4px 5px -1px rgba(0, 0, 0, 0.24)",8:"0px 12px 17px rgba(0, 0, 0, 0.24)",12:"0px 12px 17px rgba(0, 0, 0, 0.24)",24:"0px 24px 38px rgba(0, 0, 0, 0.24)",panel:`0px 0px 16px -1px rgba(0, 0, 0, 0.05), 
      0px 0px 16px -8px rgba(0, 0, 0, 0.09), 
      0px 0px 16px -12px rgba(0, 0, 0, 0.2)`}}),qr=qe("hr",{height:0,paddingTop:1,width:"calc(100%+8px)",backgroundColor:"$hover",border:"none",margin:"$2 -4px"}),Xo=qe("div",{position:"relative",overflow:"hidden",userSelect:"none",display:"flex",flexDirection:"column",zIndex:99997,minWidth:180,pointerEvents:"all",backgroundColor:"$panel",border:"1px solid $panelContrast",boxShadow:"$panel",padding:"$2 $2",borderRadius:"$3",font:"$ui",maxHeight:"100vh",overflowY:"auto",overflowX:"hidden","&::webkit-scrollbar":{display:"none"},"-ms-overflow-style":"none",scrollbarWidth:"none",variants:{size:{small:{minWidth:72}},overflow:{true:{maxHeight:"60vh"}}}}),F5=()=>X.isDarwin()?"\u2318":"Ctrl";function Y0({variant:e,children:t}){return u.createElement(H5,{variant:e},t.split("").map((r,i)=>u.createElement("span",{key:i},r.replace("#",F5()))))}var H5=qe("kbd",{marginLeft:"$3",textShadow:"$2",textAlign:"center",fontSize:"$0",fontFamily:"$ui",color:"$text",background:"none",fontWeight:400,gap:"$1",display:"flex",alignItems:"center","& > span":{padding:"$0",borderRadius:"$0",display:"flex",alignItems:"center",justifyContent:"center"},variants:{variant:{tooltip:{"& > span":{color:"$tooltipContrast",background:"$overlayContrast",boxShadow:"$key",width:"20px",height:"20px"}},menu:{}}}}),ki=qe("div",{height:"100%",borderRadius:"4px",marginRight:"1px",width:"fit-content",display:"grid",alignItems:"center",justifyContent:"center",outline:"none",border:"none",pointerEvents:"all",cursor:"pointer",color:"currentColor","& svg":{height:16,width:16,strokeWidth:1},"& > *":{gridRow:1,gridColumn:1}}),yi={"@initial":"mobile","@micro":"micro","@sm":"small","@md":"medium","@lg":"large"},Bn=u.forwardRef((e,t)=>{var r=e,{onClick:i,isActive:s=!1,isWarning:l=!1,hasIndicator:h=!1,hasArrow:g=!1,disabled:f=!1,variant:C,kbd:y,children:b}=r,R=Ei(r,["onClick","isActive","isWarning","hasIndicator","hasArrow","disabled","variant","kbd","children"]);return u.createElement(N5,Y({ref:t,bp:yi,isWarning:l,isActive:s,disabled:f,onClick:i,variant:C},R),u.createElement(Wc,null,b,y?u.createElement(Y0,{variant:"menu"},y):void 0,h&&u.createElement(fr.wU,{dir:"ltr"},u.createElement(ki,null,u.createElement(tl,null))),g&&u.createElement(ki,null,u.createElement(P9,null))))}),Wc=qe("div",{height:"100%",width:"100%",backgroundColor:"$panel",borderRadius:"$2",display:"flex",gap:"$1",flexDirection:"row",alignItems:"center",padding:"0 $3",justifyContent:"space-between",border:"1px solid transparent","& svg":{position:"relative",stroke:"$overlay",strokeWidth:1,zIndex:1},[`& > ${ki}`]:{paddingLeft:"$3"}}),N5=qe("button",{position:"relative",width:"100%",background:"none",border:"none",cursor:"pointer",height:32,minHeight:32,outline:"none",color:"$text",fontFamily:"$ui",fontWeight:400,fontSize:"$1",borderRadius:4,userSelect:"none",margin:0,padding:"0 0","&[data-disabled]":{opacity:.3},"&:disabled":{opacity:.3},[`&:focus:not(:disabled) ${Wc}`]:{backgroundColor:"$hover"},"& a":{textDecoration:"none",color:"$text"},variants:{bp:{mobile:{},small:{}},variant:{styleMenu:{margin:"$1 0 $1 0"},wide:{gridColumn:"1 / span 4"}},size:{icon:{padding:"4px ",width:"auto"}},isWarning:{true:{color:"$warn"}},isActive:{true:{backgroundColor:"$hover"},false:{}}}});function Kr({children:e,label:t,kbd:r,id:i,side:s="top"}){return u.createElement("span",{id:i},u.createElement(Wa.zt,null,u.createElement(Wa.fC,null,u.createElement(Wa.xz,{dir:"ltr",asChild:!0},u.createElement("span",null,e)),u.createElement(V5,{dir:"ltr",side:s,sideOffset:8},t,r?u.createElement(Y0,{variant:"tooltip"},r):null,u.createElement(j5,null)))))}var V5=qe(Wa.VY,{borderRadius:3,padding:"$3 $3 $3 $3",fontSize:"$1",backgroundColor:"$tooltip",color:"$tooltipContrast",boxShadow:"$3",display:"flex",alignItems:"center",fontFamily:"$ui",userSelect:"none"}),j5=qe(Wa.Eh,{fill:"$tooltip",margin:"0 8px"});function V0e(){let e=io.useCallback((l,h)=>Ft(this,null,function*(){h(l.fileSystemHandle?"saveFirstTime":"saveAgain",()=>Ft(this,null,function*(){try{yield l.saveProject(),l.newProject()}catch{}}),()=>Ft(this,null,function*(){l.newProject()}),()=>Ft(this,null,function*(){}))}),[]),t=io.useCallback((l,h)=>Ft(this,null,function*(){h(l.fileSystemHandle?"saveFirstTime":"saveAgain",()=>Ft(this,null,function*(){try{yield l.saveProject(),yield l.openProject()}catch{}}),()=>Ft(this,null,function*(){l.openProject()}),()=>Ft(this,null,function*(){}))}),[]),r=io.useCallback(l=>{l.saveProject()},[]),i=io.useCallback(l=>{l.saveProjectAs()},[]),s=io.useCallback(l=>Ft(this,null,function*(){var h;(h=l.openAsset)==null||h.call(l)}),[]);return{onNewProject:e,onSaveProject:r,onSaveProjectAs:i,onOpenProject:t,onOpenMedia:s}}function Kc(){let e=Dr(),{openDialog:t}=nd(),r=u.useCallback(g=>Ft(this,null,function*(){var f,C;g&&e.callbacks.onOpenProject&&g.preventDefault(),(C=(f=e.callbacks).onNewProject)==null||C.call(f,e,t)}),[e,t]),i=u.useCallback(g=>{var f,C;g&&e.callbacks.onOpenProject&&g.preventDefault(),(C=(f=e.callbacks).onSaveProject)==null||C.call(f,e)},[e]),s=u.useCallback(g=>{var f,C;g&&e.callbacks.onOpenProject&&g.preventDefault(),(C=(f=e.callbacks).onSaveProjectAs)==null||C.call(f,e)},[e]),l=u.useCallback(g=>Ft(this,null,function*(){var f,C;g&&e.callbacks.onOpenProject&&g.preventDefault(),(C=(f=e.callbacks).onOpenProject)==null||C.call(f,e,t)}),[e,t]),h=u.useCallback(g=>Ft(this,null,function*(){var f,C;g&&e.callbacks.onOpenMedia&&g.preventDefault(),(C=(f=e.callbacks).onOpenMedia)==null||C.call(f,e)}),[e]);return{onNewProject:r,onSaveProject:i,onSaveProjectAs:s,onOpenProject:l,onOpenMedia:h}}var U5=class{constructor(){S(this,"onPinchStart"),S(this,"onPinchEnd"),S(this,"onPinch"),S(this,"onKeyDown"),S(this,"onKeyUp"),S(this,"onPointerMove"),S(this,"onPointerUp"),S(this,"onPan"),S(this,"onZoom"),S(this,"onPointerDown"),S(this,"onPointCanvas"),S(this,"onDoubleClickCanvas"),S(this,"onRightPointCanvas"),S(this,"onDragCanvas"),S(this,"onReleaseCanvas"),S(this,"onPointShape"),S(this,"onDoubleClickShape"),S(this,"onRightPointShape"),S(this,"onDragShape"),S(this,"onHoverShape"),S(this,"onUnhoverShape"),S(this,"onReleaseShape"),S(this,"onPointBounds"),S(this,"onDoubleClickBounds"),S(this,"onRightPointBounds"),S(this,"onDragBounds"),S(this,"onHoverBounds"),S(this,"onUnhoverBounds"),S(this,"onReleaseBounds"),S(this,"onPointBoundsHandle"),S(this,"onDoubleClickBoundsHandle"),S(this,"onRightPointBoundsHandle"),S(this,"onDragBoundsHandle"),S(this,"onHoverBoundsHandle"),S(this,"onUnhoverBoundsHandle"),S(this,"onReleaseBoundsHandle"),S(this,"onPointHandle"),S(this,"onDoubleClickHandle"),S(this,"onRightPointHandle"),S(this,"onDragHandle"),S(this,"onHoverHandle"),S(this,"onUnhoverHandle"),S(this,"onReleaseHandle"),S(this,"onShapeBlur"),S(this,"onShapeClone")}},Z5=(e=>(e.Idle="idle",e.Connecting="connecting",e.Connected="connected",e.Disconnected="disconnected",e))(Z5||{}),z5=(e=>(e.Transform="transform",e.Translate="translate",e.TransformSingle="transformSingle",e.Brush="brush",e.Arrow="arrow",e.Draw="draw",e.Erase="erase",e.Rotate="rotate",e.Handle="handle",e.Grid="grid",e.Edit="edit",e))(z5||{}),G5=(e=>(e.Idle="idle",e.PointingHandle="pointingHandle",e.PointingBounds="pointingBounds",e.PointingBoundsHandle="pointingBoundsHandle",e.TranslatingLabel="translatingLabel",e.TranslatingHandle="translatingHandle",e.Translating="translating",e.Transforming="transforming",e.Rotating="rotating",e.Pinching="pinching",e.Brushing="brushing",e.Creating="creating",e.EditingText="editing-text",e))(G5||{}),W5=(e=>(e.Backward="backward",e.Forward="forward",e.ToFront="toFront",e.ToBack="toBack",e))(W5||{}),K5=(e=>(e.Top="top",e.CenterVertical="centerVertical",e.Bottom="bottom",e.Left="left",e.CenterHorizontal="centerHorizontal",e.Right="right",e))(K5||{}),Y5=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(Y5||{}),X5=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(X5||{}),q5=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(q5||{}),J5=(e=>(e.Sticky="sticky",e.Ellipse="ellipse",e.Rectangle="rectangle",e.Triangle="triangle",e.Draw="draw",e.Arrow="arrow",e.Line="line",e.Text="text",e.Group="group",e.Image="image",e.Video="video",e))(J5||{}),Q5=(e=>(e.Arrow="arrow",e))(Q5||{}),e3=(e=>(e.White="white",e.LightGray="lightGray",e.Gray="gray",e.Black="black",e.Green="green",e.Cyan="cyan",e.Blue="blue",e.Indigo="indigo",e.Violet="violet",e.Red="red",e.Orange="orange",e.Yellow="yellow",e))(e3||{}),Yc=(e=>(e.Small="small",e.Medium="medium",e.Large="large",e))(Yc||{}),Xc=(e=>(e.Draw="draw",e.Solid="solid",e.Dashed="dashed",e.Dotted="dotted",e))(Xc||{}),t3=(e=>(e.Small="small",e.Medium="medium",e.Large="large",e.ExtraLarge="extraLarge",e))(t3||{}),qc=(e=>(e.Start="start",e.Middle="middle",e.End="end",e.Justify="justify",e))(qc||{}),Jc=(e=>(e.Script="script",e.Sans="sans",e.Serif="serif",e.Mono="mono",e))(Jc||{}),r3=(e=>(e.Image="image",e.Video="video",e))(r3||{}),n3=(e=>(e.PNG="png",e.JPG="jpeg",e.WEBP="webp",e.SVG="svg",e.JSON="json",e))(n3||{}),Qc=(e=>(e.Transparent="transparent",e.Auto="auto",e.Light="light",e.Dark="dark",e))(Qc||{});function i3(e){let t=Dr(),r=u.useCallback((f=!1)=>{let C=e.current;return f&&(t.isMenuOpen||t.settings.keepStyleMenuOpen)?!0:(C?.focus(),C&&(document.activeElement===C||C.contains(document.activeElement)))},[e]);u.useEffect(()=>{if(!t)return;let f=b=>{if(r(!0)){if(t.readOnly){t.copy(void 0,b);return}t.cut(void 0,b)}},C=b=>{!r(!0)||t.copy(void 0,b)},y=b=>{!r(!0)||t.readOnly||t.paste(void 0,b)};return document.addEventListener("cut",f),document.addEventListener("copy",C),document.addEventListener("paste",y),()=>{document.removeEventListener("cut",f),document.removeEventListener("copy",C),document.removeEventListener("paste",y)}},[t]),Bt("v,1",()=>{!r(!0)||t.selectTool("select")},[t,e.current]),Bt("d,p,2",()=>{!r(!0)||t.selectTool("draw")},void 0,[t]),Bt("e,3",()=>{!r(!0)||t.selectTool("erase")},void 0,[t]),Bt("r,4",()=>{!r(!0)||t.selectTool("rectangle")},void 0,[t]),Bt("o,5",()=>{!r(!0)||t.selectTool("ellipse")},void 0,[t]),Bt("g,6",()=>{!r()||t.selectTool("triangle")},void 0,[t]),Bt("l,7",()=>{!r(!0)||t.selectTool("line")},void 0,[t]),Bt("a,8",()=>{!r(!0)||t.selectTool("arrow")},void 0,[t]),Bt("t,9",()=>{!r(!0)||t.selectTool("text")},void 0,[t]),Bt("s,0",()=>{!r(!0)||t.selectTool("sticky")},void 0,[t]),Bt("ctrl+shift+d,\u2318+shift+d",f=>{!r(!0)||(t.toggleDarkMode(),f.preventDefault())},void 0,[t]),Bt("ctrl+.,\u2318+.",()=>{!r(!0)||t.toggleFocusMode()},void 0,[t]),Bt("ctrl+shift+g,\u2318+shift+g",()=>{!r(!0)||t.toggleGrid()},void 0,[t]);let{onNewProject:i,onOpenProject:s,onSaveProject:l,onSaveProjectAs:h,onOpenMedia:g}=Kc();Bt("ctrl+n,\u2318+n",f=>{f.preventDefault(),r()&&i(f)},void 0,[t]),Bt("ctrl+s,\u2318+s",f=>{!r()||l(f)},void 0,[t]),Bt("ctrl+shift+s,\u2318+shift+s",f=>{!r()||h(f)},void 0,[t]),Bt("ctrl+o,\u2318+o",f=>{!r()||s(f)},void 0,[t]),Bt("ctrl+u,\u2318+u",f=>{!r()||g(f)},void 0,[t]),Bt("\u2318+z,ctrl+z",f=>{f.preventDefault(),r(!0)&&(t.session?t.cancelSession():t.undo())},void 0,[t]),Bt("ctrl+shift+z,\u2318+shift+z",()=>{!r(!0)||(t.session?t.cancelSession():t.redo())},void 0,[t]),Bt("\u2318+u,ctrl+u",()=>{!r()||t.undoSelect()},void 0,[t]),Bt("ctrl+shift-u,\u2318+shift+u",()=>{!r()||t.redoSelect()},void 0,[t]),Bt("ctrl+=,\u2318+=,ctrl+num_add,\u2318+num_add",f=>{!r(!0)||(t.zoomIn(),f.preventDefault())},void 0,[t]),Bt("ctrl+-,\u2318+-,ctrl+num_subtract,\u2318+num_subtract",f=>{!r(!0)||(t.zoomOut(),f.preventDefault())},void 0,[t]),Bt("shift+0,ctrl+numpad_0,\u2318+numpad_0",()=>{!r(!0)||t.resetZoom()},void 0,[t]),Bt("shift+1",()=>{!r(!0)||t.zoomToFit()},void 0,[t]),Bt("shift+2",()=>{!r(!0)||t.zoomToSelection()},void 0,[t]),Bt("ctrl+d,\u2318+d",f=>{!r()||(t.duplicate(),f.preventDefault())},void 0,[t]),Bt("shift+h",()=>{!r(!0)||t.flipHorizontal()},void 0,[t]),Bt("shift+v",()=>{!r(!0)||t.flipVertical()},void 0,[t]),Bt("escape",()=>{!r(!0)||t.cancel()},void 0,[t]),Bt("backspace,del",()=>{!r()||t.delete()},void 0,[t]),Bt("\u2318+a,ctrl+a",()=>{!r(!0)||t.selectAll()},void 0,[t]),Bt("up",()=>{!r()||t.nudge([0,-1],!1)},void 0,[t]),Bt("right",()=>{!r()||t.nudge([1,0],!1)},void 0,[t]),Bt("down",()=>{!r()||t.nudge([0,1],!1)},void 0,[t]),Bt("left",()=>{!r()||t.nudge([-1,0],!1)},void 0,[t]),Bt("shift+up",()=>{!r()||t.nudge([0,-1],!0)},void 0,[t]),Bt("shift+right",()=>{!r()||t.nudge([1,0],!0)},void 0,[t]),Bt("shift+down",()=>{!r()||t.nudge([0,1],!0)},void 0,[t]),Bt("shift+left",()=>{!r()||t.nudge([-1,0],!0)},void 0,[t]),Bt("\u2318+shift+l,ctrl+shift+l",()=>{!r()||t.toggleLocked()},void 0,[t]),Bt("\u2318+shift+c,ctrl+shift+c",f=>{!r()||(t.copySvg(),f.preventDefault())},void 0,[t]),Bt("\u2318+g,ctrl+g",f=>{!r()||(t.group(),f.preventDefault())},void 0,[t]),Bt("\u2318+shift+g,ctrl+shift+g",f=>{!r()||(t.ungroup(),f.preventDefault())},void 0,[t]),Bt("[",()=>{!r(!0)||t.moveBackward()},void 0,[t]),Bt("]",()=>{!r(!0)||t.moveForward()},void 0,[t]),Bt("shift+[",()=>{!r(!0)||t.moveToBack()},void 0,[t]),Bt("shift+]",()=>{!r(!0)||t.moveToFront()},void 0,[t]),Bt("ctrl+shift+backspace,\u2318+shift+backspace",f=>{!r()||(t.settings.isDebugMode&&t.resetDocument(),f.preventDefault())},void 0,[t]),Bt("alt+command+l,alt+ctrl+l",f=>{!r(!0)||(t.style({textAlign:"start"}),f.preventDefault())},void 0,[t]),Bt("alt+command+t,alt+ctrl+t",f=>{!r(!0)||(t.style({textAlign:"middle"}),f.preventDefault())},void 0,[t]),Bt("alt+command+r,alt+ctrl+r",f=>{!r(!0)||(t.style({textAlign:"end"}),f.preventDefault())},void 0,[t])}var X0=new Map,cl="tldraw-fonts",o3=`
@import url('https://fonts.googleapis.com/css2?family=Caveat+Brush&family=Source+Code+Pro&family=Source+Sans+Pro&family=Crimson+Pro&display=block');

@font-face {
  font-family: 'Recursive';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImKsvxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)
    format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Recursive';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImKsvxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)
    format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Recursive Mono';
  font-style: normal;
  font-weight: 420;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImqvTxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)
    format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
    U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
`;function s3(){u.useLayoutEffect(()=>{if(X0.get(cl))return;let e=document.createElement("style");return e.innerHTML=o3,e.setAttribute("id",cl),document.head.appendChild(e),X0.set(cl,e),()=>{e&&document.head.contains(e)&&(document.head.removeChild(e),X0.delete(cl))}},[])}var ed=u.createContext({}),a3=()=>{let[e,t]=u.useState(0);u.useEffect(()=>t(1))};function Dr(){return u.useContext(ed)}var td=u.createContext({});function qo(){let e=u.useContext(td);return a3(),e}var l3="\u0627\u0644\u0644\u0648\u0646",u3="\u064A\u0645\u0644\u0623",c3="\u0645\u062A\u0642\u0637\u0639",d3="\u062D\u062C\u0645",h3="\u062A\u0628\u0642\u0649 \u0645\u0641\u062A\u0648\u062D\u0629",f3="\u0627\u0644\u062E\u0637",p3="\u0645\u062D\u0627\u0630\u0627\u0629",g3="\u0627\u0644\u0623\u0646\u0645\u0627\u0637",m3="\u062A\u0643\u0628\u064A\u0631",v3="\u062A\u0635\u063A\u064A\u0631",C3="\u0625\u0644\u0649",E3="\u0623\u062F\u0648\u0627\u062A",y3="\u0627\u0644\u062A\u062D\u0648\u064A\u0644\u0627\u062A",w3="\u0645\u0644\u0641",b3="\u062A\u062D\u0631\u064A\u0631",x3="\u0645\u0639\u0627\u064A\u0646\u0629",_3="\u0627\u0644\u062A\u0641\u0636\u064A\u0644\u0627\u062A",S3="\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644",L3="\u062E\u0631\u0648\u062C",R3="\u0643\u0646 \u0631\u0627\u0639\u064A\u0627\u064B",I3="\u0627\u0644\u0639\u0648\u062F\u0629 \u0625\u0644\u0649 \u0627\u0644\u0645\u062D\u062A\u0648\u0649",T3="\u062A\u0643\u0628\u064A\u0631 \u0644\u0644\u062A\u062D\u062F\u064A\u062F",D3="\u062A\u0643\u0628\u064A\u0631 \u0644\u062A\u0646\u0627\u0633\u0628",A3="\u062A\u0643\u0628\u064A\u0631 \u0625\u0644\u0649",k3="\u0627\u0644\u0648\u0636\u0639 \u0627\u0644\u062F\u0627\u0643\u0646",P3="\u0648\u0636\u0639 \u0627\u0644\u062A\u0631\u0643\u064A\u0632",M3="\u0648\u0636\u0639 \u0627\u0644\u062A\u0635\u062D\u064A\u062D",O3="\u0627\u0638\u0647\u0631 \u0627\u0644\u0634\u0628\u0643\u0629",B3="\u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0627\u0644\u062A\u062D\u062F\u064A\u062F CAD",$3="\u0627\u0644\u0627\u062D\u062A\u0641\u0627\u0638 \u0628\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0646\u0645\u0637 \u0645\u0641\u062A\u0648\u062D\u0629",F3="\u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u0644\u0642\u0637\u0627\u062A \u062F\u0627\u0626\u0645\u064B\u0627",H3="\u062A\u062F\u0648\u064A\u0631 \u0627\u0644\u0645\u0642\u0627\u0628\u0636",N3="\u0645\u0642\u0627\u0628\u0636 \u0645\u0644\u0632\u0645\u0629",V3="\u0645\u0642\u0627\u0628\u0636 \u0627\u0633\u062A\u0646\u0633\u0627\u062E",j3="\u0627\u0644\u063A\u0627\u0621",U3="\u0625\u0639\u0627\u062F\u0629",Z3="\u0642\u0637\u0639",z3="\u0646\u0633\u062D",G3="\u0644\u0635\u0642",W3="\u0646\u0633\u062E \u0627\u0644\u0649",K3="\u0635\u062F\u0631 \u0627\u0644\u0649",Y3="\u0627\u062E\u062A\u0631 \u0627\u0644\u0643\u0644",X3="\u0644\u0627 \u062A\u062E\u062A\u0631 \u0634\u064A\u0621",q3="\u062D\u0630\u0641",J3="\u0645\u0634\u0631\u0648\u0639 \u062C\u062F\u064A\u062F",Q3="\u0641\u062A\u062D",eh="\u062D\u0641\u0638",th="\u062D\u0641\u0638 \u0628\u0627\u0633\u0645",rh="\u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0648\u0633\u0627\u0626\u0637",nh="\u0625\u0646\u0634\u0627\u0621 \u0635\u0641\u062D\u0629",ih="\u0635\u0641\u062D\u0629 \u062C\u062F\u064A\u062F\u0629",oh="\u0627\u0633\u0645 \u0627\u0644\u0635\u0641\u062D\u0629",sh="\u0646\u0633\u062E",ah="\u0627\u0644\u063A\u0627\u0621",lh="\u0646\u0633\u062E \u0631\u0627\u0628\u0637 \u0627\u0644\u062F\u0639\u0648\u0629",uh="\u0646\u0633\u062E \u0631\u0627\u0628\u0637 \u062F\u0639\u0648\u0629 \u0627\u0644\u0642\u0631\u0627\u0621\u0629 \u0641\u0642\u0637",ch="\u0642\u0645 \u0628\u0625\u0646\u0634\u0627\u0621 \u0645\u0634\u0631\u0648\u0639 \u0645\u062A\u0639\u062F\u062F \u0627\u0644\u0644\u0627\u0639\u0628\u064A\u0646",dh="\u0646\u0633\u062E \u0625\u0644\u0649 \u0645\u0634\u0631\u0648\u0639 \u0645\u062A\u0639\u062F\u062F \u0627\u0644\u0644\u0627\u0639\u0628\u064A\u0646",hh="\u0627\u062E\u062A\u0631",fh="\u0645\u0645\u062D\u0627\u0629",ph="\u0631\u0633\u0645",gh="\u0633\u0647\u0645",mh="\u0646\u0635",vh="\u0644\u0627\u0635\u0642",Ch="\u0645\u0631\u0628\u0639",Eh="\u0628\u064A\u0636\u0627\u0648\u064A",yh="\u0645\u062B\u0644\u062B",wh="\u062E\u0637",bh="\u062F\u0648\u0651\u0631",xh="\u0642\u0641\u0644 \u0646\u0633\u0628\u0629 \u0627\u0644\u0627\u0628\u0639\u0627\u062F",_h="\u0641\u062A\u062D \u0642\u0641\u0644 \u0646\u0633\u0628\u0629 \u0627\u0644\u0627\u0628\u0639\u0627\u062F",Sh="\u062C\u0645\u0651\u0639",Lh="\u0641\u0643 \u0627\u0644\u062A\u062C\u0645\u0639",Rh="\u0627\u0646\u062A\u0642\u0644 \u0625\u0644\u0649 \u0627\u0644\u062E\u0644\u0641",Ih="\u062A\u062D\u0631\u064A\u0643 \u0644\u0644\u062E\u0644\u0641",Th="\u062A\u062D\u0631\u064A\u0643 \u0644\u0644\u0623\u0645\u0627\u0645",Dh="\u062A\u062D\u0631\u0643 \u0644\u0644\u0623\u0645\u0627\u0645",Ah="\u0625\u0639\u0627\u062F\u0629 \u0636\u0628\u0637 \u0627\u0644\u0632\u0627\u0648\u064A\u0629",kh="\u0642\u0641\u0644",Ph="\u0627\u0644\u063A\u0627\u0621 \u0627\u0644\u0642\u0641\u0644",Mh="\u0627\u0646\u0642\u0644 \u0625\u0644\u0649 \u0627\u0644\u0635\u0641\u062D\u0629",Oh="\u0627\u0646\u0639\u0643\u0627\u0633 \u0623\u0641\u0642\u064A",Bh="\u0627\u0646\u0639\u0643\u0627\u0633 \u0639\u0645\u0648\u062F\u064A",$h="\u062D\u0631\u0651\u0643",Fh="\u0644\u0644\u0627\u0645\u0627\u0645",Hh="\u0644\u0644\u062E\u0644\u0641",Nh="\u0644\u0644\u0648\u0631\u0627\u0621",Vh="\u062E\u0644\u0641",jh="\u0644\u063A\u0629",Uh="\u0644\u0644\u0645\u0632\u064A\u062F",Zh="\u0645\u0648\u0642\u0639 \u0627\u0644\u0627\u062F\u0648\u0627\u062A",zh="\u0627\u0633\u0641\u0644",Gh="\u064A\u0633\u0627\u0631",Wh="\u064A\u0645\u064A\u0646",Kh="\u0623\u0639\u0644\u0649",Yh="\u0635\u0641\u062D\u0629",Xh="\u0627\u062E\u062A\u0635\u0627\u0631\u0627\u062A \u0644\u0648\u062D\u0629 \u0627\u0644\u0645\u0641\u0627\u062A\u064A\u062D",qh="\u0628\u062D\u062B",Jh="{dots}\u062A\u062D\u0645\u064A\u0644 ",Qh="\u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u062E\u0644\u0641\u064A\u0629",ef="\u0634\u0640\u0641\u0627\u0641",tf="\u0630\u0627\u062A\u064A",rf="\u062E\u0641\u064A\u0641",nf="\u063A\u0627\u0645\u0642",of={"style.menu.color":l3,"style.menu.fill":u3,"style.menu.dash":c3,"style.menu.size":d3,"style.menu.keep.open":h3,"style.menu.font":f3,"style.menu.align":p3,styles:g3,"zoom.in":m3,"zoom.out":v3,to:C3,"menu.tools":E3,"menu.transform":y3,"menu.file":w3,"menu.edit":b3,"menu.view":x3,"menu.preferences":_3,"menu.sign.in":S3,"menu.sign.out":L3,"become.a.sponsor":R3,"zoom.to.content":I3,"zoom.to.selection":T3,"zoom.to.fit":D3,"zoom.to":A3,"preferences.dark.mode":k3,"preferences.focus.mode":P3,"preferences.debug.mode":M3,"preferences.show.grid":O3,"preferences.use.cad.selection":B3,"preferences.keep.stylemenu.open":$3,"preferences.always.show.snaps":F3,"preferences.rotate.handles":H3,"preferences.binding.handles":N3,"preferences.clone.handles":V3,undo:j3,redo:U3,cut:Z3,copy:z3,paste:G3,"copy.as":W3,"export.as":K3,"select.all":Y3,"select.none":X3,delete:q3,"new.project":J3,open:Q3,save:eh,"save.as":th,"upload.media":rh,"create.page":nh,"new.page":ih,"page.name":oh,duplicate:sh,cancel:ah,"copy.invite.link":lh,"copy.readonly.link":uh,"create.multiplayer.project":ch,"copy.multiplayer.project":dh,select:hh,eraser:fh,draw:ph,arrow:gh,text:mh,sticky:vh,rectangle:Ch,ellipse:Eh,triangle:yh,line:wh,rotate:bh,"lock.aspect.ratio":xh,"unlock.aspect.ratio":_h,group:Sh,ungroup:Lh,"move.to.back":Rh,"move.backward":Ih,"move.forward":Th,"move.to.front":Dh,"reset.angle":Ah,lock:kh,unlock:Ph,"move.to.page":Mh,"flip.horizontal":Oh,"flip.vertical":Bh,move:$h,"to.front":Fh,forward:Hh,backward:Nh,back:Vh,language:jh,"translation.link":Uh,"dock.position":Zh,bottom:zh,left:Gh,right:Wh,top:Kh,page:Yh,"keyboard.shortcuts":Xh,search:qh,loading:Jh,"export.background":Qh,transparent:ef,auto:tf,light:rf,dark:nf},sf="Farve",af="Fyld",lf="Streg",uf="St\xF8rrelse",cf="Hold \xE5ben",df="Skrifttype",hf="Juster",ff="Format",pf="Zoom ind",gf="Zoom ud",mf="til",vf="Fil",Cf="Rediger",Ef="Vis",yf="Indstillinger",wf="Log ind",bf="Log ud",xf="Bliv sponsor",_f="Zoom til valgte",Sf="Zoom til l\xE6rred",Lf="Zoom til",Rf="M\xF8rkt udseende",If="Fokus tilstand",Tf="Debug tilstand",Df="Vis net",Af="Brug CAD udv\xE6lgelse",kf="Hold formatmenuen \xE5ben",Pf="Vis altid snaps",Mf="Roteringsh\xE5ndtag",Of="Bindingsh\xE5ndtag",Bf="Kloningsh\xE5ndtag",$f="Fortryd",Ff="Gentag",Hf="Klip",Nf="Kopier",Vf="Inds\xE6t",jf="Kopier som",Uf="Eksporter som",Zf="V\xE6lg alt",zf="Frav\xE6lg alt",Gf="Slet",Wf="Nyt projekt",Kf="\xC5ben",Yf="Gem",Xf="Gem som",qf="Upload medie",Jf="Opret side",Qf="Ny side",e7="Sidenavn",t7="Dupliker",r7="Fortryd",n7="Kopier invitationslink",i7="Opret multiplayer projekt",o7="Kopier til multiplayer projekt",s7="V\xE6lg",a7="Viskel\xE6der",l7="Tegn",u7="Pil",c7="Tekst",d7="Note",h7="Rektangel",f7="Ellipse",p7="Trekant",g7="Linje",m7="Roter",v7="L\xE5s billedformat",C7="Frig\xF8r billedformat",E7="Grupper",y7="Opdel gruppe",w7="Placer bagerst",b7="Flyt tilbage",x7="Flyt frem",_7="L\xE6g forrest",S7="Nulstil vinkel",L7="L\xE5s",R7="L\xE5s op",I7="Flyt til side",T7="Vend vandret",D7="Vend lodret",A7="Flyt",k7="Forrest",P7="Frem",M7="Tilbage",O7="Bagerst",B7="Sprog",$7={"style.menu.color":sf,"style.menu.fill":af,"style.menu.dash":lf,"style.menu.size":uf,"style.menu.keep.open":cf,"style.menu.font":df,"style.menu.align":hf,styles:ff,"zoom.in":pf,"zoom.out":gf,to:mf,"menu.file":vf,"menu.edit":Cf,"menu.view":Ef,"menu.preferences":yf,"menu.sign.in":wf,"menu.sign.out":bf,"become.a.sponsor":xf,"zoom.to.selection":_f,"zoom.to.fit":Sf,"zoom.to":Lf,"preferences.dark.mode":Rf,"preferences.focus.mode":If,"preferences.debug.mode":Tf,"preferences.show.grid":Df,"preferences.use.cad.selection":Af,"preferences.keep.stylemenu.open":kf,"preferences.always.show.snaps":Pf,"preferences.rotate.handles":Mf,"preferences.binding.handles":Of,"preferences.clone.handles":Bf,undo:$f,redo:Ff,cut:Hf,copy:Nf,paste:Vf,"copy.as":jf,"export.as":Uf,"select.all":Zf,"select.none":zf,delete:Gf,"new.project":Wf,open:Kf,save:Yf,"save.as":Xf,"upload.media":qf,"create.page":Jf,"new.page":Qf,"page.name":e7,duplicate:t7,cancel:r7,"copy.invite.link":n7,"create.multiplayer.project":i7,"copy.multiplayer.project":o7,select:s7,eraser:a7,draw:l7,arrow:u7,text:c7,sticky:d7,rectangle:h7,ellipse:f7,triangle:p7,line:g7,rotate:m7,"lock.aspect.ratio":v7,"unlock.aspect.ratio":C7,group:E7,ungroup:y7,"move.to.back":w7,"move.backward":b7,"move.forward":x7,"move.to.front":_7,"reset.angle":S7,lock:L7,unlock:R7,"move.to.page":I7,"flip.horizontal":T7,"flip.vertical":D7,move:A7,"to.front":k7,forward:P7,backward:M7,back:O7,language:B7},F7="Farbe",H7="F\xFCllen",N7="Strich",V7="Gr\xF6\xDFe",j7="Offen halten",U7="Schriftart",Z7="Ausrichten",z7="Stile",G7="Heranzoomen",W7="Herauszoomen",K7="zu",Y7="Datei",X7="Bearbeiten",q7="Ansicht",J7="Pr\xE4ferenzen",Q7="Einloggen",e8="Ausloggen",t8="Sponsor werden",r8="Zur Auswahl zoomen",n8="Zoom anpassen",i8="Zoomen nach",o8="Dunkler Modus",s8="Fokus Modus",a8="Debug Modus",l8="Gitter anzeigen",u8="CAD Auswahl verwenden",c8="Stilmen\xFC offen halten",d8="Hilfslinien immer anzeigen",h8="Rotiergriffe",f8="Bindegriffe",p8="Klongriffe",g8="R\xFCckg\xE4ngig machen",m8="Wiederherstellen",v8="Ausschneiden",C8="Kopieren",E8="Einf\xFCgen",y8="Kopieren als",w8="Exportieren als",b8="Alles ausw\xE4hlen",x8="Nichts ausw\xE4hlen",_8="L\xF6schen",S8="Neues Projekt",L8="\xD6ffnen",R8="Speichern",I8="Speichern als",T8="Medien hochladen",D8="Seite erstellen",A8="Neue Seite",k8="Seitenname",P8="Duplizieren",M8="Abbrechen",O8="Einladungslink kopieren",B8="Mehrspielerprojekt kreieren",$8="In Mehrspielerprojekt kopieren",F8="Ausw\xE4hlen",H8="Radierer",N8="Malen",V8="Pfeil",j8="Text",U8="Notiz",Z8="Rechteck",z8="Ellipse",G8="Dreieck",W8="Linie",K8="Drehen",Y8="Seitenverh\xE4ltnis sperren",X8="Seitenverh\xE4ltnis entsperren",q8="Gruppieren",J8="Gruppierung aufheben",Q8="Nach Hinten verschieben",e6="R\xFCckw\xE4rts schieben",t6="Vorw\xE4rts schieben",r6="Nach Vorne verschieben",n6="Winkel zur\xFCcksetzen",i6="Sperren",o6="Entsperren",s6="Zu Seite verschieben",a6="Horizontal spiegeln",l6="Vertikal spiegeln",u6="Verschieben",c6="Nach Vorne",d6="Vorw\xE4rts",h6="R\xFCckw\xE4rts",f6="Hinten",p6="Sprache",g6={"style.menu.color":F7,"style.menu.fill":H7,"style.menu.dash":N7,"style.menu.size":V7,"style.menu.keep.open":j7,"style.menu.font":U7,"style.menu.align":Z7,styles:z7,"zoom.in":G7,"zoom.out":W7,to:K7,"menu.file":Y7,"menu.edit":X7,"menu.view":q7,"menu.preferences":J7,"menu.sign.in":Q7,"menu.sign.out":e8,"become.a.sponsor":t8,"zoom.to.selection":r8,"zoom.to.fit":n8,"zoom.to":i8,"preferences.dark.mode":o8,"preferences.focus.mode":s8,"preferences.debug.mode":a8,"preferences.show.grid":l8,"preferences.use.cad.selection":u8,"preferences.keep.stylemenu.open":c8,"preferences.always.show.snaps":d8,"preferences.rotate.handles":h8,"preferences.binding.handles":f8,"preferences.clone.handles":p8,undo:g8,redo:m8,cut:v8,copy:C8,paste:E8,"copy.as":y8,"export.as":w8,"select.all":b8,"select.none":x8,delete:_8,"new.project":S8,open:L8,save:R8,"save.as":I8,"upload.media":T8,"create.page":D8,"new.page":A8,"page.name":k8,duplicate:P8,cancel:M8,"copy.invite.link":O8,"create.multiplayer.project":B8,"copy.multiplayer.project":$8,select:F8,eraser:H8,draw:N8,arrow:V8,text:j8,sticky:U8,rectangle:Z8,ellipse:z8,triangle:G8,line:W8,rotate:K8,"lock.aspect.ratio":Y8,"unlock.aspect.ratio":X8,group:q8,ungroup:J8,"move.to.back":Q8,"move.backward":e6,"move.forward":t6,"move.to.front":r6,"reset.angle":n6,lock:i6,unlock:o6,"move.to.page":s6,"flip.horizontal":a6,"flip.vertical":l6,move:u6,"to.front":c6,forward:d6,backward:h6,back:f6,language:p6},m6={},v6="Color",C6="Relleno",E6="L\xEDnea",y6="Tama\xF1o",w6="Mantener abierto",b6="Fuente",x6="Alineaci\xF3n",_6="Estilos",S6="Acercar",L6="Alejar",R6="A",I6="Archivo",T6="Editar",D6="Ver",A6="Preferencias",k6="Iniciar sesi\xF3n",P6="Cerrar sesi\xF3n",M6="Convi\xE9rtete en patrocinador",O6="Acercar al contenido",B6="Acercar a la selecci\xF3n",$6="Ajustar a la ventana",F6="Acercar a",H6="Modo oscuro",N6="Modo concentraci\xF3n",V6="Modo depuraci\xF3n",j6="Mostrar cuadr\xEDcula",U6="Usar selecci\xF3n CAD",Z6="Mantener men\xFA de estilos abierto",z6="Mostrar puntos de ajuste",G6="Control de rotaci\xF3n",W6="Control de vinculaci\xF3n",K6="Control de clonaci\xF3n",Y6="Deshacer",X6="Rehacer",q6="Cortar",J6="Copiar",Q6="Pegar",ep="Copiar como",tp="Exportar como",rp="Selecionar todo",np="Selecionar nada",ip="Borrar",op="Nuevo Proyecto",sp="Abrir",ap="Guardar",lp="Guardar como",up="Subir medios",cp="Crear p\xE1gina",dp="Nueva p\xE1gina",hp="Nombre de p\xE1gina",fp="Duplicar",pp="Cancelar",gp="Copiar invitaci\xF3n",mp="Copiar invitaci\xF3n (solo lectura)",vp="Crear proyecto multijugador",Cp="Copiar proyecto multijugador",Ep="Seleccionar",yp="Borrador",wp="Dibujar",bp="Flecha",xp="Texto",_p="Pegatina",Sp="Rect\xE1ngulo",Lp="Elipse",Rp="Tri\xE1ngulo",Ip="L\xEDnea",Tp="Rotar",Dp="Bloquear relaci\xF3n de aspecto",Ap="Desbloquear relaci\xF3n de aspecto",kp="Agrupar",Pp="Desagrupar",Mp="Mover al fondo",Op="Mover atr\xE1s",Bp="Mover adelante",$p="Mover al frente",Fp="Restablecer \xE1ngulo",Hp="Bloquear",Np="Desbloquear",Vp="Mover a p\xE1gina",jp="Voltear horizontalmente",Up="Voltear verticalmente",Zp="Mover",zp="Al frente",Gp="Adelante",Wp="Atr\xE1s",Kp="Fondo",Yp="Idioma",Xp="Saber m\xE1s",qp="Posici\xF3n del dock",Jp="Abajo",Qp="Atajos de teclado",eg="Cargando{dots}",tg="Izquierda",rg="Derecha",ng="Arriba",ig="Buscar",og="P\xE1gina",sg="Imagen",ag={"style.menu.color":v6,"style.menu.fill":C6,"style.menu.dash":E6,"style.menu.size":y6,"style.menu.keep.open":w6,"style.menu.font":b6,"style.menu.align":x6,styles:_6,"zoom.in":S6,"zoom.out":L6,to:R6,"menu.file":I6,"menu.edit":T6,"menu.view":D6,"menu.preferences":A6,"menu.sign.in":k6,"menu.sign.out":P6,"become.a.sponsor":M6,"zoom.to.content":O6,"zoom.to.selection":B6,"zoom.to.fit":$6,"zoom.to":F6,"preferences.dark.mode":H6,"preferences.focus.mode":N6,"preferences.debug.mode":V6,"preferences.show.grid":j6,"preferences.use.cad.selection":U6,"preferences.keep.stylemenu.open":Z6,"preferences.always.show.snaps":z6,"preferences.rotate.handles":G6,"preferences.binding.handles":W6,"preferences.clone.handles":K6,undo:Y6,redo:X6,cut:q6,copy:J6,paste:Q6,"copy.as":ep,"export.as":tp,"select.all":rp,"select.none":np,delete:ip,"new.project":op,open:sp,save:ap,"save.as":lp,"upload.media":up,"create.page":cp,"new.page":dp,"page.name":hp,duplicate:fp,cancel:pp,"copy.invite.link":gp,"copy.readonly.link":mp,"create.multiplayer.project":vp,"copy.multiplayer.project":Cp,select:Ep,eraser:yp,draw:wp,arrow:bp,text:xp,sticky:_p,rectangle:Sp,ellipse:Lp,triangle:Rp,line:Ip,rotate:Tp,"lock.aspect.ratio":Dp,"unlock.aspect.ratio":Ap,group:kp,ungroup:Pp,"move.to.back":Mp,"move.backward":Op,"move.forward":Bp,"move.to.front":$p,"reset.angle":Fp,lock:Hp,unlock:Np,"move.to.page":Vp,"flip.horizontal":jp,"flip.vertical":Up,move:Zp,"to.front":zp,forward:Gp,backward:Wp,back:Kp,language:Yp,"translation.link":Xp,"dock.position":qp,bottom:Jp,"keyboard.shortcuts":Qp,loading:eg,left:tg,right:rg,top:ng,search:ig,page:og,image:sg},lg="\u0631\u0646\u06AF",ug="\u062A\u0648\u067E\u064F\u0631",cg="\u062E\u0637\u200C \u0686\u06CC\u0646",dg="\u0627\u0646\u062F\u0627\u0632\u0647",hg="\u0628\u0627\u0632 \u0628\u0627\u0634",fg="\u0641\u0648\u0646\u062A",pg="\u062A\u0631\u0627\u0632",gg="\u0627\u0633\u062A\u0627\u06CC\u0644\u200C\u0647\u0627",mg="\u0632\u0648\u0645 \u062C\u0644\u0648",vg="\u0632\u0648\u0645 \u0639\u0642\u0628",Cg="\u0628\u0647",Eg="\u0641\u0627\u06CC\u0644",yg="\u0648\u06CC\u0631\u0627\u06CC\u0634",wg="\u0646\u0645\u0627\u06CC\u0634",bg="\u062A\u0646\u0638\u06CC\u0645\u200C\u0647\u0627",xg="\u0648\u0631\u0648\u062F",_g="\u062E\u0631\u0648\u062C",Sg=" \u062D\u0627\u0645\u06CC \u0634\u0648",Lg="\u0646\u0645\u0627\u06CC\u0634 \u0627\u0646\u062A\u062E\u0627\u0628\u200C\u0634\u062F\u0647\u200C\u0647\u0627",Rg="\u0646\u0645\u0627\u06CC\u0634 \u06A9\u0644 \u0635\u0641\u062D\u0647",Ig="\u0632\u0648\u0645 \u0628\u0647 ",Tg="\u062D\u0627\u0644\u062A \u0634\u0628",Dg="\u062D\u0627\u0644\u062A \u062A\u0645\u0631\u06A9\u0632",Ag="\u062D\u0627\u0644\u062A \u0639\u06CC\u0628\u200C\u06CC\u0627\u06CC\u06CC",kg="\u0646\u0645\u0627\u06CC\u0634 \u062E\u0637\u0648\u0637 \u0631\u0627\u0647\u0646\u0645\u0627",Pg="\u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0627\u0632 \u062D\u0627\u0644\u062A \u0627\u0646\u062A\u062E\u0627\u0628\u06CC CAD",Mg="\u0645\u0646\u0648\u06CC \u0627\u0633\u062A\u0627\u06CC\u0644 \u0628\u0627\u0632 \u0628\u0627\u0634\u0647",Og="\u0631\u0627\u0647\u0646\u0645\u0627\u06CC \u0644\u0628\u0647\u200C\u0647\u0627 \u0631\u0648 \u0646\u0634\u0648\u0646 \u0628\u062F\u0647",Bg="\u062F\u0633\u062A\u06AF\u06CC\u0631\u0647\u200C\u0647\u0627\u06CC \u0686\u0631\u062E\u0634 \u0631\u0648 \u0646\u0634\u0648\u0646 \u0628\u062F\u0647",$g="\u062F\u0633\u062A\u0647\u0654 \u0644\u0628\u0647\u200C\u0647\u0627 \u0631\u0648 \u0646\u0634\u0648\u0646 \u0628\u062F\u0647",Fg="\u062F\u0633\u062A\u06AF\u06CC\u0631\u0647\u200C\u0647\u0627\u06CC \u06A9\u067E\u06CC \u0631\u0648 \u0646\u0634\u0648\u0646 \u0628\u062F\u0647",Hg="\u06CC\u0647 \u0642\u062F\u0645 \u0639\u0642\u0628",Ng="\u06CC\u0647 \u0642\u062F\u0645 \u062C\u0644\u0648",Vg="\u0628\u0631\u06CC\u062F\u0646",jg="\u06A9\u067E\u06CC",Ug="\u062C\u0627\u06CC\u200C\u06AF\u0630\u0627\u0631\u06CC",Zg="\u06A9\u067E\u06CC \u0628\u0647\u200C\u200C\u0639\u0646\u0648\u0627\u0646",zg="\u062E\u0631\u0648\u062C\u06CC \u0628\u0627 \u0641\u0631\u0645\u062A",Gg="\u0627\u0646\u062A\u062E\u0627\u0628 \u0647\u0645\u0647",Wg="\u0627\u0646\u062A\u062E\u0627\u0628 \u0647\u06CC\u0686",Kg=" \u067E\u0627\u06A9\u200C\u06A9\u0631\u062F\u0646",Yg="\u067E\u0631\u0648\u0698\u0647\u0654 \u062A\u0627\u0632\u0647",Xg="\u0628\u0627\u0632 \u06A9\u0646",qg="\u0630\u062E\u06CC\u0631\u0647",Jg="\u0630\u062E\u06CC\u0631\u0647 \u0628\u0627 \u0627\u0633\u0645",Qg="\u0622\u067E\u0644\u0648\u062F \u0639\u06A9\u0633",em="\u0633\u0627\u062E\u062A \u0635\u0641\u062D\u0647",tm="\u0635\u0641\u062D\u0647\u0654 \u062A\u0627\u0632\u0647",rm="\u0627\u0633\u0645 \u0635\u0641\u062D\u0647",nm="\u06A9\u067E\u06CC \u062F\u0631\u062C\u0627",im="\u0628\u06CC\u200C\u062E\u06CC\u0627\u0644",om="\u06A9\u067E\u06CC \u0644\u06CC\u0646\u06A9 \u062F\u0639\u0648\u062A",sm="\u0633\u0627\u062E\u062A \u067E\u0631\u0648\u0698\u0647\u0654 \u0686\u0646\u062F\u0646\u0641\u0631\u0647",am="\u06A9\u067E\u06CC \u062F\u0631 \u067E\u0631\u0648\u0698\u0647\u0654 \u0686\u0646\u062F\u0646\u0641\u0631\u0647",lm="\u0627\u0646\u062A\u062E\u0627\u0628",um="\u067E\u0627\u06A9\u200C\u06A9\u0646",cm="\u0631\u0633\u0645",dm="\u0641\u0644\u0650\u0634",hm="\u0645\u062A\u0646",fm="\u06CC\u0627\u062F\u062F\u0627\u0634\u062A",pm="\u0686\u0627\u0631\u06AF\u0648\u0634",gm="\u06AF\u0631\u062F\u06CC",mm="\u0633\u0647\u200C\u06AF\u0648\u0634",vm="\u062E\u0637",Cm="\u0686\u0631\u062E\u0634",Em="\u062A\u062B\u0628\u06CC\u062A \u0646\u0633\u0628\u062A \u0627\u0628\u0639\u0627\u062F",ym="\u0646\u0633\u0628\u062A \u0627\u0628\u0639\u0627\u062F \u0645\u062A\u063A\u06CC\u0631",wm="\u062C\u0645\u0639 \u06A9\u0646",bm="\u062C\u062F\u0627 \u06A9\u0646",xm="\u0628\u0628\u0631 \u0622\u062E\u0631",_m="\u0628\u0628\u0631 \u0639\u0642\u0628",Sm="\u0628\u0628\u0631 \u0627\u0648\u0644",Lm="\u0628\u0628\u0631 \u062C\u0644\u0648",Rm="\u062D\u0630\u0641 \u0686\u0631\u062E\u0634",Im="\u0642\u0641\u0644\u200C \u06A9\u0646",Tm="\u0628\u0627\u0632 \u06A9\u0646",Dm="\u0628\u0628\u0631 \u0628\u0647 \u0635\u0641\u062D\u0647",Am="\u0628\u0631\u06AF\u0631\u062F\u0648\u0646 \u0627\u0641\u0642\u06CC",km="\u0628\u0631\u06AF\u0631\u062F\u0648\u0646 \u0639\u0645\u0648\u062F\u06CC",Pm="\u062C\u0627\u0628\u0647\u200C\u062C\u0627\u0634 \u06A9\u0646",Mm="\u0628\u0647 \u0627\u0648\u0644",Om="\u0628\u0647 \u062C\u0644\u0648",Bm="\u0628\u0647 \u0639\u0642\u0628",$m="\u0628\u0647 \u0622\u062E\u0631",Fm="\u0632\u0628\u0627\u0646",Hm={"style.menu.color":lg,"style.menu.fill":ug,"style.menu.dash":cg,"style.menu.size":dg,"style.menu.keep.open":hg,"style.menu.font":fg,"style.menu.align":pg,styles:gg,"zoom.in":mg,"zoom.out":vg,to:Cg,"menu.file":Eg,"menu.edit":yg,"menu.view":wg,"menu.preferences":bg,"menu.sign.in":xg,"menu.sign.out":_g,"become.a.sponsor":Sg,"zoom.to.selection":Lg,"zoom.to.fit":Rg,"zoom.to":Ig,"preferences.dark.mode":Tg,"preferences.focus.mode":Dg,"preferences.debug.mode":Ag,"preferences.show.grid":kg,"preferences.use.cad.selection":Pg,"preferences.keep.stylemenu.open":Mg,"preferences.always.show.snaps":Og,"preferences.rotate.handles":Bg,"preferences.binding.handles":$g,"preferences.clone.handles":Fg,undo:Hg,redo:Ng,cut:Vg,copy:jg,paste:Ug,"copy.as":Zg,"export.as":zg,"select.all":Gg,"select.none":Wg,delete:Kg,"new.project":Yg,open:Xg,save:qg,"save.as":Jg,"upload.media":Qg,"create.page":em,"new.page":tm,"page.name":rm,duplicate:nm,cancel:im,"copy.invite.link":om,"create.multiplayer.project":sm,"copy.multiplayer.project":am,select:lm,eraser:um,draw:cm,arrow:dm,text:hm,sticky:fm,rectangle:pm,ellipse:gm,triangle:mm,line:vm,rotate:Cm,"lock.aspect.ratio":Em,"unlock.aspect.ratio":ym,group:wm,ungroup:bm,"move.to.back":xm,"move.backward":_m,"move.forward":Sm,"move.to.front":Lm,"reset.angle":Rm,lock:Im,unlock:Tm,"move.to.page":Dm,"flip.horizontal":Am,"flip.vertical":km,move:Pm,"to.front":Mm,forward:Om,backward:Bm,back:$m,language:Fm},Nm="Couleur",Vm="Remplir",jm="Bordure",Um="Taille",Zm="Toujours afficher le menu",zm="Police",Gm="Alignement",Wm="Styles",Km="Zoom avant",Ym="Zoom arri\xE8re",Xm="\xC0",qm="Outils",Jm="Transformation",Qm="Fichier",ev="\xC9dition",tv="Afficher",rv="Pr\xE9f\xE9rences",nv="S'authentifier",iv="Se d\xE9connecter",ov="Devenir un sponsor",sv="Retour au contenu",av="Ajuster le zoom \xE0 la s\xE9lection",lv="Adapter le zoom au contenu",uv="R\xE9tablir le zoom \xE0",cv="Mode sombre",dv="Mode focus",hv="Afficher la barre d\xE9veloppeur",fv="Afficher la grille",pv="Utiliser la s\xE9lection CAD",gv="Toujours afficher le menu styles",mv="Afficher les rep\xE8res dynamiques",vv="Manier la rotation",Cv="Manier les liaisons",Ev="Manier le clonage",yv="Annuler",wv="R\xE9tablir",bv="Couper",xv="Copier",_v="Coller",Sv="Copier au format",Lv="Exporter au format",Rv="Tout s\xE9lectionner",Iv="Tout d\xE9s\xE9lectionner",Tv="Supprimer",Dv="Nouveau project",Av="Ouvrir",kv="Enregistrer",Pv="Enregistrer sous",Mv="Importer un m\xE9dia",Ov="Cr\xE9er une page",Bv="Nouvelle Page",$v="Nom de la page",Fv="Dupliquer",Hv="Annuler",Nv="Copier le lien d'invitation",Vv="Copier le lien en lecture seule d'invitation",jv="Cr\xE9er un project multi-joueurs",Uv="Copier dans un projet multi-joueurs",Zv="S\xE9lection",zv="Gomme",Gv="Crayon",Wv="Fl\xE8che",Kv="Texte",Yv="Note",Xv="Rectangle",qv="Cercle",Jv="Triangle",Qv="Ligne",eC="Rotation",tC="Verrouiller les proportions",rC="D\xE9verrouiller les proportions",nC="Grouper",iC="D\xE9grouper",oC="D\xE9placer \xE0 l'arri\xE8re-plan",sC="Reculer d'un plan",aC="Avancer d'un plan",lC="Placer au premier plan",uC="R\xE9initialiser la rotation",cC="Verrouiller",dC="D\xE9verrouiller",hC="Alignement / R\xE9partion",fC="D\xE9placer vers la page",pC="Retourner horizontalement",gC="Retourner verticalement",mC="Disposition",vC="Placer au premier plan",CC="Avancer d'un plan",EC="Reculer d'un plan",yC="D\xE9placer \xE0 l'arri\xE8re-plan",wC="Langage",bC="En savoir plus",xC="Position du dock",_C="En bas",SC="\xC0 gauche",LC="\xC0 droite",RC="En haut",IC="Page",TC="Raccourcis clavier",DC="Rechercher",AC="Chargement{dots}",kC="Couleur d'arri\xE8re-plan de l'export",PC="Transparent",MC="Automatique",OC="Clair",BC="Sombre",$C={"style.menu.color":Nm,"style.menu.fill":Vm,"style.menu.dash":jm,"style.menu.size":Um,"style.menu.keep.open":Zm,"style.menu.font":zm,"style.menu.align":Gm,styles:Wm,"zoom.in":Km,"zoom.out":Ym,to:Xm,"menu.tools":qm,"menu.transform":Jm,"menu.file":Qm,"menu.edit":ev,"menu.view":tv,"menu.preferences":rv,"menu.sign.in":nv,"menu.sign.out":iv,"become.a.sponsor":ov,"zoom.to.content":sv,"zoom.to.selection":av,"zoom.to.fit":lv,"zoom.to":uv,"preferences.dark.mode":cv,"preferences.focus.mode":dv,"preferences.debug.mode":hv,"preferences.show.grid":fv,"preferences.use.cad.selection":pv,"preferences.keep.stylemenu.open":gv,"preferences.always.show.snaps":mv,"preferences.rotate.handles":vv,"preferences.binding.handles":Cv,"preferences.clone.handles":Ev,undo:yv,redo:wv,cut:bv,copy:xv,paste:_v,"copy.as":Sv,"export.as":Lv,"select.all":Rv,"select.none":Iv,delete:Tv,"new.project":Dv,open:Av,save:kv,"save.as":Pv,"upload.media":Mv,"create.page":Ov,"new.page":Bv,"page.name":$v,duplicate:Fv,cancel:Hv,"copy.invite.link":Nv,"copy.readonly.link":Vv,"create.multiplayer.project":jv,"copy.multiplayer.project":Uv,select:Zv,eraser:zv,draw:Gv,arrow:Wv,text:Kv,sticky:Yv,rectangle:Xv,ellipse:qv,triangle:Jv,line:Qv,rotate:eC,"lock.aspect.ratio":tC,"unlock.aspect.ratio":rC,group:nC,ungroup:iC,"move.to.back":oC,"move.backward":sC,"move.forward":aC,"move.to.front":lC,"reset.angle":uC,lock:cC,unlock:dC,"align.distribute":hC,"move.to.page":fC,"flip.horizontal":pC,"flip.vertical":gC,move:mC,"to.front":vC,forward:CC,backward:EC,back:yC,language:wC,"translation.link":bC,"dock.position":xC,bottom:_C,left:SC,right:LC,top:RC,page:IC,"keyboard.shortcuts":TC,search:DC,loading:AC,"export.background":kC,transparent:PC,auto:MC,light:OC,dark:BC},FC="\u05E6\u05D1\u05E2",HC="\u05DE\u05DC\u05D0",NC="\u05D2\u05D1\u05D5\u05DC",VC="\u05D2\u05D5\u05D3\u05DC",jC="\u05D4\u05E9\u05D0\u05E8 \u05E4\u05EA\u05D5\u05D7",UC="\u05D2\u05D5\u05E4\u05DF",ZC="\u05D9\u05D9\u05E9\u05D5\u05E8",zC="\u05E2\u05D9\u05E6\u05D5\u05D1",GC="\u05D4\u05D2\u05D3\u05DC \u05EA\u05E6\u05D5\u05D2\u05D4",WC="\u05D4\u05E7\u05D8\u05DF \u05EA\u05E6\u05D5\u05D2\u05D4",KC="\u05DC",YC="\u05E7\u05D5\u05D1\u05E5",XC="\u05E2\u05E8\u05D9\u05DB\u05D4",qC="\u05EA\u05E6\u05D5\u05D2\u05D4",JC="\u05DE\u05D0\u05E4\u05D9\u05D9\u05E0\u05D9\u05DD",QC="\u05D4\u05D9\u05E8\u05E9\u05DD",eE="\u05D4\u05EA\u05E0\u05EA\u05E7",tE="\u05DE\u05EA\u05DF \u05D7\u05E1\u05D5\u05EA",rE="\u05D6\u05D5\u05DD \u05DC\u05D1\u05D7\u05D9\u05E8\u05D4",nE="\u05D6\u05D5\u05DD \u05DC\u05D4\u05EA\u05D0\u05DE\u05D4",iE="\u05D6\u05D5\u05DD \u05DC",oE="\u05DE\u05E6\u05D1 \u05D7\u05E9\u05D5\u05DA",sE="\u05DE\u05E6\u05D1 \u05E4\u05D5\u05E7\u05D5\u05E1",aE="\u05DE\u05E6\u05D1 \u05D3\u05D9\u05D1\u05D0\u05D2",lE="(\u05D2\u05E8\u05D9\u05D3)\u05D4\u05E8\u05D0\u05D4 \u05E8\u05E9\u05EA \u05E2\u05D9\u05DE\u05D5\u05D3",uE="\u05E1\u05D9\u05DE\u05D5\u05DF CAD",cE="\u05D4\u05E9\u05D0\u05E8 \u05EA\u05E4\u05E8\u05D9\u05D8 \u05E2\u05D9\u05E6\u05D5\u05D1 \u05E4\u05EA\u05D5\u05D7",dE="\u05D4\u05E8\u05D0\u05D4 \u05E7\u05D5\u05D5\u05D9 \u05DE\u05EA\u05D0\u05E8",hE="\u05D4\u05E8\u05D0\u05D4 \u05D9\u05D3\u05D9\u05D5\u05EA \u05E1\u05D9\u05D1\u05D5\u05D1",fE="\u05D4\u05E8\u05D0\u05D4 \u05D9\u05D3\u05D9\u05D5\u05EA \u05E7\u05E9\u05D9\u05E8\u05D4",pE="\u05D4\u05E8\u05D0\u05D4 \u05D9\u05D3\u05D9\u05D5\u05EA \u05E9\u05D9\u05DB\u05E4\u05D5\u05DC",gE="\u05D1\u05D8\u05DC",mE="\u05E2\u05E9\u05D4 \u05DE\u05D7\u05D3\u05E9",vE="\u05D2\u05D6\u05D5\u05E8",CE="\u05D4\u05E2\u05EA\u05E7",EE="\u05D4\u05D3\u05D1\u05E7",yE="\u05D4\u05E2\u05EA\u05E7 \u05DB",wE="\u05D9\u05D9\u05E6\u05D0 \u05DB",bE="\u05D1\u05D7\u05E8 \u05D4\u05DB\u05DC",xE="\u05D1\u05D8\u05DC \u05D1\u05D7\u05D9\u05E8\u05D4",_E="\u05DE\u05D7\u05E7",SE="\u05E4\u05E8\u05D5\u05D9\u05E7\u05D8 \u05D7\u05D3\u05E9",LE="\u05E4\u05EA\u05D7",RE="\u05E9\u05DE\u05D5\u05E8",IE="\u05E9\u05DE\u05D5\u05E8 \u05DB",TE="\u05D4\u05E2\u05DC\u05D0\u05EA \u05DE\u05D3\u05D9\u05D4",DE="\u05E6\u05D5\u05E8 \u05D3\u05E3",AE="\u05D3\u05E3 \u05D7\u05D3\u05E9",kE="\u05E9\u05DD \u05D4\u05D3\u05E3",PE="\u05E9\u05DB\u05E4\u05DC",ME="\u05D1\u05D8\u05DC",OE="\u05D4\u05E2\u05EA\u05E7 \u05E7\u05D9\u05E9\u05D5\u05E8 \u05D4\u05D6\u05DE\u05E0\u05D4",BE="\u05E6\u05D5\u05E8 \u05E4\u05E8\u05D5\u05D9\u05E7\u05D8 \u05E8\u05D1 \u05DE\u05E9\u05EA\u05EA\u05E4\u05D9\u05DD",$E="\u05D4\u05E2\u05EA\u05E7 \u05DC\u05E4\u05E8\u05D5\u05D9\u05E7\u05D8 \u05E8\u05D1 \u05DE\u05E9\u05EA\u05EA\u05E4\u05D9\u05DD",FE="\u05E1\u05DE\u05DF",HE="\u05DE\u05D7\u05E7",NE="\u05E6\u05D9\u05D9\u05E8",VE="\u05D7\u05E5",jE="\u05D8\u05E7\u05E1\u05D8",UE="\u05D3\u05D1\u05D9\u05E7\u05D9",ZE="\u05DE\u05E8\u05D5\u05D1\u05E2",zE="\u05D0\u05DC\u05D9\u05E4\u05E1\u05D4",GE="\u05DE\u05E9\u05D5\u05DC\u05E9",WE="\u05E7\u05D5",KE="\u05E1\u05D5\u05D1\u05D1",YE="\u05E0\u05E2\u05DC \u05D9\u05D7\u05E1 \u05E8\u05D5\u05D7\u05D1-\u05D2\u05D5\u05D1\u05D4",XE="\u05E9\u05D7\u05E8\u05E8 \u05E0\u05E2\u05D9\u05DC\u05EA \u05D9\u05D7\u05E1 \u05E8\u05D5\u05D7\u05D1-\u05D2\u05D5\u05D1\u05D4",qE="\u05E7\u05D1\u05E5",JE="\u05D1\u05D8\u05DC \u05E7\u05D9\u05D1\u05D5\u05E5",QE="\u05D4\u05D1\u05D0 \u05DC\u05EA\u05D7\u05EA\u05D9\u05EA",ey="\u05D4\u05D6\u05D6 \u05D0\u05D7\u05D5\u05E8\u05D4",ty="\u05D4\u05D6\u05D6 \u05E7\u05D3\u05D9\u05DE\u05D4",ry="\u05D4\u05D1\u05D0 \u05DC\u05D7\u05D6\u05D9\u05EA",ny="\u05D0\u05E4\u05E1 \u05D6\u05D5\u05D5\u05D9\u05EA",iy="\u05E0\u05E2\u05DC",oy="\u05E9\u05D7\u05E8\u05E8 \u05E0\u05E2\u05D9\u05DC\u05D4",sy="\u05D4\u05D6\u05D6 \u05DC\u05D3\u05E3",ay="\u05D4\u05E4\u05D5\u05DA \u05D0\u05D5\u05E4\u05E7\u05D9\u05EA",ly="\u05D4\u05E4\u05D5\u05DA \u05D0\u05E0\u05DB\u05D9\u05EA",uy="\u05D4\u05D6\u05D6",cy="\u05D4\u05D1\u05D0 \u05DC\u05E7\u05D3\u05D9\u05DE\u05D4",dy="\u05E7\u05D3\u05D9\u05DE\u05D4",hy="\u05D0\u05D7\u05D5\u05E8\u05D4",fy="\u05D1\u05D7\u05D6\u05E8\u05D4",py="\u05E9\u05E4\u05D4",gy={"style.menu.color":FC,"style.menu.fill":HC,"style.menu.dash":NC,"style.menu.size":VC,"style.menu.keep.open":jC,"style.menu.font":UC,"style.menu.align":ZC,styles:zC,"zoom.in":GC,"zoom.out":WC,to:KC,"menu.file":YC,"menu.edit":XC,"menu.view":qC,"menu.preferences":JC,"menu.sign.in":QC,"menu.sign.out":eE,"become.a.sponsor":tE,"zoom.to.selection":rE,"zoom.to.fit":nE,"zoom.to":iE,"preferences.dark.mode":oE,"preferences.focus.mode":sE,"preferences.debug.mode":aE,"preferences.show.grid":lE,"preferences.use.cad.selection":uE,"preferences.keep.stylemenu.open":cE,"preferences.always.show.snaps":dE,"preferences.rotate.handles":hE,"preferences.binding.handles":fE,"preferences.clone.handles":pE,undo:gE,redo:mE,cut:vE,copy:CE,paste:EE,"copy.as":yE,"export.as":wE,"select.all":bE,"select.none":xE,delete:_E,"new.project":SE,open:LE,save:RE,"save.as":IE,"upload.media":TE,"create.page":DE,"new.page":AE,"page.name":kE,duplicate:PE,cancel:ME,"copy.invite.link":OE,"create.multiplayer.project":BE,"copy.multiplayer.project":$E,select:FE,eraser:HE,draw:NE,arrow:VE,text:jE,sticky:UE,rectangle:ZE,ellipse:zE,triangle:GE,line:WE,rotate:KE,"lock.aspect.ratio":YE,"unlock.aspect.ratio":XE,group:qE,ungroup:JE,"move.to.back":QE,"move.backward":ey,"move.forward":ty,"move.to.front":ry,"reset.angle":ny,lock:iy,unlock:oy,"move.to.page":sy,"flip.horizontal":ay,"flip.vertical":ly,move:uy,"to.front":cy,forward:dy,backward:hy,back:fy,language:py},my="Colore",vy="Riempi",Cy="Tratteggo",Ey="Dimensione",yy="Mantieni aperto",wy="Font",by="Allineamento",xy="Stile",_y="Ingrandisci",Sy="Rimpicciolisci",Ly="Imposta",Ry="File",Iy="Modifica",Ty="Visualizzazione",Dy="Preferenze",Ay="Accedi",ky="Esci",Py="Sponsorizza",My="Adatta alla selezione",Oy="Adatta",By="Ingrandisci",$y="Modalit\xE0 scura",Fy="Modalit\xE0 zen",Hy="Modalit\xE0 sviluppatore",Ny="Mostra griglia",Vy="Selezione CAD",jy="Mantieni menu stile aperto",Uy="Mostra sempre le guide",Zy="Controlli d'inclinazione",zy="Controlli d'associazione",Gy="Controlli di clonazione",Wy="Annulla",Ky="Ripristina",Yy="Taglia",Xy="Copia",qy="Incolla",Jy="Copia come",Qy="Esporta come",ew="Seleziona tutto",tw="Deseleziona tutto",rw="Elimina",nw="Nuovo progetto",iw="Apri",ow="Salva",sw="Salva come",aw="Carica contenuti multimediali",lw="Crea nuova pagina",uw="Nuova pagina",cw="Nome pagina",dw="Pagina",hw="Duplica",fw="Chiudi",pw="Copia link invito",gw="Crea progetto multiplayer",mw="Trasforma in progetto multiplayer",vw="Seleziona",Cw="Gomma",Ew="Matita",yw="Freccia",ww="Casella di testo",bw="Post-it",xw="Rettangolo",_w="Ellisse",Sw="Triangolo",Lw="Linea",Rw="Ruota",Iw="Blocca rapporto lati",Tw="Sblocca rapporto lati",Dw="Raggruppa",Aw="Separa",kw="Muovi in fondo",Pw="Sposta indietro",Mw="Sposta avanti",Ow="Muovi in fronte",Bw="Reimposta angolo",$w="Blocca",Fw="Sblocca",Hw="Trasferisci a pagina",Nw="Ribalta orizzontalmente",Vw="Ribalta verticalmente",jw="Sposta",Uw="In primo piano",Zw="Sposta avanti",zw="Sposta indietro",Gw="In fondo",Ww="Lingua",Kw="Posizione dock",Yw="In basso",Xw="Sinistra",qw="Destra",Jw="In Alto",Qw={"style.menu.color":my,"style.menu.fill":vy,"style.menu.dash":Cy,"style.menu.size":Ey,"style.menu.keep.open":yy,"style.menu.font":wy,"style.menu.align":by,styles:xy,"zoom.in":_y,"zoom.out":Sy,to:Ly,"menu.file":Ry,"menu.edit":Iy,"menu.view":Ty,"menu.preferences":Dy,"menu.sign.in":Ay,"menu.sign.out":ky,"become.a.sponsor":Py,"zoom.to.selection":My,"zoom.to.fit":Oy,"zoom.to":By,"preferences.dark.mode":$y,"preferences.focus.mode":Fy,"preferences.debug.mode":Hy,"preferences.show.grid":Ny,"preferences.use.cad.selection":Vy,"preferences.keep.stylemenu.open":jy,"preferences.always.show.snaps":Uy,"preferences.rotate.handles":Zy,"preferences.binding.handles":zy,"preferences.clone.handles":Gy,undo:Wy,redo:Ky,cut:Yy,copy:Xy,paste:qy,"copy.as":Jy,"export.as":Qy,"select.all":ew,"select.none":tw,delete:rw,"new.project":nw,open:iw,save:ow,"save.as":sw,"upload.media":aw,"create.page":lw,"new.page":uw,"page.name":cw,page:dw,duplicate:hw,cancel:fw,"copy.invite.link":pw,"create.multiplayer.project":gw,"copy.multiplayer.project":mw,select:vw,eraser:Cw,draw:Ew,arrow:yw,text:ww,sticky:bw,rectangle:xw,ellipse:_w,triangle:Sw,line:Lw,rotate:Rw,"lock.aspect.ratio":Iw,"unlock.aspect.ratio":Tw,group:Dw,ungroup:Aw,"move.to.back":kw,"move.backward":Pw,"move.forward":Mw,"move.to.front":Ow,"reset.angle":Bw,lock:$w,unlock:Fw,"move.to.page":Hw,"flip.horizontal":Nw,"flip.vertical":Vw,move:jw,"to.front":Uw,forward:Zw,backward:zw,back:Gw,language:Ww,"dock.position":Kw,bottom:Yw,left:Xw,right:qw,top:Jw},eb="\u8272",tb="\u5857\u308A\u3064\u3076\u3057",rb="\u7DDA",nb="\u5927\u304D\u3055",ib="\u5E38\u306B\u8868\u793A",ob="\u30D5\u30A9\u30F3\u30C8",sb="\u914D\u7F6E",ab="\u30B9\u30BF\u30A4\u30EB",lb="\u62E1\u5927",ub="\u7E2E\u5C0F",cb=" ",db="\u30D5\u30A1\u30A4\u30EB",hb="\u7DE8\u96C6",fb="\u8868\u793A",pb="\u8A2D\u5B9A",gb="\u30B5\u30A4\u30F3\u30A4\u30F3",mb="\u30B5\u30A4\u30F3\u30A2\u30A6\u30C8",vb="\u652F\u63F4\u3059\u308B",Cb="\u9078\u629E\u3057\u305F\u30A2\u30A4\u30C6\u30E0\u306B\u5408\u308F\u305B\u3066\u62E1\u5927",Eb="\u62E1\u5927\u3057\u3066\u3059\u3079\u3066\u3092\u8868\u793A",yb=" ",wb="\u30C0\u30FC\u30AF\u30E2\u30FC\u30C9",bb="\u30D5\u30A9\u30FC\u30AB\u30B9\u30E2\u30FC\u30C9",xb="\u30C7\u30D0\u30C3\u30B0\u30E2\u30FC\u30C9",_b="\u30B0\u30EA\u30C3\u30C9\u3092\u8868\u793A",Sb="CAD\u306E\u9078\u629E\u6CD5\u3092\u4F7F\u7528",Lb="\u30B9\u30BF\u30A4\u30EB\u30E1\u30CB\u30E5\u30FC\u3092\u5E38\u306B\u8868\u793A",Rb="\u30B9\u30CA\u30C3\u30D7\u3092\u5E38\u306B\u8868\u793A",Ib="\u56DE\u8EE2\u30CF\u30F3\u30C9\u30EB\u3092\u8868\u793A",Tb="\u7D50\u5408\u30CF\u30F3\u30C9\u30EB\u3092\u8868\u793A",Db="\u30AF\u30ED\u30FC\u30F3\u30CF\u30F3\u30C9\u30EB\u3092\u8868\u793A",Ab="\u5143\u306B\u623B\u3059",kb="\u3084\u308A\u76F4\u3057",Pb="\u5207\u308A\u53D6\u308A",Mb="\u30B3\u30D4\u30FC",Ob="\u8CBC\u308A\u4ED8\u3051",Bb="\u5F62\u5F0F\u3092\u9078\u629E\u3057\u3066\u30B3\u30D4\u30FC",$b="\u5F62\u5F0F\u3092\u9078\u629E\u3057\u3066\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",Fb="\u3059\u3079\u3066\u9078\u629E",Hb="\u9078\u629E\u3092\u89E3\u9664",Nb="\u524A\u9664",Vb="\u65B0\u3057\u3044\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8",jb="\u958B\u304F",Ub="\u4FDD\u5B58",Zb="\u540D\u524D\u3092\u3064\u3051\u3066\u4FDD\u5B58",zb="\u30E1\u30C7\u30A3\u30A2\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",Gb="\u30DA\u30FC\u30B8\u3092\u4F5C\u6210",Wb="\u65B0\u898F\u30DA\u30FC\u30B8",Kb="\u30DA\u30FC\u30B8\u540D",Yb="\u8907\u88FD",Xb="\u30AD\u30E3\u30F3\u30BB\u30EB",qb="\u5171\u6709\u30EA\u30F3\u30AF\u3092\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC",Jb="\u30DE\u30EB\u30C1\u30D7\u30EC\u30A4\u30E4\u30FC\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u4F5C\u6210",Qb="\u30DE\u30EB\u30C1\u30D7\u30EC\u30A4\u30E4\u30FC\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u306B\u30B3\u30D4\u30FC",ex="\u9078\u629E",tx="\u6D88\u3057\u30B4\u30E0",rx="\u63CF\u753B",nx="\u77E2\u5370",ix="\u30C6\u30AD\u30B9\u30C8",ox="\u3075\u305B\u3093",sx="\u9577\u65B9\u5F62",ax="\u6955\u5186\u5F62",lx="\u4E09\u89D2\u5F62",ux="\u7DDA",cx="\u56DE\u8EE2",dx="\u7E26\u6A2A\u6BD4\u3092\u56FA\u5B9A",hx="\u7E26\u6A2A\u6BD4\u306E\u56FA\u5B9A\u3092\u89E3\u9664",fx="\u30B0\u30EB\u30FC\u30D4\u30F3\u30B0",px="\u30B0\u30EB\u30FC\u30D7\u89E3\u9664",gx="\u6700\u5F8C\u9762\u306B\u79FB\u52D5",mx="\u3072\u3068\u3064\u5F8C\u308D\u306B\u79FB\u52D5",vx="\u3072\u3068\u3064\u524D\u306B\u79FB\u52D5",Cx="\u6700\u80CC\u9762\u306B\u79FB\u52D5",Ex="\u89D2\u5EA6\u3092\u521D\u671F\u5316",yx="\u30ED\u30C3\u30AF",wx="\u30A2\u30F3\u30ED\u30C3\u30AF",bx="\u30DA\u30FC\u30B8\u3078\u79FB\u52D5",xx="\u6C34\u5E73\u65B9\u5411\u306B\u53CD\u8EE2",_x="\u5782\u76F4\u65B9\u5411\u306B\u53CD\u8EE2",Sx="\u79FB\u52D5",Lx="\u6700\u524D\u9762\u3078",Rx="\u3072\u3068\u3064\u524D\u3078",Ix="\u3072\u3068\u3064\u5F8C\u308D\u3078",Tx="\u6700\u80CC\u9762\u3078",Dx="\u8A00\u8A9E",Ax={"style.menu.color":eb,"style.menu.fill":tb,"style.menu.dash":rb,"style.menu.size":nb,"style.menu.keep.open":ib,"style.menu.font":ob,"style.menu.align":sb,styles:ab,"zoom.in":lb,"zoom.out":ub,to:cb,"menu.file":db,"menu.edit":hb,"menu.view":fb,"menu.preferences":pb,"menu.sign.in":gb,"menu.sign.out":mb,"become.a.sponsor":vb,"zoom.to.selection":Cb,"zoom.to.fit":Eb,"zoom.to":yb,"preferences.dark.mode":wb,"preferences.focus.mode":bb,"preferences.debug.mode":xb,"preferences.show.grid":_b,"preferences.use.cad.selection":Sb,"preferences.keep.stylemenu.open":Lb,"preferences.always.show.snaps":Rb,"preferences.rotate.handles":Ib,"preferences.binding.handles":Tb,"preferences.clone.handles":Db,undo:Ab,redo:kb,cut:Pb,copy:Mb,paste:Ob,"copy.as":Bb,"export.as":$b,"select.all":Fb,"select.none":Hb,delete:Nb,"new.project":Vb,open:jb,save:Ub,"save.as":Zb,"upload.media":zb,"create.page":Gb,"new.page":Wb,"page.name":Kb,duplicate:Yb,cancel:Xb,"copy.invite.link":qb,"create.multiplayer.project":Jb,"copy.multiplayer.project":Qb,select:ex,eraser:tx,draw:rx,arrow:nx,text:ix,sticky:ox,rectangle:sx,ellipse:ax,triangle:lx,line:ux,rotate:cx,"lock.aspect.ratio":dx,"unlock.aspect.ratio":hx,group:fx,ungroup:px,"move.to.back":gx,"move.backward":mx,"move.forward":vx,"move.to.front":Cx,"reset.angle":Ex,lock:yx,unlock:wx,"move.to.page":bx,"flip.horizontal":xx,"flip.vertical":_x,move:Sx,"to.front":Lx,forward:Rx,backward:Ix,back:Tx,language:Dx},kx="\uC0C9\uAE54",Px="\uCC44\uC6B0\uAE30",Mx="\uD14C\uB450\uB9AC",Ox="\uD06C\uAE30",Bx="\uD56D\uC0C1 \uC5F4\uAE30",$x="\uAE00\uAF34",Fx="\uC815\uB82C",Hx="\uC2A4\uD0C0\uC77C",Nx="\uD655\uB300",Vx="\uCD95\uC18C",jx="to",Ux="\uD30C\uC77C",Zx="\uD3B8\uC9D1",zx="\uBCF4\uAE30",Gx="\uC124\uC815",Wx="\uB85C\uADF8\uC778",Kx="\uB85C\uADF8\uC544\uC6C3",Yx="\uD6C4\uC6D0\uC790 \uB418\uAE30",Xx="\uC120\uD0DD \uC694\uC18C \uB9DE\uCD94\uAE30",qx="\uC804\uCCB4 \uB9DE\uCD94\uAE30",Jx="\uB9DE\uCD94\uAE30",Qx="\uB2E4\uD06C \uBAA8\uB4DC",e_="\uC9D1\uC911 \uBAA8\uB4DC",t_="\uB514\uBC84\uADF8 \uBAA8\uB4DC",r_="\uACA9\uC790 \uBCF4\uAE30",n_="CAD \uC120\uD0DD \uC0AC\uC6A9",i_="\uC2A4\uD0C0\uC77C \uBA54\uB274 \uD56D\uC0C1 \uC5F4\uAE30",o_="Snap \uD56D\uC0C1 \uC5F4\uAE30",s_="\uD68C\uC804 \uBCF4\uC774\uAE30",a_="Binding Handles",l_="\uBCF5\uC81C \uBCF4\uC774\uAE30",u_="\uC2E4\uD589 \uCDE8\uC18C",c_="\uB2E4\uC2DC \uC2E4\uD589",d_="\uC790\uB974\uAE30",h_="\uBCF5\uC0AC",f_="\uBD99\uC5EC\uB123\uAE30",p_="\uB2E4\uB978 \uD615\uC2DD\uC73C\uB85C \uBCF5\uC0AC\uD558\uAE30",g_="\uB0B4\uBCF4\uB0B4\uAE30",m_="\uC804\uCCB4 \uC120\uD0DD",v_="\uC120\uD0DD \uC548\uD568",C_="\uC0AD\uC81C\uD558\uAE30",E_="\uC0C8 \uD504\uB85C\uC81D\uD2B8",y_="\uC5F4\uAE30",w_="\uC800\uC7A5",b_="\uB2E4\uB978 \uC774\uB984\uC73C\uB85C \uC800\uC7A5",x_="\uBBF8\uB514\uC5B4 \uC5C5\uB85C\uB4DC",__="\uC0C8 \uD398\uC774\uC9C0 \uB9CC\uB4E4\uAE30",S_="\uC0C8 \uD398\uC774\uC9C0",L_="\uD398\uC774\uC9C0 \uC774\uB984",R_="\uBCF5\uC81C",I_="\uCDE8\uC18C",T_="\uCD08\uB300 \uB9C1\uD06C \uBCF5\uC0AC\uD558\uAE30",D_="\uACF5\uB3D9 \uD504\uB85C\uC81D\uD2B8 \uB9CC\uB4E4\uAE30",A_="\uACF5\uB3D9 \uD504\uB85C\uC81D\uD2B8\uB85C \uBCF5\uC0AC\uD558\uAE30",k_="\uC120\uD0DD",P_="\uC9C0\uC6B0\uAC1C",M_="\uADF8\uB9AC\uAE30",O_="\uD654\uC0B4\uD45C",B_="\uD14D\uC2A4\uD2B8",$_="\uBA54\uBAA8",F_="\uC0AC\uAC01\uD615",H_="\uC6D0",N_="\uC0BC\uAC01\uD615",V_="\uC120",j_="\uD68C\uC804",U_="\uBE44\uC728 \uC7A0\uAE08",Z_="\uBE44\uC728 \uC7A0\uAE08 \uD574\uC81C",z_="\uADF8\uB8F9\uD654",G_="\uADF8\uB8F9\uD654 \uD574\uC81C",W_="\uB9E8 \uB4A4\uB85C \uBCF4\uB0B4\uAE30",K_="\uB4A4\uB85C \uBCF4\uB0B4\uAE30",Y_="\uC55E\uC73C\uB85C \uAC00\uC838\uC624\uAE30",X_="\uB9E8 \uC55E\uC73C\uB85C \uAC00\uC838\uC624\uAE30",q_="\uD68C\uC804 \uCD08\uAE30\uD654",J_="\uC7A0\uAD6C\uAE30",Q_="\uC7A0\uAE08 \uD574\uC81C\uD558\uAE30",eS="\uD398\uC774\uC9C0\uB85C \uC774\uB3D9",tS="\uC218\uD3C9\uC73C\uB85C \uB4A4\uC9D1\uAE30",rS="\uC218\uC9C1\uC73C\uB85C \uB4A4\uC9D1\uAE30",nS="\uC21C\uC11C",iS="\uB9E8 \uC55E\uC73C\uB85C",oS="\uC55E\uC73C\uB85C",sS="\uB4A4\uB85C",aS="\uB9E8 \uB4A4\uB85C",lS="\uC5B8\uC5B4",uS={"style.menu.color":kx,"style.menu.fill":Px,"style.menu.dash":Mx,"style.menu.size":Ox,"style.menu.keep.open":Bx,"style.menu.font":$x,"style.menu.align":Fx,styles:Hx,"zoom.in":Nx,"zoom.out":Vx,to:jx,"menu.file":Ux,"menu.edit":Zx,"menu.view":zx,"menu.preferences":Gx,"menu.sign.in":Wx,"menu.sign.out":Kx,"become.a.sponsor":Yx,"zoom.to.selection":Xx,"zoom.to.fit":qx,"zoom.to":Jx,"preferences.dark.mode":Qx,"preferences.focus.mode":e_,"preferences.debug.mode":t_,"preferences.show.grid":r_,"preferences.use.cad.selection":n_,"preferences.keep.stylemenu.open":i_,"preferences.always.show.snaps":o_,"preferences.rotate.handles":s_,"preferences.binding.handles":a_,"preferences.clone.handles":l_,undo:u_,redo:c_,cut:d_,copy:h_,paste:f_,"copy.as":p_,"export.as":g_,"select.all":m_,"select.none":v_,delete:C_,"new.project":E_,open:y_,save:w_,"save.as":b_,"upload.media":x_,"create.page":__,"new.page":S_,"page.name":L_,duplicate:R_,cancel:I_,"copy.invite.link":T_,"create.multiplayer.project":D_,"copy.multiplayer.project":A_,select:k_,eraser:P_,draw:M_,arrow:O_,text:B_,sticky:$_,rectangle:F_,ellipse:H_,triangle:N_,line:V_,rotate:j_,"lock.aspect.ratio":U_,"unlock.aspect.ratio":Z_,group:z_,ungroup:G_,"move.to.back":W_,"move.backward":K_,"move.forward":Y_,"move.to.front":X_,"reset.angle":q_,lock:J_,unlock:Q_,"move.to.page":eS,"flip.horizontal":tS,"flip.vertical":rS,move:nS,"to.front":iS,forward:oS,backward:sS,back:aS,language:lS},cS="Color",dS="Fill",hS="Dash",fS="Size",pS="Keep Open",gS="Font",mS="Align",vS="Styles",CS="Zoom In",ES="Zoom Out",yS="To",wS="Tools",bS="Transform",xS="File",_S="Edit",SS="View",LS="Preferences",RS="Sign In",IS="Sign Out",TS="Become a Sponsor",DS="Back to content",AS="Zoom to Selection",kS="Zoom to Fit",PS="Zoom to",MS="Dark Mode",OS="Focus Mode",BS="Debug Mode",$S="Show Grid",FS="Use CAD Selection",HS="Keep Style Menu Open",NS="Always Show Snaps",VS="Rotate Handles",jS="Binding Handles",US="Clone Handles",ZS="Undo",zS="Redo",GS="Cut",WS="Copy",KS="Paste",YS="Copy As",XS="Export As",qS="Select All",JS="Select None",QS="Delete",eL="New Project",tL="Open",rL="Save",nL="Save As",iL="Upload Media",oL="Create Page",sL="New Page",aL="Page Name",lL="Duplicate",uL="Cancel",cL="Copy Invite Link",dL="Copy ReadOnly Link",hL="Create a Multiplayer Project",fL="Copy to Multiplayer Project",pL="Select",gL="Eraser",mL="Draw",vL="Arrow",CL="Text",EL="Sticky",yL="Rectangle",wL="Ellipse",bL="Triangle",xL="Line",_L="Rotate",SL="Lock Aspect Ratio",LL="Unlock Aspect Ratio",RL="Group",IL="Ungroup",TL="Move to Back",DL="Move Backward",AL="Move Forward",kL="Move to Front",PL="Reset Angle",ML="Lock",OL="Unlock",BL="Align / Distribute",$L="Move to Page",FL="Flip Horizontal",HL="Flip Vertical",NL="Move",VL="To Front",jL="Forward",UL="Backward",ZL="To Back",zL="Language",GL="Learn More",WL="Dock Position",KL="Bottom",YL="Left",XL="Right",qL="Top",JL="Page",QL="Keyboard shortcuts",eR="Search",tR="Loading{dots}",rR="Export Background",nR="Transparent",iR="Auto",oR="Light",sR="Dark",aR="Github",lR="Twitter",uR="Discord",cR="Image",dR="Align Left",hR="Align Horizontal Center",fR="Align Right",pR="Align Top",gR="Align Vertical Center",mR="Align Bottom",vR="Distribute Horizontal",CR="Distribute Vertical",ER="Stretch Horizontal",yR="Stretch Vertical",wR="Do you want to save your current project?",bR="Do you want to save changes to your current project?",xR="Cancel",_R="No",SR="Yes",LR="Enter file name",RR={"style.menu.color":cS,"style.menu.fill":dS,"style.menu.dash":hS,"style.menu.size":fS,"style.menu.keep.open":pS,"style.menu.font":gS,"style.menu.align":mS,styles:vS,"zoom.in":CS,"zoom.out":ES,to:yS,"menu.tools":wS,"menu.transform":bS,"menu.file":xS,"menu.edit":_S,"menu.view":SS,"menu.preferences":LS,"menu.sign.in":RS,"menu.sign.out":IS,"become.a.sponsor":TS,"zoom.to.content":DS,"zoom.to.selection":AS,"zoom.to.fit":kS,"zoom.to":PS,"preferences.dark.mode":MS,"preferences.focus.mode":OS,"preferences.debug.mode":BS,"preferences.show.grid":$S,"preferences.use.cad.selection":FS,"preferences.keep.stylemenu.open":HS,"preferences.always.show.snaps":NS,"preferences.rotate.handles":VS,"preferences.binding.handles":jS,"preferences.clone.handles":US,undo:ZS,redo:zS,cut:GS,copy:WS,paste:KS,"copy.as":YS,"export.as":XS,"select.all":qS,"select.none":JS,delete:QS,"new.project":eL,open:tL,save:rL,"save.as":nL,"upload.media":iL,"create.page":oL,"new.page":sL,"page.name":aL,duplicate:lL,cancel:uL,"copy.invite.link":cL,"copy.readonly.link":dL,"create.multiplayer.project":hL,"copy.multiplayer.project":fL,select:pL,eraser:gL,draw:mL,arrow:vL,text:CL,sticky:EL,rectangle:yL,ellipse:wL,triangle:bL,line:xL,rotate:_L,"lock.aspect.ratio":SL,"unlock.aspect.ratio":LL,group:RL,ungroup:IL,"move.to.back":TL,"move.backward":DL,"move.forward":AL,"move.to.front":kL,"reset.angle":PL,lock:ML,unlock:OL,"align.distribute":BL,"move.to.page":$L,"flip.horizontal":FL,"flip.vertical":HL,move:NL,"to.front":VL,forward:jL,backward:UL,back:ZL,language:zL,"translation.link":GL,"dock.position":WL,bottom:KL,left:YL,right:XL,top:qL,page:JL,"keyboard.shortcuts":QL,search:eR,loading:tR,"export.background":rR,transparent:nR,auto:iR,light:oR,dark:sR,github:aR,twitter:lR,discord:uR,image:cR,"align.left":dR,"align.center.x":hR,"align.right":fR,"align.top":pR,"align.center.y":gR,"align.bottom":mR,"distribute.x":vR,"distribute.y":CR,"stretch.x":ER,"stretch.y":yR,"dialog.save.firsttime":wR,"dialog.save.again":bR,"dialog.cancel":xR,"dialog.no":_R,"dialog.yes":SR,"enter.file.name":LR},IR="\u0930\u0902\u0917",TR="\u092D\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",DR="\u0927\u0930\u094D\u0915\u093E",AR="\u0906\u0915\u093E\u0930",kR="\u0916\u0941\u0932\u093E \u0930\u093E\u0916\u094D\u0928\u0941\u0939\u094B\u0938\u094D",PR="\u092B\u0928\u094D\u091F",MR="\u092A\u0919\u094D\u0915\u094D\u0924\u093F\u092C\u0926\u094D\u0927",OR="\u0936\u0948\u0932\u0940\u0939\u0930\u0942",BR="\u091C\u0941\u092E \u0907\u0928",$R="\u091C\u0941\u092E \u0906\u0909\u091F",FR="\u091F\u0941",HR="\u092B\u093E\u0907\u0932",NR="\u0938\u092E\u094D\u092A\u093E\u0926\u0928 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",VR="\u092D\u094D\u092F\u0942",jR="\u092A\u094D\u0930\u093E\u0925\u092E\u093F\u0915\u0924\u093E\u0939\u0930\u0942",UR="\u0938\u093E\u0907\u0928 \u0907\u0928 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",ZR="\u0938\u093E\u0907\u0928 \u0906\u0909\u091F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",zR="\u092A\u094D\u0930\u093E\u092F\u094B\u091C\u0915 \u092C\u0928\u094D\u0928\u0941\u0939\u094B\u0938\u094D",GR="\u091C\u0941\u092E \u091F\u0941 \u0938\u0947\u0932\u0947\u0915\u094D\u0938\u0928",WR="\u091C\u0941\u092E \u091F\u0941 \u092B\u093F\u091F",KR="\u091C\u0941\u092E \u091F\u0941",YR="\u0905\u0901\u0927\u094D\u092F\u093E\u0930\u094B \u092E\u094B\u0921",XR="\u092B\u094B\u0915\u0938 \u092E\u094B\u0921",qR="\u0921\u093F\u092C\u0917 \u092E\u094B\u0921",JR="\u0917\u094D\u0930\u093F\u0921 \u0926\u0947\u0916\u093E\u0909\u0928\u0941\u0939\u094B\u0938\u094D",QR="CAD \u0938\u0947\u0932\u0947\u0915\u094D\u0938\u0928 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",eI="\u0938\u094D\u091F\u093E\u0907\u0932 \u092E\u0947\u0928\u0941 \u0916\u0941\u0932\u093E \u0930\u093E\u0916\u094D\u0928\u0941\u0939\u094B\u0938\u094D",tI="\u0938\u0927\u0948\u0901 \u0938\u094D\u0928\u094D\u092F\u093E\u092A\u0939\u0930\u0942 \u0926\u0947\u0916\u093E\u0909\u0928\u0941\u0939\u094B\u0938\u094D",rI="\u0939\u094D\u092F\u093E\u0928\u094D\u0921\u0932\u0939\u0930\u0942 \u0918\u0941\u092E\u093E\u0909\u0928\u0941\u0939\u094B\u0938\u094D",nI="\u092C\u093E\u0907\u0928\u094D\u0921\u093F\u0919 \u0939\u094D\u092F\u093E\u0928\u094D\u0921\u0932\u0939\u0930\u0942",iI="\u0915\u094D\u0932\u094B\u0928 \u0939\u094D\u092F\u093E\u0928\u094D\u0921\u0932\u0939\u0930\u0942",oI="\u092A\u0942\u0930\u094D\u0935\u0935\u0924 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",sI="\u092A\u0941\u0928\u0903 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",aI="\u0915\u091F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",lI="\u0915\u092A\u093F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",uI="\u092A\u0947\u0938\u094D\u091F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",cI="\u0915\u092A\u093F \u090F\u091C",dI="\u090F\u0915\u094D\u0938\u092A\u094B\u0930\u094D\u091F \u090F\u091C",hI="\u0938\u092C\u0948 \u091B\u093E\u0928\u094D\u0928\u0941\u0939\u094B\u0938\u094D",fI="\u0915\u0947\u0939\u093F \u092A\u0928\u093F \u0938\u0947\u0932\u0947\u0915\u094D\u091F \u0928\u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",pI="\u092E\u0947\u091F\u093E\u0909\u0928\u0941\u0939\u094B\u0938\u094D",gI="\u0928\u092F\u093E\u0901 \u092A\u0930\u093F\u092F\u094B\u091C\u0928\u093E",mI="\u0916\u094B\u0932\u094D\u0928\u0941\u0939\u094B\u0938\u094D",vI="\u0938\u0941\u0930\u0915\u094D\u0937\u093F\u0924 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",CI="\u0938\u0947\u092D \u090F\u091C",EI="\u092E\u093F\u0921\u093F\u092F\u093E \u0905\u092A\u0932\u094B\u0921 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",yI="\u092A\u0943\u0937\u094D\u0920 \u0938\u093F\u0930\u094D\u091C\u0928\u093E \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",wI="\u0928\u092F\u093E\u0901 \u092A\u0943\u0937\u094D\u0920 \u0938\u093F\u0930\u094D\u091C\u0928\u093E \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",bI="\u092A\u0943\u0937\u094D\u0920\u0915\u094B \u0928\u093E\u092E",xI="\u0905\u0928\u0941\u0932\u093F\u092A\u093F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",_I="\u0930\u0926\u094D\u0926 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",SI="\u0928\u093F\u092E\u0928\u094D\u0924\u094D\u0930\u0923\u093E \u0932\u093F\u0919\u094D\u0915 \u0915\u092A\u093F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",LI="\u092E\u0932\u094D\u091F\u093F\u092A\u094D\u0932\u0947\u092F\u0930 \u092A\u0930\u093F\u092F\u094B\u091C\u0928\u093E \u0938\u093F\u0930\u094D\u091C\u0928\u093E \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",RI="\u092E\u0932\u094D\u091F\u093F\u092A\u094D\u0932\u0947\u092F\u0930 \u092A\u094D\u0930\u094B\u091C\u0947\u0915\u094D\u091F\u092E\u093E \u0915\u092A\u093F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",II="\u0938\u0947\u0932\u0947\u0915\u094D\u091F",TI="\u0907\u0930\u0947\u091C\u0930",DI="\u091A\u093F\u0924\u094D\u0930 \u092C\u0928\u093E\u0909\u0928\u0941",AI="\u0924\u0940\u0930",kI="\u0936\u092C\u094D\u0926",PI="\u091F\u093E\u0901\u0938\u093F\u0928\u0947",MI="\u0906\u092F\u0924",OI="\u0926\u0940\u0930\u094D\u0918\u0935\u0943\u0924\u094D\u0924",BI="\u0924\u094D\u0930\u093F\u092D\u0941\u091C",$I="\u0930\u0947\u0916\u093E",FI="\u0918\u0941\u092E\u093E\u0909\u0928\u0941\u0939\u094B\u0938\u094D",HI="\u0906\u0915\u093E\u0930 \u0905\u0928\u0941\u092A\u093E\u0924 \u0932\u0915 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",NI="\u0906\u0915\u093E\u0930 \u0905\u0928\u0941\u092A\u093E\u0924 \u0905\u0928\u0932\u0915 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",VI="\u0938\u092E\u0942\u0939",jI="\u0938\u092E\u0942\u0939 \u0930\u0926\u094D\u0926 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",UI="\u092A\u091B\u093E\u0921\u093F \u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",ZI="\u0925\u092A \u092A\u091B\u093E\u0921\u093F \u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",zI="\u0905\u0917\u093E\u0921\u093F \u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",GI="\u0925\u092A \u0905\u0917\u093E\u0921\u093F \u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",WI="\u0915\u094B\u0923 \u0930\u093F\u0938\u0947\u091F \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",KI="\u0932\u0915 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",YI="\u0905\u0928\u0932\u0915 \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",XI="\u092A\u0943\u0937\u094D\u0920\u092E\u093E \u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",qI="\u0924\u0947\u0930\u094D\u0938\u094B \u092B\u094D\u0932\u093F\u092A \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",JI="\u0920\u093E\u0921\u094B \u092B\u094D\u0932\u093F\u092A \u0917\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",QI="\u0938\u093E\u0930\u094D\u0928\u0941\u0939\u094B\u0938\u094D",eT="\u0925\u092A \u0905\u0917\u093E\u0921\u093F",tT="\u0905\u0917\u093E\u0921\u093F",rT="\u092A\u091B\u093E\u0921\u093F",nT="\u0925\u092A \u092A\u091B\u093E\u0921\u093F",iT="\u092D\u093E\u0937\u093E",oT={"style.menu.color":IR,"style.menu.fill":TR,"style.menu.dash":DR,"style.menu.size":AR,"style.menu.keep.open":kR,"style.menu.font":PR,"style.menu.align":MR,styles:OR,"zoom.in":BR,"zoom.out":$R,to:FR,"menu.file":HR,"menu.edit":NR,"menu.view":VR,"menu.preferences":jR,"menu.sign.in":UR,"menu.sign.out":ZR,"become.a.sponsor":zR,"zoom.to.selection":GR,"zoom.to.fit":WR,"zoom.to":KR,"preferences.dark.mode":YR,"preferences.focus.mode":XR,"preferences.debug.mode":qR,"preferences.show.grid":JR,"preferences.use.cad.selection":QR,"preferences.keep.stylemenu.open":eI,"preferences.always.show.snaps":tI,"preferences.rotate.handles":rI,"preferences.binding.handles":nI,"preferences.clone.handles":iI,undo:oI,redo:sI,cut:aI,copy:lI,paste:uI,"copy.as":cI,"export.as":dI,"select.all":hI,"select.none":fI,delete:pI,"new.project":gI,open:mI,save:vI,"save.as":CI,"upload.media":EI,"create.page":yI,"new.page":wI,"page.name":bI,duplicate:xI,cancel:_I,"copy.invite.link":SI,"create.multiplayer.project":LI,"copy.multiplayer.project":RI,select:II,eraser:TI,draw:DI,arrow:AI,text:kI,sticky:PI,rectangle:MI,ellipse:OI,triangle:BI,line:$I,rotate:FI,"lock.aspect.ratio":HI,"unlock.aspect.ratio":NI,group:VI,ungroup:jI,"move.to.back":UI,"move.backward":ZI,"move.forward":zI,"move.to.front":GI,"reset.angle":WI,lock:KI,unlock:YI,"move.to.page":XI,"flip.horizontal":qI,"flip.vertical":JI,move:QI,"to.front":eT,forward:tT,backward:rT,back:nT,language:iT},sT="Farge",aT="Fyll",lT="Linje",uT="St\xF8rrelse",cT="Hold \xE5pen",dT="Teksttype",hT="Juster",fT="Stiler",pT="Zoom inn",gT="Zoom ut",mT="til",vT="Fil",CT="Rediger",ET="Vis",yT="Preferanser",wT="Logg inn",bT="Logg ut",xT="Bli en sponsor",_T="Zoom til valg",ST="Zoom for \xE5 passe",LT="Zoom til",RT="M\xF8rk modus",IT="Fokus modus",TT="Debug modus",DT="Vis rutenett",AT="Bruk CAD seleksjon",kT="Hold stilmeny \xE5pen",PT="Vis alltid snaps",MT="Vis roteringsh\xE5ndtak",OT="Vis bindingsh\xE5ndtak",BT="Vis kloningsh\xE5ndtak",$T="Angre",FT="Gj\xF8r om",HT="Klipp ut",NT="Kopier",VT="Lim inn",jT="Kopier som",UT="Eksporter som",ZT="Velg alle",zT="Velg ingen",GT="Slett",WT="Nytt prosjekt",KT="\xC5pne",YT="Lagre",XT="Lagre som",qT="Last opp media",JT="Opprett side",QT="Ny side",eD="Sidenavn",tD="Dupliser",rD="Avbryt",nD="Kopier invitasjonslink",iD="Opprett et flerspiller prosjekt",oD="Kopier til flerspiller prosjekt",sD="Velg",aD="Viskel\xE6r",lD="Tegn",uD="Pil",cD="Tekst",dD="Lapp",hD="Rektangel",fD="Ellipse",pD="Trekant",gD="Linje",mD="Roter",vD="L\xE5s st\xF8rrelsesforhold",CD="L\xE5s opp st\xF8rrelsesforhold",ED="Grupper",yD="Avgrupper",wD="Flytt bakerst",bD="Flytt bakover",xD="Flytt forover",_D="Flytt til front",SD="Tilbakestill vinkel",LD="L\xE5s",RD="L\xE5s opp",ID="Flytt til side",TD="Snu horisontalt",DD="Snu vertikalt",AD="Flytt",kD="Foran",PD="Framover",MD="Bakover",OD="Bakerst",BD="Spr\xE5k",$D={"style.menu.color":sT,"style.menu.fill":aT,"style.menu.dash":lT,"style.menu.size":uT,"style.menu.keep.open":cT,"style.menu.font":dT,"style.menu.align":hT,styles:fT,"zoom.in":pT,"zoom.out":gT,to:mT,"menu.file":vT,"menu.edit":CT,"menu.view":ET,"menu.preferences":yT,"menu.sign.in":wT,"menu.sign.out":bT,"become.a.sponsor":xT,"zoom.to.selection":_T,"zoom.to.fit":ST,"zoom.to":LT,"preferences.dark.mode":RT,"preferences.focus.mode":IT,"preferences.debug.mode":TT,"preferences.show.grid":DT,"preferences.use.cad.selection":AT,"preferences.keep.stylemenu.open":kT,"preferences.always.show.snaps":PT,"preferences.rotate.handles":MT,"preferences.binding.handles":OT,"preferences.clone.handles":BT,undo:$T,redo:FT,cut:HT,copy:NT,paste:VT,"copy.as":jT,"export.as":UT,"select.all":ZT,"select.none":zT,delete:GT,"new.project":WT,open:KT,save:YT,"save.as":XT,"upload.media":qT,"create.page":JT,"new.page":QT,"page.name":eD,duplicate:tD,cancel:rD,"copy.invite.link":nD,"create.multiplayer.project":iD,"copy.multiplayer.project":oD,select:sD,eraser:aD,draw:lD,arrow:uD,text:cD,sticky:dD,rectangle:hD,ellipse:fD,triangle:pD,line:gD,rotate:mD,"lock.aspect.ratio":vD,"unlock.aspect.ratio":CD,group:ED,ungroup:yD,"move.to.back":wD,"move.backward":bD,"move.forward":xD,"move.to.front":_D,"reset.angle":SD,lock:LD,unlock:RD,"move.to.page":ID,"flip.horizontal":TD,"flip.vertical":DD,move:AD,"to.front":kD,forward:PD,backward:MD,back:OD,language:BD},FD="Kolor",HD="Wype\u0142nienie",ND="Linia",VD="Rozmiar",jD="Zachowaj otwarte",UD="Czcionka",ZD="Wyr\xF3wnanie",zD="Style",GD="Przybli\u017C",WD="Oddal",KD="do",YD="Plik",XD="Edycja",qD="Widok",JD="Preferencje",QD="Zaloguj",eA="Wyloguj",tA="Zosta\u0144 sponsorem",rA="Przybli\u017C do zaznaczenia",nA="Wype\u0142nij ekran",iA="Przybli\u017C do",oA="Tryb ciemny",sA="Tryb skupienia",aA="Tryb debugowania",lA="Poka\u017C siatk\u0119",uA="U\u017Cyj zaznaczania CAD",cA="Zachowaj menu styli otwarte",dA="Przyci\u0105gaj obiekty",hA="Uchwyty obrotu",fA="Uchwyty powi\u0105zania",pA="Uchwyty klonuj\u0105ce",gA="Cofnij",mA="Powt\xF3rz",vA="Wytnij",CA="Kopiuj",EA="Wklej",yA="Kopiuj jako",wA="Eksportuj jako",bA="Zaznacz wszystko",xA="Odznacz wszystko",_A="Usu\u0144",SA="Nowy projekt",LA="Otw\xF3rz",RA="Zapisz",IA="Zapisz jako",TA="Za\u0142aduj multimedia",DA="Utw\xF3rz stron\u0119",AA="Nowa strona",kA="Nazwa strony",PA="Powiel",MA="Anuluj",OA="Kopiuj link zaproszenia",BA="Stw\xF3rz projekt wieloosobowy",$A="Kopiuj do projektu wieloosobowego",FA="Zaznacz",HA="Gumka",NA="Rysuj",VA="Strza\u0142ka",jA="Tekst",UA="Naklejka",ZA="Prostok\u0105t",zA="Elipsa",GA="Tr\xF3jk\u0105t",WA="Linia",KA="Obr\xF3\u0107",YA="Zablokuj proporcje",XA="Odblokuj proporcje",qA="Grupuj",JA="Rozgrupuj",QA="Przenie\u015B na ty\u0142",ek="Przesu\u0144 do ty\u0142u",tk="Przesu\u0144 do przodu",rk="Przenie\u015B na prz\xF3d",nk="Resetuj k\u0105t",ik="Zablokuj",ok="Odblokuj",sk="Przenie\u015B na stron\u0119",ak="Odwr\xF3\u0107 w poziomie",lk="Odwr\xF3\u0107 w pionie",uk="Przenie\u015B",ck="Na wierzch",dk="Do przodu",hk="Do ty\u0142u",fk="Na sp\xF3d",pk="J\u0119zyk",gk={"style.menu.color":FD,"style.menu.fill":HD,"style.menu.dash":ND,"style.menu.size":VD,"style.menu.keep.open":jD,"style.menu.font":UD,"style.menu.align":ZD,styles:zD,"zoom.in":GD,"zoom.out":WD,to:KD,"menu.file":YD,"menu.edit":XD,"menu.view":qD,"menu.preferences":JD,"menu.sign.in":QD,"menu.sign.out":eA,"become.a.sponsor":tA,"zoom.to.selection":rA,"zoom.to.fit":nA,"zoom.to":iA,"preferences.dark.mode":oA,"preferences.focus.mode":sA,"preferences.debug.mode":aA,"preferences.show.grid":lA,"preferences.use.cad.selection":uA,"preferences.keep.stylemenu.open":cA,"preferences.always.show.snaps":dA,"preferences.rotate.handles":hA,"preferences.binding.handles":fA,"preferences.clone.handles":pA,undo:gA,redo:mA,cut:vA,copy:CA,paste:EA,"copy.as":yA,"export.as":wA,"select.all":bA,"select.none":xA,delete:_A,"new.project":SA,open:LA,save:RA,"save.as":IA,"upload.media":TA,"create.page":DA,"new.page":AA,"page.name":kA,duplicate:PA,cancel:MA,"copy.invite.link":OA,"create.multiplayer.project":BA,"copy.multiplayer.project":$A,select:FA,eraser:HA,draw:NA,arrow:VA,text:jA,sticky:UA,rectangle:ZA,ellipse:zA,triangle:GA,line:WA,rotate:KA,"lock.aspect.ratio":YA,"unlock.aspect.ratio":XA,group:qA,ungroup:JA,"move.to.back":QA,"move.backward":ek,"move.forward":tk,"move.to.front":rk,"reset.angle":nk,lock:ik,unlock:ok,"move.to.page":sk,"flip.horizontal":ak,"flip.vertical":lk,move:uk,"to.front":ck,forward:dk,backward:hk,back:fk,language:pk},mk="Cor",vk="Preencher",Ck="Tra\xE7o",Ek="Tamanho",yk="Manter aberto",wk="Fonte",bk="Alinhamento",xk="Estilos",_k="Aumentar zoom",Sk="Diminuir zoom",Lk="para",Rk="Arquivo",Ik="Editar",Tk="Visualizar",Dk="Prefer\xEAncias",Ak="Entrar",kk="Sair",Pk="Torne-se um patrocinador",Mk="Zoom para a sele\xE7\xE3o",Ok="Zoom para ajuste",Bk="Zoom para",$k="Modo Escuro",Fk="Modo Foco",Hk="Modo Debug",Nk="Mostrar Grade",Vk="Usar sele\xE7\xE3o CAD",jk="Manter Menu de Estilos Aberto",Uk="Mostrar Pontos de Ajuste",Zk="Controle de Rota\xE7\xE3o",zk="Controle de V\xEDnculos",Gk="Controle de Clone",Wk="Desfazer",Kk="Refazer",Yk="Cortar",Xk="Copiar",qk="Colar",Jk="Copiar como",Qk="Exportar como",eP="Selecionar todos",tP="Selecionar nenhum",rP="Deletar",nP="Novo Projeto",iP="Abrir",oP="Salvar",sP="Salvar Como",aP="Carregar M\xEDdia",lP="Criar P\xE1gina",uP="Nova P\xE1gina",cP="Nome da P\xE1gina",dP="Duplicar",hP="Cancelar",fP="Copiar Link de Convite",pP="Criar um Projeto Multijogador",gP="Copiar para Projeto Multijogador",mP="Selecionar",vP="Borracha",CP="Desenhar",EP="Seta",yP="Texto",wP="Adesivo",bP="Ret\xE2ngulo",xP="Elipse",_P="Tri\xE2ngulo",SP="Linha",LP="Rotacionar",RP="Travar Propor\xE7\xE3o da Tela",IP="Destravar Propor\xE7\xE3o da Tela",TP="Agrupar",DP="Desagrupar",AP="Recuar",kP="Enviar para Tr\xE1s",PP="Avan\xE7ar",MP="Trazer para Frente",OP="Reiniciar \xC2ngulo",BP="Travar",$P="Destravar",FP="Mover para P\xE1gina",HP="Virar Horizontalmente",NP="Virar Verticalmente",VP="Mover",jP="Para Frente",UP="Avan\xE7ar",ZP="Recuar",zP="Voltar",GP="Idioma",WP={"style.menu.color":mk,"style.menu.fill":vk,"style.menu.dash":Ck,"style.menu.size":Ek,"style.menu.keep.open":yk,"style.menu.font":wk,"style.menu.align":bk,styles:xk,"zoom.in":_k,"zoom.out":Sk,to:Lk,"menu.file":Rk,"menu.edit":Ik,"menu.view":Tk,"menu.preferences":Dk,"menu.sign.in":Ak,"menu.sign.out":kk,"become.a.sponsor":Pk,"zoom.to.selection":Mk,"zoom.to.fit":Ok,"zoom.to":Bk,"preferences.dark.mode":$k,"preferences.focus.mode":Fk,"preferences.debug.mode":Hk,"preferences.show.grid":Nk,"preferences.use.cad.selection":Vk,"preferences.keep.stylemenu.open":jk,"preferences.always.show.snaps":Uk,"preferences.rotate.handles":Zk,"preferences.binding.handles":zk,"preferences.clone.handles":Gk,undo:Wk,redo:Kk,cut:Yk,copy:Xk,paste:qk,"copy.as":Jk,"export.as":Qk,"select.all":eP,"select.none":tP,delete:rP,"new.project":nP,open:iP,save:oP,"save.as":sP,"upload.media":aP,"create.page":lP,"new.page":uP,"page.name":cP,duplicate:dP,cancel:hP,"copy.invite.link":fP,"create.multiplayer.project":pP,"copy.multiplayer.project":gP,select:mP,eraser:vP,draw:CP,arrow:EP,text:yP,sticky:wP,rectangle:bP,ellipse:xP,triangle:_P,line:SP,rotate:LP,"lock.aspect.ratio":RP,"unlock.aspect.ratio":IP,group:TP,ungroup:DP,"move.to.back":AP,"move.backward":kP,"move.forward":PP,"move.to.front":MP,"reset.angle":OP,lock:BP,unlock:$P,"move.to.page":FP,"flip.horizontal":HP,"flip.vertical":NP,move:VP,"to.front":jP,forward:UP,backward:ZP,back:zP,language:GP},KP="Cor",YP="Preencher",XP="Tra\xE7o",qP="Tamanho",JP="Manter aberto",QP="Fonte",eM="Alinhamento",tM="Estilos",rM="Aumentar zoom",nM="Diminuir zoom",iM="para",oM="Ficheiro",sM="Editar",aM="Visualizar",lM="Prefer\xEAncias",uM="Entrar",cM="Sair",dM="Torne-se um patrocinador",hM="Zoom na sele\xE7\xE3o",fM="Zoom para caber",pM="Zoom para",gM="Modo Escuro",mM="Modo Foco",vM="Modo Debug",CM="Mostrar Grelha",EM="Usar sele\xE7\xE3o CAD",yM="Manter Menu de Estilos Aberto",wM="Mostrar Pontos de Ajuste",bM="Controlo de Rota\xE7\xE3o",xM="Controlo de Binds",_M="Controlo de Clone",SM="Desfazer",LM="Refazer",RM="Cortar",IM="Copiar",TM="Colar",DM="Copiar como",AM="Exportar como",kM="Selecionar todos",PM="Selecionar nenhum",MM="Apagar",OM="Novo Projeto",BM="Abrir",$M="Salvar",FM="Salvar Como",HM="Upload M\xE9dia",NM="Criar P\xE1gina",VM="Nova P\xE1gina",jM="Nome da P\xE1gina",UM="Duplicar",ZM="Cancelar",zM="Copiar Link de Convite",GM="Criar um Projeto Multi-Utilizador",WM="Copiar num Projeto Multi-Utilizador",KM="Selecionar",YM="Borracha",XM="Desenhar",qM="Seta",JM="Texto",QM="Post-it",eO="Ret\xE2ngulo",tO="Elipse",rO="Tri\xE2ngulo",nO="Linha",iO="Rodar",oO="Trancar a Propor\xE7\xE3o",sO="Destrancar a Propor\xE7\xE3o",aO="Agrupar",lO="Desagrupar",uO="Colocar no Fundo",cO="Mover abaixo",dO="Mover acima",hO="Colocar \xE0 Frente",fO="Reiniciar \xC2ngulo",pO="Trancar",gO="Destrancar",mO="Mover para P\xE1gina",vO="Inverter Horizontalmente",CO="Inverter Verticalmente",EO="Mover",yO="Para Frente",wO="Avan\xE7ar",bO="Recuar",xO="Voltar",_O="L\xEDngua",SO={"style.menu.color":KP,"style.menu.fill":YP,"style.menu.dash":XP,"style.menu.size":qP,"style.menu.keep.open":JP,"style.menu.font":QP,"style.menu.align":eM,styles:tM,"zoom.in":rM,"zoom.out":nM,to:iM,"menu.file":oM,"menu.edit":sM,"menu.view":aM,"menu.preferences":lM,"menu.sign.in":uM,"menu.sign.out":cM,"become.a.sponsor":dM,"zoom.to.selection":hM,"zoom.to.fit":fM,"zoom.to":pM,"preferences.dark.mode":gM,"preferences.focus.mode":mM,"preferences.debug.mode":vM,"preferences.show.grid":CM,"preferences.use.cad.selection":EM,"preferences.keep.stylemenu.open":yM,"preferences.always.show.snaps":wM,"preferences.rotate.handles":bM,"preferences.binding.handles":xM,"preferences.clone.handles":_M,undo:SM,redo:LM,cut:RM,copy:IM,paste:TM,"copy.as":DM,"export.as":AM,"select.all":kM,"select.none":PM,delete:MM,"new.project":OM,open:BM,save:$M,"save.as":FM,"upload.media":HM,"create.page":NM,"new.page":VM,"page.name":jM,duplicate:UM,cancel:ZM,"copy.invite.link":zM,"create.multiplayer.project":GM,"copy.multiplayer.project":WM,select:KM,eraser:YM,draw:XM,arrow:qM,text:JM,sticky:QM,rectangle:eO,ellipse:tO,triangle:rO,line:nO,rotate:iO,"lock.aspect.ratio":oO,"unlock.aspect.ratio":sO,group:aO,ungroup:lO,"move.to.back":uO,"move.backward":cO,"move.forward":dO,"move.to.front":hO,"reset.angle":fO,lock:pO,unlock:gO,"move.to.page":mO,"flip.horizontal":vO,"flip.vertical":CO,move:EO,"to.front":yO,forward:wO,backward:bO,back:xO,language:_O},LO="\u0426\u0432\u0435\u0442",RO="\u0417\u0430\u043F\u043E\u043B\u043D\u044F\u0442\u044C",IO="\u0428\u0442\u0440\u0438\u0445",TO="\u0420\u0430\u0437\u043C\u0435\u0440",DO="\u0414\u0435\u0440\u0436\u0430\u0442\u044C \u043E\u0442\u043A\u0440\u044B\u0442\u044B\u043C",AO="\u0428\u0440\u0438\u0444\u0442",kO="\u0412\u044B\u0440\u0430\u0432\u043D\u0438\u0432\u0430\u043D\u0438\u0435",PO="\u0421\u0442\u0438\u043B\u044C",MO="\u0423\u0432\u0435\u043B\u0438\u0447\u0438\u0442\u044C",OO="\u0423\u043C\u0435\u043D\u044C\u0448\u0438\u0442\u044C",BO="\u043A",$O="\u0418\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u044B",FO="\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435",HO="\u0424\u0430\u0439\u043B",NO="\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435",VO="\u0412\u0438\u0434",jO="\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",UO="\u0412\u043E\u0439\u0442\u0438",ZO="\u0412\u044B\u0439\u0442\u0438",zO="\u0421\u0442\u0430\u0442\u044C \u0441\u043F\u043E\u043D\u0441\u043E\u0440\u043E\u043C",GO="\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043A \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u043C\u0443",WO="\u041C\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u043E \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u0438\u044E",KO="\u041C\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u043E \u0440\u0430\u0437\u043C\u0435\u0440\u0443 \u044D\u043A\u0440\u0430\u043D\u0430",YO="\u041C\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A",XO="\u0422\u0451\u043C\u043D\u0430\u044F \u0442\u0435\u043C\u0430",qO="\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u0438\u0441\u0442\u0438\u0447\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C",JO="\u0420\u0435\u0436\u0438\u043C \u043E\u0442\u043B\u0430\u0434\u043A\u0438",QO="\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u0435\u0442\u043A\u0443",eB="\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C CAD \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u0438\u0435",tB="\u0414\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0435\u043D\u044E \u0441\u0442\u0438\u043B\u0435\u0439 \u043E\u0442\u043A\u0440\u044B\u0442\u044B\u043C",rB="\u0412\u0441\u0435\u0433\u0434\u0430 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u043F\u0440\u0438\u0432\u044F\u0437\u043A\u0438",nB="\u0420\u0443\u0447\u043A\u0438 \u0432\u0440\u0430\u0449\u0435\u043D\u0438\u044F",iB="\u0420\u0443\u0447\u043A\u0438 \u043F\u0440\u0438\u0432\u044F\u0437\u043A\u0438",oB="\u0420\u0443\u0447\u043A\u0438 \u043A\u043B\u043E\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F",sB="\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",aB="\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C",lB="\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C",uB="\u041A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C",cB="\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044C",dB="\u041A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u0430\u043A",hB="\u042D\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u0430\u043A",fB="\u0412\u044B\u0434\u0435\u043B\u0438\u0442\u044C \u0432\u0441\u0451",pB="\u0421\u043D\u044F\u0442\u044C \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u0438\u0435",gB="\u0423\u0434\u0430\u043B\u0438\u0442\u044C",mB="\u041D\u043E\u0432\u044B\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",vB="\u041E\u0442\u043A\u0440\u044B\u0442\u044C",CB="\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",EB="\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043A\u0430\u043A",yB="\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043C\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043B",wB="\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443",bB="\u041D\u043E\u0432\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430",xB="\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B",_B="\u0414\u0443\u0431\u043B\u0438\u0440\u043E\u0432\u0430\u0442\u044C",SB="\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",LB="\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443 \u043F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u044F",RB="\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443 \u0442\u043E\u043B\u044C\u043A\u043E \u0434\u043B\u044F \u0447\u0442\u0435\u043D\u0438\u044F",IB="\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043C\u043D\u043E\u0433\u043E\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",TB="\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432 \u043C\u043D\u043E\u0433\u043E\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",DB="\u0412\u044B\u0434\u0435\u043B\u0438\u0442\u044C",AB="\u041B\u0430\u0441\u0442\u0438\u043A",kB="\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C",PB="\u0421\u0442\u0440\u0435\u043B\u043A\u0430",MB="\u0422\u0435\u043A\u0441\u0442",OB="\u0417\u0430\u043C\u0435\u0442\u043A\u0430",BB="\u041F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A",$B="\u042D\u043B\u043B\u0438\u043F\u0441",FB="\u0422\u0440\u0435\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A",HB="\u041B\u0438\u043D\u0438\u044F",NB="\u041F\u043E\u0432\u0435\u0440\u043D\u0443\u0442\u044C",VB="\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043E\u043E\u0442\u043D\u043E\u0448\u0435\u043D\u0438\u0435 \u0441\u0442\u043E\u0440\u043E\u043D",jB="\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043E\u043E\u0442\u043D\u043E\u0448\u0435\u043D\u0438\u0435 \u0441\u0442\u043E\u0440\u043E\u043D",UB="\u0421\u0433\u0440\u0443\u043F\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C",ZB="\u0420\u0430\u0437\u0433\u0440\u0443\u043F\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C",zB="\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u043D\u0430\u0437\u0430\u0434",GB="\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u043D\u0430 \u0437\u0430\u0434\u043D\u0438\u0439 \u043F\u043B\u0430\u043D",WB="\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u0432\u043F\u0435\u0440\u0451\u0434",KB="\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u043D\u0430 \u043F\u0435\u0440\u0435\u0434\u043D\u0438\u0439 \u043F\u043B\u0430\u043D",YB="\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0443\u0433\u043E\u043B",XB="\u0411\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C",qB="\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C",JB="\u0412\u044B\u0440\u043E\u0432\u043D\u044F\u0442\u044C / \u0440\u0430\u0441\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C",QB="\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443",e$="\u041F\u0435\u0440\u0435\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u0433\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u044C\u043D\u043E",t$="\u041F\u0435\u0440\u0435\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u0432\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u043E",r$="\u041F\u0435\u0440\u0435\u043C\u0435\u0441\u0442\u0438\u0442\u044C",n$="\u041D\u0430 \u043F\u0435\u0440\u0435\u0434\u043D\u0438\u0439 \u043F\u043B\u0430\u043D",i$="\u0412\u043F\u0435\u0440\u0435\u0434",o$="\u041D\u0430 \u0437\u0430\u0434\u043D\u0438\u0439 \u043F\u043B\u0430\u043D",s$="\u041D\u0430\u0437\u0430\u0434",a$="\u042F\u0437\u044B\u043A",l$="\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435",u$="\u0420\u0430\u0441\u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u043F\u0430\u043D\u0435\u043B\u0438 \u0438\u043D\u0441\u0442\u0440\u0443\u043C\u0435\u043D\u0442\u043E\u0432",c$="\u0421\u043D\u0438\u0437\u0443",d$="\u0421\u043B\u0435\u0432\u0430",h$="\u0421\u043F\u0440\u0430\u0432\u0430",f$="\u0421\u0432\u0435\u0440\u0445\u0443",p$="\u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430",g$="\u0421\u043E\u0447\u0435\u0442\u0430\u043D\u0438\u044F \u043A\u043B\u0430\u0432\u0438\u0448",m$="\u041F\u043E\u0438\u0441\u043A",v$="\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430",C$="\u042D\u043A\u0441\u043F\u043E\u0440\u0442 \u0444\u043E\u043D\u0430",E$="\u041F\u0440\u043E\u0437\u0440\u0430\u0447\u043D\u044B\u0439",y$="\u0410\u0432\u0442\u043E",w$="\u0421\u0432\u0435\u0442\u043B\u044B\u0439",b$="\u0422\u0451\u043C\u043D\u044B\u0439",x$="\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435",_$="\u0412\u044B\u0440\u043E\u0432\u043D\u044F\u0442\u044C \u043F\u043E \u043B\u0435\u0432\u043E\u043C\u0443 \u043A\u0440\u0430\u044E",S$="\u0412\u044B\u0440\u043E\u0432\u043D\u044F\u0442\u044C \u043F\u043E \u0446\u0435\u043D\u0442\u0440\u0443 \u0433\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u044C\u043D\u043E",L$="\u0412\u044B\u0440\u043E\u0432\u043D\u044F\u0442\u044C \u043F\u043E \u043F\u0440\u0430\u0432\u043E\u043C\u0443 \u043A\u0440\u0430\u044E",R$="\u0412\u044B\u0440\u043E\u0432\u043D\u044F\u0442\u044C \u043F\u043E \u0432\u0435\u0440\u0445\u043D\u0435\u043C\u0443 \u043A\u0440\u0430\u044E",I$="\u0412\u044B\u0440\u043E\u0432\u043D\u044F\u0442\u044C \u043F\u043E \u0446\u0435\u043D\u0442\u0440\u0443 \u0432\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u043E",T$="\u0412\u044B\u0440\u043E\u0432\u043D\u044F\u0442\u044C \u043F\u043E \u043D\u0438\u0436\u043D\u0435\u043C\u0443 \u043A\u0440\u0430\u044E",D$="\u0420\u0430\u0441\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0433\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u044C\u043D\u043E",A$="\u0420\u0430\u0441\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0432\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u043E",k$="\u0420\u0430\u0441\u0442\u044F\u043D\u0443\u0442\u044C \u0433\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u044C\u043D\u043E",P$="\u0420\u0430\u0441\u0442\u044F\u043D\u0443\u0442\u044C \u0432\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u043E",M$="\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F",O$="\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443",B$="\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u043F\u0440\u043E\u0435\u043A\u0442",$$="\u0414\u0430\u043D\u043D\u044B\u0435 \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u0432\u0435\u043B\u0438\u043A\u0438, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u0434\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0438\u0445 \u0432 \u0441\u0441\u044B\u043B\u043A\u0435. \u041D\u0435 \u0432\u043A\u043B\u044E\u0447\u0430\u0439\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0438\u043B\u0438 \u0432\u0438\u0434\u0435\u043E!",F$="\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0438\u0439 \u043F\u0440\u043E\u0435\u043A\u0442?",H$="\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432 \u0442\u0435\u043A\u0443\u0449\u0435\u043C \u043F\u0440\u043E\u0435\u043A\u0442\u0435?",N$="\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",V$="\u041D\u0435\u0442",j$="\u0414\u0430",U$="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u0444\u0430\u0439\u043B\u0430",Z$={"style.menu.color":LO,"style.menu.fill":RO,"style.menu.dash":IO,"style.menu.size":TO,"style.menu.keep.open":DO,"style.menu.font":AO,"style.menu.align":kO,styles:PO,"zoom.in":MO,"zoom.out":OO,to:BO,"menu.tools":$O,"menu.transform":FO,"menu.file":HO,"menu.edit":NO,"menu.view":VO,"menu.preferences":jO,"menu.sign.in":UO,"menu.sign.out":ZO,"become.a.sponsor":zO,"zoom.to.content":GO,"zoom.to.selection":WO,"zoom.to.fit":KO,"zoom.to":YO,"preferences.dark.mode":XO,"preferences.focus.mode":qO,"preferences.debug.mode":JO,"preferences.show.grid":QO,"preferences.use.cad.selection":eB,"preferences.keep.stylemenu.open":tB,"preferences.always.show.snaps":rB,"preferences.rotate.handles":nB,"preferences.binding.handles":iB,"preferences.clone.handles":oB,undo:sB,redo:aB,cut:lB,copy:uB,paste:cB,"copy.as":dB,"export.as":hB,"select.all":fB,"select.none":pB,delete:gB,"new.project":mB,open:vB,save:CB,"save.as":EB,"upload.media":yB,"create.page":wB,"new.page":bB,"page.name":xB,duplicate:_B,cancel:SB,"copy.invite.link":LB,"copy.readonly.link":RB,"create.multiplayer.project":IB,"copy.multiplayer.project":TB,select:DB,eraser:AB,draw:kB,arrow:PB,text:MB,sticky:OB,rectangle:BB,ellipse:$B,triangle:FB,line:HB,rotate:NB,"lock.aspect.ratio":VB,"unlock.aspect.ratio":jB,group:UB,ungroup:ZB,"move.to.back":zB,"move.backward":GB,"move.forward":WB,"move.to.front":KB,"reset.angle":YB,lock:XB,unlock:qB,"align.distribute":JB,"move.to.page":QB,"flip.horizontal":e$,"flip.vertical":t$,move:r$,"to.front":n$,forward:i$,backward:o$,back:s$,language:a$,"translation.link":l$,"dock.position":u$,bottom:c$,left:d$,right:h$,top:f$,page:p$,"keyboard.shortcuts":g$,search:m$,loading:v$,"export.background":C$,transparent:E$,auto:y$,light:w$,dark:b$,image:x$,"align.left":_$,"align.center.x":S$,"align.right":L$,"align.top":R$,"align.center.y":I$,"align.bottom":T$,"distribute.x":D$,"distribute.y":A$,"stretch.x":k$,"stretch.y":P$,share:M$,"copy.current.page.link":O$,"copy.project.link":B$,"data.too.big.encoded":$$,"dialog.save.firsttime":F$,"dialog.save.again":H$,"dialog.cancel":N$,"dialog.no":V$,"dialog.yes":j$,"enter.file.name":U$},z$="F\xE4rg",G$="Ifylld",W$="Streck",K$="Storlek",Y$="H\xE5ll stilmenyn \xF6ppen",X$="Typsnitt",q$="Justera",J$="Utseende",Q$="Zooma in",eF="Zooma ut",tF="Till",rF="Verktyg",nF="Transform",iF="Arkiv",oF="Redigera",sF="Inneh\xE5ll",aF="Inst\xE4llningar",lF="Logga in",uF="Logga ut",cF="Bli en sponsor",dF="Anpassa zoom till inneh\xE5ll",hF="Anpassa zoom till urval",fF="Anpassa zoom till sk\xE4rm",pF="Zooma till",gF="M\xF6rkt l\xE4ge",mF="Fokusl\xE4ge",vF="Debugl\xE4ge",CF="Visa rutn\xE4t",EF="V\xE4lj som i CAD-mjukvara",yF="H\xE5ll stilmenyn \xF6ppen",wF="Visa alltid f\xE4stpunkter",bF="Rotationshandtag",xF="Bindningshandtag",_F="Kloningshandtag",SF="\xC5ngra",LF="G\xF6r om",RF="Klipp ut",IF="Kopiera",TF="Klistra in",DF="Kopiera som",AF="Exportera till",kF="V\xE4lj alla",PF="V\xE4lj ingen",MF="Radera",OF="Nytt projekt",BF="\xD6ppna",$F="Spara",FF="Spara som",HF="Ladda upp media",NF="Skapa sida",VF="Ny sida",jF="Sidnamn",UF="Duplicera",ZF="Avbryt",zF="Kopiera l\xE4nk med redigeringsr\xE4ttigheter",GF="Kopiera l\xE4nk med l\xE4sr\xE4ttigheter",WF="Skapa ett Multiplayer-projekt",KF="Kopiera till Multiplayer-project",YF="V\xE4lj",XF="Radera",qF="Rita",JF="Pil",QF="Text",eH="Klisterlapp",tH="Rektangel",rH="Ellips",nH="Triangel",iH="Linje",oH="Rotera",sH="L\xE5s storleksf\xF6rh\xE5llande",aH="L\xE5s upp storleksf\xF6rh\xE5llande",lH="Gruppera",uH="Avgruppera",cH="Placera l\xE4ngst bak",dH="Flytta bak\xE5t",hH="Flytta fram\xE5t",fH="Placera l\xE4ngst fram",pH="\xC5terst\xE4ll vinkel",gH="L\xE5s",mH="L\xE5s upp",vH="Justera / Placera",CH="Flytta till sida",EH="V\xE4nd horisontellt",yH="V\xE4nd vertikalt",wH="Flytta",bH="Till l\xE4ngst fram",xH="Fram\xE5t",_H="Bak\xE5t",SH="Till l\xE4ngst bak",LH="Spr\xE5k",RH="Mer information",IH="Dockningsposition",TH="Botten",DH="V\xE4nster",AH="H\xF6ger",kH="Topp",PH="Sida",MH="Tangentbordsgenv\xE4gar",OH="S\xF6k",BH="Laddar{dots}",$H="Exportbakgrund",FH="Transparent",HH="Auto",NH="Ljus",VH="M\xF6rk",jH="Github",UH="Twitter",ZH="Discord",zH="Bild",GH={"style.menu.color":z$,"style.menu.fill":G$,"style.menu.dash":W$,"style.menu.size":K$,"style.menu.keep.open":Y$,"style.menu.font":X$,"style.menu.align":q$,styles:J$,"zoom.in":Q$,"zoom.out":eF,to:tF,"menu.tools":rF,"menu.transform":nF,"menu.file":iF,"menu.edit":oF,"menu.view":sF,"menu.preferences":aF,"menu.sign.in":lF,"menu.sign.out":uF,"become.a.sponsor":cF,"zoom.to.content":dF,"zoom.to.selection":hF,"zoom.to.fit":fF,"zoom.to":pF,"preferences.dark.mode":gF,"preferences.focus.mode":mF,"preferences.debug.mode":vF,"preferences.show.grid":CF,"preferences.use.cad.selection":EF,"preferences.keep.stylemenu.open":yF,"preferences.always.show.snaps":wF,"preferences.rotate.handles":bF,"preferences.binding.handles":xF,"preferences.clone.handles":_F,undo:SF,redo:LF,cut:RF,copy:IF,paste:TF,"copy.as":DF,"export.as":AF,"select.all":kF,"select.none":PF,delete:MF,"new.project":OF,open:BF,save:$F,"save.as":FF,"upload.media":HF,"create.page":NF,"new.page":VF,"page.name":jF,duplicate:UF,cancel:ZF,"copy.invite.link":zF,"copy.readonly.link":GF,"create.multiplayer.project":WF,"copy.multiplayer.project":KF,select:YF,eraser:XF,draw:qF,arrow:JF,text:QF,sticky:eH,rectangle:tH,ellipse:rH,triangle:nH,line:iH,rotate:oH,"lock.aspect.ratio":sH,"unlock.aspect.ratio":aH,group:lH,ungroup:uH,"move.to.back":cH,"move.backward":dH,"move.forward":hH,"move.to.front":fH,"reset.angle":pH,lock:gH,unlock:mH,"align.distribute":vH,"move.to.page":CH,"flip.horizontal":EH,"flip.vertical":yH,move:wH,"to.front":bH,forward:xH,backward:_H,back:SH,language:LH,"translation.link":RH,"dock.position":IH,bottom:TH,left:DH,right:AH,top:kH,page:PH,"keyboard.shortcuts":MH,search:OH,loading:BH,"export.background":$H,transparent:FH,auto:HH,light:NH,dark:VH,github:jH,twitter:UH,discord:ZH,image:zH},WH="Renk",KH="Doldur",YH="\xC7izgi",XH="Boyut",qH="A\xE7\u0131k Tut",JH="Yaz\u0131 Tipi",QH="Hizala",eN="Stiller",tN="Yak\u0131nla\u015Ft\u0131r",rN="Uzakla\u015Ft\u0131r",nN="",iN="Dosya",oN="D\xFCzenle",sN="G\xF6r\xFCnt\xFC",aN="Tercihler",lN="Giri\u015F Yap",uN="Oturumu Kapat",cN="Sponsor Ol",dN="Se\xE7ime Yak\u0131nla\u015Ft\u0131r",hN="S\u0131\u011Fd\u0131rmak i\xE7in Yak\u0131nla\u015Ft\u0131r",fN="Yak\u0131nla\u015Ft\u0131r",pN="Karanl\u0131k Mod",gN="Odak Modu",mN="Debug Modu",vN="Izgaray\u0131 G\xF6ster",CN="CAD Se\xE7imi Kullan",EN="Stil Men\xFCs\xFCn\xFC A\xE7\u0131k Tut",yN="Hiza \xC7izgilerini Hep G\xF6ster",wN="Rotasyon Kontrolc\xFCleri",bN="Ba\u011Flama Kontrolc\xFCleri",xN="Klon Kontrolc\xFCleri",_N="Geri Al",SN="Yinele",LN="Kes",RN="Kopyala",IN="Yap\u0131\u015Ft\u0131r",TN="Olarak Kopyala",DN="Olarak D\u0131\u015Far\u0131 Aktar",AN="Hepsini Se\xE7",kN="Hi\xE7birini Se\xE7me",PN="Sil",MN="Yeni Proje",ON="A\xE7",BN="Kaydet",$N="Farkl\u0131 Kaydet",FN="Medya Y\xFCkle",HN="Sayfa Olu\u015Ftur",NN="Yeni Sayfa",VN="Sayfa \u0130smi",jN="Kopya Olu\u015Ftur",UN="\u0130ptal",ZN="Davet Linkini Kopyala",zN="\xC7ok Oyunculu Proje Olu\u015Ftur",GN="\xC7ok Oyunculu Projeye Kopyala",WN="Se\xE7",KN="Silgi",YN="\xC7izim",XN="Ok",qN="Yaz\u0131",JN="Yap\u0131\u015Fkan",QN="Dikd\xF6rtgen",eV="Elips",tV="\xDC\xE7gen",rV="\xC7izgi",nV="D\xF6nd\xFCr",iV="En Boy Oran\u0131n\u0131 Kilitle",oV="En Boy Oran\u0131 Kilidini A\xE7",sV="Grupla",aV="Gruplamay\u0131 Kald\u0131r",lV="Arkaya Ta\u015F\u0131",uV="En Arkaya Ta\u015F\u0131",cV="En \xD6ne Ta\u015F\u0131",dV="\xD6ne Ta\u015F\u0131",hV="A\xE7\u0131y\u0131 S\u0131f\u0131rla",fV="Kilitle",pV="Kilidini A\xE7",gV="Sayfaya Ta\u015F\u0131",mV="Yatay \xC7evir",vV="Dikey \xC7evir",CV="Ta\u015F\u0131",EV="\xD6ne",yV="En \xD6ne",wV="En Arkaya",bV="Arkaya",xV="Dil",_V={"style.menu.color":WH,"style.menu.fill":KH,"style.menu.dash":YH,"style.menu.size":XH,"style.menu.keep.open":qH,"style.menu.font":JH,"style.menu.align":QH,styles:eN,"zoom.in":tN,"zoom.out":rN,to:nN,"menu.file":iN,"menu.edit":oN,"menu.view":sN,"menu.preferences":aN,"menu.sign.in":lN,"menu.sign.out":uN,"become.a.sponsor":cN,"zoom.to.selection":dN,"zoom.to.fit":hN,"zoom.to":fN,"preferences.dark.mode":pN,"preferences.focus.mode":gN,"preferences.debug.mode":mN,"preferences.show.grid":vN,"preferences.use.cad.selection":CN,"preferences.keep.stylemenu.open":EN,"preferences.always.show.snaps":yN,"preferences.rotate.handles":wN,"preferences.binding.handles":bN,"preferences.clone.handles":xN,undo:_N,redo:SN,cut:LN,copy:RN,paste:IN,"copy.as":TN,"export.as":DN,"select.all":AN,"select.none":kN,delete:PN,"new.project":MN,open:ON,save:BN,"save.as":$N,"upload.media":FN,"create.page":HN,"new.page":NN,"page.name":VN,duplicate:jN,cancel:UN,"copy.invite.link":ZN,"create.multiplayer.project":zN,"copy.multiplayer.project":GN,select:WN,eraser:KN,draw:YN,arrow:XN,text:qN,sticky:JN,rectangle:QN,ellipse:eV,triangle:tV,line:rV,rotate:nV,"lock.aspect.ratio":iV,"unlock.aspect.ratio":oV,group:sV,ungroup:aV,"move.to.back":lV,"move.backward":uV,"move.forward":cV,"move.to.front":dV,"reset.angle":hV,lock:fV,unlock:pV,"move.to.page":gV,"flip.horizontal":mV,"flip.vertical":vV,move:CV,"to.front":EV,forward:yV,backward:wV,back:bV,language:xV},SV="\u041A\u043E\u043B\u0456\u0440",LV="\u0417\u0430\u043F\u043E\u0432\u043D\u044E\u0432\u0430\u0442\u0438",RV="\u0428\u0442\u0440\u0438\u0445",IV="\u0420\u043E\u0437\u043C\u0456\u0440",TV="\u0422\u0440\u0438\u043C\u0430\u0442\u0438 \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0438\u043C",DV="\u0428\u0440\u0438\u0444\u0442",AV="\u0412\u0438\u0440\u0456\u0432\u043D\u044F\u0442\u0438",kV="\u0421\u0442\u0438\u043B\u044C",PV="\u0417\u0431\u0456\u043B\u044C\u0448\u0438\u0442\u0438",MV="\u0417\u043C\u0435\u043D\u0448\u0438\u0442\u0438",OV="\u0434\u043E",BV="\u0424\u0430\u0439\u043B",$V="\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043D\u043D\u044F",FV="\u0412\u0438\u0433\u043B\u044F\u0434",HV="\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u043D\u043D\u044F",NV="\u0423\u0432\u0456\u0439\u0442\u0438",VV="\u0412\u0438\u0439\u0442\u0438",jV="\u0421\u0442\u0430\u0442\u0438 \u0441\u043F\u043E\u043D\u0441\u043E\u0440\u043E\u043C",UV="\u041D\u0430\u0431\u043B\u0438\u0437\u0438\u0442\u0438 \u0434\u043E \u0432\u0438\u0434\u0456\u043B\u0435\u043D\u043D\u044F",ZV="\u0417\u0431\u0456\u043B\u044C\u0448\u0438\u0442\u0438 \u0437\u0430 \u0440\u043E\u0437\u043C\u0456\u0440\u043E\u043C \u0435\u043A\u0440\u0430\u043D\u0443",zV="\u041D\u0430\u0431\u043B\u0438\u0437\u0438\u0442\u0438 \u0434\u043E",GV="\u0422\u0435\u043C\u043D\u0430 \u0442\u0435\u043C\u0430",WV="\u041C\u0456\u043D\u0456\u043C\u0430\u043B\u0456\u0441\u0442\u0438\u0447\u043D\u0438\u0439 \u0440\u0435\u0436\u0438\u043C",KV="\u0420\u0435\u0436\u0438\u043C \u043D\u0430\u043B\u0430\u0433\u043E\u0434\u0436\u0435\u043D\u043D\u044F",YV="\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u0438 \u0441\u0456\u0442\u043A\u0443",XV="\u0412\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0432\u0430\u0442\u0438 CAD \u0432\u0438\u0434\u0456\u043B\u0435\u043D\u043D\u044F",qV="\u0422\u0440\u0438\u043C\u0430\u0442\u0438 \u043C\u0435\u043D\u044E \u0441\u0442\u0438\u043B\u0456\u0432 \u0432\u0456\u0434\u043A\u0440\u0438\u0442\u0438\u043C",JV="\u0417\u0430\u0432\u0436\u0434\u0438 \u043F\u043E\u043A\u0430\u0437\u0443\u0432\u0430\u0442\u0438 \u043F\u0440\u0438\u0432'\u044F\u0437\u043A\u0438",QV="\u0420\u0443\u0447\u043A\u0438 \u043E\u0431\u0435\u0440\u0442\u0430\u043D\u043D\u044F",ej="\u0420\u0443\u0447\u043A\u0438 \u043F\u0440\u0438\u0432'\u044F\u0437\u043A\u0438",tj="\u0420\u0443\u0447\u043A\u0438 \u043A\u043B\u043E\u043D\u0443\u0432\u0430\u043D\u043D\u044F",rj="\u0421\u043A\u0430\u0441\u0443\u0432\u0430\u0442\u0438",nj="\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0438",ij="\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438",oj="\u0421\u043A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438",sj="\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438",aj="\u0421\u043A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438 \u044F\u043A",lj="\u0415\u043A\u0441\u043F\u043E\u0440\u0442\u0443\u0432\u0430\u0442\u0438 \u044F\u043A",uj="\u041E\u0431\u0440\u0430\u0442\u0438 \u0432\u0441\u0435",cj="\u0417\u043D\u044F\u0442\u0438 \u0432\u0438\u0434\u0456\u043B\u0435\u043D\u043D\u044F",dj="\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438",hj="\u041D\u043E\u0432\u0438\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",fj="\u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438",pj="\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438",gj="\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u044F\u043A",mj="\u0417\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0438\u0442\u0438 \u043C\u0435\u0434\u0456\u0430",vj="\u0421\u0442\u0432\u043E\u0440\u0438\u0442\u0438 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0443",Cj="\u041D\u043E\u0432\u0430 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0430",Ej="\u041D\u0430\u0437\u0432\u0430 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0438",yj="\u0414\u0443\u0431\u043B\u044E\u0432\u0430\u0442\u0438",wj="\u0421\u043A\u0430\u0441\u0443\u0432\u0430\u0442\u0438",bj="\u0421\u043A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u0441\u0438\u043B\u0430\u043D\u043D\u044F \u043D\u0430 \u0437\u0430\u043F\u0440\u043E\u0448\u0435\u043D\u043D\u044F",xj="\u0421\u0442\u0432\u043E\u0440\u0438\u0442\u0438 \u0431\u0430\u0433\u0430\u0442\u043E\u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0438\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",_j="\u0421\u043A\u043E\u043F\u0456\u044E\u0432\u0430\u0442\u0438 \u0432 \u0431\u0430\u0433\u0430\u0442\u043E\u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044C\u043A\u0438\u0439 \u043F\u0440\u043E\u0435\u043A\u0442",Sj="\u0412\u0438\u0431\u0438\u0440\u0430\u0442\u0438",Lj="\u041B\u0430\u0441\u0442\u0438\u043A",Rj="\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438",Ij="\u0421\u0442\u0440\u0456\u043B\u043A\u0430",Tj="\u0422\u0435\u043A\u0441\u0442",Dj="\u041D\u043E\u0442\u0430\u0442\u043A\u0430",Aj="\u041F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A",kj="\u0415\u043B\u0456\u043F\u0441",Pj="\u0422\u0440\u0438\u043A\u0443\u0442\u043D\u0438\u043A",Mj=" \u041B\u0456\u043D\u0456\u044F",Oj="\u041F\u043E\u0432\u0435\u0440\u043D\u0443\u0442\u0438",Bj="\u0417\u0430\u0431\u043B\u043E\u043A\u0443\u0432\u0430\u0442\u0438 \u0441\u043F\u0456\u0432\u0432\u0456\u0434\u043D\u043E\u0448\u0435\u043D\u043D\u044F \u0441\u0442\u043E\u0440\u0456\u043D",$j=" \u0420\u043E\u0437\u0431\u043B\u043E\u043A\u0443\u0432\u0430\u0442\u0438 \u0441\u043F\u0456\u0432\u0432\u0456\u0434\u043D\u043E\u0448\u0435\u043D\u043D\u044F \u0441\u0442\u043E\u0440\u0456\u043D",Fj="\u0417\u0433\u0440\u0443\u043F\u0443\u0432\u0430\u0442\u0438",Hj=" \u0420\u043E\u0437\u0433\u0440\u0443\u043F\u0443\u0432\u0430\u0442\u0438",Nj="\u041F\u0435\u0440\u0435\u043C\u0456\u0441\u0442\u0438\u0442\u0438 \u043D\u0430\u0437\u0430\u0434",Vj="\u041F\u0435\u0440\u0435\u043C\u0456\u0441\u0442\u0438\u0442\u0438 \u043D\u0430 \u0437\u0430\u0434\u043D\u0456\u0439 \u043F\u043B\u0430\u043D",jj="\u041F\u0435\u0440\u0435\u043C\u0456\u0441\u0442\u0438\u0442\u0438 \u0432\u043F\u0435\u0440\u0435\u0434",Uj="\u041F\u0435\u0440\u0435\u043C\u0456\u0441\u0442\u0438\u0442\u0438 \u043D\u0430 \u043F\u0435\u0440\u0435\u0434\u043D\u0456\u0439 \u043F\u043B\u0430\u043D",Zj="\u0421\u043A\u0438\u0434\u0430\u043D\u043D\u044F \u043A\u0443\u0442\u0430",zj="\u0411\u043B\u043E\u043A\u0443\u0432\u0430\u043D\u043D\u044F",Gj=" \u0420\u043E\u0437\u0431\u043B\u043E\u043A\u0443\u0432\u0430\u043D\u043D\u044F",Wj="\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0443",Kj="\u041F\u0435\u0440\u0435\u0432\u0435\u0440\u043D\u0443\u0442\u0438 \u0433\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u044C\u043D\u043E",Yj="\u041F\u0435\u0440\u0435\u0432\u0435\u0440\u043D\u0443\u0442\u0438 \u0432\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u043E",Xj="\u041F\u0435\u0440\u0435\u043C\u0456\u0441\u0442\u0438\u0442\u0438",qj="\u041D\u0430 \u043F\u0435\u0440\u0435\u0434\u043D\u0456\u0439 \u043F\u043B\u0430\u043D",Jj=" \u0412\u043F\u0435\u0440\u0435\u0434",Qj="\u041D\u0430 \u0437\u0430\u0434\u043D\u0456\u0439 \u043F\u043B\u0430\u043D",eU="\u041D\u0430\u0437\u0430\u0434",tU="\u041C\u043E\u0432\u0430",rU={"style.menu.color":SV,"style.menu.fill":LV,"style.menu.dash":RV,"style.menu.size":IV,"style.menu.keep.open":TV,"style.menu.font":DV,"style.menu.align":AV,styles:kV,"zoom.in":PV,"zoom.out":MV,to:OV,"menu.file":BV,"menu.edit":$V,"menu.view":FV,"menu.preferences":HV,"menu.sign.in":NV,"menu.sign.out":VV,"become.a.sponsor":jV,"zoom.to.selection":UV,"zoom.to.fit":ZV,"zoom.to":zV,"preferences.dark.mode":GV,"preferences.focus.mode":WV,"preferences.debug.mode":KV,"preferences.show.grid":YV,"preferences.use.cad.selection":XV,"preferences.keep.stylemenu.open":qV,"preferences.always.show.snaps":JV,"preferences.rotate.handles":QV,"preferences.binding.handles":ej,"preferences.clone.handles":tj,undo:rj,redo:nj,cut:ij,copy:oj,paste:sj,"copy.as":aj,"export.as":lj,"select.all":uj,"select.none":cj,delete:dj,"new.project":hj,open:fj,save:pj,"save.as":gj,"upload.media":mj,"create.page":vj,"new.page":Cj,"page.name":Ej,duplicate:yj,cancel:wj,"copy.invite.link":bj,"create.multiplayer.project":xj,"copy.multiplayer.project":_j,select:Sj,eraser:Lj,draw:Rj,arrow:Ij,text:Tj,sticky:Dj,rectangle:Aj,ellipse:kj,triangle:Pj,line:Mj,rotate:Oj,"lock.aspect.ratio":Bj,"unlock.aspect.ratio":$j,group:Fj,ungroup:Hj,"move.to.back":Nj,"move.backward":Vj,"move.forward":jj,"move.to.front":Uj,"reset.angle":Zj,lock:zj,unlock:Gj,"move.to.page":Wj,"flip.horizontal":Kj,"flip.vertical":Yj,move:Xj,"to.front":qj,forward:Jj,backward:Qj,back:eU,language:tU},nU="\u989C\u8272",iU="\u586B\u5145",oU="\u8FB9\u6846",sU="\u5C3A\u5BF8",aU="\u4FDD\u6301\u5E38\u5F00",lU="\u5B57\u4F53",uU="\u5BF9\u9F50",cU="\u6837\u5F0F",dU="\u653E\u5927",hU="\u7F29\u5C0F",fU="\u7F29\u653E\u81F3",pU="\u5DE5\u5177",gU="\u8F6C\u6362",mU="\u6587\u4EF6",vU="\u7F16\u8F91",CU="\u89C6\u56FE",EU="\u504F\u597D",yU="\u767B\u5F55",wU="\u767B\u51FA",bU="\u641C\u7D22",xU="\u6210\u4E3A\u8D5E\u52A9\u8005",_U="\u7F29\u653E\u9009\u4E2D",SU="\u81EA\u9002\u5E94\u7F29\u653E",LU="\u7F29\u653E\u81F3",RU="\u7F29\u653E\u81F3\u5185\u5BB9",IU="\u6697\u9ED1\u6A21\u5F0F",TU="\u4E13\u6CE8\u6A21\u5F0F",DU="\u8C03\u8BD5\u6A21\u5F0F",AU="\u663E\u793A\u7F51\u683C",kU="\u4F7F\u7528 CAD \u9009\u62E9",PU="\u4FDD\u6301\u6837\u5F0F\u83DC\u5355\u5E38\u5F00",MU="\u603B\u662F\u5C55\u793A\u5BF9\u9F50\u7EBF",OU="\u65CB\u8F6C\u624B\u67C4",BU="\u6346\u7ED1\u624B\u67C4",$U="\u514B\u9686\u624B\u67C4",FU="\u64A4\u9500",HU="\u91CD\u505A",NU="\u526A\u5207",VU="\u590D\u5236",jU="\u7C98\u8D34",UU="\u590D\u5236\u4E3A",ZU="\u5BFC\u51FA\u4E3A",zU="\u9009\u4E2D\u5168\u90E8",GU="\u53D6\u6D88\u9009\u4E2D",WU="\u5220\u9664",KU="\u65B0\u9879\u76EE",YU="\u6253\u5F00",XU="\u4FDD\u5B58",qU="\u4FDD\u5B58\u4E3A",JU="\u4E0A\u4F20\u5A92\u4F53\u6587\u4EF6",QU="\u521B\u5EFA\u9875\u9762",eZ="\u65B0\u9875\u9762",tZ="\u9875\u9762\u540D\u79F0",rZ="\u590D\u5236",nZ="\u53D6\u6D88",iZ="\u590D\u5236\u9080\u8BF7\u94FE\u63A5",oZ="\u521B\u5EFA\u591A\u4EBA\u9879\u76EE",sZ="\u590D\u5236\u5230\u591A\u4EBA\u9879\u76EE",aZ="\u9009\u62E9",lZ="\u6A61\u76AE",uZ="\u753B\u7B14",cZ="\u7BAD\u5934",dZ="\u6587\u672C",hZ="\u4FBF\u5229\u8D34",fZ="\u77E9\u5F62",pZ="\u692D\u5706\u5F62",gZ="\u4E09\u89D2\u5F62",mZ="\u76F4\u7EBF",vZ="\u65CB\u8F6C",CZ="\u9501\u5B9A\u5BBD\u9AD8\u6BD4",EZ="\u89E3\u9501\u5BBD\u9AD8\u6BD4",yZ="\u5206\u7EC4",wZ="\u53D6\u6D88\u5206\u7EC4",bZ="\u7F6E\u5E95",xZ="\u4E0B\u79FB\u4E00\u5C42",_Z="\u4E0A\u79FB\u4E00\u5C42",SZ="\u7F6E\u9876",LZ="\u91CD\u7F6E\u65CB\u8F6C\u89D2\u5EA6",RZ="\u9501\u5B9A",IZ="\u89E3\u9501",TZ="\u79FB\u52A8\u5230\u9875\u9762",DZ="\u6C34\u5E73\u7FFB\u8F6C",AZ="\u5782\u76F4\u7FFB\u8F6C",kZ="\u79FB\u52A8",PZ="\u7F6E\u9876",MZ="\u4E0A\u4E00\u5C42",OZ="\u4E0B\u4E00\u5C42",BZ="\u7F6E\u5E95",$Z="\u8BED\u8A00",FZ="\u952E\u76D8\u5FEB\u6377\u952E",HZ="\u4E86\u89E3\u66F4\u591A",NZ="\u9875\u9762",VZ="\u951A\u70B9\u4F4D\u7F6E",jZ="\u4E0B\u9762",UZ="\u5DE6\u9762",ZZ="\u53F3\u9762",zZ="\u4E0A\u9762",GZ="\u5BFC\u51FA\u80CC\u666F\u8272",WZ="\u900F\u660E",KZ="\u81EA\u52A8",YZ="\u660E\u4EAE",XZ="\u6697\u9ED1",qZ="\u590D\u5236\u53EA\u8BFB\u94FE\u63A5",JZ="\u56FE\u7247",QZ="\u5BF9\u9F50 / \u5206\u6563",ez="\u60A8\u662F\u5426\u60F3\u4FDD\u5B58\u5F53\u524D\u7684\u9879\u76EE\uFF1F",tz="\u60A8\u662F\u5426\u60F3\u4FDD\u5B58\u5BF9\u5F53\u524D\u9879\u76EE\u7684\u66F4\u6539\uFF1F",rz="\u53D6\u6D88",nz="\u5426",iz="\u662F",oz={"style.menu.color":nU,"style.menu.fill":iU,"style.menu.dash":oU,"style.menu.size":sU,"style.menu.keep.open":aU,"style.menu.font":lU,"style.menu.align":uU,styles:cU,"zoom.in":dU,"zoom.out":hU,to:fU,"menu.tools":pU,"menu.transform":gU,"menu.file":mU,"menu.edit":vU,"menu.view":CU,"menu.preferences":EU,"menu.sign.in":yU,"menu.sign.out":wU,search:bU,"become.a.sponsor":xU,"zoom.to.selection":_U,"zoom.to.fit":SU,"zoom.to":LU,"zoom.to.content":RU,"preferences.dark.mode":IU,"preferences.focus.mode":TU,"preferences.debug.mode":DU,"preferences.show.grid":AU,"preferences.use.cad.selection":kU,"preferences.keep.stylemenu.open":PU,"preferences.always.show.snaps":MU,"preferences.rotate.handles":OU,"preferences.binding.handles":BU,"preferences.clone.handles":$U,undo:FU,redo:HU,cut:NU,copy:VU,paste:jU,"copy.as":UU,"export.as":ZU,"select.all":zU,"select.none":GU,delete:WU,"new.project":KU,open:YU,save:XU,"save.as":qU,"upload.media":JU,"create.page":QU,"new.page":eZ,"page.name":tZ,duplicate:rZ,cancel:nZ,"copy.invite.link":iZ,"create.multiplayer.project":oZ,"copy.multiplayer.project":sZ,select:aZ,eraser:lZ,draw:uZ,arrow:cZ,text:dZ,sticky:hZ,rectangle:fZ,ellipse:pZ,triangle:gZ,line:mZ,rotate:vZ,"lock.aspect.ratio":CZ,"unlock.aspect.ratio":EZ,group:yZ,ungroup:wZ,"move.to.back":bZ,"move.backward":xZ,"move.forward":_Z,"move.to.front":SZ,"reset.angle":LZ,lock:RZ,unlock:IZ,"move.to.page":TZ,"flip.horizontal":DZ,"flip.vertical":AZ,move:kZ,"to.front":PZ,forward:MZ,backward:OZ,back:BZ,language:$Z,"keyboard.shortcuts":FZ,"translation.link":HZ,page:NZ,"dock.position":VZ,bottom:jZ,left:UZ,right:ZZ,top:zZ,"export.background":GZ,transparent:WZ,auto:KZ,light:YZ,dark:XZ,"copy.readonly.link":qZ,image:JZ,"align.distribute":QZ,"dialog.save.firsttime":ez,"dialog.save.again":tz,"dialog.cancel":rz,"dialog.no":nz,"dialog.yes":iz},sz="\u984F\u8272",az="\u586B\u5145",lz="\u865B\u7DDA",uz="\u5927\u5C0F",cz="\u4FDD\u6301\u958B\u555F",dz="\u5B57\u578B",hz="\u5C0D\u9F4A",fz="\u6A23\u5F0F",pz="\u653E\u5927",gz="\u7E2E\u5C0F",mz="\u81F3",vz="\u6A94\u6848",Cz="\u7DE8\u8F2F",Ez="\u6AA2\u8996",yz="\u9078\u9805",wz="\u767B\u5165",bz="\u767B\u51FA",xz="\u6210\u70BA\u8D0A\u52A9\u8005",_z="\u7E2E\u653E\u81F3\u9078\u53D6\u7BC4\u570D",Sz="\u7E2E\u653E\u81F3\u9069\u7576\u5927\u5C0F",Lz="\u7E2E\u653E\u81F3",Rz="\u6DF1\u8272\u6A21\u5F0F",Iz="\u5C08\u6CE8\u6A21\u5F0F",Tz="\u9664\u932F\u6A21\u5F0F",Dz="\u986F\u793A\u7DB2\u683C",Az="\u4F7F\u7528 CAD \u9078\u53D6",kz="\u6A23\u5F0F\u9078\u55AE\u4FDD\u6301\u958B\u555F",Pz="\u6C38\u9060\u986F\u793A\u5C0D\u9F4A\u7DDA",Mz="\u65CB\u8F49\u63A7\u9EDE",Oz="\u7D81\u5B9A\u63A7\u9EDE",Bz="\u8907\u88FD\u63A7\u9EDE",$z="\u5FA9\u539F",Fz="\u53D6\u6D88\u5FA9\u539F",Hz="\u526A\u4E0B",Nz="\u8907\u88FD",Vz="\u8CBC\u4E0A",jz="\u8907\u88FD\u6210",Uz="\u532F\u51FA\u6210",Zz="\u5168\u9078",zz="\u53D6\u6D88\u9078\u53D6",Gz="\u522A\u9664",Wz="\u65B0\u5C08\u6848",Kz="\u958B\u555F",Yz="\u5132\u5B58",Xz="\u53E6\u5B58\u70BA",qz="\u4E0A\u50B3\u5A92\u9AD4",Jz="\u5EFA\u7ACB\u9801\u9762",Qz="\u65B0\u9801\u9762",eG="\u9801\u9762\u540D\u7A31",tG="\u8907\u88FD",rG="\u53D6\u6D88",nG="\u8907\u88FD\u9080\u8ACB\u9023\u7D50",iG="\u8907\u88FD\u552F\u8B80\u9023\u7D50",oG="\u5EFA\u7ACB\u591A\u4EBA\u5C08\u6848",sG="\u8907\u88FD\u81F3\u591A\u4EBA\u5C08\u6848",aG="\u9078\u53D6",lG="\u6A61\u76AE\u64E6",uG="\u624B\u7E6A",cG="\u7BAD\u982D",dG="\u6587\u5B57",hG="\u4FBF\u5229\u8CBC",fG="\u9577\u65B9\u5F62",pG="\u6A62\u5713\u5F62",gG="\u4E09\u89D2\u5F62",mG="\u76F4\u7DDA",vG="\u65CB\u8F49",CG="\u9396\u5B9A\u9577\u5BEC\u6BD4",EG="\u89E3\u9396\u9577\u5BEC\u6BD4",yG="\u7D44\u6210\u7FA4\u7D44",wG="\u53D6\u6D88\u7FA4\u7D44",bG="\u79FB\u5230\u6700\u4E0B\u5C64",xG="\u4E0B\u79FB\u4E00\u5C64",_G="\u4E0A\u79FB\u4E00\u5C64",SG="\u79FB\u5230\u6700\u4E0A\u5C64",LG="\u91CD\u8A2D\u89D2\u5EA6",RG="\u9396\u5B9A",IG="\u89E3\u9396",TG="\u79FB\u81F3\u9801\u9762",DG="\u6C34\u5E73\u7FFB\u8F49",AG="\u5782\u76F4\u7FFB\u8F49",kG="\u79FB\u52D5",PG="\u5230\u6700\u4E0A\u5C64",MG="\u5230\u4E0A\u4E00\u5C64",OG="\u5230\u4E0B\u4E00\u5C64",BG="\u5230\u6700\u4E0B\u5C64",$G="\u8A9E\u8A00",FG="\u4E86\u89E3\u8A73\u60C5",HG="\u5DE5\u5177\u5217\u4F4D\u7F6E",NG="\u4E0B\u65B9",VG="\u5DE6\u5074",jG="\u53F3\u5074",UG="\u4E0A\u65B9",ZG="\u9801\u9762",zG={"style.menu.color":sz,"style.menu.fill":az,"style.menu.dash":lz,"style.menu.size":uz,"style.menu.keep.open":cz,"style.menu.font":dz,"style.menu.align":hz,styles:fz,"zoom.in":pz,"zoom.out":gz,to:mz,"menu.file":vz,"menu.edit":Cz,"menu.view":Ez,"menu.preferences":yz,"menu.sign.in":wz,"menu.sign.out":bz,"become.a.sponsor":xz,"zoom.to.selection":_z,"zoom.to.fit":Sz,"zoom.to":Lz,"preferences.dark.mode":Rz,"preferences.focus.mode":Iz,"preferences.debug.mode":Tz,"preferences.show.grid":Dz,"preferences.use.cad.selection":Az,"preferences.keep.stylemenu.open":kz,"preferences.always.show.snaps":Pz,"preferences.rotate.handles":Mz,"preferences.binding.handles":Oz,"preferences.clone.handles":Bz,undo:$z,redo:Fz,cut:Hz,copy:Nz,paste:Vz,"copy.as":jz,"export.as":Uz,"select.all":Zz,"select.none":zz,delete:Gz,"new.project":Wz,open:Kz,save:Yz,"save.as":Xz,"upload.media":qz,"create.page":Jz,"new.page":Qz,"page.name":eG,duplicate:tG,cancel:rG,"copy.invite.link":nG,"copy.readonly.link":iG,"create.multiplayer.project":oG,"copy.multiplayer.project":sG,select:aG,eraser:lG,draw:uG,arrow:cG,text:dG,sticky:hG,rectangle:fG,ellipse:pG,triangle:gG,line:mG,rotate:vG,"lock.aspect.ratio":CG,"unlock.aspect.ratio":EG,group:yG,ungroup:wG,"move.to.back":bG,"move.backward":xG,"move.forward":_G,"move.to.front":SG,"reset.angle":LG,lock:RG,unlock:IG,"move.to.page":TG,"flip.horizontal":DG,"flip.vertical":AG,move:kG,"to.front":PG,forward:MG,backward:OG,back:BG,language:$G,"translation.link":FG,"dock.position":HG,bottom:NG,left:VG,right:jG,top:UG,page:ZG},GG="\u0E2A\u0E35",WG="\u0E40\u0E15\u0E34\u0E21",KG="\u0E01\u0E23\u0E2D\u0E1A",YG="\u0E02\u0E19\u0E32\u0E14",XG="\u0E40\u0E1B\u0E34\u0E14\u0E17\u0E34\u0E49\u0E07\u0E44\u0E27\u0E49",qG="\u0E41\u0E1A\u0E1A\u0E2D\u0E31\u0E01\u0E29\u0E23",JG="\u0E08\u0E31\u0E14\u0E15\u0E33\u0E41\u0E2B\u0E19\u0E48\u0E07",QG="\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A",eW="\u0E0B\u0E39\u0E21\u0E40\u0E02\u0E49\u0E32",tW="\u0E0B\u0E39\u0E21\u0E2D\u0E2D\u0E01",rW="\u0E0B\u0E39\u0E21\u0E44\u0E1B\u0E17\u0E35\u0E48",nW="\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E21\u0E37\u0E2D",iW="\u0E41\u0E1B\u0E25\u0E07",oW="\u0E44\u0E1F\u0E25\u0E4C",sW="\u0E41\u0E01\u0E49\u0E44\u0E02",aW="\u0E21\u0E38\u0E21\u0E21\u0E2D\u0E07",lW="\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32",uW="\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A",cW="\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01\u0E23\u0E30\u0E1A\u0E1A",dW="\u0E23\u0E48\u0E27\u0E21\u0E40\u0E1B\u0E47\u0E19\u0E2A\u0E1B\u0E2D\u0E19\u0E40\u0E0B\u0E2D\u0E23\u0E4C",hW="\u0E01\u0E25\u0E31\u0E1A\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32",fW="\u0E0B\u0E39\u0E21\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E2A\u0E48\u0E27\u0E19\u0E17\u0E35\u0E48\u0E40\u0E25\u0E37\u0E2D\u0E01",pW="\u0E0B\u0E39\u0E21\u0E43\u0E2B\u0E49\u0E40\u0E15\u0E47\u0E21\u0E1E\u0E2D\u0E14\u0E35",gW="\u0E0B\u0E39\u0E21\u0E44\u0E1B\u0E17\u0E35\u0E48",mW="\u0E42\u0E2B\u0E21\u0E14\u0E21\u0E37\u0E14",vW="\u0E42\u0E2B\u0E21\u0E14\u0E42\u0E1F\u0E01\u0E31\u0E2A",CW="\u0E42\u0E2B\u0E21\u0E14\u0E14\u0E35\u0E1A\u0E31\u0E01",EW="\u0E41\u0E2A\u0E14\u0E07\u0E15\u0E32\u0E23\u0E32\u0E07",yW="\u0E01\u0E32\u0E23\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E41\u0E1A\u0E1A CAD",wW="\u0E40\u0E1B\u0E34\u0E14\u0E40\u0E21\u0E19\u0E39\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E34\u0E49\u0E07\u0E44\u0E27\u0E49",bW="\u0E41\u0E2A\u0E14\u0E07\u0E2A\u0E41\u0E19\u0E1B\u0E15\u0E25\u0E2D\u0E14",xW="\u0E41\u0E2A\u0E14\u0E07\u0E08\u0E38\u0E14\u0E08\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E2B\u0E21\u0E38\u0E19",_W="\u0E41\u0E2A\u0E14\u0E07\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E2D\u0E49\u0E32\u0E07\u0E2D\u0E34\u0E07",SW="\u0E41\u0E2A\u0E14\u0E07\u0E15\u0E31\u0E27\u0E42\u0E04\u0E25\u0E19",LW="\u0E40\u0E25\u0E34\u0E01\u0E17\u0E33",RW="\u0E17\u0E33\u0E0B\u0E49\u0E33",IW="\u0E15\u0E31\u0E14",TW="\u0E04\u0E31\u0E14\u0E25\u0E2D\u0E01",DW="\u0E27\u0E32\u0E07",AW="\u0E04\u0E31\u0E14\u0E25\u0E2D\u0E01\u0E40\u0E1B\u0E47\u0E19",kW="\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E40\u0E1B\u0E47\u0E19",PW="\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",MW="\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01\u0E2A\u0E34\u0E48\u0E07\u0E17\u0E35\u0E48\u0E40\u0E25\u0E37\u0E2D\u0E01",OW="\u0E25\u0E1A",BW="\u0E42\u0E1B\u0E23\u0E40\u0E08\u0E01\u0E15\u0E4C\u0E43\u0E2B\u0E21\u0E48",$W="\u0E40\u0E1B\u0E34\u0E14",FW="\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",HW="\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E40\u0E1B\u0E47\u0E19",NW="\u0E2D\u0E31\u0E1E\u0E42\u0E2B\u0E25\u0E14\u0E21\u0E35\u0E40\u0E14\u0E35\u0E22",VW="\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E2B\u0E19\u0E49\u0E32",jW="\u0E2B\u0E19\u0E49\u0E32\u0E43\u0E2B\u0E21\u0E48",UW="\u0E0A\u0E37\u0E48\u0E2D\u0E2B\u0E19\u0E49\u0E32",ZW="\u0E2A\u0E33\u0E40\u0E19\u0E32",zW="\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",GW="\u0E04\u0E31\u0E14\u0E25\u0E2D\u0E01\u0E25\u0E34\u0E07\u0E01\u0E4C\u0E40\u0E0A\u0E34\u0E0D",WW="\u0E04\u0E31\u0E14\u0E25\u0E2D\u0E01\u0E25\u0E34\u0E07\u0E01\u0E4C\u0E41\u0E1A\u0E1A\u0E43\u0E2B\u0E49\u0E2D\u0E48\u0E32\u0E19\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E40\u0E14\u0E35\u0E22\u0E27",KW="\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E42\u0E1B\u0E23\u0E40\u0E08\u0E01\u0E15\u0E4C\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E2B\u0E25\u0E32\u0E22\u0E04\u0E19",YW="\u0E04\u0E31\u0E14\u0E25\u0E2D\u0E01\u0E42\u0E1B\u0E23\u0E40\u0E08\u0E01\u0E15\u0E4C\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E2B\u0E25\u0E32\u0E22\u0E04\u0E19",XW="\u0E40\u0E25\u0E37\u0E2D\u0E01",qW="\u0E22\u0E32\u0E07\u0E25\u0E1A",JW="\u0E27\u0E32\u0E14",QW="\u0E25\u0E39\u0E01\u0E28\u0E23",eK="\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",tK="\u0E01\u0E23\u0E30\u0E14\u0E32\u0E29\u0E42\u0E19\u0E4A\u0E15",rK="\u0E2A\u0E35\u0E48\u0E40\u0E2B\u0E25\u0E35\u0E48\u0E22\u0E21\u0E1C\u0E37\u0E19\u0E1C\u0E49\u0E32",nK="\u0E27\u0E07\u0E23\u0E35",iK="\u0E2A\u0E32\u0E21\u0E40\u0E2B\u0E25\u0E35\u0E48\u0E22\u0E21",oK="\u0E40\u0E2A\u0E49\u0E19",sK="\u0E2B\u0E21\u0E38\u0E19",aK="\u0E25\u0E47\u0E2D\u0E04\u0E2D\u0E31\u0E15\u0E23\u0E32\u0E2A\u0E48\u0E27\u0E19\u0E20\u0E32\u0E1E",lK="\u0E1B\u0E25\u0E14\u0E25\u0E47\u0E2D\u0E01\u0E2D\u0E31\u0E15\u0E23\u0E32\u0E2A\u0E48\u0E27\u0E19\u0E20\u0E32\u0E1E",uK="\u0E01\u0E25\u0E38\u0E48\u0E21",cK="\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01\u0E01\u0E25\u0E38\u0E48\u0E21",dK="\u0E22\u0E49\u0E32\u0E22\u0E44\u0E1B\u0E14\u0E49\u0E32\u0E19\u0E2B\u0E25\u0E31\u0E07",hK="\u0E02\u0E22\u0E31\u0E1A\u0E16\u0E2D\u0E22\u0E2B\u0E25\u0E31\u0E07",fK="\u0E02\u0E22\u0E31\u0E1A\u0E44\u0E1B\u0E2B\u0E19\u0E49\u0E32",pK="\u0E22\u0E49\u0E32\u0E22\u0E44\u0E1B\u0E14\u0E49\u0E32\u0E19\u0E2B\u0E19\u0E49\u0E32",gK="\u0E23\u0E35\u0E40\u0E0B\u0E47\u0E15\u0E21\u0E38\u0E21",mK="\u0E25\u0E47\u0E2D\u0E04",vK="\u0E1B\u0E25\u0E14\u0E25\u0E47\u0E2D\u0E04",CK="\u0E08\u0E31\u0E14\u0E15\u0E33\u0E41\u0E2B\u0E19\u0E48\u0E07 / \u0E01\u0E23\u0E30\u0E08\u0E32\u0E22",EK="\u0E22\u0E49\u0E32\u0E22\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E2B\u0E19\u0E49\u0E32",yK="\u0E1E\u0E25\u0E34\u0E01\u0E41\u0E19\u0E27\u0E19\u0E2D\u0E19",wK="\u0E1E\u0E25\u0E34\u0E01\u0E41\u0E19\u0E27\u0E15\u0E31\u0E49\u0E07",bK="\u0E22\u0E49\u0E32\u0E22",xK="\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E14\u0E49\u0E32\u0E19\u0E2B\u0E19\u0E49\u0E32",_K="\u0E02\u0E49\u0E32\u0E07\u0E2B\u0E19\u0E49\u0E32",SK="\u0E02\u0E49\u0E32\u0E07\u0E2B\u0E25\u0E31\u0E07",LK="\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E14\u0E49\u0E32\u0E19\u0E2B\u0E25\u0E31\u0E07",RK="\u0E20\u0E32\u0E29\u0E32",IK="\u0E40\u0E23\u0E35\u0E22\u0E19\u0E23\u0E39\u0E49\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E40\u0E15\u0E34\u0E21",TK="\u0E15\u0E33\u0E41\u0E2B\u0E19\u0E48\u0E07\u0E41\u0E16\u0E1A\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E21\u0E37\u0E2D",DK="\u0E02\u0E49\u0E32\u0E07\u0E25\u0E48\u0E32\u0E07",AK="\u0E02\u0E49\u0E32\u0E07\u0E0B\u0E49\u0E32\u0E22",kK="\u0E02\u0E49\u0E32\u0E07\u0E02\u0E27\u0E32",PK="\u0E02\u0E49\u0E32\u0E07\u0E1A\u0E19",MK="\u0E2B\u0E19\u0E49\u0E32",OK="\u0E41\u0E1B\u0E49\u0E19\u0E1E\u0E34\u0E21\u0E1E\u0E4C\u0E25\u0E31\u0E14",BK="\u0E04\u0E49\u0E19\u0E2B\u0E32",$K="\u0E01\u0E33\u0E25\u0E31\u0E07\u0E42\u0E2B\u0E25\u0E14{dots}",FK="\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E1E\u0E37\u0E49\u0E19\u0E2B\u0E25\u0E31\u0E07",HK="\u0E42\u0E1B\u0E23\u0E48\u0E07\u0E43\u0E2A",NK="\u0E2D\u0E31\u0E15\u0E42\u0E19\u0E21\u0E31\u0E15\u0E34",VK="\u0E2A\u0E27\u0E48\u0E32\u0E07",jK="\u0E21\u0E37\u0E14",UK="Github",ZK="Twitter",zK="Discord",GK="\u0E20\u0E32\u0E1E",WK="\u0E08\u0E31\u0E14\u0E43\u0E2B\u0E49\u0E0A\u0E34\u0E14\u0E0B\u0E49\u0E32\u0E22",KK="\u0E08\u0E31\u0E14\u0E43\u0E2B\u0E49\u0E2D\u0E22\u0E39\u0E48\u0E01\u0E36\u0E48\u0E07\u0E01\u0E25\u0E32\u0E07\u0E41\u0E19\u0E27\u0E19\u0E2D\u0E19",YK="\u0E08\u0E31\u0E14\u0E43\u0E2B\u0E49\u0E0A\u0E34\u0E14\u0E02\u0E27\u0E32",XK="\u0E08\u0E31\u0E14\u0E43\u0E2B\u0E49\u0E2D\u0E22\u0E39\u0E48\u0E14\u0E49\u0E32\u0E19\u0E1A\u0E19",qK="\u0E08\u0E31\u0E14\u0E43\u0E2B\u0E49\u0E2D\u0E22\u0E39\u0E48\u0E01\u0E36\u0E48\u0E07\u0E01\u0E25\u0E32\u0E07\u0E41\u0E19\u0E27\u0E15\u0E31\u0E49\u0E07",JK="\u0E08\u0E31\u0E14\u0E43\u0E2B\u0E49\u0E2D\u0E22\u0E39\u0E48\u0E14\u0E49\u0E32\u0E19\u0E25\u0E48\u0E32\u0E07",QK="\u0E01\u0E23\u0E30\u0E08\u0E32\u0E22\u0E41\u0E19\u0E27\u0E19\u0E2D\u0E19",eY="\u0E01\u0E23\u0E30\u0E08\u0E32\u0E22\u0E41\u0E19\u0E27\u0E15\u0E31\u0E49\u0E07",tY="\u0E22\u0E37\u0E14\u0E41\u0E19\u0E27\u0E19\u0E2D\u0E19",rY="\u0E22\u0E37\u0E14\u0E41\u0E19\u0E27\u0E15\u0E31\u0E49\u0E07",nY="\u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E42\u0E1B\u0E23\u0E40\u0E08\u0E47\u0E01\u0E15\u0E4C\u0E1B\u0E31\u0E08\u0E08\u0E38\u0E1A\u0E31\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48?",iY="\u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E41\u0E1B\u0E25\u0E07\u0E43\u0E19\u0E42\u0E1B\u0E23\u0E40\u0E08\u0E47\u0E01\u0E15\u0E4C\u0E1B\u0E31\u0E08\u0E08\u0E38\u0E1A\u0E31\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48?",oY="\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",sY="\u0E44\u0E21\u0E48",aY="\u0E43\u0E0A\u0E48",lY="\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E44\u0E1F\u0E25\u0E4C",uY={"style.menu.color":GG,"style.menu.fill":WG,"style.menu.dash":KG,"style.menu.size":YG,"style.menu.keep.open":XG,"style.menu.font":qG,"style.menu.align":JG,styles:QG,"zoom.in":eW,"zoom.out":tW,to:rW,"menu.tools":nW,"menu.transform":iW,"menu.file":oW,"menu.edit":sW,"menu.view":aW,"menu.preferences":lW,"menu.sign.in":uW,"menu.sign.out":cW,"become.a.sponsor":dW,"zoom.to.content":hW,"zoom.to.selection":fW,"zoom.to.fit":pW,"zoom.to":gW,"preferences.dark.mode":mW,"preferences.focus.mode":vW,"preferences.debug.mode":CW,"preferences.show.grid":EW,"preferences.use.cad.selection":yW,"preferences.keep.stylemenu.open":wW,"preferences.always.show.snaps":bW,"preferences.rotate.handles":xW,"preferences.binding.handles":_W,"preferences.clone.handles":SW,undo:LW,redo:RW,cut:IW,copy:TW,paste:DW,"copy.as":AW,"export.as":kW,"select.all":PW,"select.none":MW,delete:OW,"new.project":BW,open:$W,save:FW,"save.as":HW,"upload.media":NW,"create.page":VW,"new.page":jW,"page.name":UW,duplicate:ZW,cancel:zW,"copy.invite.link":GW,"copy.readonly.link":WW,"create.multiplayer.project":KW,"copy.multiplayer.project":YW,select:XW,eraser:qW,draw:JW,arrow:QW,text:eK,sticky:tK,rectangle:rK,ellipse:nK,triangle:iK,line:oK,rotate:sK,"lock.aspect.ratio":aK,"unlock.aspect.ratio":lK,group:uK,ungroup:cK,"move.to.back":dK,"move.backward":hK,"move.forward":fK,"move.to.front":pK,"reset.angle":gK,lock:mK,unlock:vK,"align.distribute":CK,"move.to.page":EK,"flip.horizontal":yK,"flip.vertical":wK,move:bK,"to.front":xK,forward:_K,backward:SK,back:LK,language:RK,"translation.link":IK,"dock.position":TK,bottom:DK,left:AK,right:kK,top:PK,page:MK,"keyboard.shortcuts":OK,search:BK,loading:$K,"export.background":FK,transparent:HK,auto:NK,light:VK,dark:jK,github:UK,twitter:ZK,discord:zK,image:GK,"align.left":WK,"align.center.x":KK,"align.right":YK,"align.top":XK,"align.center.y":qK,"align.bottom":JK,"distribute.x":QK,"distribute.y":eY,"stretch.x":tY,"stretch.y":rY,"dialog.save.firsttime":nY,"dialog.save.again":iY,"dialog.cancel":oY,"dialog.no":sY,"dialog.yes":aY,"enter.file.name":lY},q0=[{locale:"ar",label:"\u0639\u0631\u0628\u064A",messages:of},{locale:"da",label:"Danish",messages:$7},{locale:"de",label:"Deutsch",messages:g6},{locale:"en",label:"English",messages:m6},{locale:"es",label:"Espa\xF1ol",messages:ag},{locale:"fa",label:"\u0641\u0627\u0631\u0633\u06CC",messages:Hm},{locale:"fr",label:"Fran\xE7ais",messages:$C},{locale:"he",label:"\u05E2\u05D1\u05E8\u05D9\u05EA",messages:gy},{locale:"it",label:"Italiano",messages:Qw},{locale:"ja",label:"\u65E5\u672C\u8A9E",messages:Ax},{locale:"ko-kr",label:"\uD55C\uAD6D\uC5B4",messages:uS},{locale:"ne",label:"\u0928\u0947\u092A\u093E\u0932\u0940",messages:oT},{locale:"no",label:"Norwegian",messages:$D},{locale:"pl",label:"Polski",messages:gk},{locale:"pt",label:"Portugu\xEAs - Europeu",messages:SO},{locale:"pt-br",label:"Portugu\xEAs - Brasil",messages:WP},{locale:"ru",label:"Russian",messages:Z$},{locale:"sv",label:"Svenska",messages:GH},{locale:"tr",label:"T\xFCrk\xE7e",messages:_V},{locale:"uk",label:"Ukrainian",messages:rU},{locale:"zh-ch",label:"\u7B80\u4F53\u4E2D\u6587",messages:oz},{locale:"zh-tw",label:"\u7E41\u9AD4\u4E2D\u6587 (\u53F0\u7063)",messages:zG},{locale:"th",label:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22",messages:uY}];q0.sort((e,t)=>e.locale<t.locale?-1:1);function cY(e){var t;let r=q0.find(i=>i.locale===e);return{locale:e,label:(t=r?.label)!=null?t:e,messages:Y(Y({},RR),r?.messages)}}function dY(e){return u.useMemo(()=>cY(e??navigator.language.split(/[-_]/)[0]),[e])}var rd=u.createContext({}),nd=()=>{let e=u.useContext(rd);if(!e)throw new Error("useCtx must be inside a Provider with a value");return e},gr=u.forwardRef((e,t)=>{var r=e,{onSelect:i,onClick:s,onDoubleClick:l,variant:h,children:g,isToolLocked:f=!1,disabled:C=!1,isActive:y=!1,onKeyDown:b,id:R}=r,k=Ei(r,["onSelect","onClick","onDoubleClick","variant","children","isToolLocked","disabled","isActive","onKeyDown","id"]);return u.createElement(hY,Y({ref:t,isActive:y,variant:h,onClick:s,disabled:C,onPointerDown:i,onDoubleClick:l,onKeyDown:b,bp:yi,id:R},k),u.createElement(Pi,null,g),f&&u.createElement(fY,null))});function _s(e){var t=e,{label:r,kbd:i,isLocked:s}=t,l=Ei(t,["label","kbd","isLocked"]);let h=Dr(),g=u.useCallback(()=>{h.toggleToolLock()},[]),f=u.useCallback(C=>{C.key===" "&&h.isForcePanning&&C.preventDefault()},[]);return u.createElement(Kr,{label:r[0].toUpperCase()+r.slice(1),kbd:i},u.createElement(gr,ye(Y({},l),{variant:"primary",isToolLocked:s&&l.isActive,onDoubleClick:g,onKeyDown:f})))}var Pi=qe("div",{position:"relative",height:"100%",width:"100%",backgroundColor:"$panel",borderRadius:"$2",margin:"0",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"$ui",color:"inherit",userSelect:"none",boxSizing:"border-box",border:"1px solid transparent","-webkit-tap-highlight-color":"transparent","tap-highlight-color":"transparent"}),hY=qe("button",{position:"relative",color:"$text",fontSize:"$0",background:"none",margin:"0",padding:"$2",display:"flex",alignItems:"center",justifyContent:"center",outline:"none",cursor:"pointer",pointerEvents:"all",height:"40px",width:"40px",border:"1px solid $panel","-webkit-tap-highlight-color":"transparent","tap-highlight-color":"transparent",[`&:disabled ${Pi}`]:{opacity:.618},variants:{variant:{primary:{marginTop:"0"},icon:{[`& ${Pi}`]:{display:"grid","& > *":{gridRow:1,gridColumn:1}}},text:{width:"auto",[`& ${Pi}`]:{fontSize:"$1",padding:"0 $3",gap:"$3"}},circle:{padding:0,height:32,width:32,border:"none",[`& ${Pi}`]:{border:"1px solid $panelContrast",borderRadius:"100%",boxShadow:"$panel"},[`& ${Pi} > svg`]:{width:14,height:14}}},isActive:{true:{},false:{}},bp:{mobile:{padding:0},small:{}}},compoundVariants:[{variant:"primary",bp:"mobile",css:{height:40,width:36,[`& ${Pi} > svg`]:{width:16,height:16}}},{variant:"primary",bp:"small",css:{height:"44px",width:"44px",[`& ${Pi} > svg`]:{width:20,height:20}}},{isActive:!0,css:{[`${Pi}`]:{backgroundColor:"$selected",color:"$selectedContrast"}}},{isActive:!1,bp:"small",css:{[`&:hover:not(:disabled) ${Pi}`]:{backgroundColor:"$hover"},[`&:focus:not(:disabled) ${Pi}`]:{backgroundColor:"$hover"}}}]}),fY=qe("div",{position:"absolute",width:10,height:10,backgroundColor:"$selected",borderRadius:"100%",bottom:-2,border:"2px solid $panel",zIndex:100}),pY=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,gY=e=>e.settings.isDebugMode,mY=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.some(t=>e.document.pages[e.appState.currentPageId].shapes[t].children!==void 0),vY=e=>e.stopPropagation(),CY=({onBlur:e,children:t})=>{let r=qo();return u.createElement(u9,{dir:"ltr"},u.createElement(c9,{dir:"ltr"},t),u.createElement(el,{container:r.current},u.createElement(d9,{onEscapeKeyDown:vY,tabIndex:-1,onBlur:e,asChild:!0},u.createElement(Xo,{id:"TD-ContextMenu"},u.createElement(EY,null)))))},EY=u.memo(function(){let e=Dr(),t=Yn(),r=e.useStore(pY),i=e.useStore(gY),s=e.useStore(mY),l=u.useCallback(()=>{e.flipHorizontal()},[e]),h=u.useCallback(()=>{e.flipVertical()},[e]),g=u.useCallback(()=>{e.duplicate()},[e]),f=u.useCallback(()=>{e.toggleLocked()},[e]),C=u.useCallback(()=>{e.group()},[e]),y=u.useCallback(()=>{e.moveToBack()},[e]),b=u.useCallback(()=>{e.moveBackward()},[e]),R=u.useCallback(()=>{e.moveForward()},[e]),k=u.useCallback(()=>{e.moveToFront()},[e]),A=u.useCallback(()=>{e.delete()},[e]),O=u.useCallback(()=>{e.cut()},[e]),B=u.useCallback(()=>{e.copy()},[e]),F=u.useCallback(()=>{e.paste()},[e]),j=u.useCallback(()=>{e.copyImage("svg",{scale:1,quality:1,transparentBackground:!1})},[e]),J=u.useCallback(()=>{e.copyImage("png",{scale:2,quality:1,transparentBackground:!0})},[e]),ce=u.useCallback(()=>{e.undo()},[e]),re=u.useCallback(()=>{e.redo()},[e]),ne=u.useCallback(()=>Ft(this,null,function*(){e.exportImage("png",{scale:2,quality:1})}),[e]),le=u.useCallback(()=>Ft(this,null,function*(){e.exportImage("jpeg",{scale:2,quality:1})}),[e]),me=u.useCallback(()=>Ft(this,null,function*(){e.exportImage("webp",{scale:2,quality:1})}),[e]),Ve=u.useCallback(()=>Ft(this,null,function*(){e.exportImage("svg",{scale:1,quality:1})}),[e]),lt=u.useCallback(()=>Ft(this,null,function*(){e.copyJson()}),[e]),Ye=u.useCallback(()=>Ft(this,null,function*(){e.exportJson()}),[e]),ct=r>0,pt=r>1,tr=r>2;return u.createElement(u.Fragment,null,ct?u.createElement(u.Fragment,null,u.createElement(Hr,{onClick:g,kbd:"#D",id:"TD-ContextMenu-Duplicate"},u.createElement(st,{id:"duplicate"})),u.createElement(Hr,{onClick:l,kbd:"\u21E7H",id:"TD-ContextMenu-Flip_Horizontal"},u.createElement(st,{id:"flip.horizontal"})),u.createElement(Hr,{onClick:h,kbd:"\u21E7V",id:"TD-ContextMenu-Flip_Vertical"},u.createElement(st,{id:"flip.vertical"})),u.createElement(Hr,{onClick:f,kbd:"#\u21E7L",id:"TD-ContextMenu- Lock_Unlock"},u.createElement(st,{id:"lock"})," / ",u.createElement(st,{id:"unlock"})),(pt||s)&&u.createElement(qr,null),pt&&u.createElement(Hr,{onClick:C,kbd:"#G",id:"TD-ContextMenu-Group"},u.createElement(st,{id:"group"})),s&&u.createElement(Hr,{onClick:C,kbd:"#G",id:"TD-ContextMenu-Ungroup"},u.createElement(st,{id:"ungroup"})),u.createElement(qr,null),u.createElement(J0,{label:t.formatMessage({id:"move"}),id:"TD-ContextMenu-Move"},u.createElement(Hr,{onClick:k,kbd:"\u21E7]",id:"TD-ContextMenu-Move-To_Front"},u.createElement(st,{id:"to.front"})),u.createElement(Hr,{onClick:R,kbd:"]",id:"TD-ContextMenu-Move-Forward"},u.createElement(st,{id:"forward"})),u.createElement(Hr,{onClick:b,kbd:"[",id:"TD-ContextMenu-Move-Backward"},u.createElement(st,{id:"backward"})),u.createElement(Hr,{onClick:y,kbd:"\u21E7[",id:"TD-ContextMenu-Move-To_Back"},u.createElement(st,{id:"back"}))),u.createElement(_Y,null),pt&&u.createElement(yY,{hasTwoOrMore:pt,hasThreeOrMore:tr}),u.createElement(qr,null),u.createElement(Hr,{onClick:O,kbd:"#X",id:"TD-ContextMenu-Cut"},u.createElement(st,{id:"cut"})),u.createElement(Hr,{onClick:B,kbd:"#C",id:"TD-ContextMenu-Copy"},u.createElement(st,{id:"copy"})),u.createElement(Hr,{onClick:F,kbd:"#V",id:"TD-ContextMenu-Paste"},u.createElement(st,{id:"paste"})),u.createElement(qr,null),u.createElement(J0,{label:`${t.formatMessage({id:"copy.as"})}...`,size:"small",id:"TD-ContextMenu-Copy-As"},u.createElement(Hr,{onClick:j,id:"TD-ContextMenu-Copy-as-SVG"},"SVG"),u.createElement(Hr,{onClick:J,id:"TD-ContextMenu-Copy-As-PNG"},"PNG"),i&&u.createElement(Hr,{onClick:lt,id:"TD-ContextMenu-Copy_as_JSON"},"JSON")),u.createElement(J0,{label:`${t.formatMessage({id:"export.as"})}...`,size:"small",id:"TD-ContextMenu-Export"},u.createElement(Hr,{onClick:Ve,id:"TD-ContextMenu-Export-SVG"},"SVG"),u.createElement(Hr,{onClick:ne,id:"TD-ContextMenu-Export-PNG"},"PNG"),u.createElement(Hr,{onClick:le,id:"TD-ContextMenu-Export-JPG"},"JPG"),u.createElement(Hr,{onClick:me,id:"TD-ContextMenu-Export-WEBP"},"WEBP"),i&&u.createElement(Hr,{onClick:Ye,id:"TD-ContextMenu-Export-JSON"},"JSON")),u.createElement(qr,null),u.createElement(Hr,{onClick:A,kbd:"\u232B",id:"TD-ContextMenu-Delete"},u.createElement(st,{id:"delete"}))):u.createElement(u.Fragment,null,u.createElement(Hr,{onClick:F,kbd:"#V",id:"TD-ContextMenu-Paste"},u.createElement(st,{id:"paste"})),u.createElement(Hr,{onClick:ce,kbd:"#Z",id:"TD-ContextMenu-Undo"},u.createElement(st,{id:"undo"})),u.createElement(Hr,{onClick:re,kbd:"#\u21E7Z",id:"TD-ContextMenu-Redo"},u.createElement(st,{id:"redo"}))))});function yY({hasThreeOrMore:e}){let t=Dr(),r=u.useCallback(()=>{t.align("top")},[t]),i=u.useCallback(()=>{t.align("centerVertical")},[t]),s=u.useCallback(()=>{t.align("bottom")},[t]),l=u.useCallback(()=>{t.stretch("vertical")},[t]),h=u.useCallback(()=>{t.distribute("vertical")},[t]),g=u.useCallback(()=>{t.align("left")},[t]),f=u.useCallback(()=>{t.align("centerHorizontal")},[t]),C=u.useCallback(()=>{t.align("right")},[t]),y=u.useCallback(()=>{t.stretch("horizontal")},[t]),b=u.useCallback(()=>{t.distribute("horizontal")},[t]),R=qo();return u.createElement(D0,null,u.createElement(eu,{id:"TD-ContextMenu-Align-Distribute-Trigger"},u.createElement(st,{id:"align.distribute"})),u.createElement(el,{container:R.current},u.createElement(A0,{asChild:!0,sideOffset:4,alignOffset:-2},u.createElement(wY,{numberOfSelected:e?"threeOrMore":"twoOrMore"},u.createElement(Qi,{onClick:g,id:"TD-ContextMenu-Align_Distribute-AlignLeft"},u.createElement(ec,null)),u.createElement(Qi,{onClick:f,id:"TD-ContextMenu-Align_Distribute-AlignCenterHorizontal"},u.createElement(Ju,null)),u.createElement(Qi,{onClick:C,id:"TD-ContextMenu-Align_Distribute-AlignRight"},u.createElement(tc,null)),u.createElement(Qi,{onClick:y,id:"TD-ContextMenu-Align_Distribute-StretchHorizontal"},u.createElement(sc,null)),e&&u.createElement(Qi,{onClick:b,id:"TD-ContextMenu-Align_Distribute-SpaceEvenlyHorizontal"},u.createElement(ic,null)),u.createElement(Qi,{onClick:r,id:"TD-ContextMenu-Align_Distribute-AlignTop"},u.createElement(rc,null)),u.createElement(Qi,{onClick:i,id:"TD-ContextMenu-Align_Distribute-AlignCenterVertical"},u.createElement(Qu,null)),u.createElement(Qi,{onClick:s,id:"TD-ContextMenu-Align_Distribute-AlignBottom"},u.createElement(qu,null)),u.createElement(Qi,{onClick:l,id:"TD-ContextMenu-Align_Distribute-StretchVertical"},u.createElement(ac,null)),e&&u.createElement(Qi,{onClick:h,id:"TD-ContextMenu-Align_Distribute-SpaceEvenlyVertical"},u.createElement(oc,null)),u.createElement(Q0,{offset:13})))))}var wY=qe(Xo,{display:"grid",variants:{numberOfSelected:{threeOrMore:{gridTemplateColumns:"repeat(5, auto)"},twoOrMore:{gridTemplateColumns:"repeat(4, auto)"}}}}),bY=e=>e.appState.currentPageId,xY=e=>e.document.pages;function _Y(){let e=Dr(),t=e.useStore(bY),r=e.useStore(xY),i=Object.values(r).sort((l,h)=>(l.childIndex||0)-(h.childIndex||0)).filter(l=>l.id!==t),s=qo();return i.length===0?null:u.createElement(D0,null,u.createElement(eu,null,u.createElement(st,{id:"move.to.page"})),u.createElement(el,{container:s.current},u.createElement(A0,{sideOffset:4,alignOffset:-2,asChild:!0},u.createElement(Xo,null,i.map(({id:l,name:h},g)=>u.createElement(Hr,{key:l,disabled:l===t,onClick:()=>e.moveToPage(l)},h||`Page ${g}`)),u.createElement(Q0,{offset:13})))))}function J0({children:e,label:t,size:r,id:i}){let s=qo();return u.createElement(D0,null,u.createElement(eu,null,t),u.createElement(el,{container:s.current},u.createElement(A0,{sideOffset:4,alignOffset:-2,asChild:!0},u.createElement(Xo,{size:r},e,u.createElement(Q0,{offset:13})))))}var Q0=qe(Wu,{fill:"$panel"});function Qi(e){var t=e,{onSelect:r}=t,i=Ei(t,["onSelect"]);return u.createElement(T0,{dir:"ltr",onSelect:r,asChild:!0},u.createElement(gr,Y({},i)))}var Hr=e=>{var t=e,{id:r}=t,i=Ei(t,["id"]);return u.createElement(T0,{asChild:!0,id:r},u.createElement(Bn,Y({},i)))},eu=e=>{var t=e,{id:r}=t,i=Ei(t,["id"]);return u.createElement(h9,{asChild:!0,id:r},u.createElement(Bn,Y({hasArrow:!0},i)))},SY=u.memo(CY);function LY({error:e,resetErrorBoundary:t}){let r=Dr(),i=()=>{window.location.reload(),t()},s=()=>{let g=document.createElement("textarea");g.value=e.message,document.body.appendChild(g),g.select(),document.execCommand("copy"),g.remove()},l=()=>{r.saveProjectAs()},h=()=>{r.resetDocument(),t()};return u.createElement(RY,null,u.createElement(IY,null,u.createElement("div",null,"We've encountered an error!"),u.createElement("pre",null,u.createElement("code",null,e.message)),u.createElement(TY,null,u.createElement(Bn,{onClick:s},"Copy Error"),u.createElement(Bn,{onClick:i},"Refresh Page")),u.createElement(qr,null),u.createElement("p",null,"Keep getting this error?"," ",u.createElement("a",{onClick:l,title:"Download your project"},"Download your project")," ","as a backup and then"," ",u.createElement("a",{onClick:h,title:"Reset the document"},"reset the document"),".")))}var RY=qe("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"$canvas"}),IY=qe("div",{backgroundColor:"$panel",border:"1px solid $panelContrast",padding:"$5",borderRadius:8,boxShadow:"$panel",maxWidth:320,color:"$text",fontFamily:"$ui",fontSize:"$2",textAlign:"center",display:"flex",flexDirection:"column",gap:"$3","& > pre":{marginTop:"$3",marginBottom:"$3",textAlign:"left",whiteSpace:"pre-wrap",backgroundColor:"$hover",padding:"$4",borderRadius:"$2",fontFamily:'"Menlo", "Monaco", monospace',fontWeight:500},"& p":{fontFamily:"$body",lineHeight:1.7,padding:"$5",margin:0},"& a":{color:"$text",cursor:"pointer",textDecoration:"underline"},"& hr":{marginLeft:"-$5",marginRight:"-$5"}}),TY=qe("div",{display:"flex","& > button > div":{justifyContent:"center",textAlign:"center"}}),tu=qe("button",{position:"relative",height:"32px",width:"32px",backgroundColor:"$panel",borderRadius:"4px",padding:"0",margin:"0",outline:"none",border:"none",pointerEvents:"all",fontSize:"$0",color:"$text",cursor:"pointer",display:"grid",alignItems:"center",justifyContent:"center","& > *":{gridRow:1,gridColumn:1},"&:disabled":{opacity:"0.5"},"& > span":{width:"100%",height:"100%",display:"flex",alignItems:"center"},variants:{bp:{mobile:{backgroundColor:"transparent"},small:{"&:hover:not(:disabled)":{backgroundColor:"$hover"}}},size:{small:{height:32,width:32,"& svg:nth-of-type(1)":{height:"16px",width:"16px"}},medium:{height:44,width:44,"& svg:nth-of-type(1)":{height:"18px",width:"18px"}},large:{height:44,width:44,"& svg:nth-of-type(1)":{height:"20px",width:"20px"}}},isActive:{true:{color:"$selected"}}}});function DY({onSelect:e}){return u.createElement(AY,null,u.createElement(tu,{onClick:e},u.createElement(Z9,null)))}var AY=qe("div",{opacity:1,zIndex:100,backgroundColor:"transparent","& svg":{color:"$text"},"&:hover svg":{color:"$text"}}),kY=e=>e.appState.isLoading;function PY(){let e=Dr().useStore(kY);return u.createElement(MY,{hidden:!e},u.createElement(st,{id:"loading",values:{dots:"..."}}))}var MY=qe("div",{position:"absolute",top:0,left:"50%",transform:"translate(-50%, 0)",borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px",padding:"8px 16px",fontFamily:"var(--fonts-ui)",fontSize:"var(--fontSizes-1)",boxShadow:"var(--shadows-panel)",backgroundColor:"white",zIndex:200,pointerEvents:"none","& > div > *":{pointerEvents:"all"},variants:{transform:{hidden:{transform:"translate(-50%, 100%)"},visible:{transform:"translate(-50%, 0%)"}}}});function OY({children:e,onClose:t,container:r}){return u.createElement(V0,{container:r},u.createElement(jY,null),u.createElement(UY,{onKeyDown:i=>{switch(i.key){case"Escape":t?.();break}}},e))}var BY=qe(p5,{marginBottom:20,color:"$text",fontSize:"$2",lineHeight:1.5,textAlign:"center",maxWidth:"62%",minWidth:0,alignSelf:"center"}),$Y=N0,FY=OY,HY=BY,id=ol,NY=Pc,VY=({container:e})=>{let{setDialogState:t,dialogState:r,onCancel:i,onNo:s,onYes:l}=nd(),h=Yn(),g={saveFirstTime:h.formatMessage({id:"dialog.save.firsttime"}),saveAgain:h.formatMessage({id:"dialog.save.again"})};return u.createElement($Y,{open:r!==null},u.createElement(FY,{onClose:()=>t(null),container:e},r&&u.createElement(HY,null,g[r]),u.createElement("div",{style:{width:"100%",gap:"$6",display:"flex",justifyContent:"space-between"}},i&&u.createElement(NY,{asChild:!0},u.createElement(Xa,{css:{color:"$text"},onClick:()=>{i(),t(null)}},u.createElement(st,{id:"dialog.cancel"}))),u.createElement("div",{style:{flexShrink:0}},s&&u.createElement(id,{asChild:!0},u.createElement(Xa,{onClick:()=>{s(),t(null)}},u.createElement(st,{id:"dialog.no"}))),l&&u.createElement(id,{asChild:!0},u.createElement(Xa,{css:{backgroundColor:"#2F80ED",color:"White"},onClick:()=>{l(),t(null)}},u.createElement(st,{id:"dialog.yes"})))))))},jY=qe(il,{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, .15)",pointerEvents:"all"}),j0e=qe(il,{backgroundColor:"rgba(0, 0, 0, .15)",position:"absolute",pointerEvents:"all",inset:0}),UY=qe(j0,{position:"fixed",font:"$ui",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"max-content",padding:"$3",pointerEvents:"all",backgroundColor:"$panel",borderRadius:"$3",display:"flex",flexDirection:"column",justifyContent:"center",fontFamily:"$ui",border:"1px solid $panelContrast",boxShadow:"$panel"}),Xa=qe("button",{all:"unset",display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:"$2",padding:"0 15px",fontSize:"$1",lineHeight:1,fontWeight:"normal",height:36,color:"$text",cursor:"pointer",minWidth:48}),od=u.forwardRef((e,t)=>{var r=e,{icon:i}=r,s=Ei(r,["icon"]);return u.createElement(ZY,null,u.createElement(zY,ye(Y({},s),{ref:t})),i?u.createElement(GY,null,i):null)}),ZY=qe("div",{position:"relative",width:"100%",height:"min-content"}),zY=qe("input",{color:"$text",border:"none",textAlign:"left",width:"100%",paddingLeft:"$3",paddingRight:"$6",backgroundColor:"$background",height:"32px",outline:"none",fontFamily:"$ui",fontSize:"$1","&:focus":{backgroundColor:"$hover"},borderRadius:"$2"}),GY=qe(ki,{top:0,right:0,position:"absolute",paddingLeft:"$3",paddingRight:"$3",pointerEvents:"none",color:"$text"}),WY=({isOpen:e,onClose:t})=>{let r=Dr(),i=qo(),s=Yn(),[l,h]=u.useState(r.document.name),g=u.useCallback(y=>{let b=y.target.value.trimStart();h(b)},[]);function f(y){y.stopPropagation()}let C=u.useCallback(y=>{switch(y.key){case"Enter":{r.saveProjectAs(l),t();break}case"Escape":{t();break}}},[]);return u.createElement(N0,{open:e},u.createElement(V0,{container:i.current},u.createElement(YY,{onPointerDown:t}),u.createElement(KY,{dir:"ltr",onKeyDown:f,onKeyUp:f},u.createElement(qY,{placeholder:s.formatMessage({id:"enter.file.name"}),value:l,onChange:g,onKeyDown:C,icon:u.createElement(k0,null)}),u.createElement(XY,null,u.createElement(ol,{asChild:!0},u.createElement(Xa,{onClick:t},u.createElement(st,{id:"cancel"}))),u.createElement(ol,{asChild:!0},u.createElement(Xa,{css:{backgroundColor:"#2F80ED",color:"White"},onClick:()=>{let y=l.trim().replace(/\.tldr$/,"");r.saveProjectAs(y),t()}},u.createElement(st,{id:"save"})))))))},KY=qe(j0,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:300,maxWidth:"fit-content",maxHeight:"85vh",marginTop:"-5vh",pointerEvents:"all",backgroundColor:"$panel",padding:"$3",borderRadius:"$2",font:"$ui",zIndex:999999,"&:focus":{outline:"none"}}),YY=qe(il,{backgroundColor:"rgba(0, 0, 0, .15)",position:"absolute",pointerEvents:"all",inset:0,zIndex:999998}),XY=qe("div",{width:"100%",display:"flex",alignItems:"center",gap:8,justifyContent:"flex-end",marginTop:10}),qY=qe(od,{background:"$hover"});function ar(e){var t=e,{onSelect:r,id:i}=t,s=Ei(t,["onSelect","id"]);return u.createElement(fr.ck,{dir:"ltr",asChild:!0,onSelect:r,id:i},u.createElement(Bn,Y({},s)))}var Yr=e=>e.preventDefault();function Mi({checked:e,disabled:t=!1,variant:r,onCheckedChange:i,kbd:s,id:l,children:h}){return u.createElement(fr.oC,{dir:"ltr",onSelect:Yr,onCheckedChange:i,checked:e,disabled:t,asChild:!0,id:l},u.createElement(Bn,{kbd:s,variant:r,hasIndicator:!0},h))}var li=e=>e.stopPropagation();function Ss({sideOffset:e=4,alignOffset:t=0,children:r,align:i,variant:s,id:l,overflow:h=!1,side:g="bottom"}){let f=qo();return u.createElement(fr.Uv,{container:f.current,dir:"ltr"},u.createElement(fr.VY,{align:i,alignOffset:t,sideOffset:e,onEscapeKeyDown:li,asChild:!0,id:l,side:g},u.createElement(JY,{variant:s,overflow:h},r)))}var JY=qe(Xo,{width:"fit-content",height:"fit-content",minWidth:0,maxHeight:"100vh",overflowY:"auto",overflowX:"hidden","&::webkit-scrollbar":{display:"none"},"-ms-overflow-style":"none",scrollbarWidth:"none",variants:{variant:{horizontal:{flexDirection:"row"},menu:{minWidth:128}},overflow:{true:{maxHeight:"60vh"}}}}),U0e=qe(fr.Z0,{backgroundColor:"$hover",height:1,marginTop:"$2",marginRight:"-$2",marginBottom:"$2",marginLeft:"-$2"}),dl=qe(fr.Rk,{height:"32px",width:"32px",backgroundColor:"$panel",borderRadius:"4px",padding:"0",margin:"0",display:"flex",alignItems:"center",justifyContent:"center",outline:"none",border:"none",pointerEvents:"all",cursor:"pointer",variants:{isActive:{true:{backgroundColor:"$selected",color:"white"},false:{}},bp:{mobile:{},small:{}}},compoundVariants:[{isActive:!1,bp:"small",css:{"&:focus":{backgroundColor:"$hover"},"&:hover:not(:disabled)":{backgroundColor:"$hover"}}}]});function Jo({children:e,size:t,overflow:r=!1,disabled:i=!1,label:s,id:l}){return u.createElement(fr.Tr,{key:l},u.createElement(fr.fF,{dir:"ltr",asChild:!0},u.createElement(Bn,{disabled:i,hasArrow:!0},s)),u.createElement(fr.tu,{asChild:!0,sideOffset:4,alignOffset:-4},u.createElement(Xo,{size:t,overflow:r},e,u.createElement(fr.Eh,{offset:13}))))}function sd(e){var t=e,{id:r,children:i}=t,s=Ei(t,["id","children"]);return u.createElement(fr.xz,{asChild:!0,id:r},u.createElement(gr,Y({},s),i))}var QY=e=>e.settings.dockPosition,eX=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,tX=e=>{let t=e.document.pages[e.appState.currentPageId],{selectedIds:r}=e.document.pageStates[e.appState.currentPageId];return r.every(i=>t.shapes[i].isLocked)},rX=e=>{let t=e.document.pages[e.appState.currentPageId],{selectedIds:r}=e.document.pageStates[e.appState.currentPageId];return r.every(i=>t.shapes[i].isAspectRatioLocked)},nX=e=>{let t=e.document.pages[e.appState.currentPageId],r=e.document.pageStates[e.appState.currentPageId].selectedIds.map(i=>t.shapes[i]);return r.every(i=>i.children!==void 0||i.parentId===r[0].parentId&&r[0].parentId!==e.appState.currentPageId)},iX=e=>{let{selectedIds:t}=e.document.pageStates[e.appState.currentPageId];return t.length>0},oX=e=>{let{selectedIds:t}=e.document.pageStates[e.appState.currentPageId];return t.length>1};function sX(){let e=Dr(),t=Yn(),r=e.useStore(tX),i=e.useStore(rX),s=e.useStore(nX),l=e.useStore(iX),h=e.useStore(oX),g=e.useStore(eX),f=e.useStore(QY),C=g>1,y=g>2,b=u.useCallback(()=>{e.rotate()},[e]),R=u.useCallback(()=>{e.duplicate()},[e]),k=u.useCallback(()=>{e.toggleLocked()},[e]),A=u.useCallback(()=>{e.toggleAspectRatioLocked()},[e]),O=u.useCallback(()=>{e.group()},[e]),B=u.useCallback(()=>{e.moveToBack()},[e]),F=u.useCallback(()=>{e.moveBackward()},[e]),j=u.useCallback(()=>{e.moveForward()},[e]),J=u.useCallback(()=>{e.moveToFront()},[e]),ce=u.useCallback(()=>{e.setShapeProps({rotation:0})},[e]),re=u.useCallback(()=>{e.align("top")},[e]),ne=u.useCallback(()=>{e.align("centerVertical")},[e]),le=u.useCallback(()=>{e.align("bottom")},[e]),me=u.useCallback(()=>{e.stretch("vertical")},[e]),Ve=u.useCallback(()=>{e.distribute("vertical")},[e]),lt=u.useCallback(()=>{e.align("left")},[e]),Ye=u.useCallback(()=>{e.align("centerHorizontal")},[e]),ct=u.useCallback(()=>{e.align("right")},[e]),pt=u.useCallback(()=>{e.stretch("horizontal")},[e]),tr=u.useCallback(()=>{e.distribute("horizontal")},[e]),qt=u.useCallback(_r=>{e.setMenuOpen(_r)},[e]);return u.createElement(fr.fC,{dir:"ltr",onOpenChange:qt},u.createElement(fr.xz,{dir:"ltr",asChild:!0,id:"TD-Tools-Dots"},u.createElement(gr,{variant:"circle"},u.createElement(G9,null))),u.createElement(Ss,{sideOffset:16,side:f==="bottom"||f==="top"?"top":f},u.createElement(u.Fragment,null,u.createElement(hl,null,u.createElement(Kr,{label:t.formatMessage({id:"duplicate"}),kbd:"#D",id:"TD-Tools-Copy"},u.createElement(gr,{disabled:!l,onClick:R},u.createElement(F9,null))),u.createElement(Kr,{label:t.formatMessage({id:"rotate"}),id:"TD-Tools-Rotate"},u.createElement(gr,{disabled:!l,onClick:b},u.createElement(x4,null))),u.createElement(Kr,{label:t.formatMessage({id:r?"unlock":"lock"}),kbd:"#L",id:"TD-Tools-Lock"},u.createElement(gr,{disabled:!l,onClick:k},r?u.createElement(s4,null):u.createElement(l4,null))),u.createElement(Kr,{label:t.formatMessage({id:i?"unlock.aspect.ratio":"lock.aspect.ratio"}),id:"TD-Tools-AspectRatio"},u.createElement(gr,{disabled:!l,onClick:A},i?u.createElement(I9,null):u.createElement(D9,null))),u.createElement(Kr,{label:t.formatMessage({id:"group"}),kbd:"#G",id:"TD-Tools-Group"},u.createElement(gr,{disabled:!l||!s&&!h,onClick:O},u.createElement(J9,null)))),u.createElement(hl,null,u.createElement(Kr,{label:t.formatMessage({id:"move.to.back"}),kbd:"#\u21E7[",id:"TD-Tools-PinBottom"},u.createElement(gr,{disabled:!l,onClick:B},u.createElement(g4,null))),u.createElement(Kr,{label:t.formatMessage({id:"move.backward"}),kbd:"#[",id:"TD-Tools-ArrowDown"},u.createElement(gr,{disabled:!l,onClick:F},u.createElement(b9,null))),u.createElement(Kr,{label:t.formatMessage({id:"move.forward"}),kbd:"#]",id:"TD-Tools-ArrowUp"},u.createElement(gr,{disabled:!l,onClick:j},u.createElement(L9,null))),u.createElement(Kr,{label:t.formatMessage({id:"move.to.front"}),kbd:"#\u21E7]",id:"TD-Tools-PinTop"},u.createElement(gr,{disabled:!l,onClick:J},u.createElement(v4,null))),u.createElement(Kr,{label:t.formatMessage({id:"reset.angle"}),id:"TD-Tools-ResetAngle"},u.createElement(gr,{disabled:!l,onClick:ce},u.createElement(y9,null)))),u.createElement(qr,null),u.createElement(hl,null,u.createElement(Kr,{label:t.formatMessage({id:"align.left"}),id:"TD-Tools-AlignLeft"},u.createElement(gr,{disabled:!C,onClick:lt},u.createElement(ec,null))),u.createElement(Kr,{label:t.formatMessage({id:"align.center.x"}),id:"TD-Tools-AlignCenterHorizontal"},u.createElement(gr,{disabled:!C,onClick:Ye},u.createElement(Ju,null))),u.createElement(Kr,{label:t.formatMessage({id:"align.right"}),id:"TD-Tools-AlignRight"},u.createElement(gr,{disabled:!C,onClick:ct},u.createElement(tc,null))),u.createElement(Kr,{label:t.formatMessage({id:"stretch.x"}),id:"TD-Tools-StretchHorizontal"},u.createElement(gr,{disabled:!C,onClick:pt},u.createElement(sc,null))),u.createElement(Kr,{label:t.formatMessage({id:"distribute.x"}),id:"TD-Tools-SpaceEvenlyHorizontal"},u.createElement(gr,{disabled:!y,onClick:tr},u.createElement(ic,null)))),u.createElement(hl,null,u.createElement(Kr,{label:t.formatMessage({id:"align.top"}),id:"TD-Tools-AlignTop"},u.createElement(gr,{disabled:!C,onClick:re},u.createElement(rc,null))),u.createElement(Kr,{label:t.formatMessage({id:"align.center.y"}),id:"TD-Tools-AlignCenterVertical"},u.createElement(gr,{disabled:!C,onClick:ne},u.createElement(Qu,null))),u.createElement(Kr,{label:t.formatMessage({id:"align.bottom"}),id:"TD-Tools-AlignBottom"},u.createElement(gr,{disabled:!C,onClick:le},u.createElement(qu,null))),u.createElement(Kr,{label:t.formatMessage({id:"stretch.y"}),id:"TD-Tools-StretchVertical"},u.createElement(gr,{disabled:!C,onClick:me},u.createElement(ac,null))),u.createElement(Kr,{label:t.formatMessage({id:"distribute.y"}),id:"TD-Tools-SpaceEvenlyVertical"},u.createElement(gr,{disabled:!y,onClick:Ve},u.createElement(oc,null)))))))}var hl=qe("div",{position:"relative",display:"flex",width:"100%",background:"none",border:"none",cursor:"pointer",outline:"none",alignItems:"center",justifyContent:"flex-start",padding:0}),aX=e=>e.appState.isEmptyCanvas&&Object.keys(e.document.pages[e.appState.currentPageId].shapes).length>0,lX=e=>e.settings.isDebugMode,uX=e=>e.settings.dockPosition,cX=u.memo(function(){let e=Dr(),t=e.useStore(aX),r=e.useStore(uX),i=e.useStore(lX),s={bottom:r==="bottom"&&i?120:r==="bottom"?80:i?60:20,left:"50%",transform:"translate(-50%,0)"};return t?u.createElement(dX,{id:"TD-Tools-Back_to_content",style:Y({},s)},u.createElement(Bn,{onClick:e.zoomToContent},u.createElement(st,{id:"zoom.to.content"}))):null}),dX=qe(Xo,{pointerEvents:"all",width:"fit-content",minWidth:0,position:"fixed",bottom:0});function ad(e){let t=e,{size:r=16}=t,i=Ei(t,["size"]);return u.createElement("svg",Y({width:24,height:24},i),u.createElement("circle",{cx:12,cy:12,r:r/2}))}function hX(){return u.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},u.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2.5,strokeLinecap:"round",strokeDasharray:50.26548*.1}))}var fX=`${50.26548*.025} ${50.26548*.1}`;function pX(){return u.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},u.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2.5,strokeLinecap:"round",strokeDasharray:fX}))}function gX(){return u.createElement("svg",{width:"24",height:"24",viewBox:"1 1.5 21 22",fill:"currentColor",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M10.0162 19.2768C10.0162 19.2768 9.90679 19.2517 9.6879 19.2017C9.46275 19.1454 9.12816 19.0422 8.68413 18.8921C8.23384 18.7358 7.81482 18.545 7.42707 18.3199C7.03307 18.101 6.62343 17.7883 6.19816 17.3818C5.77289 16.9753 5.33511 16.3718 4.88482 15.5713C4.43453 14.7645 4.1531 13.8545 4.04053 12.8414C3.92795 11.822 4.04991 10.8464 4.40639 9.91451C4.76286 8.98266 5.39452 8.10084 6.30135 7.26906C7.21444 6.44353 8.29325 5.83377 9.5378 5.43976C10.7823 5.05202 11.833 4.92068 12.6898 5.04576C13.5466 5.16459 14.3878 5.43664 15.2133 5.86191C16.0388 6.28718 16.7768 6.8688 17.4272 7.60678C18.0714 8.34475 18.5404 9.21406 18.8344 10.2147C19.1283 11.2153 19.1721 12.2598 18.9657 13.348C18.7593 14.4299 18.2872 15.4337 17.5492 16.3593C16.8112 17.2849 15.9263 18.0072 14.8944 18.5263C13.8624 19.0391 12.9056 19.3174 12.0238 19.3612C11.142 19.405 10.2101 19.2705 9.22823 18.9578C8.24635 18.6451 7.35828 18.151 6.56402 17.4756C5.77601 16.8002 6.08871 16.8658 7.50212 17.6726C8.90927 18.4731 10.1444 18.8484 11.2076 18.7983C12.2645 18.7545 13.2965 18.4825 14.3034 17.9822C15.3102 17.4819 16.1264 16.8221 16.7518 16.0028C17.3772 15.1835 17.7681 14.3111 17.9244 13.3855C18.0808 12.4599 18.0401 11.5781 17.8025 10.74C17.5586 9.902 17.1739 9.15464 16.6486 8.49797C16.1233 7.8413 15.2289 7.27844 13.9656 6.80939C12.7086 6.34034 11.4203 6.20901 10.1007 6.41539C8.78732 6.61552 7.69599 7.06893 6.82669 7.77564C5.96363 8.48859 5.34761 9.26409 4.97863 10.1021C4.60964 10.9402 4.45329 11.8376 4.50958 12.7945C4.56586 13.7513 4.79101 14.6238 5.18501 15.4118C5.57276 16.1998 5.96363 16.8002 6.35764 17.2129C6.75164 17.6257 7.13313 17.9509 7.50212 18.1886C7.87736 18.4325 8.28074 18.642 8.71227 18.8171C9.15005 18.9922 9.47839 19.111 9.69728 19.1736C9.91617 19.2361 10.0256 19.2705 10.0256 19.2768H10.0162Z",strokeWidth:"2"}))}function mX(){return u.createElement("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},u.createElement("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2,strokeLinecap:"round"}))}function vX(e){return u.createElement("svg",Y({width:18,height:18,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4.656a.5.5 0 01.5-.5h9.7a.5.5 0 010 1H2.5a.5.5 0 01-.5-.5z"}),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.272 3a.578.578 0 00-.578.578v.578h3.311v-.578A.578.578 0 008.428 3H6.272zm3.733 1.156v-.578A1.578 1.578 0 008.428 2H6.272a1.578 1.578 0 00-1.578 1.578v.578H3.578a.5.5 0 00-.5.5V12.2a1.578 1.578 0 001.577 1.578h5.39a1.578 1.578 0 001.577-1.578V4.656a.5.5 0 00-.5-.5h-1.117zm-5.927 1V12.2a.578.578 0 00.577.578h5.39a.578.578 0 00.577-.578V5.156H4.078z"}),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.272 6.85a.5.5 0 01.5.5v3.233a.5.5 0 11-1 0V7.35a.5.5 0 01.5-.5zM8.428 6.85a.5.5 0 01.5.5v3.233a.5.5 0 11-1 0V7.35a.5.5 0 01.5-.5z"}))}function ld(e){var t=e,{flipHorizontal:r}=t,i=Ei(t,["flipHorizontal"]);return u.createElement("svg",Y({width:24,height:24,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",style:{transform:r?"scale(-1, 1)":"scale(1, 1)"}},i),u.createElement("path",{d:"M10.6707 8.5081C10.6707 10.1923 9.3004 11.5625 7.61631 11.5625H6.5351C6.35593 11.5625 6.21074 11.4173 6.21074 11.2382V11.13C6.21074 10.9508 6.35591 10.8057 6.5351 10.8057H7.61631C8.88313 10.8057 9.91387 9.77492 9.91387 8.5081C9.91387 7.24128 8.88313 6.21054 7.61631 6.21054H5.62155L6.99534 7.58433C7.14289 7.73183 7.14289 7.97195 6.99534 8.11944C6.85216 8.26251 6.60298 8.2623 6.46013 8.11944L4.44045 6.09971C4.36898 6.02824 4.32959 5.93321 4.32959 5.8321C4.32959 5.73106 4.36898 5.63598 4.44045 5.56454L6.46024 3.54472C6.60309 3.40176 6.85248 3.40176 6.99535 3.54472C7.14291 3.69218 7.14291 3.93234 6.99535 4.07979L5.62156 5.45368H7.61631C9.3004 5.45368 10.6707 6.82393 10.6707 8.5081Z"}))}function CX(e){return u.createElement("svg",Y({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),u.createElement("path",{d:"M12.4239 4.62C13.3572 4.62 14.1572 4.73333 14.8239 4.96C15.4906 5.17333 15.9772 5.43333 16.2839 5.74C16.3639 5.82 16.4039 5.94 16.4039 6.1V8.86H14.0639C13.9172 8.86 13.8439 8.78666 13.8439 8.64V7.26C13.4306 7.12666 12.9572 7.06 12.4239 7.06C11.6506 7.06 11.0639 7.18 10.6639 7.42C10.2639 7.66 10.0639 8.04666 10.0639 8.58V9C10.0639 9.38666 10.1639 9.69333 10.3639 9.92C10.5772 10.1333 11.0306 10.3467 11.7239 10.56L13.6439 11.14C14.4706 11.38 15.1172 11.66 15.5839 11.98C16.0506 12.3 16.3772 12.68 16.5639 13.12C16.7639 13.5467 16.8639 14.0733 16.8639 14.7V15.62C16.8639 16.7933 16.4039 17.7133 15.4839 18.38C14.5639 19.0467 13.2839 19.38 11.6439 19.38C10.6706 19.38 9.79723 19.2867 9.0239 19.1C8.2639 18.9133 7.71056 18.6533 7.3639 18.32C7.3239 18.28 7.29056 18.24 7.2639 18.2C7.25056 18.1467 7.2439 18.06 7.2439 17.94V15.74H7.6239C8.2239 16.1533 8.85056 16.4533 9.5039 16.64C10.1572 16.8267 10.9306 16.92 11.8239 16.92C12.6506 16.92 13.2506 16.7867 13.6239 16.52C14.0106 16.2533 14.2039 15.9333 14.2039 15.56V14.88C14.2039 14.6667 14.1639 14.48 14.0839 14.32C14.0172 14.16 13.8706 14.0133 13.6439 13.88C13.4172 13.7467 13.0572 13.6067 12.5639 13.46L10.6639 12.88C9.7839 12.6133 9.11056 12.3 8.6439 11.94C8.17723 11.58 7.85056 11.18 7.6639 10.74C7.49056 10.3 7.4039 9.83333 7.4039 9.34V8.38C7.4039 7.64666 7.61056 7 8.0239 6.44C8.43723 5.88 9.01723 5.44 9.7639 5.12C10.5239 4.78666 11.4106 4.62 12.4239 4.62Z"}))}function EX(e){return u.createElement("svg",Y({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),u.createElement("path",{d:"M8.16191 19H5.68191C5.53525 19 5.46191 18.9267 5.46191 18.78V5H8.76191C8.88191 5 8.97525 5.03333 9.04191 5.1C9.10858 5.15333 9.17525 5.27333 9.24191 5.46C9.72191 6.59333 10.1686 7.7 10.5819 8.78C11.0086 9.84667 11.4352 10.98 11.8619 12.18H12.1619C12.6019 10.9667 13.0352 9.79333 13.4619 8.66C13.8886 7.52667 14.3552 6.30667 14.8619 5H18.3219C18.4686 5 18.5419 5.07333 18.5419 5.22V19H16.0619C15.9152 19 15.8419 18.9267 15.8419 18.78V16.26C15.8419 15.5267 15.8486 14.8133 15.8619 14.12C15.8886 13.4267 15.9286 12.6867 15.9819 11.9C16.0486 11.1 16.1419 10.1933 16.2619 9.18H15.9019C15.4352 10.3533 14.9486 11.5667 14.4419 12.82C13.9486 14.06 13.4819 15.2333 13.0419 16.34H11.1019C11.0619 16.34 11.0152 16.3333 10.9619 16.32C10.9219 16.2933 10.8886 16.2467 10.8619 16.18C10.4619 15.18 10.0086 14.06 9.50191 12.82C9.00858 11.58 8.53525 10.3667 8.08191 9.18H7.70191C7.83525 10.18 7.93525 11.0733 8.00191 11.86C8.06858 12.6467 8.10858 13.3933 8.12191 14.1C8.14858 14.8067 8.16191 15.5267 8.16191 16.26V19Z"}))}function yX(e){return u.createElement("svg",Y({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),u.createElement("path",{d:"M7.68191 19C7.53525 19 7.46191 18.9267 7.46191 18.78V5H10.1219C10.2686 5 10.3419 5.07333 10.3419 5.22V16.56H13.4419V15.02H15.7619C15.9086 15.02 15.9819 15.0933 15.9819 15.24V19H7.68191Z"}))}function wX(){return u.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M1.72838 9.33987L8.84935 2.34732C9.23874 1.96494 9.86279 1.96539 10.2516 2.34831L13.5636 5.60975C13.9655 6.00555 13.9607 6.65526 13.553 7.04507L8.13212 12.2278C7.94604 12.4057 7.69851 12.505 7.44107 12.505L6.06722 12.505L3.83772 12.505C3.5673 12.505 3.30842 12.3954 3.12009 12.2014L1.7114 10.7498C1.32837 10.3551 1.33596 9.72521 1.72838 9.33987Z",stroke:"currentColor"}),u.createElement("line",{x1:"6.01807",y1:"12.5",x2:"10.7959",y2:"12.5",stroke:"currentColor",strokeLinecap:"round"}),u.createElement("line",{x1:"5.50834",y1:"5.74606",x2:"10.1984",y2:"10.4361",stroke:"currentColor"}))}function bX(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},u.createElement("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"}))}function xX(){return u.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},u.createElement("path",{d:"M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L11.1464 3.14645C11.3417 2.95118 11.6583 2.95118 11.8536 3.14645C12.0488 3.34171 12.0488 3.65829 11.8536 3.85355L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z"}))}function _X(){let e=Dr(),t=Yn(),r=u.useCallback(()=>{e.delete()},[e]),i=e.useStore(s=>s.appState.status==="idle"&&s.document.pageStates[s.appState.currentPageId].selectedIds.length>0);return u.createElement(Kr,{label:t.formatMessage({id:"delete"}),kbd:"\u232B",id:"TD-Delete"},u.createElement(gr,{variant:"circle",disabled:!i,onSelect:r},u.createElement(vX,null)))}var SX=e=>e.settings.language,LX=()=>{let e=Dr(),t=e.useStore(SX),r=u.useCallback(i=>{e.setSetting("language",i)},[e]);return u.createElement(Ss,{variant:"menu",overflow:!0,id:"language-menu",side:"left",sideOffset:8},q0.map(({locale:i,label:s})=>u.createElement(Mi,{key:i,checked:t===i,onCheckedChange:()=>r(i),id:`TD-MenuItem-Language-${i}`},s)),u.createElement(qr,null),u.createElement("a",{href:"https://github.com/tldraw/tldraw/blob/main/guides/translation.md",target:"_blank",rel:"nofollow"},u.createElement(ar,{id:"TD-MenuItem-Translation-Link"},u.createElement(st,{id:"translation.link"}),u.createElement(ki,null,u.createElement(K9,null)))))};function RX({onOpenChange:e}){let t=Yn(),r=qo(),i={Tools:[{label:t.formatMessage({id:"select"}),kbd:"1"},{label:t.formatMessage({id:"draw"}),kbd:"2"},{label:t.formatMessage({id:"eraser"}),kbd:"3"},{label:t.formatMessage({id:"rectangle"}),kbd:"4"},{label:t.formatMessage({id:"ellipse"}),kbd:"5"},{label:t.formatMessage({id:"triangle"}),kbd:"6"},{label:t.formatMessage({id:"line"}),kbd:"7"},{label:t.formatMessage({id:"arrow"}),kbd:"8"},{label:t.formatMessage({id:"text"}),kbd:"9"},{label:t.formatMessage({id:"sticky"}),kbd:"0"}],View:[{label:t.formatMessage({id:"zoom.in"}),kbd:"#+"},{label:t.formatMessage({id:"zoom.out"}),kbd:"#-"},{label:`${t.formatMessage({id:"zoom.to"})} 100%`,kbd:"\u21E7+0"},{label:t.formatMessage({id:"zoom.to.fit"}),kbd:"\u21E7+1"},{label:t.formatMessage({id:"zoom.to.selection"}),kbd:"\u21E7+2"},{label:t.formatMessage({id:"preferences.dark.mode"}),kbd:"#\u21E7D"},{label:t.formatMessage({id:"preferences.focus.mode"}),kbd:"#."},{label:t.formatMessage({id:"preferences.show.grid"}),kbd:"#\u21E7G"}],Transform:[{label:t.formatMessage({id:"flip.horizontal"}),kbd:"\u21E7H"},{label:t.formatMessage({id:"flip.vertical"}),kbd:"\u21E7V"},{label:`${t.formatMessage({id:"lock"})} / ${t.formatMessage({id:"unlock"})}`,kbd:"#\u21E7L"},{label:`${t.formatMessage({id:"move"})} ${t.formatMessage({id:"to.front"})}`,kbd:"\u21E7]"},{label:`${t.formatMessage({id:"move"})} ${t.formatMessage({id:"forward"})}`,kbd:"]"},{label:`${t.formatMessage({id:"move"})} ${t.formatMessage({id:"backward"})}`,kbd:"["},{label:`${t.formatMessage({id:"move"})} ${t.formatMessage({id:"back"})}`,kbd:"\u21E7["}],File:[{label:t.formatMessage({id:"new.project"}),kbd:"#N"},{label:t.formatMessage({id:"open"}),kbd:"#O"},{label:t.formatMessage({id:"save"}),kbd:"#S"},{label:t.formatMessage({id:"save.as"}),kbd:"#\u21E7S"},{label:t.formatMessage({id:"upload.media"}),kbd:"#U"}],Edit:[{label:t.formatMessage({id:"undo"}),kbd:"#Z"},{label:t.formatMessage({id:"redo"}),kbd:"#\u21E7Z"},{label:t.formatMessage({id:"cut"}),kbd:"#X"},{label:t.formatMessage({id:"copy"}),kbd:"#C"},{label:t.formatMessage({id:"paste"}),kbd:"#V"},{label:t.formatMessage({id:"select.all"}),kbd:"#A"},{label:t.formatMessage({id:"delete"}),kbd:"\u232B"},{label:t.formatMessage({id:"duplicate"}),kbd:"#D"}]};return u.createElement(gn.fC,{onOpenChange:e},u.createElement(gn.xz,{asChild:!0},u.createElement(Bn,{id:"TD-HelpItem-Keyboard",variant:"wide"},u.createElement(st,{id:"keyboard.shortcuts"}))),u.createElement(gn.h_,{container:r.current},u.createElement(PX,null),u.createElement(AX,null,u.createElement(OX,null,u.createElement(st,{id:"keyboard.shortcuts"}),u.createElement(gn.x8,{asChild:!0},u.createElement(MX,null,u.createElement(N9,null)))),u.createElement(kX,{bp:yi},Object.entries(i).map(([s,l])=>u.createElement(ru,{key:s},u.createElement(IX,null,u.createElement(st,{id:`menu.${s.toLocaleLowerCase()}`})),u.createElement(TX,null,l.map(h=>u.createElement(DX,{key:h.label},h.label,u.createElement(Y0,{variant:"menu"},h.kbd))))))))))}var IX=qe("h3",{fontSize:"$2",color:"$text",fontFamily:"$ui",margin:0,paddingBottom:"$5"}),ru=qe("div",{breakInside:"avoid",paddingBottom:24}),TX=qe("ul",{listStyleType:"none",width:"100%",padding:0,margin:0}),DX=qe("li",{display:"flex",alignItems:"center",justifyContent:"space-between",height:32,minHeight:32,width:"100%",outline:"none",color:"$text",fontFamily:"$ui",fontWeight:400,fontSize:"$1",borderRadius:4,userSelect:"none",margin:0,padding:"0 0"}),AX=qe(gn.VY,{borderRadius:6,boxShadow:"hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"fit-content",maxWidth:"90vw",maxHeight:"74vh",overflowY:"auto",padding:25,zIndex:9999,pointerEvents:"all",background:"$panel","&:focus":{outline:"none"}}),kX=qe("div",{maxWidth:"100%",width:"fit-content",height:"fit-content",overflowY:"auto",columnGap:64,variants:{bp:{mobile:{columns:1,[`& ${ru}`]:{minWidth:"0px"}},small:{columns:2,[`& ${ru}`]:{minWidth:"200px"}},medium:{columns:3},large:{columns:3}}}}),PX=qe(gn.aV,{backgroundColor:"$overlay",position:"fixed",inset:0,zIndex:9998}),MX=qe(tu,{fontFamily:"inherit",borderRadius:"100%",height:25,width:25,display:"inline-flex",alignItems:"center",justifyContent:"center",color:"$text",cursor:"pointer","&:hover":{backgroundColor:"$hover"}}),OX=qe(gn.Dx,{fontFamily:"$body",fontSize:"$3",color:"$text",paddingBottom:32,display:"flex",alignItems:"center",justifyContent:"space-between",margin:0}),BX=e=>e.settings.isDebugMode,$X=e=>e.settings.dockPosition;function FX(){let e=Dr(),t=e.useStore(BX),r=e.useStore($X),[i,s]=u.useState(!1);return u.createElement(sl.fC,null,u.createElement(ZX,{dir:"ltr",debug:t,side:r,bp:yi},u.createElement(sl.xz,{dir:"ltr",asChild:!0},u.createElement(jX,null,u.createElement(w4,null)))),u.createElement(sl.VY,{dir:"ltr",align:"end",side:"top",alignOffset:10,sideOffset:8,asChild:!0},u.createElement(UX,{style:{visibility:i?"hidden":"visible"}},u.createElement(HX,null),u.createElement(RX,{onOpenChange:s}),u.createElement(qr,null),u.createElement(VX,null))))}var HX=()=>u.createElement(fr.fC,{dir:"ltr"},u.createElement(fr.xz,{asChild:!0},u.createElement(Bn,{variant:"wide",hasArrow:!0},u.createElement(st,{id:"language"}))),u.createElement(LX,null)),NX=[{id:"github",icon:X9,url:"https://github.com/tldraw/tldraw"},{id:"twitter",icon:V4,url:"https://twitter.com/tldraw"},{id:"discord",icon:bX,url:"https://discord.gg/SBBEVCA4PG"},{id:"become.a.sponsor",icon:r4,url:"https://github.com/sponsors/steveruizok"}],VX=()=>u.createElement(u.Fragment,null,NX.map(e=>u.createElement("a",{key:e.id,href:e.url,target:"_blank",rel:"nofollow"},u.createElement(Bn,{id:`TD-Link-${e.id}`,variant:"wide"},u.createElement(st,{id:e.id}),u.createElement(ki,null,u.createElement(e.icon,null)))))),jX=qe("button",{width:32,height:32,borderRadius:"100%",display:"flex",padding:0,justifyContent:"center",alignItems:"center",outline:"none",backgroundColor:"$panel",cursor:"pointer",boxShadow:"$panel",border:"1px solid $panelContrast",color:"$text","& svg":{height:12,width:12}}),UX=qe(Xo,{width:"fit-content",height:"fit-content",minWidth:200,maxHeight:380,overflowY:"auto","& *":{boxSizing:"border-box"},"& a":{outline:"none"},variants:{variant:{horizontal:{flexDirection:"row"},menu:{minWidth:128}}}}),ZX=qe(sl.ee,{position:"absolute",zIndex:999,right:10,bottom:10,width:32,height:32,variants:{debug:{true:{},false:{}},bp:{mobile:{bottom:64},small:{bottom:10},medium:{},large:{}},side:{top:{},left:{},right:{},bottom:{}}},compoundVariants:[{bp:"mobile",side:"bottom",debug:!0,css:{bottom:104}},{bp:"small",side:"bottom",debug:!0,css:{bottom:50}}]}),fl=qe("div",{backgroundColor:"$panel",display:"flex",flexDirection:"row",boxShadow:"$panel",padding:"$2",border:"1px solid $panelContrast",gap:0,overflow:"hidden",variants:{side:{center:{borderRadius:9},left:{padding:0,borderTop:0,borderLeft:0,borderTopRightRadius:0,borderBottomRightRadius:9,borderBottomLeftRadius:0},right:{padding:0,borderTop:0,borderRight:0,borderTopLeftRadius:0,borderBottomLeftRadius:9,borderBottomRightRadius:0}}},"& hr":{height:10,width:"100%",backgroundColor:"red",border:"none"}}),nu=["rectangle","ellipse","triangle","line"],ud={rectangle:u.createElement(R4,null),ellipse:u.createElement(O9,null),triangle:u.createElement(U4,null),line:u.createElement(xX,null)},zX=e=>e.settings.dockPosition,GX=u.memo(function({activeTool:e,isToolLocked:t}){let r=Dr(),i=Yn(),s=r.useStore(zX),[l,h]=u.useState("rectangle");u.useEffect(()=>{nu.includes(e)&&l!==e&&h(e)},[e]);let g=u.useCallback(()=>{r.selectTool(l)},[e,r]),f=u.useCallback(()=>{r.toggleToolLock()},[r]),C=u.useCallback(k=>{k.key===" "&&r.shiftKey&&k.preventDefault()},[]),y=nu.includes(e),b=s==="bottom"||s==="top"?"top":s,R=s==="bottom"||s==="top"?"row":"column";return u.createElement(fr.fC,{dir:"ltr",onOpenChange:g},u.createElement(fr.xz,{dir:"ltr",asChild:!0,id:"TD-PrimaryTools-Shapes"},u.createElement(gr,{disabled:y&&r.shiftKey,variant:"primary",onDoubleClick:f,isToolLocked:y&&t,isActive:y,onKeyDown:C},ud[l])),u.createElement(fr.VY,{asChild:!0,side:b,sideOffset:12},u.createElement(fl,{side:"center",style:{flexDirection:R}},nu.map((k,A)=>u.createElement(Kr,{key:k,label:i.formatMessage({id:k}),kbd:(4+A).toString(),id:`TD-PrimaryTools-Shapes-${k}`},u.createElement(fr.ck,{asChild:!0},u.createElement(gr,{variant:"primary",onClick:()=>{r.selectTool(k),h(k)}},ud[k])))))))}),WX=e=>e.appState.activeTool,KX=e=>e.appState.isToolLocked,YX=e=>e.settings.dockPosition,XX=u.memo(function(){let e=Dr(),t=Yn(),r=e.useStore(WX),i=e.useStore(KX),s=e.useStore(YX),l=u.useCallback(()=>{e.selectTool("select")},[e]),h=u.useCallback(()=>{e.selectTool("erase")},[e]),g=u.useCallback(()=>{e.selectTool("draw")},[e]),f=u.useCallback(()=>{e.selectTool("arrow")},[e]),C=u.useCallback(()=>{e.selectTool("text")},[e]),y=u.useCallback(()=>{e.selectTool("sticky")},[e]),b=u.useCallback(()=>Ft(this,null,function*(){e.openAsset()}),[e]);return u.createElement(qX,{side:"center",id:"TD-PrimaryTools",style:{flexDirection:s==="bottom"||s==="top"?"row":"column"},bp:yi},u.createElement(_s,{kbd:"1",label:t.formatMessage({id:"select"}),onClick:l,isActive:r==="select",id:"TD-PrimaryTools-CursorArrow"},u.createElement(j9,null)),u.createElement(_s,{kbd:"2",label:t.formatMessage({id:"draw"}),onClick:g,isActive:r==="draw",id:"TD-PrimaryTools-Pencil"},u.createElement(k0,null)),u.createElement(_s,{kbd:"3",label:t.formatMessage({id:"eraser"}),onClick:h,isActive:r==="erase",id:"TD-PrimaryTools-Eraser"},u.createElement(wX,null)),u.createElement(GX,{activeTool:r,isToolLocked:i}),u.createElement(_s,{kbd:"8",label:t.formatMessage({id:"arrow"}),onClick:f,isLocked:i,isActive:r==="arrow",id:"TD-PrimaryTools-ArrowTopRight"},u.createElement(_9,null)),u.createElement(_s,{kbd:"9",label:t.formatMessage({id:"text"}),onClick:C,isLocked:i,isActive:r==="text",id:"TD-PrimaryTools-Text"},u.createElement(A4,null)),u.createElement(_s,{kbd:"0",label:t.formatMessage({id:"sticky"}),onClick:y,isActive:r==="sticky",id:"TD-PrimaryTools-Pencil2"},u.createElement(f4,null)),u.createElement(_s,{label:t.formatMessage({id:"image"}),onClick:b,id:"TD-PrimaryTools-Image"},u.createElement(i4,null)))}),qX=qe(fl,{variants:{bp:{mobile:{padding:"$0",borderRadius:"10px"},small:{padding:"$2"}}}}),JX=e=>e.appState.status,QX=e=>e.appState.activeTool;function eq(){let e=Dr(),t=e.useStore(JX),r=e.useStore(QX);return u.createElement(tq,{bp:yi,id:"TD-StatusBar"},u.createElement(rq,null,r," | ",t))}var tq=qe("div",{height:40,userSelect:"none",borderTop:"1px solid $panelContrast",gridArea:"status",display:"flex",color:"$text",justifyContent:"space-between",alignItems:"center",backgroundColor:"$panel",gap:8,fontFamily:"$ui",fontSize:"$0",padding:"0 16px",variants:{bp:{small:{fontSize:"$1"}}}}),rq=qe("div",{whiteSpace:"nowrap",overflow:"hidden"}),nq=e=>e.settings.isDebugMode,iq=e=>e.settings.dockPosition,oq=u.memo(function({onBlur:e}){let t=Dr(),r=t.useStore(iq),i=t.useStore(nq);return u.createElement(u.Fragment,null,u.createElement(sq,{side:r,onBlur:e,bp:yi,debug:i},u.createElement(aq,{id:"TD-Tools"},u.createElement(cX,null),u.createElement(uq,{orientation:r==="bottom"||r==="top"?"horizontal":"vertical"},u.createElement(sX,null),u.createElement(XX,null),u.createElement(_X,null)))),u.createElement(FX,null),i&&u.createElement(lq,null,u.createElement(eq,null)))}),sq=qe("div",{position:"absolute",width:"100%",minWidth:0,maxWidth:"100%",height:64,gap:"$4",display:"flex",justifyContent:"center",alignItems:"center",zIndex:200,overflow:"hidden",pointerEvents:"none","& > div > *":{pointerEvents:"all"},variants:{debug:{true:{},false:{}},bp:{mobile:{},small:{},medium:{},large:{}},side:{top:{width:"100%",height:64,left:0,right:0,top:45},right:{width:64,height:"100%",top:0,right:0},bottom:{width:"100%",left:0,right:0,bottom:4},left:{width:64,height:"100%",left:0}}},compoundVariants:[{side:"top",bp:"large",css:{top:0}},{side:"bottom",debug:!0,css:{bottom:44}}]}),aq=qe("div",{display:"flex",width:"fit-content",height:"fit-content",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"$4"}),lq=qe("div",{position:"absolute",bottom:"0px",left:"0px",right:"0px",height:"40px",width:"100%",maxWidth:"100%"}),uq=qe("div",{position:"relative",display:"flex",alignItems:"center",height:"fit-content",gap:"$3",variants:{orientation:{horizontal:{flexDirection:"row"},vertical:{flexDirection:"column"}}}}),cq=e=>e.settings,dq=["bottom","left","right","top"];function hq(){let e=Dr(),t=Yn(),r=e.useStore(cq),i=u.useCallback(()=>{e.setSetting("isDebugMode",b=>!b)},[e]),s=u.useCallback(()=>{e.setSetting("isDarkMode",b=>!b)},[e]),l=u.useCallback(()=>{e.setSetting("isFocusMode",b=>!b)},[e]),h=u.useCallback(()=>{e.setSetting("showGrid",b=>!b)},[e]),g=u.useCallback(()=>{e.setSetting("keepStyleMenuOpen",b=>!b)},[e]),f=u.useCallback(()=>{e.setSetting("isCadSelectMode",b=>!b)},[e]),C=u.useCallback(b=>{e.setSetting("dockPosition",b)},[e]),y=u.useCallback(b=>{e.setSetting("exportBackground",b)},[e]);return u.createElement(Jo,{label:t.formatMessage({id:"menu.preferences"}),id:"TD-MenuItem-Preferences"},u.createElement(Mi,{checked:r.isDarkMode,onCheckedChange:s,kbd:"#\u21E7D",id:"TD-MenuItem-Preferences-Dark_Mode"},u.createElement(st,{id:"preferences.dark.mode"})),u.createElement(Mi,{checked:r.isFocusMode,onCheckedChange:l,kbd:"#.",id:"TD-MenuItem-Preferences-Focus_Mode"},u.createElement(st,{id:"preferences.focus.mode"})),u.createElement(Mi,{checked:r.isDebugMode,onCheckedChange:i,id:"TD-MenuItem-Preferences-Debug_Mode"},u.createElement(st,{id:"preferences.debug.mode"})),u.createElement(qr,null),u.createElement(Mi,{checked:r.showGrid,onCheckedChange:h,kbd:"#\u21E7G",id:"TD-MenuItem-Preferences-Grid"},u.createElement(st,{id:"preferences.show.grid"})),u.createElement(Mi,{checked:r.isCadSelectMode,onCheckedChange:f,id:"TD-MenuItem-Preferences-Cad_Selection"},u.createElement(st,{id:"preferences.use.cad.selection"})),u.createElement(Mi,{checked:r.keepStyleMenuOpen,onCheckedChange:g,id:"TD-MenuItem-Preferences-Style_menu"},u.createElement(st,{id:"preferences.keep.stylemenu.open"})),u.createElement(Jo,{label:t.formatMessage({id:"dock.position"})},dq.map(b=>u.createElement(Mi,{key:b,checked:r.dockPosition===b,onCheckedChange:()=>C(b),id:`TD-MenuItem-DockPosition-${b}`},u.createElement(cd,null,u.createElement(st,{id:b}))))),u.createElement(Jo,{label:t.formatMessage({id:"export.background"})},Object.values(Qc).map(b=>u.createElement(Mi,{key:b,checked:r.exportBackground===b,onCheckedChange:()=>y(b),id:`TD-MenuItem-ExportBackground-${b}`},u.createElement(cd,null,u.createElement(st,{id:b}))))))}var cd=qe("span",{textTransform:"capitalize"}),fq=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,pq=e=>e.appState.disableAssets,gq=u.memo(function({readOnly:e}){let t=Dr(),r=Yn(),[i,s]=u.useState(!1),l=t.useStore(fq),h=t.useStore(pq),[g,f]=u.useState(0);u.useEffect(()=>f(1),[]);let{onNewProject:C,onOpenProject:y,onSaveProject:b,onSaveProjectAs:R}=Kc(),k=u.useCallback(()=>{ea?t.saveProjectAs():s(!0)},[t]),A=u.useCallback(()=>{t.delete()},[t]),O=u.useCallback(()=>{t.copyImage("svg",{scale:1,quality:1,transparentBackground:!1})},[t]),B=u.useCallback(()=>{t.copyImage("png",{scale:2,quality:1,transparentBackground:!0})},[t]),F=u.useCallback(()=>Ft(this,null,function*(){t.exportImage("png",{scale:2,quality:1})}),[t]),j=u.useCallback(()=>Ft(this,null,function*(){t.exportImage("jpeg",{scale:2,quality:1})}),[t]),J=u.useCallback(()=>Ft(this,null,function*(){t.exportImage("webp",{scale:2,quality:1})}),[t]),ce=u.useCallback(()=>Ft(this,null,function*(){t.exportImage("svg",{scale:2,quality:1})}),[t]),re=u.useCallback(()=>Ft(this,null,function*(){t.copyJson()}),[t]),ne=u.useCallback(()=>Ft(this,null,function*(){t.exportJson()}),[t]),le=u.useCallback(()=>{t.cut()},[t]),me=u.useCallback(()=>{t.copy()},[t]),Ve=u.useCallback(()=>{t.paste()},[t]),lt=u.useCallback(()=>{t.selectAll()},[t]),Ye=u.useCallback(()=>{t.selectNone()},[t]),ct=u.useCallback(()=>{t.openAsset()},[t]),pt=u.useCallback(()=>{t.zoomTo(1)},[t]),tr=t.callbacks.onNewProject||t.callbacks.onOpenProject||t.callbacks.onSaveProject||t.callbacks.onSaveProjectAs||t.callbacks.onExport,qt=l>0;return u.createElement(u.Fragment,null,u.createElement(fr.fC,{dir:"ltr"},u.createElement(sd,{id:"TD-MenuIcon"},u.createElement(e4,null)),u.createElement(Ss,{variant:"menu",id:"TD-Menu",side:"bottom",align:"start",sideOffset:4,alignOffset:4},tr&&u.createElement(Jo,{label:`${r.formatMessage({id:"menu.file"})}...`,id:"TD-MenuItem-File"},t.callbacks.onNewProject&&u.createElement(ar,{onClick:C,kbd:"#N",id:"TD-MenuItem-File-New_Project"},u.createElement(st,{id:"new.project"})),t.callbacks.onOpenProject&&u.createElement(ar,{onClick:y,kbd:"#O",id:"TD-MenuItem-File-Open"},u.createElement(st,{id:"open"}),"..."),t.callbacks.onSaveProject&&u.createElement(ar,{onClick:b,kbd:"#S",id:"TD-MenuItem-File-Save"},u.createElement(st,{id:"save"})),t.callbacks.onSaveProjectAs&&u.createElement(ar,{onClick:k,kbd:"#\u21E7S",id:"TD-MenuItem-File-Save_As"},u.createElement(st,{id:"save.as"}),"..."),!h&&u.createElement(u.Fragment,null,u.createElement(qr,null),u.createElement(ar,{onClick:ct,kbd:"#U",id:"TD-MenuItem-File-Upload_Media"},u.createElement(st,{id:"upload.media"})))),u.createElement(Jo,{label:`${r.formatMessage({id:"menu.edit"})}...`,id:"TD-MenuItem-Edit"},u.createElement(ar,{onSelect:Yr,onClick:t.undo,disabled:e,kbd:"#Z",id:"TD-MenuItem-Edit-Undo"},u.createElement(st,{id:"undo"})),u.createElement(ar,{onSelect:Yr,onClick:t.redo,disabled:e,kbd:"#\u21E7Z",id:"TD-MenuItem-Edit-Redo"},u.createElement(st,{id:"redo"})),u.createElement(qr,null),u.createElement(ar,{onSelect:Yr,disabled:!qt||e,onClick:le,kbd:"#X",id:"TD-MenuItem-Edit-Cut"},u.createElement(st,{id:"cut"})),u.createElement(ar,{onSelect:Yr,disabled:!qt,onClick:me,kbd:"#C",id:"TD-MenuItem-Edit-Copy"},u.createElement(st,{id:"copy"})),u.createElement(ar,{onSelect:Yr,onClick:Ve,kbd:"#V",id:"TD-MenuItem-Edit-Paste"},u.createElement(st,{id:"paste"})),u.createElement(qr,null),u.createElement(Jo,{label:`${r.formatMessage({id:"copy.as"})}...`,size:"small",id:"TD-MenuItem-Copy-As"},u.createElement(ar,{onClick:O,id:"TD-MenuItem-Copy-as-SVG"},"SVG"),u.createElement(ar,{onClick:B,id:"TD-MenuItem-Copy-As-PNG"},"PNG"),u.createElement(ar,{onClick:re,id:"TD-MenuItem-Copy_as_JSON"},"JSON")),u.createElement(Jo,{label:`${r.formatMessage({id:"export.as"})}...`,size:"small",id:"TD-MenuItem-Export"},u.createElement(ar,{onClick:ce,id:"TD-MenuItem-Export-SVG"},"SVG"),u.createElement(ar,{onClick:F,id:"TD-MenuItem-Export-PNG"},"PNG"),u.createElement(ar,{onClick:j,id:"TD-MenuItem-Export-JPG"},"JPG"),u.createElement(ar,{onClick:J,id:"TD-MenuItem-Export-WEBP"},"WEBP"),u.createElement(ar,{onClick:ne,id:"TD-MenuItem-Export-JSON"},"JSON")),u.createElement(qr,null),u.createElement(ar,{onSelect:Yr,onClick:lt,kbd:"#A",id:"TD-MenuItem-Select_All"},u.createElement(st,{id:"select.all"})),u.createElement(ar,{onSelect:Yr,disabled:!qt,onClick:Ye,id:"TD-MenuItem-Select_None"},u.createElement(st,{id:"select.none"})),u.createElement(qr,null),u.createElement(ar,{onSelect:A,disabled:!qt,kbd:"\u232B",id:"TD-MenuItem-Delete"},u.createElement(st,{id:"delete"}))),u.createElement(Jo,{label:r.formatMessage({id:"menu.view"}),id:"TD-MenuItem-Edit"},u.createElement(ar,{onSelect:Yr,onClick:t.zoomIn,kbd:"#+",id:"TD-MenuItem-View-ZoomIn"},u.createElement(st,{id:"zoom.in"})),u.createElement(ar,{onSelect:Yr,onClick:t.zoomOut,kbd:"#-",id:"TD-MenuItem-View-ZoomOut"},u.createElement(st,{id:"zoom.out"})),u.createElement(ar,{onSelect:Yr,onClick:pt,kbd:"\u21E7+0",id:"TD-MenuItem-View-ZoomTo100"},u.createElement(st,{id:"zoom.to"})," 100%"),u.createElement(ar,{onSelect:Yr,onClick:t.zoomToFit,kbd:"\u21E7+1",id:"TD-MenuItem-View-ZoomToFit"},u.createElement(st,{id:"zoom.to.fit"})),u.createElement(ar,{onSelect:Yr,onClick:t.zoomToSelection,kbd:"\u21E7+2",id:"TD-MenuItem-View-ZoomToSelection"},u.createElement(st,{id:"zoom.to.selection"}))),u.createElement(qr,null),u.createElement(hq,null))),u.createElement(WY,{isOpen:i,onClose:()=>s(!1)}))});function mq(){return u.createElement("svg",{width:"15",height:"15",viewBox:"0 0 15 15",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},u.createElement("path",{d:"M1.36482 4.71089C1.36482 3.21371 2.57853 2 4.07572 2C5.5729 2 6.78661 3.21371 6.78661 4.71089C6.78661 5.76842 6.18106 6.68452 5.29779 7.13136C5.80465 7.24611 6.26407 7.44186 6.66028 7.73182C7.18674 8.11711 7.57215 8.64722 7.81073 9.30983C7.81452 9.30606 7.81832 9.3023 7.82212 9.29855C8.30448 8.82317 8.91325 8.52463 9.60905 8.37275C8.68812 7.922 8.05394 6.97569 8.05394 5.88126C8.05394 4.35017 9.29513 3.10898 10.8262 3.10898C12.3573 3.10898 13.5985 4.35017 13.5985 5.88126C13.5985 6.97561 12.9644 7.92186 12.0436 8.37265C12.7396 8.52449 13.3486 8.82306 13.831 9.29854C14.5795 10.0361 14.9481 11.1249 14.9481 12.5176C14.9481 12.7799 14.7354 12.9926 14.473 12.9926C14.2107 12.9926 13.9981 12.7799 13.9981 12.5175C13.9981 11.2848 13.6738 10.4774 13.1642 9.97518C12.6532 9.4716 11.8802 9.20024 10.8266 9.20024C9.77294 9.20024 8.99993 9.4716 8.48896 9.97518C7.97939 10.4774 7.65513 11.2848 7.65513 12.5176C7.65513 12.7799 7.44247 12.9926 7.18013 12.9926C6.9178 12.9926 6.70513 12.7799 6.70513 12.5176C6.70513 11.6734 6.84053 10.941 7.11384 10.3307C7.0922 10.2895 7.0763 10.2444 7.06737 10.1962C6.91739 9.38749 6.57392 8.84586 6.09923 8.49845C5.61626 8.14499 4.94481 7.95427 4.07574 7.95427C3.05232 7.95427 2.30368 8.21784 1.80952 8.70485C1.31675 9.19047 1.00176 9.97257 1.00176 11.1702C1.00176 11.4326 0.789093 11.6452 0.526758 11.6452C0.264423 11.6452 0.0517578 11.4326 0.0517578 11.1702C0.0517578 9.81263 0.411052 8.74925 1.14268 8.02821C1.60624 7.57137 2.18892 7.28191 2.85378 7.13142C1.97043 6.68461 1.36482 5.76848 1.36482 4.71089ZM4.07572 2.95C3.1032 2.95 2.31482 3.73838 2.31482 4.71089C2.31482 5.68341 3.1032 6.47178 4.07572 6.47178C5.04823 6.47178 5.83661 5.68341 5.83661 4.71089C5.83661 3.73838 5.04823 2.95 4.07572 2.95ZM10.8262 4.05898C9.8198 4.05898 9.00394 4.87484 9.00394 5.88126C9.00394 6.88768 9.8198 7.70355 10.8262 7.70355C11.8326 7.70355 12.6485 6.88768 12.6485 5.88126C12.6485 4.87484 11.8326 4.05898 10.8262 4.05898Z"}))}var Ls="-0.03em",iu=[.5,.5],Z0e=Math.PI*2,ou=".tldr",pl={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e*e:-1+(4-2*e)*e,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1+--e*e*e*e*e,easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e<=0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e>=1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e<=0?0:e>=1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2},dd=["#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467","#FF802B"],vq=typeof Window>"u"?!1:/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Cq=typeof Window>"u"?!1:/linux/i.test(navigator.userAgent),hd=[".png",".svg",".jpg",".jpeg",".gif"],fd=vq?[]:[".mp4",".webm"];function ui(e){if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(typeof e=="object")if(typeof e[Symbol.iterator]=="function"){let t=[];if(e.length>0)for(let r of e)t.push(ui(r));return t}else{let t=Object.keys(e),r={};if(t.length>0)for(let i of t)r[i]=ui(e[i]);return r}return e}function ta(e,t){let r=X.getFromCache(t,e,()=>{let[i,s]=e.size;return{minX:0,maxX:i,minY:0,maxY:s,width:i,height:s}});return X.translateBounds(r,e.point)}var Eq={start:"left",middle:"center",end:"right",justify:"justify"};function yq(e="start"){return Eq[e]}var Qo;function wq(){var e;(e=document.getElementById("__textLabelMeasure"))==null||e.remove();let t=document.createElement("pre");return t.id="__textLabelMeasure",Object.assign(t.style,{whiteSpace:"pre",width:"auto",border:"1px solid transparent",padding:"4px",margin:"0px",letterSpacing:Ls,opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",pointerEvents:"none",userSelect:"none",alignmentBaseline:"mathematical",dominantBaseline:"mathematical"}),t.tabIndex=-1,document.body.appendChild(t),t}typeof window<"u"&&(Qo=wq());var su="",pd="",au=[0,0];function bq(){su=""}function qa(e,t){if(!e)return[16,32];if(!Qo)return[10,10];if(Qo.parent||document.body.appendChild(Qo),e===su&&t===pd)return au;su=e,pd=t,Qo.textContent=e,Qo.style.font=t;let r=Qo.offsetWidth||1,i=Qo.offsetHeight||1;return au=[r,i],au}var xq=new RegExp(`${[32,160,4961,65792,65793,4153,4241].map(e=>String.fromCodePoint(e)).join("|")}`);function gl(e,t,r,i,s,l=!1){let h="normal",g=Ls,f=_q({text:e,wrap:l,width:s,fontSize:t,fontWeight:h,fontFamily:r,fontStyle:"normal",textAlign:"left",letterSpacing:Ls,lineHeight:1}),C=document.createElementNS("http://www.w3.org/2000/svg","text");C.setAttribute("font-size",t+"px"),C.setAttribute("font-family",r),C.setAttribute("font-weight",h),C.setAttribute("line-height",1*t+"px"),C.setAttribute("letter-spacing",g),C.setAttribute("text-align",i??"left"),C.setAttribute("dominant-baseline","mathematical"),C.setAttribute("alignment-baseline","mathematical");let y=f.map((b,R)=>{let k=document.createElementNS("http://www.w3.org/2000/svg","tspan");return k.textContent=b+`
`,k.setAttribute("y",1*t*(R+.5)+"px"),C.appendChild(k),k});switch(i){case"middle":{C.setAttribute("text-align","center"),C.setAttribute("text-anchor","middle"),y.forEach(b=>b.setAttribute("x",4+s/2+""));break}case"end":{C.setAttribute("text-align","right"),C.setAttribute("text-anchor","end"),y.forEach(b=>b.setAttribute("x",4+s+""));break}default:C.setAttribute("text-align","left"),C.setAttribute("text-anchor","start"),y.forEach(b=>b.setAttribute("x","4"))}return C}function _q(e){let t=document.createElement("div");t.style.setProperty("position","absolute"),t.style.setProperty("top","-9999px"),t.style.setProperty("left","-9999px"),t.style.setProperty("width",e.width+"px"),t.style.setProperty("height","min-content"),t.style.setProperty("font-size",e.fontSize+"px"),t.style.setProperty("font-family",e.fontFamily),t.style.setProperty("font-weight",e.fontWeight),t.style.setProperty("line-height",e.lineHeight*e.fontSize+"px"),t.style.setProperty("letter-spacing",e.letterSpacing),t.style.setProperty("text-align",e.textAlign),document.body.appendChild(t);let r=e.text.split(xq).flatMap(h=>h.replace(`
`,` 
`)).join(" ").split(" ");t.innerText=r[0];let i=t.offsetHeight,s=[r[0]],l=[s];for(let h=1;h<r.length;h++){let g=r[h];t.innerText+=" "+g;let f=t.offsetHeight;f>i&&(i=f,s=[],l.push(s)),s.push(g)}return t.remove(),l.map(h=>h.join(" "))}function Sq({id:e,bounds:t,labelSize:r,offset:i,scale:s=1}){return u.createElement("defs",null,u.createElement("mask",{id:e+"_clip"},u.createElement("rect",{x:-100,y:-100,width:t.width+200,height:t.height+200,fill:"white"}),u.createElement("rect",{x:t.width/2-r[0]/2*s+(i?.[0]||0),y:t.height/2-r[1]/2*s+(i?.[1]||0),width:r[0]*s,height:r[1]*s,rx:4*s,ry:4*s,fill:"black",opacity:Math.max(s,.8)})))}var ml=Math.PI*2,wi=class{static inwardEdgeNormal(e){let t=ee.sub(e[1],e[0]),r=ee.len2(t);return[-t[0]/r,t[1]/r]}static outwardEdgeNormal(e){return ee.neg(wi.inwardEdgeNormal(e))}static isReflexVertex(e,t){let r=e.length,i=e[(t+r-1)%r],s=e[t],l=e[(t+1)%r];return wi.leftSide(i,l,s)<0}static getEdges(e){return e.map((t,r)=>[t,e[(r+1)%e.length]])}static edgesIntersection([e,t],[r,i]){let s=(i[1]-r[1])*(t[0]-e[0])-(i[0]-r[0])*(t[1]-e[1]);if(s==0)return null;let l=((i[0]-r[0])*(e[1]-r[1])-(i[1]-r[1])*(e[0]-r[0]))/s,h=((t[0]-e[0])*(e[1]-r[1])-(t[1]-e[1])*(e[0]-r[0]))/s;return l<0||h<0||l>1||h>1?null:[e[0]+l*(t[0]-e[0]),e[1]+l*(t[1]-e[1])]}static appendArc(e,t,r,i,s,l=!1){let h=[...e],g=Math.atan2(i[1]-t[1],i[0]-t[0]),f=Math.atan2(s[1]-t[1],s[0]-t[0]);g<0&&(g+=ml),f<0&&(f+=ml);let C=5,y=g>f?g-f:g+ml-f,b=(l?-y:ml-y)/C;h.push(i);for(let R=1;R<C;++R){let k=g+b*R;h.push([t[0]+Math.cos(k)*r,t[1]+Math.sin(k)*r])}return h.push(s),h}static createOffsetEdge(e,t){return e.map(r=>ee.add(r,t))}static getOffsetPolygon(e,t=0){let r=wi.getEdges(e),i=r.map(l=>wi.createOffsetEdge(l,ee.mul(wi.outwardEdgeNormal(l),t))),s=[];for(let l=0;l<i.length;l++){let h=i[l],g=i[(l+i.length-1)%i.length],f=wi.edgesIntersection(g,h);f?s.push(f):wi.appendArc(s,r[l][0],t,g[1],h[0],!1)}return s}static createPaddingPolygon(e,t=0){let r=e.map(s=>wi.createOffsetEdge(s,wi.inwardEdgeNormal(s))),i=[];for(let s=0;s<r.length;s++){let l=r[s],h=r[(s+r.length-1)%r.length],g=wi.edgesIntersection(h,l);g?i.push(g):wi.appendArc(i,e[s][0],t,h[1],l[0],!0)}return i}},Lq=wi;S(Lq,"leftSide",ee.isLeft);function Rq(e,t){if(e.length<3)throw Error("Polygon must have at least 3 points");let r=e.length;return e.map((i,s)=>[i,e[(s+1)%r]]).map(([i,s])=>{let l=ee.mul(ee.per(ee.uni(ee.sub(s,i))),t);return[ee.add(i,l),ee.add(s,l)]}).map((i,s,l)=>{let h=us(i,l[(s+1)%l.length]);if(h===void 0)throw Error("Expected an intersection");return h})}var gd="#fafafa",lu="#343d45",ra={white:"#f0f1f3",lightGray:"#c6cbd1",gray:"#788492",black:"#1d1d1d",green:"#36b24d",cyan:"#0e98ad",blue:"#1c7ed6",indigo:"#4263eb",violet:"#7746f1",red:"#ff2133",orange:"#ff9433",yellow:"#ffc936"},Iq={light:ye(Y({},Object.fromEntries(Object.entries(ra).map(([e,t])=>[e,X.lerpColor(t,gd,.45)]))),{white:"#ffffff",black:"#3d3d3d"}),dark:ye(Y({},Object.fromEntries(Object.entries(ra).map(([e,t])=>[e,X.lerpColor(X.lerpColor(t,"#999999",.3),lu,.4)]))),{white:"#1d1d1d",black:"#bbbbbb"})},Ja={light:ye(Y({},ra),{white:"#1d1d1d"}),dark:ye(Y({},Object.fromEntries(Object.entries(ra).map(([e,t])=>[e,X.lerpColor(t,lu,.1)]))),{white:"#cecece",black:"#cecece"})},uu={light:ye(Y({},Object.fromEntries(Object.entries(ra).map(([e,t])=>[e,X.lerpColor(t,gd,.82)]))),{white:"#fefefe"}),dark:ye(Y({},Object.fromEntries(Object.entries(ra).map(([e,t])=>[e,X.lerpColor(t,lu,.82)]))),{white:"rgb(30,33,37)",black:"#1e1e1f"})},Tq={small:2,medium:3.5,large:5},Dq={small:28,medium:48,large:96,auto:"auto"},Aq={script:'"Caveat Brush"',sans:'"Source Sans Pro"',serif:'"Crimson Pro"',mono:'"Source Code Pro"'},kq={script:1,sans:1,serif:1,mono:1},Pq={small:24,medium:36,large:48,auto:"auto"};function Mq(e){return Tq[e]}function vl(e,t="script"){return Dq[e]*kq[t]}function na(e="script"){return Aq[e]}function md(e){return Pq[e]}function wo(e){let t=vl(e.size,e.font),r=na(e.font),{scale:i=1}=e;return`${t*i}px/1 ${r}`}function Oq(e){let t=md(e.size),r=na(e.font),{scale:i=1}=e;return`${t*i}px/1 ${r}`}function vd(e,t=!1){let{color:r}=e,i=t?"dark":"light",s=r==="white"||r==="black"?"yellow":r;return{fill:Iq[i][s],stroke:Ja[i][s],color:t?"#1d1d1d":"#0d0d0d"}}function Ar(e,t){let{color:r,size:i,isFilled:s}=e,l=Mq(i),h=t?"dark":"light";return{stroke:Ja[h][r],fill:s?uu[h][r]:"none",strokeWidth:l}}var eo={color:"black",size:"small",isFilled:!1,dash:"draw",scale:1},cu=ye(Y({},eo),{font:"script",textAlign:"middle"}),Cd="  ",$n=class{static insertTextFirefox(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}static insert(e,t){let r=e.ownerDocument,i=r.activeElement;i!==e&&e.focus(),r.execCommand("insertText",!1,t)||$n.insertTextFirefox(e,t),i===r.body?e.blur():i instanceof HTMLElement&&i!==e&&i.focus()}static set(e,t){e.select(),$n.insert(e,t)}static getSelection(e){let{selectionStart:t,selectionEnd:r}=e;return e.value.slice(t||void 0,r||void 0)}static wrapSelection(e,t,r){let{selectionStart:i,selectionEnd:s}=e,l=$n.getSelection(e);$n.insert(e,t+l+(r??t)),e.selectionStart=(i||0)+t.length,e.selectionEnd=(s||0)+t.length}static replace(e,t,r){let i=0;e.value.replace(t,(...s)=>{let l=i+s[s.length-2],h=s[0].length;e.selectionStart=l,e.selectionEnd=l+h;let g=typeof r=="string"?r:r(...s);return $n.insert(e,g),e.selectionStart=l,i+=g.length-h,g})}static findLineEnd(e,t){let r=e.lastIndexOf(`
`,t-1)+1;return e.charAt(r)!=="	"?t:r+1}static indent(e){var t;let{selectionStart:r,selectionEnd:i,value:s}=e,l=s.slice(r,i),h=(t=/\n/g.exec(l))==null?void 0:t.length;if(h&&h>0){let g=s.lastIndexOf(`
`,r-1)+1,f=e.value.slice(g,i-1),C=f.replace(/^|\n/g,`$&${Cd}`),y=C.length-f.length;e.setSelectionRange(g,i-1),$n.insert(e,C),e.setSelectionRange(r+1,i+y)}else $n.insert(e,Cd)}static unindent(e){let{selectionStart:t,selectionEnd:r,value:i}=e,s=i.lastIndexOf(`
`,t-1)+1,l=$n.findLineEnd(i,r),h=e.value.slice(s,l),g=h.replace(/(^|\n)(\t| {1,2})/g,"$1"),f=h.length-g.length;e.setSelectionRange(s,l),$n.insert(e,g);let C=/\t| {1,2}/.exec(i.slice(s,t)),y=C?C[0].length:0,b=t-y;e.setSelectionRange(t-y,Math.max(b,r-f))}},Cl=u.memo(function({font:e,text:t,color:r,offsetX:i=0,offsetY:s=0,scale:l=1,isEditing:h=!1,onBlur:g,onChange:f}){let C=u.useRef(null),y=u.useRef(!1),b=u.useCallback(F=>{f(_e.normalizeText(F.currentTarget.value))},[f]),R=u.useCallback(F=>{if(F.key==="Escape"){F.preventDefault(),F.stopPropagation(),g?.();return}if(F.key==="Tab"&&t.length===0){F.preventDefault();return}if(!(F.key==="Meta"||F.metaKey))F.stopPropagation();else if(F.key==="z"&&F.metaKey){F.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),F.stopPropagation(),F.preventDefault();return}(F.metaKey||F.ctrlKey)&&F.key==="="&&F.preventDefault(),F.key==="Tab"&&(F.preventDefault(),F.shiftKey?$n.unindent(F.currentTarget):$n.indent(F.currentTarget),f?.(_e.normalizeText(F.currentTarget.value)))},[f]),k=u.useCallback(F=>{F.currentTarget.setSelectionRange(0,0),g?.()},[g]),A=u.useCallback(F=>{!h||!y.current||document.activeElement===F.currentTarget&&F.currentTarget.select()},[h]),O=u.useCallback(F=>{h&&F.stopPropagation()},[h]);u.useEffect(()=>{h?requestAnimationFrame(()=>{y.current=!0;let F=C.current;F&&(F.focus(),F.select())}):g?.()},[h,g]);let B=u.useRef(null);return u.useLayoutEffect(()=>{let F=B.current;if(!F)return;let j=qa(t,e);F.style.transform=`scale(${l}, ${l}) translate(${i}px, ${s}px)`,F.style.width=j[0]+1+"px",F.style.height=j[1]+1+"px"},[t,e,s,i,l]),u.createElement(Bq,null,u.createElement($q,{ref:B,hasText:!!t,isEditing:h,style:{font:e,color:r}},h?u.createElement(Fq,{ref:C,style:{font:e,color:r},name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:t,color:r,onFocus:A,onChange:b,onKeyDown:R,onBlur:k,onPointerDown:O,onContextMenu:li,onCopy:li,onPaste:li,onCut:li}):t,"\u200B"))}),Bq=qe("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",userSelect:"none",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:.3}}}}),Ed={whiteSpace:"pre-wrap",overflowWrap:"break-word",letterSpacing:Ls},$q=qe("div",Y({position:"absolute",padding:"4px",zIndex:1,minHeight:1,minWidth:1,lineHeight:1,outline:0,fontWeight:"500",textAlign:"center",backfaceVisibility:"hidden",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",variants:{hasText:{false:{pointerEvents:"none"},true:{pointerEvents:"all"}},isEditing:{false:{userSelect:"none"},true:{background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"}}}},Ed)),Fq=qe("textarea",ye(Y({position:"absolute",top:0,left:0,zIndex:1,width:"100%",height:"100%",border:"none",padding:"4px",resize:"none",textAlign:"inherit",minHeight:"inherit",minWidth:"inherit",lineHeight:"inherit",outline:0,fontWeight:"inherit",overflow:"hidden",backfaceVisibility:"hidden",display:"inline-block",pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text",fontSmooth:"always",WebkitFontSmoothing:"subpixel-antialiased",MozOsxFontSmoothing:"auto"},Ed),{"&:focus":{outline:"none",border:"none"}}));function El(e,t,{initialShape:r,transformOrigin:i,scaleX:s,scaleY:l}){if(e.rotation||r.isAspectRatioLocked){let h=ee.toFixed(ee.mul(r.size,Math.min(Math.abs(s),Math.abs(l)))),g=ee.toFixed([t.minX+(t.width-e.size[0])*(s<0?1-i[0]:i[0]),t.minY+(t.height-e.size[1])*(l<0?1-i[1]:i[1])]),f=s<0&&l>=0||l<0&&s>=0?r.rotation?-r.rotation:0:r.rotation;return{size:h,point:g,rotation:f}}else return{point:ee.toFixed([t.minX,t.minY]),size:ee.toFixed([t.width,t.height])}}function yl(e,t){return{size:ee.toFixed([t.width,t.height]),point:ee.toFixed([t.minX,t.minY])}}var xr=class extends Oa{constructor(){super(...arguments),S(this,"canBind",!1),S(this,"canEdit",!1),S(this,"canClone",!1),S(this,"isAspectRatioLocked",!1),S(this,"hideResizeHandles",!1),S(this,"bindingDistance",16),S(this,"hitTestPoint",(e,t)=>X.pointInBounds(t,this.getRotatedBounds(e))),S(this,"hitTestLineSegment",(e,t,r)=>{let i=X.getBoundsFromPoints([t,r]),s=this.getBounds(e);return X.boundsContain(s,i)||e.rotation?ho(t,r,X.getRotatedCorners(this.getBounds(e))).didIntersect:co(t,r,this.getBounds(e)).length>0}),S(this,"create",e=>(this.refMap.set(e.id,u.createRef()),this.getShape(e))),S(this,"getCenter",e=>X.getBoundsCenter(this.getBounds(e))),S(this,"getExpandedBounds",e=>X.expandBounds(this.getBounds(e),this.bindingDistance)),S(this,"getBindingPoint",(e,t,r,i,s,l)=>{let h=this.getBounds(e),g=this.getExpandedBounds(e);if(!X.pointInBounds(r,g))return;let f=ri(i,s,g).filter(O=>O.didIntersect).map(O=>O.points[0]);if(!f.length)return;let C=this.getCenter(e),y=f.sort((O,B)=>D.dist(B,i)-D.dist(O,i))[0],b=D.med(r,y),R,k;l?(R=D.dist(r,C)<16/2?C:r,k=0):(D.distanceToLineSegment(r,b,C)<16/2?R=C:R=b,X.pointInBounds(r,h)?k=this.bindingDistance:k=Math.max(this.bindingDistance,X.getBoundsSides(h).map(O=>D.distanceToLineSegment(O[1][0],O[1][1],r)).sort((O,B)=>O-B)[0]));let A=D.divV(D.sub(R,[g.minX,g.minY]),[g.width,g.height]);return{point:D.clampV(A,0,1),distance:k}}),S(this,"mutate",(e,t)=>t),S(this,"transform",(e,t,r)=>ye(Y({},e),{point:[t.minX,t.minY]})),S(this,"transformSingle",(e,t,r)=>this.transform(e,t,r)),S(this,"updateChildren"),S(this,"onChildrenChange"),S(this,"onHandleChange"),S(this,"onRightPointHandle"),S(this,"onDoubleClickHandle"),S(this,"onDoubleClickBoundsHandle"),S(this,"onSessionComplete"),S(this,"getSvgElement",(e,t)=>{var r,i,s,l,h;let g=(r=document.getElementById(e.id+"_svg"))==null?void 0:r.cloneNode(!0);if(!!g){if((l=(s=(i=e.label)==null?void 0:i.trim())==null?void 0:s.length)!=null?l:0>0){let f=e,C=document.createElementNS("http://www.w3.org/2000/svg","g"),y=wo(e.style),b=qa(e.label,y),R=vl(e.style.size,e.style.font)*((h=e.style.scale)!=null?h:1),k=na(e.style.font).slice(1,-1),A=gl(f.label,R,k,"middle",b[0],!1),O=this.getBounds(e);return A.setAttribute("transform",`translate(${O.width/2-b[0]/2}, ${O.height/2-b[1]/2})`),A.setAttribute("fill",Ar(e.style,t).stroke),A.setAttribute("transform-origin","center center"),C.setAttribute("text-align","center"),C.setAttribute("text-anchor","middle"),C.appendChild(g),C.appendChild(A),C}return g}})}};function Hq(e,t,r,i){return["M",e[0],e[1],"A",r[2],r[2],0,0,i<0?0:1,t[0],t[1]].join(" ")}function wl(e,t){let{start:r,end:i}=e,s=ee.dist(r.point,i.point),l=ee.med(r.point,i.point),h=s/2*t,g=ee.uni(ee.vec(r.point,i.point));return ee.toFixed(Math.abs(h)<10?l:ee.add(l,ee.mul(ee.per(g),h)))}function Nq(e,t,r,i,s,l){let h=X.rng(e),g=Ar(t).strokeWidth,f=s?ee.nudge(r,i,g):r,C=l?ee.nudge(i,r,g):i,y=ei([f,C],{size:g,thinning:.618+h()*.2,easing:pl.easeOutQuad,simulatePressure:!0,streamline:0,last:!0});return X.getSvgPathFromStroke(y)}function Vq(e,t,r,i,s,l,h,g,f,C){let y=X.rng(e),b=Ar(t).strokeWidth,R=s?ee.rotWith(r,h,b/f):r,k=l?ee.rotWith(i,h,-(b/f)):i,A=ee.angle(h,R),O=ee.angle(h,k),B=[],F=8+Math.floor(Math.abs(f)/20*1+y()/2);for(let J=0;J<F;J++){let ce=C(J/F),re=X.lerpAngles(A,O,ce);B.push(ee.toFixed(ee.nudgeAtAngle(h,re,g)))}let j=ei([R,...B,k],{size:1+b,thinning:.618+y()*.2,easing:pl.easeOutQuad,simulatePressure:!1,streamline:0,last:!0});return X.getSvgPathFromStroke(j)}function Rs(e,t,r){return X.circleFromThreePoints(e,r,t)}function du(e,t,r,i,s){let l=ni(e,t*.618,r,i).points;if(!l)return _e.warn("Could not find an intersection for the arrow head."),{left:e,right:e};let h=s?l[0]:l[1],g=h?ee.nudge(ee.rotWith(h,e,Math.PI/6),e,t*-.382):e,f=h?ee.nudge(ee.rotWith(h,e,-Math.PI/6),e,t*-.382):e;return{left:g,right:f}}function hu(e,t,r){let i=ds(e,r,e,t).points;if(!i)return _e.warn("Could not find an intersection for the arrow head."),{left:e,right:e};let s=i[0],l=s?ee.rotWith(s,e,Math.PI/6):e,h=s?ee.rotWith(s,e,-Math.PI/6):e;return{left:l,right:h}}function yd(e,t,r,i,s){let{left:l,right:h}=du(e,t,r,i,s);return`M ${l} L ${e} ${h}`}function wd(e,t,r){let{left:i,right:s}=hu(e,t,r);return`M ${i} L ${e} ${s}`}function jq(e,t,r,i,s,l){let{strokeWidth:h}=Ar(e,!1),g=ee.dist(t,i),f=Math.min(g/3,h*8),C=[];if(ee.dist(r,ee.toFixed(ee.med(t,i)))<1)C.push(`M ${t} L ${i}`),s&&C.push(wd(t,i,f)),l&&C.push(wd(i,t,f));else{let y=Rs(t,r,i),b=[y[0],y[1]],R=y[2],k=Qa(b,R,t,i);C.push(`M ${t} A ${R} ${R} 0 0 ${k>0?"1":"0"} ${i}`),s&&C.push(yd(t,f,b,R,k<0)),l&&C.push(yd(i,f,b,R,k>=0))}return C.join(" ")}function bl(e,t,r){if(ee.dist2(t,ee.med(e,r))<=4)return[e,r];let i=[],s=Rs(e,t,r),l=[s[0],s[1]],h=s[2],g=ee.angle(l,e),f=ee.angle(l,r);for(let C=0;C<20;C++){let y=C/19,b=X.lerpAngles(g,f,y);i.push(ee.nudgeAtAngle(l,b,h))}return i}function Uq(e,t,r){if(r===e||r===t)return!0;let i=Math.PI*2,s=(t-e+i)%i,l=(r-e+i)%i;return s<=Math.PI!=l>s}function Qa(e,t,r,i){let s=X.getSweep(e,r,i);return t*(2*Math.PI)*(s/(2*Math.PI))}function xl({left:e,middle:t,right:r,stroke:i,strokeWidth:s}){return u.createElement("g",null,u.createElement("path",{className:"tl-stroke-hitarea",d:`M ${e} L ${t} ${r}`}),u.createElement("path",{d:`M ${e} L ${t} ${r}`,fill:"none",stroke:i,strokeWidth:s,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}))}var Zq=u.memo(function({id:e,style:t,start:r,bend:i,end:s,arrowBend:l,decorationStart:h,decorationEnd:g,isDraw:f,isDarkMode:C}){let y=ee.dist(r,s);if(y<2)return null;let b=Ar(t,C),{strokeWidth:R}=b,k=1+R*1.618,A=Rs(r,i,s),O=[A[0],A[1]],B=A[2],F=Qa(O,B,r,s),j=X.rng(e),J=pl[j()>0?"easeInOutSine":"easeInOutCubic"],ce=f?Vq(e,t,r,s,h,g,O,B,F,J):Hq(r,s,A,l),{strokeDasharray:re,strokeDashoffset:ne}=X.getPerfectDashProps(Math.abs(F),k,t.dash,2,!1),le=Math.min(y/3,R*8),me=h?du(r,le,O,B,F<0):null,Ve=g?du(s,le,O,B,F>=0):null;return u.createElement(u.Fragment,null,u.createElement("path",{className:"tl-stroke-hitarea",d:ce}),u.createElement("path",{d:ce,fill:f?b.stroke:"none",stroke:b.stroke,strokeWidth:f?0:k,strokeDasharray:re,strokeDashoffset:ne,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}),me&&u.createElement(xl,{left:me.left,middle:r,right:me.right,stroke:b.stroke,strokeWidth:k}),Ve&&u.createElement(xl,{left:Ve.left,middle:s,right:Ve.right,stroke:b.stroke,strokeWidth:k}))}),zq=u.memo(function({id:e,style:t,start:r,end:i,decorationStart:s,decorationEnd:l,isDraw:h,isDarkMode:g}){let f=ee.dist(r,i);if(f<2)return null;let C=Ar(t,g),{strokeWidth:y}=C,b=1+y*1.618,R=h?Nq(e,t,r,i,s,l):"M"+ee.toFixed(r)+"L"+ee.toFixed(i),{strokeDasharray:k,strokeDashoffset:A}=X.getPerfectDashProps(f,y*1.618,t.dash,2,!1),O=Math.min(f/3,y*8),B=s?hu(r,i,O):null,F=l?hu(i,r,O):null;return u.createElement(u.Fragment,null,u.createElement("path",{className:"tl-stroke-hitarea",d:R}),u.createElement("path",{d:R,fill:C.stroke,stroke:C.stroke,strokeWidth:h?b/2:b,strokeDasharray:k,strokeDashoffset:A,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"stroke"}),B&&u.createElement(xl,{left:B.left,middle:r,right:B.right,stroke:C.stroke,strokeWidth:b}),F&&u.createElement(xl,{left:F.left,middle:i,right:F.right,stroke:C.stroke,strokeWidth:b}))}),Gq=class extends xr{constructor(){super(...arguments),S(this,"type","arrow"),S(this,"hideBounds",!0),S(this,"canEdit",!0),S(this,"pathCache",new WeakMap),S(this,"getShape",e=>{var t,r,i,s;return Y({id:"id",type:"arrow",name:"Arrow",parentId:"page",childIndex:1,point:[0,0],rotation:0,bend:0,handles:{start:Y({id:"start",index:0,point:[0,0],canBind:!0},(t=e.handles)==null?void 0:t.start),end:Y({id:"end",index:1,point:[1,1],canBind:!0},(r=e.handles)==null?void 0:r.end),bend:Y({id:"bend",index:2,point:[.5,.5]},(i=e.handles)==null?void 0:i.bend)},decorations:(s=e.decorations)!=null?s:{end:"arrow"},style:Y(ye(Y({},eo),{isFilled:!1}),e.style),label:"",labelPoint:[.5,.5]},e)}),S(this,"Component",xr.Component(({shape:e,isEditing:t,isGhost:r,meta:i,events:s,onShapeChange:l,onShapeBlur:h},g)=>{var f,C;let{id:y,label:b="",handles:{start:R,bend:k,end:A},decorations:O={},style:B}=e,F=(C=(f=b?.trim())==null?void 0:f.length)!=null?C:0>0,j=D.dist(k.point,D.toFixed(D.med(R.point,A.point)))<1,J=wo(B),ce=Ar(B,i.isDarkMode),re=F||t?qa(b,J):[0,0],ne=this.getBounds(e),le=u.useMemo(()=>{let{start:ct,bend:pt,end:tr}=e.handles;if(j)return D.dist(ct.point,tr.point);let qt=Rs(ct.point,pt.point,tr.point),_r=qt.slice(0,2),Ge=qt[2],Gt=Qa(_r,Ge,ct.point,tr.point);return Math.abs(Gt)},[e.handles]),me=Math.max(.5,Math.min(1,Math.max(le/(re[1]+128),le/(re[0]+128)))),Ve=u.useMemo(()=>{let ct=this.getBounds(e);return D.sub(e.handles.bend.point,D.toFixed([ct.width/2,ct.height/2]))},[e,me]),lt=u.useCallback(ct=>{l?.({id:y,label:ct})},[l]),Ye=j?zq:Zq;return u.createElement(Wq,Y({ref:g},s),u.createElement(Cl,{font:J,text:b,color:ce.stroke,offsetX:Ve[0],offsetY:Ve[1],scale:me,isEditing:t,onChange:lt,onBlur:h}),u.createElement(_n,{id:e.id+"_svg"},u.createElement("defs",null,u.createElement("mask",{id:e.id+"_clip"},u.createElement("rect",{x:-100,y:-100,width:ne.width+200,height:ne.height+200,fill:"white"}),u.createElement("rect",{x:ne.width/2-re[0]/2*me+Ve[0],y:ne.height/2-re[1]/2*me+Ve[1],width:re[0]*me,height:re[1]*me,rx:4*me,ry:4*me,fill:"black",opacity:1}))),u.createElement("g",{pointerEvents:"none",opacity:r?.3:1,mask:F||t?`url(#${e.id}_clip)`:""},u.createElement(Ye,{id:y,style:B,start:R.point,end:A.point,bend:k.point,arrowBend:e.bend,decorationStart:O?.start,decorationEnd:O?.end,isDraw:B.dash==="draw",isDarkMode:i.isDarkMode}))))})),S(this,"Indicator",xr.Indicator(({shape:e,bounds:t})=>{var r,i;let{style:s,decorations:l,label:h,handles:{start:g,bend:f,end:C}}=e,y=(i=(r=h?.trim())==null?void 0:r.length)!=null?i:0>0,b=wo(s),R=y?qa(h,b):[0,0],k=D.dist(f.point,D.toFixed(D.med(g.point,C.point)))<1,A=u.useMemo(()=>{let{start:F,bend:j,end:J}=e.handles;if(k)return D.dist(F.point,J.point);let ce=Rs(F.point,j.point,J.point),re=ce.slice(0,2),ne=ce[2],le=Qa(re,ne,F.point,J.point);return Math.abs(le)},[e.handles]),O=Math.max(.5,Math.min(1,Math.max(A/(R[1]+128),A/(R[0]+128)))),B=u.useMemo(()=>{let F=this.getBounds(e);return D.sub(e.handles.bend.point,[F.width/2,F.height/2])},[e,O]);return u.createElement(u.Fragment,null,y&&u.createElement(Sq,{id:e.id,scale:O,offset:B,bounds:t,labelSize:R}),u.createElement("path",{d:jq(s,g.point,f.point,C.point,l?.start,l?.end),mask:y?`url(#${e.id}_clip)`:""}),y&&u.createElement("rect",{x:t.width/2-R[0]/2*O+B[0],y:t.height/2-R[1]/2*O+B[1],width:R[0]*O,height:R[1]*O,rx:4*O,ry:4*O,fill:"transparent"}))})),S(this,"getBounds",e=>{let t=X.getFromCache(this.boundsCache,e,()=>{let{handles:{start:r,bend:i,end:s}}=e;return X.getBoundsFromPoints(bl(r.point,i.point,s.point))});return X.translateBounds(t,e.point)}),S(this,"getRotatedBounds",e=>{let{handles:{start:t,bend:r,end:i}}=e,s=bl(t.point,r.point,i.point),{minX:l,minY:h,maxX:g,maxY:f}=X.getBoundsFromPoints(s);return e.rotation!==0&&(s=s.map(C=>D.rotWith(C,[(l+g)/2,(h+f)/2],e.rotation||0))),X.translateBounds(X.getBoundsFromPoints(s),e.point)}),S(this,"getCenter",e=>{let{start:t,end:r}=e.handles;return D.add(e.point,D.med(t.point,r.point))}),S(this,"shouldRender",(e,t)=>t.decorations!==e.decorations||t.handles!==e.handles||t.style!==e.style||t.label!==e.label),S(this,"hitTestPoint",(e,t)=>{let{handles:{start:r,bend:i,end:s}}=e,l=D.sub(t,e.point),h=bl(r.point,i.point,s.point);for(let g=1;g<h.length;g++)if(D.distanceToLineSegment(h[g-1],h[g],l)<1)return!0;return!1}),S(this,"hitTestLineSegment",(e,t,r)=>{let{handles:{start:i,bend:s,end:l}}=e,h=D.sub(t,e.point),g=D.sub(r,e.point),f=bl(i.point,s.point,l.point);for(let C=1;C<f.length;C++)if(In(f[C-1],f[C],h,g).didIntersect)return!0;return!1}),S(this,"hitTestBounds",(e,t)=>{let{start:r,end:i,bend:s}=e.handles,l=D.add(e.point,r.point),h=D.add(e.point,i.point);if(X.pointInBounds(l,t)||X.pointInBounds(h,t))return!0;if(D.isEqual(D.med(r.point,i.point),s.point))return co(l,h,t).length>0;{let[g,f,C]=Rs(r.point,s.point,i.point),y=D.add(e.point,[g,f]);return Os(y,C,l,h,t).length>0}}),S(this,"transform",(e,t,{initialShape:r,scaleX:i,scaleY:s})=>{let l=this.getBounds(r),h=["start","end"],g=Y({},r.handles);h.forEach(y=>{if(y==="bend")return;let[b,R]=g[y].point,k=b/l.width,A=R/l.height;g[y]=ye(Y({},g[y]),{point:[t.width*(i<0?1-k:k),t.height*(s<0?1-A:A)]})});let f=i>0&&s<0||i<0&&s>0?-r.bend:r.bend,C=wl(g,f);return g.bend.point=C,{point:D.toFixed([t.minX,t.minY]),handles:g,bend:f}}),S(this,"onDoubleClickHandle",(e,t)=>{var r,i;switch(t){case"bend":return{bend:0,handles:ye(Y({},e.handles),{bend:ye(Y({},e.handles.bend),{point:wl(e.handles,e.bend)})})};case"start":return{decorations:ye(Y({},e.decorations),{start:(r=e.decorations)!=null&&r.start?void 0:"arrow"})};case"end":return{decorations:ye(Y({},e.decorations),{end:(i=e.decorations)!=null&&i.end?void 0:"arrow"})}}return this}),S(this,"onHandleChange",(e,t)=>{let r=X.deepMerge(e.handles,t),i=e.bend;if(r=X.deepMerge(r,{start:{point:D.toFixed(r.start.point)},end:{point:D.toFixed(r.end.point)}}),D.isEqual(r.start.point,r.end.point))return;if("bend"in t){let{start:f,end:C,bend:y}=r,b=D.dist(f.point,C.point),R=D.med(f.point,C.point),k=D.angle(f.point,C.point),A=D.uni(D.vec(f.point,C.point)),O=D.add(R,D.mul(D.per(A),b)),B=D.sub(R,D.mul(D.per(A),b)),F=D.nearestPointOnLineSegment(O,B,y.point,!0),j=D.dist(R,F)/(b/2);i=X.clamp(j,-.99,.99);let J=D.angle(f.point,F);D.isEqual(R,wl(r,i))?i=0:Uq(k,k+Math.PI,J)&&(i*=-1)}let s={point:e.point,bend:i,handles:ye(Y({},r),{bend:ye(Y({},r.bend),{point:wl(r,i)})})},l=e.point,h=this.getBounds(Y({},s)),g=D.sub([h.minX,h.minY],l);return D.isEqual(g,[0,0])||(Object.values(s.handles).forEach(f=>{f.point=D.toFixed(D.sub(f.point,g))}),s.point=D.toFixed(D.add(s.point,g))),s}),S(this,"getSvgElement",(e,t)=>{var r,i,s,l,h;let g=(r=document.getElementById(e.id+"_svg"))==null?void 0:r.cloneNode(!0);if(!!g){if((l=(s=(i=e.label)==null?void 0:i.trim())==null?void 0:s.length)!=null?l:0>0){let f=e,C=document.createElementNS("http://www.w3.org/2000/svg","g"),y=wo(e.style),b=qa(e.label,y),R=vl(e.style.size,e.style.font)*((h=e.style.scale)!=null?h:1),k=na(e.style.font).slice(1,-1),A=gl(f.label,R,k,"start",b[0],!1),O,{start:B,bend:F,end:j}=e.handles;if(D.dist(F.point,D.toFixed(D.med(B.point,j.point)))<1)O=D.dist(B.point,j.point);else{let me=Rs(B.point,F.point,j.point),Ve=me.slice(0,2),lt=me[2],Ye=Qa(Ve,lt,B.point,j.point);O=Math.abs(Ye)}let J=Math.max(.5,Math.min(1,Math.max(O/(b[1]+128),O/(b[0]+128)))),ce=this.getBounds(e),re=D.sub(e.handles.bend.point,[ce.width/2,ce.height/2]),ne=ce.width/2-b[0]/2*J+re[0],le=ce.height/2-b[1]/2*J+re[1];return A.setAttribute("transform",`translate(${ne}, ${le})`),A.setAttribute("fill",Ar(e.style,t).stroke),A.setAttribute("transform-origin","center center"),C.setAttribute("text-align","center"),C.setAttribute("text-anchor","middle"),C.appendChild(g),C.appendChild(A),C}return g}})}},Wq=qe("div",{width:"100%",height:"100%"}),Kq={easing:e=>Math.sin(e*Math.PI/2),simulatePressure:!0},Yq={easing:e=>e*e,simulatePressure:!1};function fu(e){let t=Ar(e.style);return ye(Y({size:1+t.strokeWidth*1.5,thinning:.65,streamline:.65,smoothing:.65},e.points[1][2]===.5?Kq:Yq),{last:e.isComplete})}function Xq(e){return e.points.length<2?"":X.getSvgPathFromStroke(ji(e.points,fu(e)).map(t=>t.point))}function bd(e,t){return ji(e.points,t)}function qq(e){if(e.points.length<2)return"";let t=fu(e),r=bd(e,t);return X.getSvgPathFromStroke(os(r,t))}function xd(e){let{points:t}=e;if(t.length<2)return"M 0 0 L 0 0";let r=fu(e),i=bd(e,r),s=t[t.length-1];return ee.isEqual(i[0].point,s)||i.push({point:s}),X.getSvgPathFromStrokePoints(i)}var Jq=class extends xr{constructor(){super(...arguments),S(this,"type","draw"),S(this,"pointsBoundsCache",new WeakMap([])),S(this,"shapeBoundsCache",new Map),S(this,"rotatedCache",new WeakMap([])),S(this,"pointCache",{}),S(this,"canClone",!0),S(this,"getShape",e=>X.deepMerge({id:"id",type:"draw",name:"Draw",parentId:"page",childIndex:1,point:[0,0],rotation:0,style:eo,points:[],isComplete:!1},e)),S(this,"Component",xr.Component(({shape:e,meta:t,isSelected:r,isGhost:i,events:s},l)=>{let{points:h,style:g,isComplete:f}=e,C=u.useMemo(()=>Xq(e),[h,g.size]),y=u.useMemo(()=>g.dash==="draw"?qq(e):xd(e),[h,g.size,g.dash,f]),b=Ar(g,t.isDarkMode),{stroke:R,fill:k,strokeWidth:A}=b,O=this.getBounds(e);if(O.width<=A/2&&O.height<=A/2){let ce=1+A;return u.createElement(_n,Y({ref:l,id:e.id+"_svg"},s),u.createElement("circle",{r:ce,fill:R,stroke:R,pointerEvents:"all",opacity:i?.3:1}))}let B=g.isFilled&&h.length>3&&D.dist(h[0],h[h.length-1])<A*2;if(e.style.dash==="draw")return u.createElement(_n,Y({ref:l,id:e.id+"_svg"},s),u.createElement("g",{opacity:i?.3:1},u.createElement("path",{className:B||r?"tl-fill-hitarea":"tl-stroke-hitarea",d:y}),B&&u.createElement("path",{d:C,stroke:"none",fill:k,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"}),u.createElement("path",{d:y,fill:R,stroke:R,strokeWidth:A/2,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"})));let F={draw:"none",solid:"none",dotted:`0.1 ${A*4}`,dashed:`${A*4} ${A*4}`}[g.dash],j={draw:"none",solid:"none",dotted:"0",dashed:"0"}[g.dash],J=1+A*1.5;return u.createElement(_n,Y({ref:l,id:e.id+"_svg"},s),u.createElement("g",{opacity:i?.3:1},u.createElement("path",{className:B&&r?"tl-fill-hitarea":"tl-stroke-hitarea",d:y}),u.createElement("path",{d:y,fill:B?k:"none",stroke:"none",strokeWidth:Math.min(4,A*2),strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"}),u.createElement("path",{d:y,fill:"none",stroke:R,strokeWidth:J,strokeDasharray:F,strokeDashoffset:j,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"})))})),S(this,"Indicator",xr.Indicator(({shape:e})=>{let{points:t}=e,r=u.useMemo(()=>xd(e),[t]),i=this.getBounds(e);return i.width<4&&i.height<4?u.createElement("circle",{x:i.width/2,y:i.height/2,r:1}):u.createElement("path",{d:r})})),S(this,"transform",(e,t,{initialShape:r,scaleX:i,scaleY:s})=>{let l=X.getFromCache(this.boundsCache,r,()=>X.getBoundsFromPoints(r.points)),h=r.points.map(([C,y,b])=>[t.width*(i<0?1-C/l.width:C/l.width),t.height*(s<0?1-y/l.height:y/l.height),b]),g=X.getBoundsFromPoints(e.points),f=D.sub([t.minX,t.minY],[g.minX,g.minY]);return{points:h,point:f}}),S(this,"getBounds",e=>{let t=!this.pointsBoundsCache.has(e.points),r=this.pointCache[e.id]!==e.point;if(t){let i=X.getBoundsFromPoints(e.points);this.pointsBoundsCache.set(e.points,i),this.shapeBoundsCache.set(e.id,X.translateBounds(i,e.point)),this.pointCache[e.id]=e.point}else r&&!t&&(this.pointCache[e.id]=e.point,this.shapeBoundsCache.set(e.id,X.translateBounds(this.pointsBoundsCache.get(e.points),e.point)));return this.shapeBoundsCache.get(e.id)}),S(this,"shouldRender",(e,t)=>t.points!==e.points||t.style!==e.style||t.isComplete!==e.isComplete),S(this,"hitTestPoint",(e,t)=>{let r=D.sub(t,e.point);return X.pointInPolyline(r,e.points)}),S(this,"hitTestLineSegment",(e,t,r)=>{let{points:i,point:s}=e,l=D.sub(t,s),h=D.sub(r,s),g=this.getBounds(e);if(g.width<8&&g.height<8)return D.distanceToLineSegment(t,r,X.getBoundsCenter(g))<5;if(co(l,h,g)){for(let f=1;f<i.length;f++)if(In(i[f-1],i[f],l,h).didIntersect)return!0}return!1}),S(this,"hitTestBounds",(e,t)=>{if(!e.rotation){let s=this.getBounds(e);return X.boundsContain(t,s)||(X.boundsContain(s,t)||$s(s,t).length>0)&&Vo(X.translateBounds(t,D.neg(e.point)),e.points).length>0}let r=this.getRotatedBounds(e),i=X.getFromCache(this.rotatedCache,e,()=>{let s=X.getBoundsCenter(X.getBoundsFromPoints(e.points));return e.points.map(l=>D.rotWith(l,s,e.rotation||0))});return X.boundsContain(t,r)||Vo(X.translateBounds(t,D.neg(e.point)),i).length>0})}},Qq=u.memo(function({radius:e,style:t,isSelected:r,isDarkMode:i}){let{stroke:s,strokeWidth:l,fill:h}=Ar(t,i),g=1+l*1.618,f=Math.max(0,e[0]-g/2),C=Math.max(0,e[1]-g/2),y=X.perimeterOfEllipse(f,C),{strokeDasharray:b,strokeDashoffset:R}=X.getPerfectDashProps(y<64?y*2:y,l*1.618,t.dash,4);return u.createElement(u.Fragment,null,u.createElement("ellipse",{className:t.isFilled||r?"tl-fill-hitarea":"tl-stroke-hitarea",cx:e[0],cy:e[1],rx:e[0],ry:e[1]}),u.createElement("ellipse",{cx:e[0],cy:e[1],rx:f,ry:C,fill:h,stroke:s,strokeWidth:g,strokeDasharray:b,strokeDashoffset:R,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round"}))});function _d(e,t,r){let{strokeWidth:i}=Ar(r),s=X.rng(e),l=t[0]+s()*i*2,h=t[1]+s()*i*2,g=X.perimeterOfEllipse(l,h),f=[],C=Math.PI+Math.PI*s(),y=Math.abs(s()),b=Math.max(16,g/10);for(let R=0;R<b;R++){let k=pl.easeInOutSine(R/(b+1)),A=C*2+Math.PI*(2+y)*k,O=Math.cos(A),B=Math.sin(A);f.push([l*O+t[0],h*B+t[1],k+.5+s()/2])}return ji(f,{size:1+i*2,thinning:.618,end:{taper:g/8},start:{taper:g/12},streamline:0,simulatePressure:!0})}function eJ(e,t,r){let{strokeWidth:i}=Ar(r),s=X.rng(e),l=t[0]+s()*i*2,h=t[1]+s()*i*2,g=X.perimeterOfEllipse(l,h);return X.getSvgPathFromStroke(os(_d(e,t,r),{size:2+i*2,thinning:.618,end:{taper:g/8},start:{taper:g/12},streamline:0,simulatePressure:!0}))}function Sd(e,t,r){return X.getSvgPathFromStrokePoints(_d(e,t,r))}var tJ=u.memo(function({id:e,radius:t,style:r,isSelected:i,isDarkMode:s}){let{stroke:l,strokeWidth:h,fill:g}=Ar(r,s),f=eJ(e,t,r);return u.createElement(u.Fragment,null,u.createElement("ellipse",{className:r.isFilled||i?"tl-fill-hitarea":"tl-stroke-hitarea",cx:t[0],cy:t[1],rx:t[0],ry:t[1]}),r.isFilled&&u.createElement("path",{d:Sd(e,t,r),stroke:"none",fill:g,pointerEvents:"none"}),u.createElement("path",{d:f,fill:l,stroke:l,strokeWidth:h,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round"}))}),rJ=class extends xr{constructor(){super(...arguments),S(this,"type","ellipse"),S(this,"canBind",!0),S(this,"canClone",!0),S(this,"canEdit",!0),S(this,"getShape",e=>X.deepMerge({id:"id",type:"ellipse",name:"Ellipse",parentId:"page",childIndex:1,point:[0,0],radius:[1,1],rotation:0,style:eo,label:"",labelPoint:[.5,.5]},e)),S(this,"Component",xr.Component(({shape:e,isGhost:t,isSelected:r,isBinding:i,isEditing:s,meta:l,bounds:h,events:g,onShapeChange:f,onShapeBlur:C},y)=>{let{id:b,radius:R,style:k,label:A="",labelPoint:O=iu}=e,B=wo(e.style),F=Ar(k,l.isDarkMode),j=F.strokeWidth,J=1+j*1.618,ce=Math.max(0,R[0]-J/2),re=Math.max(0,R[1]-J/2),ne=k.dash==="draw"?tJ:Qq,le=u.useCallback(me=>f?.({id:b,label:me}),[f]);return u.createElement(nJ,Y({ref:y},g),u.createElement(Cl,{isEditing:s,onChange:le,onBlur:C,font:B,text:A,color:F.stroke,offsetX:(O[0]-.5)*h.width,offsetY:(O[1]-.5)*h.height}),u.createElement(_n,{id:e.id+"_svg",opacity:t?.3:1},i&&u.createElement("ellipse",{className:"tl-binding-indicator",cx:R[0],cy:R[1],rx:ce,ry:re,strokeWidth:this.bindingDistance}),u.createElement(ne,{id:b,radius:R,style:k,isSelected:r,isDarkMode:l.isDarkMode})))})),S(this,"Indicator",xr.Indicator(({shape:e})=>{let{id:t,radius:r,style:i}=e,s=Ar(i).strokeWidth,l=1+s*1.618,h=Math.max(0,r[0]-l/2),g=Math.max(0,r[1]-l/2);return i.dash==="draw"?u.createElement("path",{d:Sd(t,r,i)}):u.createElement("ellipse",{cx:r[0],cy:r[1],rx:h,ry:g})})),S(this,"hitTestPoint",(e,t)=>X.pointInBounds(t,this.getRotatedBounds(e))&&X.pointInEllipse(t,this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0)),S(this,"hitTestLineSegment",(e,t,r)=>Vn(t,r,this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0).didIntersect),S(this,"getBounds",e=>X.getFromCache(this.boundsCache,e,()=>X.getRotatedEllipseBounds(e.point[0],e.point[1],e.radius[0],e.radius[1],0))),S(this,"getRotatedBounds",e=>X.getRotatedEllipseBounds(e.point[0],e.point[1],e.radius[0],e.radius[1],e.rotation)),S(this,"hitTestBounds",(e,t)=>{let r=this.getBounds(e);return X.boundsContained(r,t)||Ea(this.getCenter(e),e.radius[0],e.radius[1],e.rotation||0,t).length>0}),S(this,"shouldRender",(e,t)=>t.radius!==e.radius||t.style!==e.style||t.label!==e.label),S(this,"getCenter",e=>D.add(e.point,e.radius)),S(this,"getBindingPoint",(e,t,r,i,s,l)=>{{let h=this.getExpandedBounds(e),g=this.getCenter(e),f,C;if(!X.pointInEllipse(r,g,e.radius[0]+this.bindingDistance,e.radius[1]+this.bindingDistance))return;if(l)D.dist(r,this.getCenter(e))<12?f=[.5,.5]:f=D.divV(D.sub(r,[h.minX,h.minY]),[h.width,h.height]),C=0;else{let y=$o(i,s,g,e.radius[0],e.radius[1],e.rotation||0).points.sort((R,k)=>D.dist(R,i)-D.dist(k,i))[0];if(y||(y=Vn(r,g,g,e.radius[0],e.radius[1],e.rotation||0).points.sort((R,k)=>D.dist(R,r)-D.dist(k,r))[0]),!y)return;let b=D.med(r,y);if(D.distanceToLineSegment(r,b,this.getCenter(e))<12?f=[.5,.5]:f=D.divV(D.sub(b,[h.minX,h.minY]),[h.width,h.height]),X.pointInEllipse(r,g,e.radius[0],e.radius[1],e.rotation||0))C=this.bindingDistance/2;else{let R=Vn(r,g,g,e.radius[0],e.radius[1],e.rotation||0).points[0];if(!R)return;C=Math.max(this.bindingDistance/2,D.dist(r,R))}}return{point:f,distance:C}}}),S(this,"transform",(e,t,{scaleX:r,scaleY:i,initialShape:s})=>{let{rotation:l=0}=s;return{point:[t.minX,t.minY],radius:[t.width/2,t.height/2],rotation:r<0&&i>=0||i<0&&r>=0?-(l||0):l||0}}),S(this,"transformSingle",(e,t)=>({point:D.toFixed([t.minX,t.minY]),radius:D.div([t.width,t.height],2)}))}},nJ=qe("div",{width:"100%",height:"100%"}),iJ=class extends xr{constructor(){super(...arguments),S(this,"type","group"),S(this,"canBind",!0),S(this,"getShape",e=>X.deepMerge({id:"id",type:"group",name:"Group",parentId:"page",childIndex:1,point:[0,0],size:[100,100],rotation:0,children:[],style:eo},e)),S(this,"Component",xr.Component(({shape:e,isBinding:t,isGhost:r,isHovered:i,isSelected:s,events:l},h)=>{let{id:g,size:f}=e,C=2,y=Math.max(0,f[0]-C/2),b=Math.max(0,f[1]-C/2),R=[[[C/2,C/2],[y,C/2],y-C/2],[[y,C/2],[y,b],b-C/2],[[y,b],[C/2,b],y-C/2],[[C/2,b],[C/2,C/2],b-C/2]].map(([k,A],O)=>u.createElement("line",{key:g+"_"+O,x1:k[0],y1:k[1],x2:A[0],y2:A[1]}));return u.createElement(_n,Y({ref:h},l),t&&u.createElement("rect",{className:"tl-binding-indicator",strokeWidth:this.bindingDistance}),u.createElement("g",{opacity:r?.3:1},u.createElement("rect",{x:0,y:0,width:f[0],height:f[1],fill:"transparent",pointerEvents:"all"}),u.createElement(Ld,{stroke:"black",opacity:i||s?1:0,strokeLinecap:"round",pointerEvents:"stroke"},R)))})),S(this,"Indicator",xr.Indicator(({shape:e})=>{let{id:t,size:r}=e,i=2,s=Math.max(0,r[0]-i/2),l=Math.max(0,r[1]-i/2),h=[[[i/2,i/2],[s,i/2],s-i/2],[[s,i/2],[s,l],l-i/2],[[s,l],[i/2,l],s-i/2],[[i/2,l],[i/2,i/2],l-i/2]].map(([g,f],C)=>u.createElement("line",{key:t+"_"+C,x1:g[0],y1:g[1],x2:f[0],y2:f[1]}));return u.createElement(Ld,{strokeLinecap:"round",pointerEvents:"stroke"},h)})),S(this,"getBounds",e=>ta(e,this.boundsCache)),S(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style)}},Ld=qe("g",{strokeWidth:"calc(1.5px * var(--tl-scale))",strokeDasharray:"calc(1px * var(--tl-scale)), calc(3px * var(--tl-scale))"}),oJ=class extends xr{constructor(){super(...arguments),S(this,"type","image"),S(this,"canBind",!0),S(this,"canClone",!0),S(this,"isAspectRatioLocked",!0),S(this,"showCloneHandles",!1),S(this,"getShape",e=>X.deepMerge({id:"image",type:"image",name:"Image",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:ye(Y({},eo),{isFilled:!0}),assetId:"assetId"},e)),S(this,"Component",xr.Component(({shape:e,asset:t={src:""},isBinding:r,isGhost:i,meta:s,events:l,onShapeChange:h},g)=>{let{size:f,style:C}=e,{bindingDistance:y}=this,b=u.useRef(null),R=u.useRef(null);return u.useLayoutEffect(()=>{let k=R.current;if(!k)return;let[A,O]=f;k.style.width=`${A}px`,k.style.height=`${O}px`},[f]),u.createElement(zn,Y({ref:g},l),r&&u.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:`calc(${-y}px * var(--tl-zoom))`,left:`calc(${-y}px * var(--tl-zoom))`,width:`calc(100% + ${y*2}px * var(--tl-zoom))`,height:`calc(100% + ${y*2}px * var(--tl-zoom))`,backgroundColor:"var(--tl-selectFill)"}}),u.createElement(sJ,{ref:R,isDarkMode:s.isDarkMode,isFilled:C.isFilled,isGhost:i},u.createElement(aJ,{id:e.id+"_image",ref:b,src:t.src,alt:"tl_image_asset",draggable:!1})))})),S(this,"Indicator",xr.Indicator(({shape:e})=>{let{size:[t,r]}=e;return u.createElement("rect",{x:0,y:0,rx:2,ry:2,width:Math.max(1,t),height:Math.max(1,r)})})),S(this,"getBounds",e=>ta(e,this.boundsCache)),S(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style),S(this,"transform",El),S(this,"transformSingle",yl),S(this,"getSvgElement",e=>{let t=this.getBounds(e),r=document.createElementNS("http://www.w3.org/2000/svg","image");return r.setAttribute("width",`${t.width}`),r.setAttribute("height",`${t.height}`),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r})}},sJ=(0,Js.zo)("div",{pointerEvents:"all",position:"relative",fontFamily:"sans-serif",fontSize:"2em",height:"100%",width:"100%",borderRadius:"3px",perspective:"800px",overflow:"hidden",p:{userSelect:"none"},img:{userSelect:"none"},variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:.3}},isFilled:{true:{},false:{}},isDarkMode:{true:{},false:{}}},compoundVariants:[{isFilled:!0,isDarkMode:!0,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"}},{isFilled:!0,isDarkMode:!1,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}]}),aJ=(0,Js.zo)("img",{position:"absolute",top:0,left:0,width:"100%",height:"100%",maxWidth:"100%",minWidth:"100%",pointerEvents:"none",objectFit:"cover",userSelect:"none",borderRadius:2});function lJ({strokeWidth:e,size:t}){return u.createElement("rect",{className:"tl-binding-indicator",x:e,y:e,width:Math.max(0,t[0]-e/2),height:Math.max(0,t[1]-e/2),strokeWidth:16*2})}var uJ=u.memo(function({id:e,style:t,size:r,isSelected:i,isDarkMode:s}){let{stroke:l,strokeWidth:h,fill:g}=Ar(t,s),f=1+h*1.618,C=Math.max(0,r[0]-f/2),y=Math.max(0,r[1]-f/2),b=[[[f/2,f/2],[C,f/2],C-f/2],[[C,f/2],[C,y],y-f/2],[[C,y],[f/2,y],C-f/2],[[f/2,y],[f/2,f/2],y-f/2]].map(([R,k,A],O)=>{let{strokeDasharray:B,strokeDashoffset:F}=X.getPerfectDashProps(A,h*1.618,t.dash);return u.createElement("line",{key:e+"_"+O,x1:R[0],y1:R[1],x2:k[0],y2:k[1],strokeDasharray:B,strokeDashoffset:F})});return u.createElement(u.Fragment,null,u.createElement("rect",{className:i||t.isFilled?"tl-fill-hitarea":"tl-stroke-hitarea",x:f/2,y:f/2,width:C,height:y,strokeWidth:16}),t.isFilled&&u.createElement("rect",{x:f/2,y:f/2,width:C,height:y,fill:g,pointerEvents:"none"}),u.createElement("g",{pointerEvents:"none",stroke:l,strokeWidth:f,strokeLinecap:"round"},b))});function cJ(e,t,r){let i=Ar(t),s=X.rng(e),l=i.strokeWidth,h=Math.max(0,r[0]),g=Math.max(0,r[1]),f=Array.from(Array(4)).map(()=>[s()*l*.75,s()*l*.75]),C=ee.add([l/2,l/2],f[0]),y=ee.add([h-l/2,l/2],f[1]),b=ee.add([h-l/2,g-l/2],f[2]),R=ee.add([l/2,g-l/2],f[3]),k=Math.round(Math.abs(s()*2*4)),A=Math.min(h/4,l*2),O=Math.min(g/4,l*2),B=Math.max(8,Math.floor(h/16)),F=Math.max(8,Math.floor(g/16)),j=X.rotateArray([ee.pointsBetween(ee.add(C,[A,0]),ee.sub(y,[A,0]),B),ee.pointsBetween(ee.add(y,[0,O]),ee.sub(b,[0,O]),F),ee.pointsBetween(ee.sub(b,[A,0]),ee.add(R,[A,0]),B),ee.pointsBetween(ee.sub(R,[0,O]),ee.add(C,[0,O]),F)],k);return{points:[...j.flat(),...j[0]].slice(5,Math.floor((k%2===0?B:F)/-2)+3)}}function Rd(e,t,r){let{points:i}=cJ(e,t,r),{strokeWidth:s}=Ar(t);return{points:i,options:{size:s,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}function dJ(e,t,r){let{points:i,options:s}=Rd(e,t,r),l=ei(i,s);return X.getSvgPathFromStroke(l)}function Id(e,t,r){let{points:i,options:s}=Rd(e,t,r);return X.getSvgPathFromStrokePoints(ji(i,s))}var hJ=u.memo(function({id:e,style:t,size:r,isSelected:i,isDarkMode:s}){let{isFilled:l}=t,{stroke:h,strokeWidth:g,fill:f}=Ar(t,s),C=dJ(e,t,r),y=Id(e,t,r);return u.createElement(u.Fragment,null,u.createElement("path",{className:t.isFilled||i?"tl-fill-hitarea":"tl-stroke-hitarea",d:y}),l&&u.createElement("path",{d:y,fill:f,pointerEvents:"none"}),u.createElement("path",{d:C,fill:h,stroke:h,strokeWidth:g,pointerEvents:"none"}))}),fJ=class extends xr{constructor(){super(...arguments),S(this,"type","rectangle"),S(this,"canBind",!0),S(this,"canClone",!0),S(this,"canEdit",!0),S(this,"getShape",e=>X.deepMerge({id:"id",type:"rectangle",name:"Rectangle",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:eo,label:"",labelPoint:[.5,.5]},e)),S(this,"Component",xr.Component(({shape:e,isEditing:t,isBinding:r,isSelected:i,isGhost:s,meta:l,bounds:h,events:g,onShapeBlur:f,onShapeChange:C},y)=>{let{id:b,size:R,style:k,label:A="",labelPoint:O=iu}=e,B=wo(k),F=Ar(k,l.isDarkMode),j=k.dash==="draw"?hJ:uJ,J=u.useCallback(ce=>C?.({id:b,label:ce}),[C]);return u.createElement(pJ,Y({ref:y},g),u.createElement(Cl,{isEditing:t,onChange:J,onBlur:f,font:B,text:A,color:F.stroke,offsetX:(O[0]-.5)*h.width,offsetY:(O[1]-.5)*h.height}),u.createElement(_n,{id:e.id+"_svg",opacity:s?.3:1},r&&u.createElement(lJ,{strokeWidth:F.strokeWidth,size:R}),u.createElement(j,{id:b,style:k,size:R,isSelected:i,isDarkMode:l.isDarkMode})))})),S(this,"Indicator",xr.Indicator(({shape:e})=>{let{id:t,style:r,size:i}=e,s=Ar(r,!1).strokeWidth;return r.dash==="draw"?u.createElement("path",{d:Id(t,r,i)}):u.createElement("rect",{x:s,y:s,rx:1,ry:1,width:Math.max(1,i[0]-s*2),height:Math.max(1,i[1]-s*2)})})),S(this,"getBounds",e=>ta(e,this.boundsCache)),S(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style||t.label!==e.label),S(this,"transform",El),S(this,"transformSingle",yl)}},pJ=qe("div",{width:"100%",height:"100%"}),gJ=class extends xr{constructor(){super(...arguments),S(this,"type","sticky"),S(this,"canBind",!0),S(this,"canEdit",!0),S(this,"canClone",!0),S(this,"hideResizeHandles",!0),S(this,"showCloneHandles",!0),S(this,"getShape",e=>X.deepMerge({id:"id",type:"sticky",name:"Sticky",parentId:"page",childIndex:1,point:[0,0],size:[200,200],text:"",rotation:0,style:cu},e)),S(this,"Component",xr.Component(({shape:e,meta:t,events:r,isGhost:i,isBinding:s,isEditing:l,onShapeBlur:h,onShapeChange:g},f)=>{let C=Oq(e.style),{color:y,fill:b}=vd(e.style,t.isDarkMode),R=u.useRef(null),k=u.useRef(null),A=u.useRef(null),O=u.useRef(!1),B=u.useCallback(le=>{le.stopPropagation()},[]),F=u.useCallback(le=>{g?.({id:e.id,type:e.type,text:_e.normalizeText(le)})},[e.id]),j=u.useCallback(le=>{F(le.currentTarget.value)},[g,F]),J=u.useCallback(le=>{if(le.key==="Escape"){le.preventDefault(),le.stopPropagation(),h?.();return}if(le.key==="Tab"&&e.text.length===0){le.preventDefault();return}if(!(le.key==="Meta"||le.metaKey))le.stopPropagation();else if(le.key==="z"&&le.metaKey){le.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),le.stopPropagation(),le.preventDefault();return}(le.metaKey||le.ctrlKey)&&le.key==="="&&le.preventDefault(),le.key==="Tab"&&(le.preventDefault(),le.shiftKey?$n.unindent(le.currentTarget):$n.indent(le.currentTarget),g?.(ye(Y({},e),{text:_e.normalizeText(le.currentTarget.value)})))},[e,g]),ce=u.useCallback(le=>{le.currentTarget.setSelectionRange(0,0),h?.()},[]),re=u.useCallback(le=>{!l||!O.current||le.currentTarget.select()},[l]);u.useEffect(()=>{if(l){O.current=!0;let le=k.current;le.focus(),le.select()}},[l]),u.useEffect(()=>{let le=A.current,{size:me}=e,{offsetHeight:Ve}=le,lt=pu-to*2,Ye=me[1]-to*2;if(Ve===Ye)return;if(Ve>lt){g?.({id:e.id,size:[me[0],Ve+to*2]});return}if(Ve<lt&&me[1]>pu){g?.({id:e.id,size:[me[0],pu]});return}let ct=k.current;ct?.focus()},[e.text,e.size[1],e.style]);let ne={font:C,color:y,textShadow:t.isDarkMode?"0.5px 0.5px 2px rgba(255, 255, 255,.25)":"0.5px 0.5px 2px rgba(255, 255, 255,.5)"};return u.createElement(zn,Y({ref:f},r),u.createElement(mJ,{ref:R,isDarkMode:t.isDarkMode,isGhost:i,style:Y({backgroundColor:b},ne)},s&&u.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),u.createElement(vJ,{ref:A,isEditing:l,alignment:e.style.textAlign},e.text,"\u200B"),l&&u.createElement(CJ,{ref:k,onPointerDown:B,value:e.text,onChange:j,onKeyDown:J,onFocus:re,onBlur:ce,tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,spellCheck:!0,alignment:e.style.textAlign,onContextMenu:li,onCopy:li,onPaste:li,onCut:li})))})),S(this,"Indicator",xr.Indicator(({shape:e})=>{let{size:[t,r]}=e;return u.createElement("rect",{x:0,y:0,rx:3,ry:3,width:Math.max(1,t),height:Math.max(1,r)})})),S(this,"getBounds",e=>ta(e,this.boundsCache)),S(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style||t.text!==e.text),S(this,"transform",(e,t,{scaleX:r,scaleY:i,transformOrigin:s})=>({point:D.toFixed([t.minX+(t.width-e.size[0])*(r<0?1-s[0]:s[0]),t.minY+(t.height-e.size[1])*(i<0?1-s[1]:s[1])])})),S(this,"transformSingle",e=>e),S(this,"getSvgElement",(e,t)=>{var r,i;let s=this.getBounds(e),l=vd(e.style,t),h=md(e.style.size)*((r=e.style.scale)!=null?r:1),g=na(e.style.font).slice(1,-1),f=(i=e.style.textAlign)!=null?i:"start",C=gl(e.text,h,g,f,s.width-to*2,!0);C.setAttribute("fill",l.color),C.setAttribute("transform",`translate(${to}, ${to})`);let y=document.createElementNS("http://www.w3.org/2000/svg","g"),b=document.createElementNS("http://www.w3.org/2000/svg","rect");return b.setAttribute("width",s.width+""),b.setAttribute("height",s.height+""),b.setAttribute("fill",l.fill),b.setAttribute("rx","3"),b.setAttribute("ry","3"),y.appendChild(b),y.appendChild(C),y})}},to=16,pu=200,mJ=qe("div",{pointerEvents:"all",position:"relative",backgroundColor:"rgba(255, 220, 100)",fontFamily:"sans-serif",height:"100%",width:"100%",padding:to+"px",borderRadius:"3px",perspective:"800px",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:.3}},isDarkMode:{true:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"},false:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}}}),Td={whiteSpace:"pre-wrap",overflowWrap:"break-word",letterSpacing:Ls},vJ=qe("div",Y({position:"absolute",top:to,left:to,width:`calc(100% - ${to*2}px)`,height:"fit-content",font:"inherit",pointerEvents:"none",userSelect:"none",variants:{isEditing:{true:{opacity:1},false:{opacity:1}},alignment:{start:{textAlign:"left"},middle:{textAlign:"center"},end:{textAlign:"right"},justify:{textAlign:"justify"}}}},Td)),CJ=qe("textarea",ye(Y({width:"100%",height:"100%",border:"none",overflow:"hidden",background:"none",outline:"none",textAlign:"left",font:"inherit",padding:0,color:"transparent",verticalAlign:"top",resize:"none",caretColor:"black"},Td),{variants:{alignment:{start:{textAlign:"left"},middle:{textAlign:"center"},end:{textAlign:"right"},justify:{textAlign:"justify"}}},"&:focus":{outline:"none",border:"none"}})),EJ=class extends xr{constructor(){super(...arguments),S(this,"type","text"),S(this,"isAspectRatioLocked",!0),S(this,"canEdit",!0),S(this,"canBind",!0),S(this,"canClone",!0),S(this,"bindingDistance",16/2),S(this,"getShape",e=>X.deepMerge({id:"id",type:"text",name:"Text",parentId:"page",childIndex:1,point:[0,0],rotation:0,text:" ",style:cu},e)),S(this,"texts",new Map),S(this,"Component",xr.Component(({shape:e,isBinding:t,isGhost:r,isEditing:i,onShapeBlur:s,onShapeChange:l,meta:h,events:g},f)=>{let{text:C,style:y}=e,b=Ar(y,h.isDarkMode),R=wo(e.style),k=u.useRef(null),A=u.useRef(!1),O=u.useRef(C);u.useLayoutEffect(()=>{if(C!==O.current){let re=[0,0];this.texts.set(e.id,C);let ne=this.getBounds(e),le=this.getBounds(e);switch(e.style.textAlign){case"start":break;case"middle":{re=D.div([le.width-ne.width,0],2);break}case"end":{re=[le.width-ne.width,0];break}}O.current=C,l?.(ye(Y({},e),{id:e.id,point:D.sub(e.point,re),text:C}))}},[C]);let B=u.useCallback(re=>{let ne=[0,0],le=_e.normalizeText(re.currentTarget.value),me=this.getBounds(e);this.texts.set(e.id,le);let Ve=this.getBounds(ye(Y({},e),{text:le}));switch(e.style.textAlign){case"start":break;case"middle":{ne=D.div([Ve.width-me.width,0],2);break}case"end":{ne=[Ve.width-me.width,0];break}}O.current=le,l?.(ye(Y({},e),{id:e.id,point:D.sub(e.point,ne),text:le}))},[e.id,e.point]),F=u.useCallback(re=>{if(re.key==="Escape"){re.preventDefault(),re.stopPropagation(),s?.();return}if(re.key==="Tab"&&e.text.length===0){re.preventDefault();return}if(re.key==="Enter"&&(re.metaKey||re.ctrlKey)){re.preventDefault(),re.stopPropagation(),k.current.blur();return}if(!(re.key==="Meta"||re.metaKey))re.stopPropagation();else if(re.key==="z"&&re.metaKey){re.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),re.stopPropagation(),re.preventDefault();return}(re.metaKey||re.ctrlKey)&&re.key==="="&&re.preventDefault(),re.key==="Tab"&&(re.preventDefault(),re.shiftKey?$n.unindent(re.currentTarget):$n.indent(re.currentTarget),l?.(ye(Y({},e),{text:_e.normalizeText(re.currentTarget.value)})))},[e,l]),j=u.useCallback(re=>{re.currentTarget.setSelectionRange(0,0),s?.()},[]),J=u.useCallback(re=>{!i||!A.current||document.activeElement===re.currentTarget&&re.currentTarget.select()},[i]),ce=u.useCallback(re=>{i&&re.stopPropagation()},[i]);return u.useEffect(()=>{i?(this.texts.set(e.id,C),requestAnimationFrame(()=>{A.current=!0;let re=k.current;re&&(re.focus(),re.select())})):s?.()},[i]),u.createElement(zn,Y({ref:f},g),u.createElement(wJ,{isGhost:r,isEditing:i,onPointerDown:ce},u.createElement(bJ,{style:{font:R,color:b.stroke,textAlign:yq(y.textAlign)}},t&&u.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),i?u.createElement(xJ,{ref:k,style:{font:R,color:b.stroke},name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:C,color:b.stroke,onFocus:J,onChange:B,onKeyDown:F,onBlur:j,onPointerDown:ce,onContextMenu:li,onCopy:li,onPaste:li,onCut:li}):C,"\u200B")))})),S(this,"Indicator",xr.Indicator(({shape:e})=>{let{width:t,height:r}=this.getBounds(e);return u.createElement("rect",{x:0,y:0,width:t,height:r})})),S(this,"getBounds",e=>{let t=X.getFromCache(this.boundsCache,e,()=>{var r;if(!es)return{minX:0,minY:0,maxX:10,maxY:10,width:10,height:10};es.parentNode||document.body.appendChild(es),es.style.font=wo(e.style),es.textContent=(r=this.texts.get(e.id))!=null?r:e.text;let i=es.offsetWidth||1,s=es.offsetHeight||1;return{minX:0,maxX:i,minY:0,maxY:s,width:i,height:s}});return X.translateBounds(t,e.point)}),S(this,"shouldRender",(e,t)=>t.text!==e.text||t.style.scale!==e.style.scale||t.style!==e.style),S(this,"transform",(e,t,{initialShape:r,scaleX:i,scaleY:s})=>{let{rotation:l=0,style:{scale:h=1}}=r,g=h*Math.abs(Math.min(i,s));return{point:[t.minX,t.minY],rotation:i<0&&s>=0||s<0&&i>=0?-(l||0):l,style:ye(Y({},r.style),{scale:g})}}),S(this,"transformSingle",(e,t,{initialShape:r,scaleX:i,scaleY:s})=>{let{style:{scale:l=1}}=r;return{point:D.toFixed([t.minX,t.minY]),style:ye(Y({},r.style),{scale:l*Math.max(Math.abs(s),Math.abs(i))})}}),S(this,"onDoubleClickBoundsHandle",e=>{let t=this.getCenter(e),r=this.getCenter(ye(Y({},e),{style:ye(Y({},e.style),{scale:1})}));return{style:ye(Y({},e.style),{scale:1}),point:D.toFixed(D.add(e.point,D.sub(t,r)))}}),S(this,"getSvgElement",(e,t)=>{var r,i;let s=this.getBounds(e),l=Ar(e.style,t),h=vl(e.style.size,e.style.font)*((r=e.style.scale)!=null?r:1),g=na(e.style.font).slice(1,-1),f=(i=e.style.textAlign)!=null?i:"start",C=gl(e.text,h,g,f,s.width,!1);return C.setAttribute("fill",l.stroke),C})}},es;function yJ(){var e;(e=document.getElementById("__textMeasure"))==null||e.remove();let t=document.createElement("pre");return t.id="__textMeasure",Object.assign(t.style,{whiteSpace:"pre",width:"auto",border:"1px solid transparent",padding:"4px",margin:"0px",letterSpacing:Ls,opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",pointerEvents:"none",userSelect:"none",alignmentBaseline:"mathematical",dominantBaseline:"mathematical"}),t.tabIndex=-1,document.body.appendChild(t),t}typeof window<"u"&&(es=yJ());var wJ=qe("div",{width:"100%",height:"100%",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:.3}},isEditing:{false:{pointerEvents:"all",userSelect:"all"},true:{pointerEvents:"none",userSelect:"none"}}}}),Dd={whiteSpace:"pre-wrap",overflowWrap:"break-word"},bJ=qe("div",Y({position:"absolute",width:"100%",height:"100%",padding:"4px",zIndex:1,minHeight:1,minWidth:1,lineHeight:1,letterSpacing:Ls,outline:0,fontWeight:"500",backfaceVisibility:"hidden",userSelect:"none",pointerEvents:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",isEditing:{false:{},true:{pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"}}},Dd)),xJ=qe("textarea",ye(Y({position:"absolute",top:0,left:0,zIndex:1,width:"100%",height:"100%",border:"none",padding:"4px",resize:"none",textAlign:"inherit",minHeight:"inherit",minWidth:"inherit",lineHeight:"inherit",letterSpacing:"inherit",outline:0,fontWeight:"inherit",overflow:"hidden",backfaceVisibility:"hidden",display:"inline-block",pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"},Dd),{"&:focus":{outline:"none",border:"none"}}));function Is(e,t=0,r=0){let[i,s]=e,l=[[i/2,0],[i,s],[0,s]];return t&&(l=Rq(l,t)),r&&(l=l.map(h=>ee.rotWith(h,[i/2,s/2],r))),l}function Ad(e){let[t,r]=e,i=[[t/2,0],[t,r],[0,r]];return[(i[0][0]+i[1][0]+i[2][0])/3,(i[0][1]+i[1][1]+i[2][1])/3]}function _J(e,t,r){let[i,s]=t,l=X.rng(e),h=Array.from(Array(3)).map(()=>[l()*r*.75,l()*r*.75]),g=[ee.add([i/2,0],h[0]),ee.add([i,s],h[1]),ee.add([0,s],h[2])],f=Math.round(Math.abs(l()*2*3)),C=X.rotateArray([ee.pointsBetween(g[0],g[1],32),ee.pointsBetween(g[1],g[2],32),ee.pointsBetween(g[2],g[0],32)],f);return{points:[...C.flat(),...C[0]]}}function kd(e,t,r){let{strokeWidth:i}=Ar(r),{points:s}=_J(e,t,i);return{points:s,options:{size:i,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}function SJ(e,t,r){let{points:i,options:s}=kd(e,t,r),l=ei(i,s);return X.getSvgPathFromStroke(l)}function LJ(e,t,r){let{points:i,options:s}=kd(e,t,r);return X.getSvgPathFromStrokePoints(ji(i,s))}var RJ=u.memo(function({id:e,size:t,style:r,isSelected:i,isDarkMode:s}){let{stroke:l,strokeWidth:h,fill:g}=Ar(r,s),f=1+h*1.618,C=Is(t),y=X.pointsToLineSegments(C,!0).map(([R,k],A)=>{let{strokeDasharray:O,strokeDashoffset:B}=X.getPerfectDashProps(ee.dist(R,k),h*1.618,r.dash);return u.createElement("line",{key:e+"_"+A,x1:R[0],y1:R[1],x2:k[0],y2:k[1],stroke:l,strokeWidth:f,strokeLinecap:"round",strokeDasharray:O,strokeDashoffset:B})}),b=C.join();return u.createElement(u.Fragment,null,u.createElement("polygon",{className:r.isFilled||i?"tl-fill-hitarea":"tl-stroke-hitarea",points:b}),r.isFilled&&u.createElement("polygon",{fill:g,points:b,pointerEvents:"none"}),u.createElement("g",{pointerEvents:"stroke"},y))}),IJ=u.memo(function({id:e,size:t,style:r,isSelected:i,isDarkMode:s}){let{stroke:l,strokeWidth:h,fill:g}=Ar(r,s),f=SJ(e,t,r),C=LJ(e,t,r);return u.createElement(u.Fragment,null,u.createElement("path",{className:r.isFilled||i?"tl-fill-hitarea":"tl-stroke-hitarea",d:C}),r.isFilled&&u.createElement("path",{d:C,fill:g,pointerEvents:"none"}),u.createElement("path",{d:f,fill:l,stroke:l,strokeWidth:h,pointerEvents:"none"}))});function TJ({size:e}){let t=Is(e).join();return u.createElement("polygon",{className:"tl-binding-indicator",points:t,strokeWidth:16*2})}var DJ=class extends xr{constructor(){super(...arguments),S(this,"type","triangle"),S(this,"canBind",!0),S(this,"canClone",!0),S(this,"canEdit",!0),S(this,"getShape",e=>X.deepMerge({id:"id",type:"triangle",name:"Triangle",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:eo,label:"",labelPoint:[.5,.5]},e)),S(this,"Component",xr.Component(({shape:e,bounds:t,isBinding:r,isEditing:i,isSelected:s,isGhost:l,meta:h,events:g,onShapeChange:f,onShapeBlur:C},y)=>{let{id:b,label:R="",size:k,style:A,labelPoint:O=iu}=e,B=wo(A),F=Ar(A,h.isDarkMode),j=A.dash==="draw"?IJ:RJ,J=u.useCallback(re=>f?.({id:b,label:re}),[f]),ce=u.useMemo(()=>{let re=ee.div(k,2);return(Ad(k)[1]-re[1])*.72},[k]);return u.createElement(AJ,Y({ref:y},g),u.createElement(Cl,{font:B,text:R,color:F.stroke,offsetX:(O[0]-.5)*t.width,offsetY:ce+(O[1]-.5)*t.height,isEditing:i,onChange:J,onBlur:C}),u.createElement(_n,{id:e.id+"_svg",opacity:l?.3:1},r&&u.createElement(TJ,{size:k}),u.createElement(j,{id:b,style:A,size:k,isSelected:s,isDarkMode:h.isDarkMode})))})),S(this,"Indicator",xr.Indicator(({shape:e})=>{let{size:t}=e;return u.createElement("polygon",{points:Is(t).join()})})),S(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style||t.label!==e.label),S(this,"getBounds",e=>ta(e,this.boundsCache)),S(this,"getExpandedBounds",e=>X.getBoundsFromPoints(Is(e.size,this.bindingDistance).map(t=>ee.add(t,e.point)))),S(this,"hitTestLineSegment",(e,t,r)=>ho(t,r,this.getPoints(e)).didIntersect),S(this,"hitTestBounds",(e,t)=>X.boundsContained(this.getBounds(e),t)||ya(t,this.getPoints(e)).length>0),S(this,"getBindingPoint",(e,t,r,i,s,l)=>{let h=this.getExpandedBounds(e);if(!X.pointInBounds(r,h))return;let g=Is(e.size).map(F=>ee.add(F,e.point)),f=Is(e.size,this.bindingDistance).map(F=>ee.add(F,e.point)),C=X.pointsToLineSegments(g,!0).map(([F,j])=>ee.distanceToLineSegment(F,j,r)).sort((F,j)=>F-j)[0];if(!(X.pointInPolygon(r,f)||C<this.bindingDistance))return;let y=X.pointsToLineSegments(f.concat([f[0]])).map(F=>Zi(i,s,F[0],F[1])).filter(F=>F.didIntersect).flatMap(F=>F.points);if(!y.length)return;let b=ee.add(Ad(e.size),e.point),R=y.sort((F,j)=>ee.dist(j,i)-ee.dist(F,i))[0],k=ee.med(r,R),A,O;l?(A=ee.dist(r,b)<16/2?b:r,O=0):(ee.distanceToLineSegment(r,k,b)<16/2?A=b:A=k,X.pointInPolygon(r,g)?O=this.bindingDistance:O=Math.max(this.bindingDistance,C));let B=ee.divV(ee.sub(A,[h.minX,h.minY]),[h.width,h.height]);return{point:ee.clampV(B,0,1),distance:O}}),S(this,"transform",El),S(this,"transformSingle",yl)}getPoints(e){let{rotation:t=0,point:[r,i],size:[s,l]}=e;return[[r+s/2,i],[r,i+l],[r+s,i+l]].map(h=>ee.rotWith(h,this.getCenter(e),t))}},AJ=qe("div",{width:"100%",height:"100%"}),kJ=class extends xr{constructor(){super(...arguments),S(this,"type","video"),S(this,"canBind",!0),S(this,"canEdit",!0),S(this,"canClone",!0),S(this,"isAspectRatioLocked",!0),S(this,"showCloneHandles",!1),S(this,"isStateful",!0),S(this,"getShape",e=>X.deepMerge({id:"video",type:"video",name:"Video",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:eo,assetId:"assetId",isPlaying:!0,currentTime:0},e)),S(this,"Component",xr.Component(({shape:e,asset:t={src:""},isBinding:r,isEditing:i,isGhost:s,meta:l,events:h,onShapeChange:g},f)=>{let C=u.useRef(null),y=u.useRef(null),{currentTime:b=0,size:R,isPlaying:k,style:A}=e;u.useLayoutEffect(()=>{let j=y.current;if(!j)return;let[J,ce]=R;j.style.width=`${J}px`,j.style.height=`${ce}px`},[R]),u.useLayoutEffect(()=>{let j=C.current;!j||(k?j.play():j.pause())},[k]),u.useLayoutEffect(()=>{let j=C.current;!j||b!==j.currentTime&&(j.currentTime=b)},[b]);let O=u.useCallback(()=>{g?.({id:e.id,isPlaying:!0})},[]),B=u.useCallback(()=>{g?.({id:e.id,isPlaying:!1})},[]),F=u.useCallback(()=>{let j=C.current;!j||!i||g==null||g({id:e.id,currentTime:j.currentTime})},[i]);return u.createElement(zn,Y({ref:f},h),r&&u.createElement("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-this.bindingDistance,left:-this.bindingDistance,width:`calc(100% + ${this.bindingDistance*2}px)`,height:`calc(100% + ${this.bindingDistance*2}px)`,backgroundColor:"var(--tl-selectFill)"}}),u.createElement(PJ,{ref:y,isDarkMode:l.isDarkMode,isGhost:s,isFilled:A.isFilled},u.createElement(MJ,{ref:C,id:e.id+"_video",muted:!0,loop:!0,playsInline:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:i,autoPlay:k,onPlay:O,onPause:B,onTimeUpdate:F},u.createElement("source",{src:t.src}))))})),S(this,"Indicator",xr.Indicator(({shape:e})=>{let{size:[t,r]}=e;return u.createElement("rect",{x:0,y:0,rx:2,ry:2,width:Math.max(1,t),height:Math.max(1,r)})})),S(this,"getBounds",e=>ta(e,this.boundsCache)),S(this,"shouldRender",(e,t)=>t.size!==e.size||t.style!==e.style||t.isPlaying!==e.isPlaying),S(this,"getSvgElement",e=>{let t=this.getBounds(e),r=document.createElementNS("http://www.w3.org/2000/svg","image");return r.setAttribute("width",`${t.width}`),r.setAttribute("height",`${t.height}`),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r}),S(this,"transform",El),S(this,"transformSingle",yl)}},PJ=(0,Js.zo)("div",{pointerEvents:"all",position:"relative",fontFamily:"sans-serif",fontSize:"2em",height:"100%",width:"100%",borderRadius:"3px",perspective:"800px",overflow:"hidden",p:{userSelect:"none"},img:{userSelect:"none"},variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:.3}},isFilled:{true:{},false:{}},isDarkMode:{true:{},false:{}}},compoundVariants:[{isFilled:!0,isDarkMode:!0,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"}},{isFilled:!0,isDarkMode:!1,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}]}),MJ=(0,Js.zo)("video",{position:"absolute",top:0,left:0,width:"100%",height:"100%",maxWidth:"100%",minWidth:"100%",pointerEvents:"none",objectFit:"cover",userSelect:"none",borderRadius:2}),Pd=new fJ,Md=new DJ,Od=new rJ,Bd=new Jq,gu=new Gq,OJ=new EJ,BJ=new iJ,mu=new gJ,$J=new oJ,FJ=new kJ,ia={rectangle:Pd,triangle:Md,ellipse:Od,draw:Bd,arrow:gu,text:OJ,group:BJ,sticky:mu,image:$J,video:FJ},HJ=e=>typeof e=="string"?ia[e]:ia[e.type],$d=!1,Dt=class{static getShapeUtil(e){return HJ(e)}static getSelectedShapes(e,t){let r=Dt.getPage(e,t);return Dt.getSelectedIds(e,t).map(i=>r.shapes[i])}static screenToWorld(e,t){let r=Dt.getPageState(e,e.appState.currentPageId).camera;return D.sub(D.div(t,r.zoom),r.point)}static getCameraZoom(e){return X.clamp(e,.1,5)}static getPage(e,t){return e.document.pages[t]}static getPageState(e,t){return e.document.pageStates[t]}static getSelectedIds(e,t){return Dt.getPageState(e,t).selectedIds}static getShapes(e,t){return Object.values(Dt.getPage(e,t).shapes)}static getCamera(e,t){return Dt.getPageState(e,t).camera}static getShape(e,t,r){return Dt.getPage(e,r).shapes[t]}static getCenter(e){return Dt.getShapeUtil(e).getCenter(e)}static getBounds(e){return Dt.getShapeUtil(e).getBounds(e)}static getRotatedBounds(e){return Dt.getShapeUtil(e).getRotatedBounds(e)}static getSelectedBounds(e){return X.getCommonBounds(Dt.getSelectedShapes(e,e.appState.currentPageId).map(t=>Dt.getShapeUtil(t).getBounds(t)))}static getParentId(e,t,r){return Dt.getShape(e,t,r).parentId}static getDocumentBranch(e,t,r){let i=Dt.getShape(e,t,r);return i.children===void 0?[t]:[t,...i.children.flatMap(s=>Dt.getDocumentBranch(e,s,r))]}static getSelectedBranchSnapshot(e,t,r){let i=Dt.getPage(e,t),s=Dt.getSelectedIds(e,t).flatMap(l=>Dt.getDocumentBranch(e,l,t).map(h=>i.shapes[h])).filter(l=>!l.isLocked).map(X.deepClone);return r!==void 0?s.map(l=>Y({id:l.id},r(l))):s}static getSelectedShapeSnapshot(e,t,r){let i=Dt.getSelectedShapes(e,t).filter(s=>!s.isLocked).map(X.deepClone);return r!==void 0?i.map(s=>Y({id:s.id},r(s))):i}static getAllEffectedShapeIds(e,t,r){let i=Dt.getPage(e,r),s=new Set(t);return t.forEach(l=>{let h=i.shapes[l];function g(C){C.children!==void 0&&C.children.filter(y=>!s.has(y)).forEach(y=>{s.add(y),g(i.shapes[y])})}g(h);function f(C){let y=C.parentId;y!==i.id&&(s.has(y)||(s.add(y),f(i.shapes[y])))}f(h),s.forEach(C=>{Object.values(i.bindings).filter(y=>y.fromId===C||y.toId===C).forEach(y=>s.add(y.fromId===C?y.toId:y.fromId))})}),Array.from(s.values())}static getLinkedShapeIds(e,t,r,i=!0){let s=Dt.getSelectedIds(e,t),l=Dt.getPage(e,t),h=new Set(s),g=new Set,f=[...s],C=new Set(Object.values(l.shapes).filter(y=>{var b;return y.type==="arrow"&&(y.handles.start.bindingId||((b=y.handles)==null?void 0:b.end.bindingId))}));for(;f.length;){let y=f.pop();if(!(y&&C.size))break;g.has(y)||(g.add(y),C.forEach(b=>{var R,k;let{handles:{start:{bindingId:A},end:{bindingId:O}}}=b,B=A?l.bindings[A]:null,F=O?l.bindings[O]:null,j=!1;B&&B.toId===y?(r==="center"?j=!0:((R=b.decorations)==null?void 0:R.start)&&F?j=r==="left":j=r==="right",j&&(i&&h.add(b.id),h.add(y),F&&(h.add(F.toId),f.push(F.toId)))):F&&F.toId===y&&(r==="center"?j=!0:((k=b.decorations)==null?void 0:k.end)&&B?j=r==="left":j=r==="right",j&&(i&&h.add(b.id),h.add(y),B&&(h.add(B.toId),f.push(B.toId)))),(!B||h.has(B.toId))&&(!F||h.has(F.toId))&&C.delete(b)}))}return Array.from(h.values())}static getChildIndexAbove(e,t,r){let i=e.document.pages[r],s=i.shapes[t],l;if(s.parentId===i.id)l=Object.values(i.shapes).filter(f=>f.parentId===i.id).sort((f,C)=>f.childIndex-C.childIndex);else{let f=i.shapes[s.parentId];if(!f.children)throw Error("No children in parent!");l=f.children.map(C=>i.shapes[C]).sort((C,y)=>C.childIndex-y.childIndex)}let h=l.indexOf(s),g=l[h+1];return g?g.childIndex:s.childIndex+1}static getBeforeShape(e,t){return Object.fromEntries(Object.keys(t).map(r=>[r,e[r]]))}static mutateShapes(e,t,r,i,s=!1){let l={},h={};t.forEach((f,C)=>{let y=Dt.getShape(e,f,i);if(y.isLocked)return;y?.type==="group"&&(t.length===1||s)&&y.children.forEach((R,k)=>{let A=Dt.getShape(e,R,i);if(A.isLocked)return;let O=r(A,k);O&&(l[R]=Dt.getBeforeShape(A,O),h[R]=O)});let b=r(y,C);b&&(l[f]=Dt.getBeforeShape(y,b),h[f]=b)});let g=X.deepMerge(e,{document:{pages:{[e.appState.currentPageId]:{shapes:h}}}});return{before:l,after:h,data:g}}static createShapes(e,t,r){let i={document:{pages:{[r]:{shapes:Y({},Object.fromEntries(t.flatMap(l=>{let h=[[l.id,void 0]];if(l.parentId!==r){let g=Dt.getShape(e,l.parentId,r);if(!g.children)throw Error("No children in parent!");h.push([g.id,{children:g.children}])}return h})))}}}},s={document:{pages:{[r]:{shapes:{shapes:Y({},Object.fromEntries(t.flatMap(l=>{let h=[[l.id,l]];if(l.parentId!==r){let g=Dt.getShape(e,l.parentId,r);if(!g.children)throw Error("No children in parent!");h.push([g.id,{children:[...g.children,l.id]}])}return h})))}}}}};return{before:i,after:s}}static deleteShapes(e,t,r){r=r||e.appState.currentPageId;let i=Dt.getPage(e,r),s=typeof t[0]=="string"?t:t.map(g=>g.id),l={document:{pages:{[r]:{shapes:Y({},Object.fromEntries(s.flatMap(g=>{let f=i.shapes[g],C=[[f.id,f]];if(f.parentId!==r){let y=i.shapes[f.parentId];if(!y.children)throw Error("No children in parent!");C.push([y.id,{children:y.children}])}return C}))),bindings:Y({},Object.fromEntries(Object.values(i.bindings).filter(g=>s.includes(g.fromId)||s.includes(g.toId)).map(g=>[g.id,g])))}}}},h={document:{pages:{[r]:{shapes:Y({},Object.fromEntries(s.flatMap(g=>{let f=i.shapes[g],C=[[f.id,void 0]];if(f.parentId!==i.id){let y=i.shapes[f.parentId];if(!y.children)throw Error("No children in parent!");C.push([y.id,{children:y.children.filter(b=>b!==f.id)}])}return C})))}}}};return{before:l,after:h}}static onSessionComplete(e){var t,r;let i=(r=(t=Dt.getShapeUtil(e)).onSessionComplete)==null?void 0:r.call(t,e);return i?Y(Y({},e),i):e}static onChildrenChange(e,t,r){var i,s;if(!t.children)return;let l=(s=(i=Dt.getShapeUtil(t)).onChildrenChange)==null?void 0:s.call(i,t,t.children.map(h=>Dt.getShape(e,h,r)));return l?Y(Y({},t),l):t}static updateArrowBindings(e,t){var r,i,s,l,h,g;let f={start:ui(t.handles.start),end:ui(t.handles.end)},C={isBound:!1,handle:t.handles.start,point:D.add(t.handles.start.point,t.point)},y={isBound:!1,handle:t.handles.end,point:D.add(t.handles.end.point,t.point)};if(t.handles.start.bindingId){let b=((r=t.decorations)==null?void 0:r.start)!==void 0,R=t.handles.start,k=e.bindings[t.handles.start.bindingId];if(!k)throw Error("Could not find a binding to match the start handle's bindingId: "+t.handles.start.bindingId);let A=e.shapes[k.toId],O=Dt.getShapeUtil(A),B=O.getBounds(A),F=O.getExpandedBounds(A),j=b?X.expandBounds(B,k.distance):B,{minX:J,minY:ce,width:re,height:ne}=F,le=D.add([J,ce],D.mulV([re,ne],D.rotWith(k.point,[.5,.5],A.rotation||0)));C={isBound:!0,hasDecoration:b,binding:k,handle:R,point:le,util:O,target:A,bounds:B,expandedBounds:F,intersectBounds:j,center:O.getCenter(A)}}if(t.handles.end.bindingId){let b=((i=t.decorations)==null?void 0:i.end)!==void 0,R=t.handles.end,k=e.bindings[t.handles.end.bindingId];if(!k)throw Error("Could not find a binding to match the end handle's bindingId");let A=e.shapes[k.toId],O=Dt.getShapeUtil(A),B=O.getBounds(A),F=O.getExpandedBounds(A),j=b?X.expandBounds(B,k.distance):B,{minX:J,minY:ce,width:re,height:ne}=F,le=D.add([J,ce],D.mulV([re,ne],D.rotWith(k.point,[.5,.5],A.rotation||0)));y={isBound:!0,hasDecoration:b,binding:k,handle:R,point:le,util:O,target:A,bounds:B,expandedBounds:F,intersectBounds:j,center:O.getCenter(A)}}for(let b of["end","start"]){let R=b==="start"?C:y,k=b==="start"?y:C;if(R.isBound)if(!R.binding.distance)f[b].point=D.sub(R.point,t.point);else{let A=D.uni(D.sub(R.point,k.point));switch(R.target.type){case"ellipse":{let O=$o(k.point,A,R.center,R.target.radius[0]+(R.hasDecoration?R.binding.distance:0),R.target.radius[1]+(R.hasDecoration?R.binding.distance:0),R.target.rotation||0).points.sort((B,F)=>D.dist(B,k.point)-D.dist(F,k.point));O[0]!==void 0&&(f[b].point=D.toFixed(D.sub(O[0],t.point)));break}case"triangle":{let O=R.target.point,B=Is(R.target.size,R.hasDecoration?16:0,R.target.rotation).map(j=>D.add(j,O)),F=X.pointsToLineSegments(B,!0).map(([j,J])=>Zi(k.point,A,j,J)).filter(j=>j.didIntersect).flatMap(j=>j.points).sort((j,J)=>D.dist(j,k.point)-D.dist(J,k.point));F[0]!==void 0&&(f[b].point=D.toFixed(D.sub(F[0],t.point)));break}default:{let O=ri(k.point,A,R.intersectBounds,R.target.rotation).filter(F=>F.didIntersect).map(F=>F.points[0]).sort((F,j)=>D.dist(F,k.point)-D.dist(j,k.point));if(!O[0])continue;let B;if(k.isBound&&(B=ri(k.point,A,k.intersectBounds,k.target.rotation).filter(F=>F.didIntersect).map(F=>F.points[0]).sort((F,j)=>D.dist(F,k.point)-D.dist(j,k.point))[0]),k.isBound&&(O.length<2||B&&O[0]&&Math.ceil(D.dist(O[0],B))<16*2.5||X.boundsContain(R.expandedBounds,k.expandedBounds)||X.boundsCollide(R.expandedBounds,k.expandedBounds))){let F=D.uni(D.sub(k.point,R.point)),j=ri(R.point,F,R.bounds,R.target.rotation).filter(J=>J.didIntersect).map(J=>J.points[0]);if(!j[0])continue;f[b].point=D.toFixed(D.sub(j[0],t.point)),f[b==="start"?"end":"start"].point=D.toFixed(D.add(D.sub(j[0],t.point),D.mul(F,Math.min(D.dist(j[0],k.point),16*2.5*(X.boundsContain(k.bounds,R.intersectBounds)?-1:1)))))}else if(!k.isBound&&(O[0]&&D.dist(O[0],k.point)<16*2.5||X.pointInBounds(k.point,R.intersectBounds))){let F=D.uni(D.sub(R.center,k.point));return(l=(s=Dt.getShapeUtil(t)).onHandleChange)==null?void 0:l.call(s,t,{[b]:ye(Y({},t.handles[b]),{point:D.toFixed(D.add(D.sub(k.point,t.point),D.mul(F,16*2.5)))})})}else O[0]&&(f[b].point=D.toFixed(D.sub(O[0],t.point)))}}}}return(g=(h=Dt.getShapeUtil(t)).onHandleChange)==null?void 0:g.call(h,t,f)}static transform(e,t,r){let i=Dt.getShapeUtil(e).transform(e,t,r);return i?Y(Y({},e),i):e}static transformSingle(e,t,r){let i=Dt.getShapeUtil(e).transformSingle(e,t,r);return i?Y(Y({},e),i):e}static getRotatedShapeMutation(e,t,r,i){var s,l;let h=D.sub(t,e.point),g=D.rotWith(t,r,i),f=D.toFixed(D.sub(g,h));if(e.handles!==void 0)return(l=(s=this.getShapeUtil(e)).onHandleChange)==null?void 0:l.call(s,ye(Y({},e),{point:f}),Object.fromEntries(Object.entries(e.handles).map(([y,b])=>{let R=D.toFixed(D.rotWith(b.point,h,i));return[y,ye(Y({},b),{point:R})]})));let C=X.clampRadians((e.rotation||0)+i);return{point:f,rotation:C}}static updateParents(e,t,r){let i=Dt.getPage(e,t);if(r.length===0)return;let{shapes:s}=Dt.getPage(e,t),l=Array.from(new Set(r.map(h=>s[h].parentId).values())).filter(h=>h!==i.id);for(let h of l){let g=s[h];if(!g.children)throw Error("A shape is parented to a shape without a children array.");Dt.onChildrenChange(e,g,t)}Dt.updateParents(e,t,l)}static getBinding(e,t,r){return Dt.getPage(e,r).bindings[t]}static getBindings(e,t){let r=Dt.getPage(e,t);return Object.values(r.bindings)}static getBindableShapeIds(e){return Dt.getShapes(e,e.appState.currentPageId).filter(t=>Dt.getShapeUtil(t).canBind).sort((t,r)=>r.childIndex-t.childIndex).map(t=>t.id)}static getBindingsWithShapeIds(e,t,r){return Array.from(new Set(Dt.getBindings(e,r).filter(i=>t.includes(i.toId)||t.includes(i.fromId))).values())}static getRelatedBindings(e,t,r){let i=new Set(t),s=Dt.getPage(e,r),l=Object.values(s.bindings),h=new Set(l.filter(C=>i.has(C.toId)||i.has(C.fromId))),g=h.size,f=-1;for(;f!==0;)h.forEach(C=>{let y=C.fromId;for(let b of l)b.fromId===y&&h.add(b),b.toId===y&&h.add(b)}),f=h.size-g,g=h.size;return Array.from(h.values())}static normalizeText(e){return e.replace(Dt.fixNewLines,`
`).split(`
`).map(t=>t||" ").join(`
`)}static assertShapeHasProperty(e,t){if(e[t]===void 0)throw new Error}static warn(e){$d&&console.warn(e)}static error(e){$d&&console.error(e)}static getSvgString(e,t=1){let r=e.cloneNode(!0);return e.setAttribute("width",+e.getAttribute("width")*t+""),e.setAttribute("height",+e.getAttribute("height")*t+""),new XMLSerializer().serializeToString(r).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1")}static getSvgAsDataUrl(e,t=1){let r=Dt.getSvgString(e,t);return`data:image/svg+xml;base64,${window.btoa(unescape(r))}`}static getImageForSvg(e){return Ft(this,arguments,function*(t,r="png",i={}){let{scale:s=2,quality:l=1}=i,h=Dt.getSvgString(t,s),g=+t.getAttribute("width"),f=+t.getAttribute("height");if(!h)return;let C=yield new Promise(y=>{let b=new Image;b.crossOrigin="anonymous";let R=`data:image/svg+xml;base64,${window.btoa(unescape(encodeURIComponent(h)))}`;b.onload=()=>{let k=document.createElement("canvas"),A=k.getContext("2d");k.width=g,k.height=f,A.drawImage(b,0,0,g,f),URL.revokeObjectURL(R),y(k)},b.onerror=()=>{console.warn("Could not convert that SVG to an image.")},b.src=R});return yield new Promise(y=>C.toBlob(b=>y(b),"image/"+r,l))})}},_e=Dt;S(_e,"copyStringToClipboard",e=>{try{navigator.clipboard&&navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([e],{type:"text/plain"})})])}catch{let r=document.createElement("textarea");r.setAttribute("position","fixed"),r.setAttribute("top","0"),r.setAttribute("readonly","true"),r.setAttribute("contenteditable","true"),r.style.position="fixed",r.value=e,document.body.appendChild(r),r.focus(),r.select();try{let i=document.createRange();i.selectNodeContents(r);let s=window.getSelection();s&&(s.removeAllRanges(),s.addRange(i),r.setSelectionRange(0,r.value.length)),document.execCommand("copy")}catch{}finally{document.body.removeChild(r)}}}),S(_e,"flattenShape",(e,t)=>{var r;return[t,...((r=t.children)!=null?r:[]).map(i=>Dt.getShape(e,i,e.appState.currentPageId)).sort((i,s)=>i.childIndex-s.childIndex).flatMap(i=>Dt.flattenShape(e,i))]}),S(_e,"flattenPage",(e,t)=>Object.values(e.document.pages[t].shapes).sort((r,i)=>r.childIndex-i.childIndex).reduce((r,i)=>[...r,...Dt.flattenShape(e,i)],[])),S(_e,"getTopChildIndex",(e,t)=>{let r=Dt.getShapes(e,t);return r.length===0?1:r.filter(i=>i.parentId===t).sort((i,s)=>s.childIndex-i.childIndex)[0].childIndex+1}),S(_e,"fixNewLines",/\r?\n|\r/g);var NJ=e=>e.room,VJ=function(){let e=Dr(),t=e.useStore(NJ),[r,i]=u.useState(!1),s=u.useRef(0),l=u.useCallback(()=>{i(!0),_e.copyStringToClipboard(window.location.href),clearTimeout(s.current),s.current=setTimeout(()=>i(!1),1200)},[]),h=u.useCallback(()=>{i(!0);let C=window.location.href.split("/");C[C.length-2]="v",C[C.length-1]=X.lns(C[C.length-1]),_e.copyStringToClipboard(C.join("/")),clearTimeout(s.current),s.current=setTimeout(()=>i(!1),1200)},[]),g=u.useCallback(()=>Ft(this,null,function*(){e.isDirty?e.fileSystemHandle?window.confirm("Do you want to save changes to your current project?")&&(yield e.saveProject()):window.confirm("Do you want to save your current project?")&&(yield e.saveProject()):e.fileSystemHandle||window.confirm("Do you want to save your current project?")&&(yield e.saveProject())}),[]),f=u.useCallback(()=>Ft(this,null,function*(){var C;let y=X.deepClone(e.document);e.setIsLoading(!0);try{if(e.callbacks.onAssetUpload)for(let R in y.assets){let k=y.assets[R];if(k.src.includes("base64")){let A=jJ(k.src,((C=k.fileName)!=null?C:k.type==="video")?"image.png":"image.mp4"),O=yield e.callbacks.onAssetUpload(e,A,R);O?k.src=O:k.src=""}}let b=yield fetch("/api/create",{method:"POST",mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({roomId:X.uniqueId(),pageId:e.currentPageId,document:y})}).then(R=>R.json());b?.url?window.location.href=b.url:_e.warn(b?.message)}catch(b){_e.warn(b.message)}e.setIsLoading(!1)}),[]);return u.createElement(fr.fC,{dir:"ltr"},u.createElement(sd,{id:"TD-MultiplayerMenuIcon",isActive:!!t},u.createElement(mq,null)),u.createElement(Ss,{variant:"menu",id:"TD-MultiplayerMenu",side:"bottom",align:"start",sideOffset:4},u.createElement(ar,{id:"TD-Multiplayer-CopyInviteLink",onClick:l,disabled:!t},u.createElement(st,{id:"copy.invite.link"}),u.createElement(ki,null,r?u.createElement(tl,null):u.createElement(nc,null))),u.createElement(ar,{id:"TD-Multiplayer-CopyReadOnlyLink",onClick:h,disabled:!t},u.createElement(st,{id:"copy.readonly.link"}),u.createElement(ki,null,r?u.createElement(tl,null):u.createElement(nc,null))),u.createElement(qr,null),u.createElement(ar,{id:"TD-Multiplayer-CreateMultiplayerProject",onClick:g},u.createElement("a",{href:"https://tldraw.com/r"},u.createElement(st,{id:"create.multiplayer.project"}))),u.createElement(ar,{id:"TD-Multiplayer-CopyToMultiplayerProject",onClick:f},u.createElement(st,{id:"copy.multiplayer.project"}))))};function jJ(e,t){var r,i;let s=e.split(","),l=(i=(r=s[0])==null?void 0:r.match(/:(.*?);/))==null?void 0:i[1],h=window.atob(s[1]),g=h.length,f=new Uint8Array(g);for(;g--;)f[g]=h.charCodeAt(g);return new File([f],t,{type:l})}var UJ=e=>Object.keys(e.document.pages).length>1;function ZJ({page:e,onOpen:t,onClose:r}){let i=Dr(),s=Yn(),[l,h]=u.useState(!1),[g,f]=u.useState(e.name||"Page"),C=i.useStore(UJ),y=u.useRef(null),b=u.useCallback(()=>{h(!1)},[]),R=u.useCallback(()=>{i.duplicatePage(e.id)},[i]),k=u.useCallback(()=>{window.confirm("Are you sure you want to delete this page?")&&i.deletePage(e.id)},[i]),A=u.useCallback(ne=>{if(h(ne),ne){t?.();return}},[i]);function O(ne){ne.stopPropagation()}let B=u.useRef(e.name||"Page"),F=u.useRef(B.current),j=u.useCallback(ne=>{let le=ne.target.value.trimStart();F.current=le,f(le)},[]),J=u.useCallback(ne=>{switch(ne.key){case"Enter":{F.current===B.current||(B.current=F.current,i.renamePage(e.id,F.current.trim())),h(!1);break}case"Escape":{if(F.current===B.current){h(!1);return}F.current=B.current,f(B.current),requestAnimationFrame(()=>{let le=y.current;le&&(le.focus(),le.setSelectionRange(0,le.value.length))});break}}},[]),ce=u.useRef(!1);u.useEffect(()=>(l?(ce.current=!0,B.current=e.name||"Page",F.current=B.current,requestAnimationFrame(()=>{let ne=y.current;ne&&(ne.focus(),ne.setSelectionRange(0,ne.value.length))})):ce.current&&r?.(),()=>{F.current!==B.current&&(B.current=F.current,i.renamePage(e.id,F.current))}),[l]);let re=qo();return u.createElement(N0,{open:l,onOpenChange:A},u.createElement(f5,{asChild:!0,"data-shy":"true"},u.createElement(tu,{bp:yi},u.createElement(ki,null,u.createElement(c4,null)))),u.createElement(V0,{container:re.current},u.createElement(GJ,{onPointerDown:b}),u.createElement(zJ,{dir:"ltr",onKeyDown:O,onKeyUp:O},u.createElement(od,{ref:y,placeholder:s.formatMessage({id:"page.name"}),value:g,onChange:j,onKeyDown:J,icon:u.createElement(k0,null)}),u.createElement(qr,null),u.createElement(Fd,{onSelect:R},u.createElement(st,{id:"duplicate"})),u.createElement(Fd,{disabled:!C,onSelect:k},u.createElement(st,{id:"delete"})),u.createElement(qr,null),u.createElement(Pc,{asChild:!0},u.createElement(Bn,null,u.createElement(st,{id:"cancel"}))))))}var zJ=qe(j0,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:240,maxWidth:"fit-content",maxHeight:"85vh",marginTop:"-5vh",pointerEvents:"all",backgroundColor:"$panel",padding:"$1",borderRadius:"$2",font:"$ui",zIndex:999999,"&:focus":{outline:"none"}}),GJ=qe(il,{backgroundColor:"rgba(0, 0, 0, .15)",position:"absolute",pointerEvents:"all",inset:0,zIndex:999998});function Fd(e){var t=e,{onSelect:r}=t,i=Ei(t,["onSelect"]);return u.createElement(ol,{asChild:!0,onClick:r,onSelect:r},u.createElement(Bn,Y({},i)))}var WJ=e=>Object.values(e.document.pages).sort((t,r)=>(t.childIndex||0)-(r.childIndex||0)),KJ=e=>e.document.pages[e.appState.currentPageId].name,YJ=e=>e.document.pages[e.appState.currentPageId].id;function XJ(){let e=Dr(),t=Yn(),r=u.useRef(!1),[i,s]=u.useState(!1);u.useEffect(()=>{r.current!==i&&(r.current=i)},[i]);let l=u.useCallback(()=>{s(!1)},[s]),h=u.useCallback(f=>{r.current!==f&&s(f)},[s]),g=e.useStore(KJ);return u.createElement(fr.fC,{dir:"ltr",open:i,onOpenChange:h},u.createElement(fr.xz,{dir:"ltr",asChild:!0,id:"TD-Page"},u.createElement(gr,{variant:"text"},g||t.formatMessage({id:"page"}))),u.createElement(Ss,{variant:"menu",align:"start",sideOffset:4},i&&u.createElement(qJ,{onClose:l})))}function qJ({onClose:e}){let t=Dr(),r=Yn(),i=t.useStore(WJ),s=t.useStore(YJ),l=r.formatMessage({id:"page"}),h=u.useCallback(()=>{let O=l+" "+(Object.keys(t.document.pages).length+1);t.createPage(void 0,O)},[t]),g=u.useCallback(O=>{e(),t.changePage(O)},[t]),[f,C]=u.useState(null),[y,b]=u.useState(null),R=u.useCallback(O=>{C(O.currentTarget.id),b(i.findIndex(B=>B.id===O.currentTarget.id)),O.dataTransfer.effectAllowed="move"},[]),k=u.useCallback(O=>{O.preventDefault();let B=i.findIndex(j=>j.id===O.currentTarget.id),F=O.currentTarget.getBoundingClientRect();B=(O.clientY-F.top)/F.height<.5?B:B+1,b(B)},[f,i]),A=u.useCallback(()=>{f!==null&&y!==null&&t.movePage(f,y),C(null),b(null)},[f,y]);return u.createElement(u.Fragment,null,u.createElement(fr.Ee,{dir:"ltr",value:s,onValueChange:g},i.map((O,B)=>u.createElement(JJ,{key:O.id,isDropAbove:B===y&&B===0,isDropBelow:y!==null&&B===y-1},u.createElement(fr.Rk,{title:O.name||l,value:O.id,key:O.id,id:O.id,asChild:!0,onDragOver:k,onDragStart:R,onDrop:A,draggable:!0},u.createElement(QJ,null,u.createElement("span",{id:O.id},O.name||l),u.createElement(fr.wU,null,u.createElement(ki,null,u.createElement(tl,null))))),u.createElement(ZJ,{page:O,onClose:e})))),u.createElement(qr,null),u.createElement(fr.ck,{onSelect:h,asChild:!0},u.createElement(Bn,null,u.createElement("span",null,u.createElement(st,{id:"create.page"})),u.createElement(ki,null,u.createElement(E4,null)))))}var JJ=qe("div",{position:"relative",display:"grid",gridTemplateColumns:"1fr auto",gridAutoFlow:"column",margin:0,'& > *[data-shy="true"]':{opacity:0},'&:hover > *[data-shy="true"]':{opacity:1},variants:{isDropAbove:{true:{"&::after":{content:"",display:"block",position:"absolute",top:0,width:"100%",height:"1px",backgroundColor:"$selected",zIndex:999,pointerEvents:"none"}}},isDropBelow:{true:{"&::after":{content:"",display:"block",position:"absolute",width:"100%",height:"1px",top:"100%",backgroundColor:"$selected",zIndex:999,pointerEvents:"none"}}}}}),QJ=qe(Bn,{minWidth:128}),eQ=e=>e.appState.currentStyle,tQ=e=>e.document.pageStates[e.appState.currentPageId].selectedIds,rQ=Object.keys(cu),Hd={draw:u.createElement(gX,null),solid:u.createElement(mX,null),dashed:u.createElement(hX,null),dotted:u.createElement(pX,null)},nQ={small:u.createElement(CX,null),medium:u.createElement(EX,null),large:u.createElement(yX,null)},iQ={start:u.createElement($4,null),middle:u.createElement(P4,null),end:u.createElement(H4,null),justify:u.createElement(O4,null)},oQ=e=>e.settings.isDarkMode?"dark":"light",sQ=e=>e.settings.keepStyleMenuOpen,aQ=e=>{let{activeTool:t,currentPageId:r}=e.appState;switch(t){case"select":{let i=e.document.pages[r],s=!1,l=!1;for(let h of e.document.pageStates[r].selectedIds)"text"in i.shapes[h]&&(s=!0),"label"in i.shapes[h]&&(l=!0);return s?"text":l?"label":""}case"text":return"text";case"rectangle":return"label";case"ellipse":return"label";case"triangle":return"label";case"arrow":return"label";case"line":return"label"}return!1},lQ=u.memo(function(){let e=Dr(),t=e.useStore(oQ),r=e.useStore(sQ),i=e.useStore(aQ),s=e.useStore(eQ),l=e.useStore(tQ),[h,g]=u.useState(s),f=u.useRef(s);u.useEffect(()=>{let{appState:{currentStyle:B},page:F,selectedIds:j}=e,J={};if(j.length<=0)J=B;else{let ce=new Set([]);e.selectedIds.map(re=>F.shapes[re]).forEach(re=>{rQ.forEach(ne=>{if(!ce.has(ne))if(J[ne]===void 0)J[ne]=re.style[ne];else{if(J[ne]===re.style[ne])return;J[ne]=re.style[ne],ce.add(ne)}})})}JSON.stringify(J)!==JSON.stringify(f.current)&&(f.current=J,g(J))},[s,l]);let C=u.useCallback(B=>{e.setSetting("keepStyleMenuOpen",B)},[]),y=u.useCallback(B=>{e.style({isFilled:B})},[]),b=u.useCallback(B=>{e.style({dash:B})},[]),R=u.useCallback(B=>{e.style({size:B})},[]),k=u.useCallback(B=>{e.style({font:B})},[]),A=u.useCallback(B=>{e.style({textAlign:B})},[]),O=u.useCallback(B=>{e.setMenuOpen(B)},[e]);return u.createElement(fr.fC,{dir:"ltr",onOpenChange:O,open:r?!0:void 0,modal:!1},u.createElement(fr.xz,{asChild:!0,id:"TD-Styles"},u.createElement(gr,{variant:"text"},u.createElement(st,{id:"styles"}),u.createElement(cQ,{style:{color:Ja[t][h.color]}},h.isFilled&&u.createElement(ad,{size:16,stroke:"none",fill:uu[t][h.color]}),Hd[h.dash]))),u.createElement(Ss,{id:"language-menu",side:"bottom",align:"end",sideOffset:4,alignOffset:4},u.createElement(e1,{variant:"tall",id:"TD-Styles-Color-Container"},u.createElement("span",null,u.createElement(st,{id:"style.menu.color"})),u.createElement(uQ,null,Object.keys(Ja.light).map(B=>u.createElement(fr.ck,{key:B,onSelect:Yr,asChild:!0,id:`TD-Styles-Color-Swatch-${B}`},u.createElement(gr,{variant:"icon",isActive:h.color===B,onClick:()=>e.style({color:B})},u.createElement(ad,{size:18,strokeWidth:2.5,fill:h.isFilled?uu[t][B]:"transparent",stroke:Ja.light[B]})))))),u.createElement(Mi,{variant:"styleMenu",checked:!!h.isFilled,onCheckedChange:y,id:"TD-Styles-Fill"},u.createElement(st,{id:"style.menu.fill"})),u.createElement(e1,{id:"TD-Styles-Dash-Container"},u.createElement(st,{id:"style.menu.dash"}),u.createElement(_l,{dir:"ltr",value:h.dash,onValueChange:b},Object.values(Xc).map(B=>u.createElement(dl,{key:B,isActive:B===h.dash,value:B,onSelect:Yr,bp:yi,id:`TD-Styles-Dash-${B}`},Hd[B])))),u.createElement(e1,{id:"TD-Styles-Size-Container"},u.createElement(st,{id:"style.menu.size"}),u.createElement(_l,{dir:"ltr",value:h.size,onValueChange:R},Object.values(Yc).map(B=>u.createElement(dl,{key:B,isActive:B===h.size,value:B,onSelect:Yr,bp:yi,id:`TD-Styles-Dash-${B}`},nQ[B])))),(i==="text"||i==="label")&&u.createElement(u.Fragment,null,u.createElement(qr,null),u.createElement(e1,{id:"TD-Styles-Font-Container"},u.createElement(st,{id:"style.menu.font"}),u.createElement(_l,{dir:"ltr",value:h.font,onValueChange:k},Object.values(Jc).map(B=>u.createElement(dl,{key:B,isActive:B===h.font,value:B,onSelect:Yr,bp:yi,id:`TD-Styles-Font-${B}`},u.createElement(dQ,{fontStyle:B},"Aa"))))),i==="text"&&u.createElement(e1,{id:"TD-Styles-Align-Container"},u.createElement(st,{id:"style.menu.align"}),u.createElement(_l,{dir:"ltr",value:h.textAlign,onValueChange:A},Object.values(qc).map(B=>u.createElement(dl,{key:B,isActive:B===h.textAlign,value:B,onSelect:Yr,bp:yi,id:`TD-Styles-Align-${B}`},iQ[B]))))),u.createElement(qr,null),u.createElement(Mi,{variant:"styleMenu",checked:r,onCheckedChange:C,id:"TD-Styles-Keep-Open"},u.createElement(st,{id:"style.menu.keep.open"}))))}),uQ=qe("div",{display:"grid",gridTemplateColumns:"repeat(4, auto)",gap:0}),e1=qe("div",{position:"relative",width:"100%",background:"none",border:"none",cursor:"pointer",minHeight:"32px",outline:"none",color:"$text",fontFamily:"$ui",fontWeight:400,fontSize:"$1",padding:"$2 0 $2 $3",borderRadius:4,userSelect:"none",margin:0,display:"flex",gap:"$3",flexDirection:"row",alignItems:"center",justifyContent:"space-between",variants:{variant:{tall:{alignItems:"flex-start",padding:"0 0 0 $3","& > span":{paddingTop:"$4"}}}}}),_l=qe(fr._x,{display:"flex",flexDirection:"row",gap:"$1"}),cQ=qe("div",{display:"grid","& > *":{gridColumn:1,gridRow:1}}),dQ=qe("div",{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"$3",variants:{fontStyle:{script:{fontFamily:"Caveat Brush"},sans:{fontFamily:"Recursive"},serif:{fontFamily:"Georgia"},mono:{fontFamily:"Recursive Mono"}}}}),hQ=e=>e.document.pageStates[e.appState.currentPageId].camera.zoom,fQ=function(){let e=Dr(),t=e.useStore(hQ);return u.createElement(fr.fC,{dir:"ltr"},u.createElement(fr.xz,{dir:"ltr",asChild:!0,id:"TD-Zoom"},u.createElement(pQ,{onDoubleClick:e.resetZoom,variant:"text"},Math.round(t*100),"%")),u.createElement(Ss,{align:"end"},u.createElement(ar,{onSelect:Yr,onClick:e.zoomIn,kbd:"#+",id:"TD-Zoom-Zoom_In"},u.createElement(st,{id:"zoom.in"})),u.createElement(ar,{onSelect:Yr,onClick:e.zoomOut,kbd:"#\u2212",id:"TD-Zoom-Zoom_Out"},u.createElement(st,{id:"zoom.out"})),u.createElement(ar,{onSelect:Yr,onClick:e.resetZoom,kbd:"\u21E70",id:"TD-Zoom-Zoom_To_100%"},u.createElement(st,{id:"zoom.to"})," 100%"),u.createElement(ar,{onSelect:Yr,onClick:e.zoomToFit,kbd:"\u21E71",id:"TD-Zoom-To_Fit"},u.createElement(st,{id:"zoom.to.fit"})),u.createElement(ar,{onSelect:Yr,onClick:e.zoomToSelection,kbd:"\u21E72",id:"TD-Zoom-To_Selection"},u.createElement(st,{id:"zoom.to.selection"}))))},pQ=qe(gr,{minWidth:56});function gQ({readOnly:e,showPages:t,showMenu:r,showStyles:i,showZoom:s,showMultiplayerMenu:l}){let h=Dr();return u.createElement(mQ,null,(r||t)&&u.createElement(fl,{side:"left",id:"TD-MenuPanel"},r&&u.createElement(gq,{readOnly:e}),l&&u.createElement(VJ,null),t&&u.createElement(XJ,null)),u.createElement(vQ,null),(i||s)&&u.createElement(fl,{side:"right"},h.readOnly?u.createElement(CQ,null,"Read Only"):u.createElement(u.Fragment,null,u.createElement(gr,null,u.createElement(ld,{onClick:h.undo})),u.createElement(gr,null,u.createElement(ld,{onClick:h.redo,flipHorizontal:!0}))),s&&u.createElement(fQ,null),i&&!e&&u.createElement(lQ,null)))}var mQ=qe("div",{width:"100%",position:"absolute",top:0,left:0,right:0,display:"flex",flexDirection:"row",pointerEvents:"none","& > *":{pointerEvents:"all"}}),vQ=qe("div",{flexGrow:2,pointerEvents:"none"}),CQ=qe("div",{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"$ui",fontSize:"$1",paddingLeft:"$4",paddingRight:"$1",userSelect:"none"}),EQ=u.memo(gQ);function yQ(e){u.useEffect(()=>{let t=!1,r=!1,i=e.current;if(!i)return;let s=f=>{f.key===" "&&!r&&(r=!0,t?i.setAttribute("style","cursor: grabbing !important"):i.setAttribute("style","cursor: grab !important"))},l=f=>{f.key===" "&&(r=!1,i.setAttribute("style","cursor: initial"))},h=f=>{t=!0,f.button===1&&i.setAttribute("style","cursor: grabbing !important"),f.button===0&&r&&i.setAttribute("style","cursor: grabbing !important")},g=()=>{t=!1,r?i.setAttribute("style","cursor: grab !important"):i.setAttribute("style","cursor: initial")};return i.addEventListener("keydown",s),i.addEventListener("keyup",l),i.addEventListener("pointerdown",h),i.addEventListener("pointerup",g),()=>{i.removeEventListener("keydown",s),i.removeEventListener("keyup",l),i.removeEventListener("pointerdown",h),i.removeEventListener("pointerup",g)}},[e.current])}var Nd="tldraw_clipboard";function wQ(){return Ft(this,null,function*(){return ll(Nd)})}function bQ(e){return Ft(this,null,function*(){return Ya(Nd,e)})}var xQ=class{constructor(e,t,r,i){S(this,"_idbId"),S(this,"initialState"),S(this,"store"),S(this,"pointer",-1),S(this,"_state"),S(this,"_status","loading"),S(this,"stack",[]),S(this,"_snapshot"),S(this,"useStore"),S(this,"ready"),S(this,"isPaused",!1),S(this,"persist",(s,l)=>{if(this._status==="ready"&&(this.onPersist&&this.onPersist(this._state,s,l),this._idbId))return Ya(this._idbId,this._state).catch(h=>console.error(h))}),S(this,"applyPatch",(s,l)=>{let h=this._state,g=X.deepMerge(this._state,s),f=this.cleanup(g,h,s,l);return this.onStateWillChange&&this.onStateWillChange(f,l),this._state=f,this.store.setState(this._state,!0),this.onStateDidChange&&this.onStateDidChange(this._state,l),this}),S(this,"migrate",s=>s),S(this,"cleanup",(s,l,h,g)=>s),S(this,"onStateWillChange"),S(this,"onStateDidChange"),S(this,"patchState",(s,l)=>(this.applyPatch(s,l),this.onPatch&&this.onPatch(this._state,s,l),this)),S(this,"replaceState",(s,l)=>{let h=this.cleanup(s,this._state,s,l);return this.onStateWillChange&&this.onStateWillChange(h,"replace"),this._state=h,this.store.setState(this._state,!0),this.onStateDidChange&&this.onStateDidChange(this._state,"replace"),this}),S(this,"setState",(s,l=s.id)=>(this.pointer<this.stack.length-1&&(this.stack=this.stack.slice(0,this.pointer+1)),this.stack.push(ye(Y({},s),{id:l})),this.pointer=this.stack.length-1,this.applyPatch(s.after,l),this.onCommand&&this.onCommand(this._state,s,l),this.persist(s.after,l),this)),S(this,"onReady"),S(this,"onPatch"),S(this,"onCommand"),S(this,"onPersist"),S(this,"onReplace"),S(this,"onReset"),S(this,"onResetHistory"),S(this,"onUndo"),S(this,"onRedo"),S(this,"reset",()=>(this.onStateWillChange&&this.onStateWillChange(this.initialState,"reset"),this._state=this.initialState,this.store.setState(this._state,!0),this.resetHistory(),this.persist({},"reset"),this.onStateDidChange&&this.onStateDidChange(this._state,"reset"),this.onReset&&this.onReset(this._state),this)),S(this,"replaceHistory",(s,l=s.length-1)=>(this.stack=s,this.pointer=l,this.onReplace&&this.onReplace(this._state),this)),S(this,"resetHistory",()=>(this.stack=[],this.pointer=-1,this.onResetHistory&&this.onResetHistory(this._state),this)),S(this,"undo",()=>{if(!this.isPaused){if(!this.canUndo)return this;let s=this.stack[this.pointer];this.pointer--,this.applyPatch(s.before,"undo"),this.persist(s.before,"undo")}return this.onUndo&&this.onUndo(this._state),this}),S(this,"redo",()=>{if(!this.isPaused){if(!this.canRedo)return this;this.pointer++;let s=this.stack[this.pointer];this.applyPatch(s.after,"redo"),this.persist(s.after,"undo")}return this.onRedo&&this.onRedo(this._state),this}),S(this,"setSnapshot",()=>(this._snapshot=Y({},this._state),this)),S(this,"forceUpdate",()=>{this.store.setState(this._state,!0)}),this._idbId=t,this._state=ui(e),this._snapshot=ui(e),this.initialState=ui(e),this.store=Uc(()=>this._state),this.useStore=D5(this.store),this.ready=new Promise(s=>{let l="none";this._idbId?(l="restored",ll(this._idbId).then(h=>Ft(this,null,function*(){if(h){let g=h;if(r){let C=yield ll(t+"_version");C&&C<r&&(g=i?i(h,e,C):e,l="migrated")}yield Ya(t+"_version",r||-1);let f=this._state.appState.isEmptyCanvas;g=this.migrate(g),this._state=ui(g),this._snapshot=ui(g),this._state.appState.isEmptyCanvas=f,this.store.setState(this._state,!0)}else yield Ya(t+"_version",r||-1);this._status="ready",s(l)})).catch(h=>console.error(h))):(this._status="ready",s(l))}).then(s=>(this.onReady&&this.onReady(s),s))}pause(){this.isPaused=!0}resume(){this.isPaused=!1}get canUndo(){return this.pointer>-1}get canRedo(){return this.pointer<this.stack.length-1}get state(){return this._state}get status(){return this._status}get snapshot(){return this._snapshot}};function _Q(e,t,r){let{currentPageId:i}=e,s=t.map(R=>e.getShape(R)),l=s.map(R=>({id:R.id,point:[...R.point],bounds:_e.getBounds(R)})),h=X.getCommonBounds(l.map(({bounds:R})=>R)),g=h.minX+h.width/2,f=h.minY+h.height/2,C=Object.fromEntries(l.map(({id:R,point:k,bounds:A})=>[R,{prev:k,next:{top:[k[0],h.minY],centerVertical:[k[0],f-A.height/2],bottom:[k[0],h.maxY-A.height],left:[h.minX,k[1]],centerHorizontal:[g-A.width/2,k[1]],right:[h.maxX-A.width,k[1]]}[r]}])),{before:y,after:b}=_e.mutateShapes(e.state,t,R=>C[R.id]?{point:C[R.id].next}:R,i,!1);return s.forEach(R=>{if(R.type==="group"){let k=D.sub(b[R.id].point,y[R.id].point);R.children.forEach(A=>{let O=e.getShape(A);y[O.id]={point:O.point},b[O.id]={point:D.add(O.point,k)}}),delete y[R.id],delete b[R.id]}}),{id:"align",before:{document:{pages:{[i]:{shapes:y}},pageStates:{[i]:{selectedIds:t}}}},after:{document:{pages:{[i]:{shapes:b}},pageStates:{[i]:{selectedIds:t}}}}}}function SQ(e,t){return{id:"change_page",before:{appState:{currentPageId:e.currentPageId}},after:{appState:{currentPageId:t}}}}function LQ(e,t){var r;let i=e,s=new Set(t);for(;s.has(i);)i=(r=/^.*(\d+)$/.exec(i))!=null&&r[1]?i.replace(/(\d+)(?=\D?)$/,l=>(+l+1).toString()):`${i} 1`;return i}function RQ(e,t,r){let i={shapes:{},bindings:{}},s={shapes:{},bindings:{}},l=[],h=new Set,g=new Set;t.filter(C=>!_e.getShape(e,C,r).isLocked).forEach(C=>{h.add(C);let y=_e.getShape(e,C,r);i.shapes[C]=y,s.shapes[C]=void 0,y.children!==void 0&&y.children.forEach(b=>{h.add(b);let R=_e.getShape(e,b,r);i.shapes[b]=R,s.shapes[b]=void 0}),y.parentId!==r&&l.push(_e.getShape(e,y.parentId,r)),y.assetId&&g.add(y.assetId)}),l.forEach(C=>{var y;t.includes(C.id)||(h.add(C.id),i.shapes[C.id]={children:C.children},s.shapes[C.id]={children:C.children.filter(b=>!t.includes(b))},((y=s.shapes[C.id])==null?void 0:y.children.length)===0&&(s.shapes[C.id]=void 0,i.shapes[C.id]=_e.getShape(e,C.id,r)))});let f=_e.getPage(e,r);return Object.values(f.bindings).filter(C=>h.has(C.fromId)||h.has(C.toId)).forEach(C=>{for(let y of[C.toId,C.fromId])if(s.shapes[y]===void 0){i.bindings[C.id]=C,s.bindings[C.id]=void 0;let b=f.shapes[y];b&&b.handles&&Object.values(b.handles).filter(R=>R.bindingId===C.id).forEach(R=>{var k,A,O,B,F,j;i.shapes[y]=ye(Y({},i.shapes[y]),{handles:ye(Y({},(k=i.shapes[y])==null?void 0:k.handles),{[R.id]:ye(Y({},(O=(A=i.shapes[y])==null?void 0:A.handles)==null?void 0:O[R.id]),{bindingId:C.id})})}),h.has(y)||(s.shapes[y]=ye(Y({},s.shapes[y]),{handles:ye(Y({},(B=s.shapes[y])==null?void 0:B.handles),{[R.id]:ye(Y({},(j=(F=s.shapes[y])==null?void 0:F.handles)==null?void 0:j[R.id]),{bindingId:void 0})})}))})}}),Object.values(e.document.pages).flatMap(C=>Object.values(C.shapes)).forEach(C=>{"assetId"in C&&C.assetId&&!h.has(C.id)&&g.delete(C.assetId)}),{before:i,after:s,assetsToRemove:Array.from(g)}}function IQ(e,t,r=X.uniqueId(),i="Page"){let{currentPageId:s}=e,l=Object.values(e.state.document.pages).sort((y,b)=>{var R,k;return((R=y.childIndex)!=null?R:0)-((k=b.childIndex)!=null?k:0)}),h=l[l.length-1],g=h?.childIndex?h?.childIndex+1:1,f={id:r,name:LQ(i,l.map(y=>{var b;return(b=y.name)!=null?b:""})),childIndex:g,shapes:{},bindings:{}},C={id:r,selectedIds:[],camera:{point:t,zoom:1},editingId:void 0,bindingId:void 0,hoveredId:void 0,pointedId:void 0};return{id:"create_page",before:{appState:{currentPageId:s},document:{pages:{[r]:void 0},pageStates:{[r]:void 0}}},after:{appState:{currentPageId:f.id},document:{pages:{[r]:f},pageStates:{[r]:C}}}}}function Vd(e,t,r=[]){let{currentPageId:i}=e,s={},l={};t.forEach(f=>{s[f.id]=void 0,l[f.id]=f});let h={},g={};return r.forEach(f=>{h[f.id]=void 0,g[f.id]=f}),{id:"create",before:{document:{pages:{[i]:{shapes:s,bindings:h}},pageStates:{[i]:{selectedIds:[...e.selectedIds]}}}},after:{document:{pages:{[i]:{shapes:l,bindings:g}},pageStates:{[i]:{selectedIds:t.map(f=>f.id)}}}}}}function TQ(e,t){let{currentPageId:r,document:{pages:i,pageStates:s}}=e,l=Object.values(i).sort((f,C)=>(f.childIndex||0)-(C.childIndex||0)),h=l.findIndex(f=>f.id===t),g;return t===r?h===l.length-1?g=l[l.length-2].id:g=l[h+1].id:g=r,{id:"delete_page",before:{appState:{currentPageId:t},document:{pages:{[t]:Y({},i[t])},pageStates:{[t]:Y({},s[t])}}},after:{appState:{currentPageId:g},document:{pages:{[t]:void 0},pageStates:{[t]:void 0}}}}}var DQ=(e,t)=>{let r=Y({},e);return t.forEach(i=>r[i]=void 0),r};function jd(e,t,r=e.currentPageId){let{pageState:i,selectedIds:s,document:{assets:l}}=e,{before:h,after:g,assetsToRemove:f}=RQ(e.state,t,r),C=DQ(l,f);return{id:"delete",before:{document:{assets:l,pages:{[r]:h},pageStates:{[r]:{selectedIds:[...e.selectedIds]}}}},after:{document:{assets:C,pages:{[r]:g},pageStates:{[r]:{selectedIds:s.filter(y=>!t.includes(y)),hoveredId:i.hoveredId&&t.includes(i.hoveredId)?void 0:i.hoveredId}}}}}}function AQ(e,t,r){let{currentPageId:i}=e,s=t.map(f=>e.getShape(f)),l=Object.fromEntries(kQ(s,r).map(f=>[f.id,f])),{before:h,after:g}=_e.mutateShapes(e.state,t.filter(f=>l[f]!==void 0),f=>{var C;return{point:(C=l[f.id])==null?void 0:C.next}},i);return s.forEach(f=>{if(f.type==="group"){let C=ee.sub(g[f.id].point,h[f.id].point);f.children.forEach(y=>{let b=e.getShape(y);h[b.id]={point:b.point},g[b.id]={point:ee.add(b.point,C)}}),delete h[f.id],delete g[f.id]}}),{id:"distribute",before:{document:{pages:{[i]:{shapes:h}},pageStates:{[i]:{selectedIds:t}}}},after:{document:{pages:{[i]:{shapes:g}},pageStates:{[i]:{selectedIds:t}}}}}}function kQ(e,t){let r=e.map(h=>{let g=_e.getShapeUtil(h);return{id:h.id,point:[...h.point],bounds:g.getBounds(h),center:g.getCenter(h)}}),i=r.length,s=X.getCommonBounds(r.map(({bounds:h})=>h)),l=[];switch(t){case"horizontal":{let h=r.reduce((g,f)=>g+f.bounds.width,0);if(h>s.width){let g=r.sort((R,k)=>R.bounds.minX-k.bounds.minX)[0],f=r.sort((R,k)=>k.bounds.maxX-R.bounds.maxX)[0],C=r.filter(R=>R!==g&&R!==f).sort((R,k)=>R.center[0]-k.center[0]),y=(f.center[0]-g.center[0])/(i-1),b=g.center[0]+y;C.forEach(({id:R,point:k,bounds:A},O)=>{l.push({id:R,prev:k,next:[b+y*O-A.width/2,A.minY]})})}else{let g=r.sort((y,b)=>y.center[0]-b.center[0]),f=s.minX,C=(s.width-h)/(i-1);g.forEach(({id:y,point:b,bounds:R})=>{l.push({id:y,prev:b,next:[f,R.minY]}),f+=R.width+C})}break}case"vertical":{let h=r.reduce((g,f)=>g+f.bounds.height,0);if(h>s.height){let g=r.sort((R,k)=>R.bounds.minY-k.bounds.minY)[0],f=r.sort((R,k)=>k.bounds.maxY-R.bounds.maxY)[0],C=r.filter(R=>R!==g&&R!==f).sort((R,k)=>R.center[1]-k.center[1]),y=(f.center[1]-g.center[1])/(i-1),b=g.center[1]+y;C.forEach(({id:R,point:k,bounds:A},O)=>{l.push({id:R,prev:k,next:[A.minX,b+y*O-A.height/2]})})}else{let g=r.sort((y,b)=>y.center[1]-b.center[1]),f=s.minY,C=(s.height-h)/(i-1);g.forEach(({id:y,point:b,bounds:R})=>{l.push({id:y,prev:b,next:[R.minX,f]}),f+=R.height+C})}break}}return l}function PQ(e,t){let{currentPageId:r,pageState:{camera:i}}=e,s=e.document.pages[t],l=X.uniqueId(),h=ye(Y({},s),{id:l,name:s.name+" Copy",shapes:Object.fromEntries(Object.entries(s.shapes).map(([g,f])=>[g,ye(Y({},f),{parentId:f.parentId===s.id?l:f.parentId})]))});return{id:"duplicate_page",before:{appState:{currentPageId:r},document:{pages:{[l]:void 0},pageStates:{[l]:void 0}}},after:{appState:{currentPageId:l},document:{pages:{[l]:h},pageStates:{[l]:ye(Y({},s),{id:l,selectedIds:[],camera:Y({},i),editingId:void 0,bindingId:void 0,hoveredId:void 0,pointedId:void 0})}}}}}function MQ(e,t,r){let{selectedIds:i,currentPageId:s,page:l,shapes:h}=e,g={shapes:{},bindings:{}},f={shapes:{},bindings:{}},C={},y=t.map(k=>e.getShape(k)).filter(k=>!t.includes(k.parentId));y.forEach(k=>{let A=X.uniqueId();if(g.shapes[A]=void 0,f.shapes[A]=ye(Y({},X.deepClone(k)),{id:A,childIndex:_e.getChildIndexAbove(e.state,k.id,s)}),k.children&&(f.shapes[A].children=[]),k.parentId!==s){let O=e.getShape(k.parentId);g.shapes[O.id]=ye(Y({},g.shapes[O.id]),{children:O.children}),f.shapes[O.id]=ye(Y({},f.shapes[O.id]),{children:[...(f.shapes[O.id]||O).children,A]})}C[k.id]=A}),y.forEach(k=>{k.children&&k.children.forEach(A=>{var O,B;let F=e.getShape(A),j=X.uniqueId(),J=C[k.id];g.shapes[j]=void 0,f.shapes[j]=ye(Y({},X.deepClone(F)),{id:j,parentId:J,childIndex:_e.getChildIndexAbove(e.state,F.id,s)}),C[A]=j,(B=(O=f.shapes[C[k.id]])==null?void 0:O.children)==null||B.push(j)})});let b=new Set(Object.keys(C));Object.values(l.bindings).filter(k=>b.has(k.fromId)||b.has(k.toId)).forEach(k=>{if(b.has(k.fromId))if(b.has(k.toId)){let A=X.uniqueId(),O=ye(Y({},X.deepClone(k)),{id:A,fromId:C[k.fromId],toId:C[k.toId]});g.bindings[A]=void 0,f.bindings[A]=O;let B=f.shapes[O.fromId];Object.values(B.handles).forEach(F=>{F.bindingId===k.id&&(F.bindingId=A)})}else{let A=f.shapes[C[k.fromId]];Object.values(A.handles).forEach(O=>{O.bindingId===k.id&&(O.bindingId=void 0)})}});let R=Object.values(f.shapes);if(r){let k=X.getCommonBounds(R.map(O=>_e.getBounds(O))),A=X.getBoundsCenter(k);R.forEach(O=>{!O.point||(O.point=D.sub(r,D.sub(A,O.point)))})}else{let k=[16,16];R.forEach(A=>{!A.point||(A.point=D.add(A.point,k))})}return R.forEach(k=>{k.isLocked&&(k.isLocked=!1)}),{id:"duplicate",before:{document:{pages:{[s]:g},pageStates:{[s]:{selectedIds:i}}}},after:{document:{pages:{[s]:f},pageStates:{[s]:{selectedIds:Array.from(b.values()).map(k=>C[k])}}}}}}function Ud(e,t,r){let{selectedIds:i,currentPageId:s,page:{shapes:l}}=e,h=t.map(b=>_e.getBounds(l[b])),g=t.length===1&&l[t[0]].type==="group",f=X.getCommonBounds(h),{before:C,after:y}=_e.mutateShapes(e.state,t,b=>{let R=_e.getBounds(b),k=b.parentId!==s;switch(r){case"horizontal":{if(k&&!g){let O=_e.getBounds(l[b.parentId]),B=X.getRelativeTransformedBoundingBox(f,f,O,!0,!1).minX-O.minX;return _e.getShapeUtil(b).transform(b,ye(Y({},R),{minX:R.minX+B,maxX:R.maxX+B}),{type:Dn.TopLeft,scaleX:1,scaleY:1,initialShape:b,transformOrigin:[.5,.5]})}let A=X.getRelativeTransformedBoundingBox(f,f,R,!0,!1);return _e.getShapeUtil(b).transform(b,A,{type:Dn.TopLeft,scaleX:-1,scaleY:1,initialShape:b,transformOrigin:[.5,.5]})}case"vertical":{if(k&&!g){let O=_e.getBounds(l[b.parentId]),B=X.getRelativeTransformedBoundingBox(f,f,O,!1,!0).minY-O.minY;return _e.getShapeUtil(b).transform(b,ye(Y({},R),{minY:R.minY+B,maxY:R.maxY+B}),{type:Dn.TopLeft,scaleX:1,scaleY:1,initialShape:b,transformOrigin:[.5,.5]})}let A=X.getRelativeTransformedBoundingBox(f,f,R,!1,!0);return _e.getShapeUtil(b).transform(b,A,{type:Dn.TopLeft,scaleX:1,scaleY:-1,initialShape:b,transformOrigin:[.5,.5]})}}},s,!0);return{id:"flip",before:{document:{pages:{[s]:{shapes:C}},pageStates:{[s]:{selectedIds:i}}}},after:{document:{pages:{[s]:{shapes:y}},pageStates:{[s]:{selectedIds:t}}}}}}function OQ(e,t,r,i){var s,l;if(t.length<2)return;let h={},g={},f={},C={},y=[...t],b=[],R=[],k=[];for(let ne of t){let le=e.getShape(ne);if(!le.isLocked)if(le.children===void 0)b.push(le);else{let me=le.children.filter(Ve=>!e.getShape(Ve).isLocked);k.push(le),y.push(...me),b.push(...me.map(Ve=>e.getShape(Ve)).filter(Boolean))}}if(b.every(ne=>ne.parentId===b[0].parentId)&&b[0].parentId!==i&&((s=e.getShape(b[0].parentId).children)==null?void 0:s.length)===y.length)return;let A=_e.flattenPage(e.state,i),O=Object.fromEntries(b.map(ne=>[ne.id,A.indexOf(ne)])),B=b.sort((ne,le)=>O[ne.id]-O[le.id]),F=i,j=(B.filter(ne=>ne.parentId===i)[0]||B[0]).childIndex,J=X.getCommonBounds(b.map(ne=>_e.getBounds(ne)));for(h[r]=void 0,g[r]=_e.getShapeUtil("group").create({id:r,childIndex:j,parentId:F,point:[J.minX,J.minY],size:[J.width,J.height],children:B.map(ne=>ne.id)}),B.forEach((ne,le)=>{if(ne.parentId!==i){let me=e.getShape(ne.parentId);k.push(me)}h[ne.id]=ye(Y({},h[ne.id]),{parentId:ne.parentId,childIndex:ne.childIndex}),g[ne.id]=ye(Y({},g[ne.id]),{parentId:r,childIndex:le+1})});k.length>0;){let ne=k.pop();if(!ne)break;let le=(((l=h[ne.id])==null?void 0:l.children)||ne.children).filter(me=>me&&!(y.includes(me)||R.includes(me)));le.length===0?(h[ne.id]=ne,g[ne.id]=void 0,ne.parentId!==i&&(R.push(ne.id),k.push(e.getShape(ne.parentId)))):(h[ne.id]=ye(Y({},h[ne.id]),{children:ne.children}),g[ne.id]=ye(Y({},g[ne.id]),{children:le}))}let{bindings:ce}=e,re=new Set(R);return ce.forEach(ne=>{for(let le of[ne.toId,ne.fromId])if(re.has(le)){f[ne.id]=ne,C[ne.id]=void 0;let me=e.getShape(le);me.handles&&Object.values(me.handles).filter(Ve=>Ve.bindingId===ne.id).forEach(Ve=>{var lt,Ye;h[le]=ye(Y({},h[le]),{handles:ye(Y({},(lt=h[le])==null?void 0:lt.handles),{[Ve.id]:{bindingId:ne.id}})}),R.includes(le)||(g[le]=ye(Y({},g[le]),{handles:ye(Y({},(Ye=g[le])==null?void 0:Ye.handles),{[Ve.id]:{bindingId:void 0}})}))})}}),{id:"group",before:{document:{pages:{[i]:{shapes:h,bindings:f}},pageStates:{[i]:{selectedIds:t}}}},after:{document:{pages:{[i]:{shapes:g,bindings:f}},pageStates:{[i]:{selectedIds:[r]}}}}}}function BQ(e,t,r,i,s){let{page:l}=e,h={before:{shapes:{},bindings:{}},after:{shapes:{},bindings:{}}},g={before:{shapes:{},bindings:{}},after:{shapes:{},bindings:{}}},f=new Set,C=new Set;t.map(j=>e.getShape(j,i)).filter(j=>!j.isLocked).forEach(j=>{f.add(j.id),C.add(j),j.children!==void 0&&j.children.forEach(J=>{f.add(J),C.add(e.getShape(J,i))})});let y=_e.getTopChildIndex(e.state,s),b=Array.from(C.values());b.forEach((j,J)=>{if(h.before.shapes[j.id]=j,h.after.shapes[j.id]=void 0,g.before.shapes[j.id]=void 0,g.after.shapes[j.id]=j,!f.has(j.parentId)&&(g.after.shapes[j.id]=ye(Y({},j),{parentId:s,childIndex:y+J}),j.parentId!==i)){let ce=e.getShape(j.parentId,i);h.before.shapes[ce.id]={children:ce.children},h.after.shapes[ce.id]={children:ce.children.filter(re=>re!==j.id)}}}),Object.values(l.bindings).filter(j=>f.has(j.fromId)||f.has(j.toId)).forEach(j=>{h.before.bindings[j.id]=j,h.after.bindings[j.id]=void 0;let J=e.getShape(j.fromId,i);if(f.has(j.fromId)&&f.has(j.toId))g.before.bindings[j.id]=void 0,g.after.bindings[j.id]=j;else if(f.has(j.fromId)){let ce=e.getShape(j.fromId,i),re=Object.values(J.handles).find(le=>le.bindingId===j.id).id,ne=g.after.shapes[ce.id];ne.handles=ye(Y({},ne.handles),{[re]:ye(Y({},ne.handles[re]),{bindingId:void 0})})}else{let ce=e.getShape(j.fromId,i),re=Object.values(J.handles).find(ne=>ne.bindingId===j.id);h.before.shapes[ce.id]={handles:{[re.id]:{bindingId:j.id}}},h.after.shapes[ce.id]={handles:{[re.id]:{bindingId:void 0}}}}});let R=e.state.document.pageStates[s],k=X.getCommonBounds(b.map(j=>_e.getBounds(j))),A=_e.getCameraZoom(r.width<r.height?(r.width-128)/k.width:(r.height-128)/k.height),O=(r.width-k.width*A)/2/A,B=(r.height-k.height*A)/2/A,F=D.toFixed(D.add([-k.minX,-k.minY],[O,B]));return{id:"move_to_page",before:{appState:{currentPageId:i},document:{pages:{[i]:h.before,[s]:g.before},pageStates:{[i]:{selectedIds:t},[s]:{selectedIds:R.selectedIds,camera:R.camera}}}},after:{appState:{currentPageId:s},document:{pages:{[i]:h.after,[s]:g.after},pageStates:{[i]:{selectedIds:[]},[s]:{selectedIds:t,camera:{zoom:A,point:F}}}}}}}function $Q(e,t,r){let{pages:i}=e.document,s=i[t],l=Object.values(i).sort((f,C)=>{var y,b;return((y=f.childIndex)!=null?y:0)-((b=C.childIndex)!=null?b:0)}),h=l.indexOf(s),g=[...l];return g.splice(h,1),g.splice(r>h?r-1:r,0,s),{id:"move_page",before:{document:{pages:Object.fromEntries(l.map(f=>[f.id,{childIndex:f.childIndex}]))}},after:{document:{pages:Object.fromEntries(g.map((f,C)=>[f.id,{childIndex:C}]))}}}}function Sl(e,t,r){let{currentPageId:i,page:s}=e,l=new Set(t.map(y=>e.getShape(y).parentId)),h={before:{},after:{}},g,f,C;return Array.from(l.values()).forEach(y=>{let b=[];if(y===s.id)b=Object.values(s.shapes).sort((A,O)=>A.childIndex-O.childIndex);else{let A=e.getShape(y);if(!A.children)throw Error("No children in parent!");b=A.children.map(O=>e.getShape(O)).sort((O,B)=>O.childIndex-B.childIndex)}let R=b.map(A=>A.id),k=t.filter(A=>R.includes(A)).map(A=>R.indexOf(A)).sort((A,O)=>A-O);if(k.length!==R.length)switch(r){case"toBack":{for(let A=0;A<R.length;A++)if(!k.includes(A)){g=A;break}f=b[g].childIndex,C=f/(k.length+1),h=_e.mutateShapes(e.state,k.map(A=>b[A].id).reverse(),(A,O)=>({childIndex:f-(O+1)*C}),i);break}case"toFront":{for(let A=R.length-1;A>=0;A--)if(!k.includes(A)){g=A;break}f=b[g].childIndex,C=1,h=_e.mutateShapes(e.state,k.map(A=>b[A].id),(A,O)=>({childIndex:f+(O+1)}),i);break}case"backward":{let A={};for(let O=R.length-1;O>=0;O--)if(k.includes(O)){for(let B=O;B>=0;B--)if(!k.includes(B)){let F=b[B].childIndex,j,J;B===0?(j=F/2,J=F/2/(O-B+1)):(j=b[B-1].childIndex,J=(F-j)/(O-B+1),j+=J);for(let ce=0;ce<O-B;ce++)A[b[B+ce+1].id]=j+J*ce;break}}Object.values(A).length>0&&(h=_e.mutateShapes(e.state,k.map(O=>b[O].id),O=>({childIndex:A[O.id]}),i));break}case"forward":{let A={};for(let O=0;O<R.length;O++)if(k.includes(O)){for(let B=O;B<R.length;B++)if(!k.includes(B)){f=b[B].childIndex;let F=B===R.length-1?1:(b[B+1].childIndex-f)/(B-O+1);for(let j=0;j<B-O;j++)A[b[O+j].id]=f+F*(j+1);break}}Object.values(A).length>0&&(h=_e.mutateShapes(e.state,k.map(O=>b[O].id),O=>({childIndex:A[O.id]}),i));break}}}),{id:"move",before:{document:{pages:{[i]:{shapes:h.before}},pageStates:{[i]:{selectedIds:t}}}},after:{document:{pages:{[i]:{shapes:h.after}},pageStates:{[i]:{selectedIds:t}}}}}}function FQ(e,t,r){let{page:i}=e;return{id:"rename_page",before:{document:{pages:{[t]:{name:i.name}}}},after:{document:{pages:{[t]:{name:r}}}}}}function Zd(e,t,r){let{currentPageId:i}=e,{before:s,after:l}=_e.mutateShapes(e.state,t,h=>{var g,f;return(f=(g=e.getShapeUtil(h)).onDoubleClickBoundsHandle)==null?void 0:f.call(g,h)},r);return{id:"reset_bounds",before:{document:{pages:{[i]:{shapes:s}},pageStates:{[i]:{selectedIds:t}}}},after:{document:{pages:{[i]:{shapes:l}},pageStates:{[i]:{selectedIds:t}}}}}}var HQ=Math.PI*2;function NQ(e,t,r=-HQ/4){let{currentPageId:i}=e,s={},l={},h=t.flatMap(f=>{let C=e.getShape(f);return C.children?C.children.map(y=>e.getShape(y)):C}).filter(f=>!f.isLocked),g=X.getBoundsCenter(X.getCommonBounds(h.map(f=>_e.getBounds(f))));return h.forEach(f=>{let C=_e.getRotatedShapeMutation(f,_e.getCenter(f),g,r);!C||(s[f.id]=_e.getBeforeShape(f,C),l[f.id]=C)}),{id:"rotate",before:{document:{pages:{[i]:{shapes:s}},pageStates:{[i]:{selectedIds:t}}}},after:{document:{pages:{[i]:{shapes:l}},pageStates:{[i]:{selectedIds:t}}}}}}function VQ(e,t,r){let{currentPageId:i,selectedIds:s}=e,l=t.map(b=>e.getShape(b)),h=l.map(b=>_e.getBounds(b)),g=X.getCommonBounds(h),f=t.flatMap(b=>{let R=e.getShape(b);return R.children?R.children:R.id}).filter(b=>!e.getShape(b).isLocked),{before:C,after:y}=_e.mutateShapes(e.state,f,b=>{let R=_e.getBounds(b);switch(r){case"horizontal":{let k=ye(Y({},R),{minX:g.minX,maxX:g.maxX,width:g.width});return _e.getShapeUtil(b).transformSingle(b,k,{type:Dn.TopLeft,scaleX:k.width/R.width,scaleY:1,initialShape:b,transformOrigin:[.5,.5]})}case"vertical":{let k=ye(Y({},R),{minY:g.minY,maxY:g.maxY,height:g.height});return _e.getShapeUtil(b).transformSingle(b,k,{type:Dn.TopLeft,scaleX:1,scaleY:k.height/R.height,initialShape:b,transformOrigin:[.5,.5]})}}},i);return l.forEach(b=>{b.type==="group"&&(delete C[b.id],delete y[b.id])}),{id:"stretch",before:{document:{pages:{[i]:{shapes:C}},pageStates:{[i]:{selectedIds:s}}}},after:{document:{pages:{[i]:{shapes:y}},pageStates:{[i]:{selectedIds:t}}}}}}function jQ(e,t,r){let{currentPageId:i,selectedIds:s}=e,l=t.flatMap(f=>_e.getDocumentBranch(e.state,f,i)).filter(f=>!e.getShape(f).isLocked),h={},g={};return l.map(f=>e.getShape(f)).filter(f=>!f.isLocked).forEach(f=>{h[f.id]={style:Y({},Object.fromEntries(Object.keys(r).map(C=>[C,f.style[C]])))},g[f.id]={style:r},f.type==="text"&&(h[f.id].point=f.point,g[f.id].point=D.toFixed(D.add(f.point,D.sub(e.getShapeUtil(f).getCenter(f),e.getShapeUtil(f).getCenter(ye(Y({},f),{style:Y(Y({},f.style),r)}))))))}),{id:"style",before:{document:{pages:{[i]:{shapes:h}},pageStates:{[i]:{selectedIds:s}}},appState:{currentStyle:Y({},e.appState.currentStyle)}},after:{document:{pages:{[i]:{shapes:g}},pageStates:{[i]:{selectedIds:t}}},appState:{currentStyle:r}}}}function UQ(e,t,r){let{currentPageId:i,selectedIds:s}=e,l=Object.fromEntries(t.map(g=>{var f;return[g,{decorations:{[r]:(f=e.getShape(g).decorations)==null?void 0:f[r]}}]})),h=Object.fromEntries(t.filter(g=>!e.getShape(g).isLocked).map(g=>{var f;return[g,{decorations:{[r]:(f=e.getShape(g).decorations)!=null&&f[r]?void 0:"arrow"}}]}));return{id:"toggle_decorations",before:{document:{pages:{[i]:{shapes:l}},pageStates:{[i]:{selectedIds:s}}}},after:{document:{pages:{[i]:{shapes:h}},pageStates:{[i]:{selectedIds:t}}}}}}function vu(e,t,r){let{currentPageId:i}=e,s=t.map(f=>e.getShape(f)).filter(f=>r==="isLocked"?!0:!f.isLocked),l=s.every(f=>f[r]),h={},g={};return s.forEach(f=>{h[f.id]={[r]:f[r]},g[f.id]={[r]:!l}}),{id:"toggle",before:{document:{pages:{[i]:{shapes:h}},pageStates:{[i]:{selectedIds:t}}}},after:{document:{pages:{[i]:{shapes:g}},pageStates:{[i]:{selectedIds:t}}}}}}function ZQ(e,t,r){let{currentPageId:i,selectedIds:s}=e;e.rotationInfo.selectedIds=[...s];let l={shapes:{},bindings:{}},h={shapes:{},bindings:{}},g=t.flatMap(C=>{let y=e.getShape(C);return y.children?y.children:y.id}).filter(C=>!e.getShape(C).isLocked),f=_e.mutateShapes(e.state,g,C=>({point:D.toFixed(D.add(C.point,r))}),i);return l.shapes=f.before,h.shapes=f.after,_e.getBindings(e.state,i).filter(C=>t.includes(C.fromId)&&!t.includes(C.toId)).forEach(C=>{l.bindings[C.id]=C,h.bindings[C.id]=void 0;for(let y of[C.toId,C.fromId]){let b=e.getShape(y);!b.handles||Object.values(b.handles).filter(R=>R.bindingId===C.id).forEach(R=>{var k,A;l.shapes[y]=ye(Y({},l.shapes[y]),{handles:ye(Y({},(k=l.shapes[y])==null?void 0:k.handles),{[R.id]:{bindingId:C.id}})}),h.shapes[y]=ye(Y({},h.shapes[y]),{handles:ye(Y({},(A=h.shapes[y])==null?void 0:A.handles),{[R.id]:{bindingId:void 0}})})})}}),{id:"translate",before:{document:{pages:{[i]:l},pageStates:{[i]:{selectedIds:t}}}},after:{document:{pages:{[i]:h},pageStates:{[i]:{selectedIds:t}}}}}}function zQ(e,t,r,i){let{bindings:s}=e,l={},h={},g={},f={},C=t,y=t.filter(b=>!r.find(R=>R.id===b));return r.filter(b=>!b.isLocked).forEach(b=>{let R=[],k=[];l[b.id]=b,h[b.id]=void 0,b.children.forEach(B=>{y.push(B);let F=e.getShape(B,i);R.push(F)});let A=b.childIndex,O=(_e.getChildIndexAbove(e.state,b.id,i)-A)/R.length;R.sort((B,F)=>B.childIndex-F.childIndex).forEach((B,F)=>{l[B.id]={parentId:B.parentId,childIndex:B.childIndex},h[B.id]={parentId:i,childIndex:A+O*F}}),s.filter(B=>B.toId===b.id||B.fromId===b.id).forEach(B=>{for(let F of[B.toId,B.fromId])if(h[F]===void 0){g[B.id]=B,f[B.id]=void 0;let j=e.getShape(F,i);j.handles&&Object.values(j.handles).filter(J=>J.bindingId===B.id).forEach(J=>{var ce,re;l[F]=ye(Y({},l[F]),{handles:ye(Y({},(ce=l[F])==null?void 0:ce.handles),{[J.id]:{bindingId:B.id}})}),k.includes(F)||(h[F]=ye(Y({},h[F]),{handles:ye(Y({},(re=h[F])==null?void 0:re.handles),{[J.id]:{bindingId:void 0}})}))})}})}),{id:"ungroup",before:{document:{pages:{[i]:{shapes:l,bindings:g}},pageStates:{[i]:{selectedIds:C}}}},after:{document:{pages:{[i]:{shapes:h,bindings:g}},pageStates:{[i]:{selectedIds:y}}}}}}function zd(e,t,r){let i=t.map(l=>l.id),s=_e.mutateShapes(e.state,i.filter(l=>!e.getShape(l,r).isLocked),(l,h)=>t[h],r);return{id:"update",before:{document:{pages:{[r]:{shapes:s.before}}}},after:{document:{pages:{[r]:{shapes:s.after}}}}}}function GQ(e,t,r){let{currentPageId:i,selectedIds:s}=e,l=t.map(C=>e.getShape(C)).filter(C=>r.isLocked?!0:!C.isLocked),h={},g={},f=Object.keys(r);return l.forEach(C=>{h[C.id]=Object.fromEntries(f.map(y=>[y,C[y]])),g[C.id]=r}),{id:"set_props",before:{document:{pages:{[i]:{shapes:h}},pageStates:{[i]:{selectedIds:s}}}},after:{document:{pages:{[i]:{shapes:g}},pageStates:{[i]:{selectedIds:s}}}}}}function WQ(e,t,r={}){let{currentPageId:i}=e,{point:s,select:l,overwrite:h}=r,g=e.document.pages[i],f={shapes:{},bindings:{}},C={},y={shapes:{},bindings:{}};if(h){for(let R of t.shapes)f.shapes[R.id]=g.shapes[R.id],y.shapes[R.id]=R;if(t.bindings)for(let R of t.bindings)f.bindings[R.id]=g.bindings[R.id],y.bindings[R.id]=R;if(t.assets)for(let R of t.assets)C[R.id]=R}else{let R={},k=_e.getTopChildIndex(e.state,i),A=t.shapes.sort((F,j)=>F.childIndex-j.childIndex).map(F=>{let j=X.uniqueId();return R[F.id]=j,ye(Y({},X.deepClone(F)),{id:j})}),O=new Set;for(;A.length>0;){let F=A.shift();if(!F)break;if(O.add(F.id),F.parentId==="currentPageId")F.parentId=i,F.childIndex=k++;else{F.parentId=R[F.parentId];let j=y.shapes[F.parentId];if(!j){O.has(F.id)&&(F.parentId="currentPageId"),A.push(F);continue}j.children.push(F.id)}F.children&&(F.children=[]),f.shapes[F.id]=void 0,y.shapes[F.id]=F}Object.values(y.shapes).forEach(F=>{F.children&&F.children.length===0&&(delete f.shapes[F.id],delete y.shapes[F.id])}),t.bindings&&t.bindings.forEach(F=>{let j=X.uniqueId();R[F.id]=j;let J=R[F.toId],ce=R[F.fromId];if(!J||!ce){if(ce){let le=y.shapes[ce].handles;le&&Object.values(le).forEach(me=>{me.bindingId===F.id&&(me.bindingId=void 0)})}if(J){let le=y.shapes[J].handles;le&&Object.values(le).forEach(me=>{me.bindingId===F.id&&(me.bindingId=void 0)})}return}let re=y.shapes[ce].handles;re&&Object.values(re).forEach(le=>{le.bindingId===F.id&&(le.bindingId=j)}),y.shapes[J].handles&&Object.values(y.shapes[J].handles).forEach(le=>{le.bindingId===F.id&&(le.bindingId=j)});let ne=ye(Y({},X.deepClone(F)),{id:j,toId:J,fromId:ce});f.bindings[ne.id]=void 0,y.bindings[ne.id]=ne});let B=Object.values(y.shapes);if(B.length>0)if(s){let F=X.getCommonBounds(B.map(J=>_e.getBounds(J))),j=X.getBoundsCenter(F);B.forEach(J=>{!J.point||(J.point=D.sub(s,D.sub(j,J.point)))})}else{let F=X.getCommonBounds(B.map(_e.getBounds));if(!(X.boundsContain(e.viewport,F)||X.boundsCollide(e.viewport,F))){let j=D.toFixed(e.getPagePoint(e.centerPoint)),J=X.centerBounds(F,j),ce=D.sub(X.getBoundsCenter(J),X.getBoundsCenter(F));B.forEach(re=>{re.point=D.toFixed(D.add(re.point,ce))})}}if(t.assets)for(let F of t.assets)C[F.id]=F}let b=document.createElement("textarea");return Object.values(y.shapes).forEach(R=>{"text"in R&&(b.innerHTML=R.text,R.text=b.value),"label"in R&&(b.innerHTML=R.label,R.label=b.value)}),b.remove(),{id:"insert",before:{document:{pages:{[i]:f},pageStates:{[i]:{selectedIds:[...e.selectedIds]}}}},after:{document:{pages:{[i]:y},assets:C,pageStates:{[i]:{selectedIds:l?Object.keys(y.shapes):[...e.selectedIds]}}}}}}var Gd={};O5(Gd,{fileToBase64:()=>qd,fileToText:()=>Jd,getImageSizeFromSrc:()=>Qd,getVideoSizeFromSrc:()=>e2,loadFileHandle:()=>Kd,migrate:()=>bo,openAssetsFromFileSystem:()=>Xd,openFromFileSystem:()=>Yd,saveFileHandle:()=>Cu,saveToFileSystem:()=>Eu});function bo(e,t){let{document:r,settings:i}=e,{version:s=0}=r;"assets"in r||(r.assets={});let l=new Set;return Object.values(r.pages).forEach(h=>Object.values(h.shapes).forEach(g=>{let{parentId:f,children:C,assetId:y}=g;y&&l.add(y),f!==h.id&&!h.shapes[f]&&(console.warn("Encountered a shape with a missing parent!"),g.parentId=h.id),g.type==="group"&&C&&C.forEach(b=>{h.shapes[b]||(console.warn("Encountered a parent with a missing child!",g.id,b),C?.splice(C.indexOf(b),1))})})),Object.keys(r.assets).forEach(h=>{l.has(h)||delete r.assets[h]}),s!==t&&(s<14&&Object.values(r.pages).forEach(h=>{Object.values(h.shapes).filter(g=>g.type==="text").forEach(g=>g.style.font==="script")}),s<=13&&Object.values(r.pages).forEach(h=>{Object.values(h.bindings).forEach(g=>{Object.assign(g,g.meta)}),Object.values(h.shapes).forEach(g=>{Object.entries(g.style).forEach(([f,C])=>{typeof C=="string"&&(g.style[f]=C.toLowerCase())}),g.type==="arrow"&&g.decorations&&Object.entries(g.decorations).forEach(([f,C])=>{C==="Arrow"&&(g.decorations=ye(Y({},g.decorations),{[f]:"arrow"}))})})}),s<=13.1&&(r.name="New Document"),s<15&&(r.assets={}),Object.values(r.pages).forEach(h=>{Object.values(h.shapes).forEach(g=>{s<15.2&&(g.type==="image"||g.type==="video")&&(g.style.isFilled=!0),s<15.3&&(g.type==="rectangle"||g.type==="triangle"||g.type==="ellipse"||g.type==="arrow")&&(g.label=g.text||"",g.labelPoint=[.5,.5])})}),s<15.4&&(i.dockPosition="bottom"),s<15.5&&(i.exportBackground="transparent")),Object.values(r.pageStates).forEach(h=>{h.selectedIds=h.selectedIds.filter(g=>r.pages[h.id].shapes[g]!==void 0),h.bindingId=void 0,h.editingId=void 0,h.hoveredId=void 0,h.pointedId=void 0}),r.version=t,e}var Wd={mode:"readwrite"},KQ=e=>Ft(void 0,null,function*(){return(yield e.queryPermission(Wd))==="granted"||(yield e.requestPermission(Wd))==="granted"});function Kd(){return Ft(this,null,function*(){return typeof Window>"u"||!("_location"in Window)?void 0:(yield ll(`Tldraw_file_handle_${window.location.origin}`))||null})}function Cu(e){return Ft(this,null,function*(){return Ya(`Tldraw_file_handle_${window.location.origin}`,e)})}function Eu(e,t,r){return Ft(this,null,function*(){let i={name:e.name||"New Document",fileHandle:t??null,document:e,assets:{}},s=JSON.stringify(i),l=new Blob([s],{type:"application/vnd.Tldraw+json"});if(t&&!(yield KQ(t)))return null;let h=!ea&&r?.length?r:`${i.name}`,g=yield Mc(l,{fileName:`${h}${ou}`,description:"Tldraw File",extensions:[`${ou}`]},t);return yield Cu(g),g})}function Yd(){return Ft(this,null,function*(){var e;let t=yield U0({description:"Tldraw File",extensions:[`${ou}`],multiple:!1});if(!t)return null;let r=yield new Promise(l=>{let h=new FileReader;h.onloadend=()=>{h.readyState===FileReader.DONE&&l(h.result)},h.readAsText(t,"utf8")}),i=JSON.parse(r),s=(e=t.handle)!=null?e:null;return yield Cu(s),{fileHandle:s,document:i.document}})}function Xd(){return Ft(this,null,function*(){return U0({description:"Image or Video",extensions:[...hd,...fd],multiple:!0})})}function qd(e){return new Promise((t,r)=>{if(e){let i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=s=>r(s),i.onabort=s=>r(s)}})}function Jd(e){return new Promise((t,r)=>{if(e){let i=new FileReader;i.readAsText(e),i.onload=()=>t(i.result),i.onerror=s=>r(s),i.onabort=s=>r(s)}})}function Qd(e){return new Promise((t,r)=>{let i=new Image;i.onload=()=>t([i.width,i.height]),i.onerror=()=>r(new Error("Could not get image size")),i.src=e})}function e2(e){return new Promise((t,r)=>{let i=document.createElement("video");i.onloadedmetadata=()=>t([i.videoWidth,i.videoHeight]),i.onerror=()=>r(new Error("Could not get video size")),i.src=e})}B5(Gd,W);var Oi=class{constructor(e){this.app=e}},YQ=class extends Oi{constructor(e,t,r,i=!1){super(e),S(this,"type","arrow"),S(this,"performanceMode"),S(this,"status","translatingHandle"),S(this,"newStartBindingId",X.uniqueId()),S(this,"draggedBindingId",X.uniqueId()),S(this,"didBind",!1),S(this,"initialShape"),S(this,"handleId"),S(this,"bindableShapeIds"),S(this,"initialBinding"),S(this,"startBindingShapeId"),S(this,"isCreate"),S(this,"start",()=>{}),S(this,"update",()=>{var b,R,k;let{initialShape:A}=this,{currentPoint:O,shiftKey:B,altKey:F,metaKey:j,currentGrid:J,settings:{showGrid:ce}}=this.app,re=this.app.getShape(A.id);if(re.isLocked)return;let{handles:ne}=A,le=this.handleId;if(!ne[le].canBind)return;let me=D.sub(O,D.add(ne[le].point,A.point));if(B){let Gt=F?D.med(ne.start.point,ne.end.point):ne[le==="start"?"end":"start"].point,Jt=ne[le].point,nr=D.add(Jt,me),kn=D.angle(Gt,nr),cr=D.rotWith(nr,Gt,X.snapAngleToSegments(kn,24)-kn);me=D.add(me,D.sub(cr,nr))}let Ve=D.add(ne[le].point,me),lt={[le]:ye(Y({},ne[le]),{point:ce?D.snap(Ve,J):D.toFixed(Ve),bindingId:void 0})},Ye=ia.arrow,ct=(b=Ye.onHandleChange)==null?void 0:b.call(Ye,A,lt);if(!ct)return;let pt={shape:X.deepMerge(re,ct),bindings:{}},tr,qt=pt.shape.handles[this.handleId],_r=pt.shape.handles[this.handleId==="start"?"end":"start"];if(this.startBindingShapeId){let Gt,Jt=this.app.page.shapes[this.startBindingShapeId],nr=_e.getShapeUtil(Jt),kn=nr.getCenter(Jt),cr=pt.shape.handles.start,qn=pt.shape.handles.end,vn=D.add(cr.point,pt.shape.point);D.isEqual(vn,kn)&&vn[1]++;let yn=kn,ci=nr.hitTestPoint(Jt,O),xo=D.uni(D.sub(vn,yn)),Ts=this.app.getBinding(this.newStartBindingId)!==void 0;!j&&!nr.hitTestPoint(Jt,D.add(pt.shape.point,qn.point))&&(Gt=this.findBindingPoint(re,Jt,"start",this.newStartBindingId,kn,yn,xo,ci)),Gt&&!Ts?(this.didBind=!0,pt.bindings[this.newStartBindingId]=Gt,pt.shape=X.deepMerge(pt.shape,{handles:{start:{bindingId:Gt.id}}})):!Gt&&Ts&&(this.didBind=!1,pt.bindings[this.newStartBindingId]=void 0,pt.shape=X.deepMerge(A,{handles:{start:{bindingId:void 0}}}))}if(!j){let Gt=D.add(_r.point,pt.shape.point),Jt=D.add(qt.point,pt.shape.point),nr=D.uni(D.sub(Jt,Gt)),kn=D.add(pt.shape.point,pt.shape.handles.start.point),cr=D.add(pt.shape.point,pt.shape.handles.end.point),qn=this.bindableShapeIds.map(vn=>this.app.page.shapes[vn]).sort((vn,yn)=>yn.childIndex-vn.childIndex).filter(vn=>{if(vn.isLocked)return!1;let yn=_e.getShapeUtil(vn);return![kn,cr].every(ci=>yn.hitTestPoint(vn,ci))});for(let vn of qn)if(tr=this.findBindingPoint(re,vn,this.handleId,this.draggedBindingId,Jt,Gt,nr,F),tr)break}if(tr)this.didBind=!0,pt.bindings[this.draggedBindingId]=tr,pt.shape=X.deepMerge(pt.shape,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}});else{this.didBind=this.didBind||!1;let Gt=re.handles[this.handleId].bindingId;Gt!==void 0&&(pt.bindings[Gt]=void 0,pt.shape=X.deepMerge(pt.shape,{handles:{[this.handleId]:{bindingId:void 0}}}))}let Ge=(k=(R=_e.getShapeUtil(pt.shape)).onHandleChange)==null?void 0:k.call(R,pt.shape,pt.shape.handles);return{document:{pages:{[this.app.currentPageId]:{shapes:{[re.id]:Y(Y({},pt.shape),Ge??{})},bindings:pt.bindings}},pageStates:{[this.app.currentPageId]:{bindingId:pt.shape.handles[le].bindingId}}}}}),S(this,"cancel",()=>{let{initialShape:b,initialBinding:R,newStartBindingId:k,draggedBindingId:A}=this,O=_e.onSessionComplete(this.app.page.shapes[b.id]),B=this.isCreate||D.dist(O.handles.start.point,O.handles.end.point)<4,F={};return F[A]=void 0,R&&(F[R.id]=B?void 0:R),k&&(F[k]=void 0),{document:{pages:{[this.app.currentPageId]:{shapes:{[b.id]:B?void 0:b},bindings:F}},pageStates:{[this.app.currentPageId]:{selectedIds:B?[]:[b.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}}}),S(this,"complete",()=>{let{initialShape:b,initialBinding:R,newStartBindingId:k,startBindingShapeId:A,handleId:O}=this,B=_e.onSessionComplete(this.app.page.shapes[b.id]),F=B.handles[O].bindingId,j=D.dist(B.handles.start.point,B.handles.end.point);if(!(F||R)&&j<4)return this.cancel();let J={},ce={};return R&&(J[R.id]=this.isCreate?void 0:R,ce[R.id]=void 0),F&&(J[F]=void 0,ce[F]=this.app.page.bindings[F]),A&&(J[k]=void 0,ce[k]=this.app.page.bindings[k]),{id:"arrow",before:{document:{pages:{[this.app.currentPageId]:{shapes:{[b.id]:this.isCreate?void 0:b},bindings:J}},pageStates:{[this.app.currentPageId]:{selectedIds:this.isCreate?[]:[b.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}},after:{document:{pages:{[this.app.currentPageId]:{shapes:{[b.id]:B},bindings:ce}},pageStates:{[this.app.currentPageId]:{selectedIds:[b.id],bindingId:void 0,hoveredId:void 0,editingId:void 0}}}}}}),S(this,"findBindingPoint",(b,R,k,A,O,B,F,j)=>{let J=_e.getShapeUtil(R.type).getBindingPoint(R,b,O,B,F,j);if(J)return{id:A,type:"arrow",fromId:b.id,toId:R.id,handleId:k,point:D.toFixed(J.point),distance:J.distance}});var s,l,h;this.isCreate=i;let{currentPageId:g}=e.state.appState,f=e.state.document.pages[g];this.handleId=r,this.initialShape=ui(f.shapes[t]),this.bindableShapeIds=_e.getBindableShapeIds(e.state).filter(b=>!(b===this.initialShape.id||b===this.initialShape.parentId));let C=(s=this.initialShape.handles[r==="start"?"end":"start"])==null?void 0:s.bindingId;if(C){let b=(l=f.bindings[C])==null?void 0:l.toId;b&&(this.bindableShapeIds=this.bindableShapeIds.filter(R=>R!==b))}let{originPoint:y}=this.app;if(this.isCreate)this.startBindingShapeId=(h=this.bindableShapeIds.map(b=>f.shapes[b]).filter(b=>!b.isLocked&&X.pointInBounds(y,_e.getShapeUtil(b).getBounds(b))).sort((b,R)=>R.childIndex-b.childIndex)[0])==null?void 0:h.id,this.startBindingShapeId&&this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1);else{let b=this.initialShape.handles[this.handleId].bindingId;b?this.initialBinding=f.bindings[b]:this.initialShape.handles[this.handleId].bindingId=void 0}}},XQ=class extends Oi{constructor(e){super(e),S(this,"type","brush"),S(this,"performanceMode"),S(this,"status","brushing"),S(this,"initialSelectedIds"),S(this,"shapesToTest"),S(this,"start",()=>{}),S(this,"update",()=>{let{initialSelectedIds:r,shapesToTest:i,app:{metaKey:s,settings:l,originPoint:h,currentPoint:g}}=this,f=X.getBoundsFromPoints([h,g]),C=l.isCadSelectMode?!s&&h[0]<g[0]:s,y=new Set,b=new Set(r);i.forEach(({id:O,selectId:B})=>{let F=this.app.getShape(O);if(!y.has(B)){let j=this.app.getShapeUtil(F);(C?X.boundsContain(f,j.getBounds(F)):j.hitTestBounds(F,f))?(y.add(B),b.has(B)||b.add(B)):b.has(B)&&b.delete(B)}});let R=this.app.selectedIds,k=b.size!==R.length||R.some(O=>!b.has(O)),A=k?Array.from(b.values()):R;return k?{appState:{selectByContain:C},document:{pageStates:{[this.app.currentPageId]:{brush:f,selectedIds:A}}}}:{appState:{selectByContain:C},document:{pageStates:{[this.app.currentPageId]:{brush:f}}}}}),S(this,"cancel",()=>({appState:{selectByContain:!1},document:{pageStates:{[this.app.currentPageId]:{brush:null,selectedIds:Array.from(this.initialSelectedIds.values())}}}})),S(this,"complete",()=>({appState:{selectByContain:!1},document:{pageStates:{[this.app.currentPageId]:{brush:null,selectedIds:[...this.app.selectedIds]}}}}));let{currentPageId:t}=e;this.initialSelectedIds=new Set(this.app.selectedIds),this.shapesToTest=this.app.shapes.filter(r=>!(r.isLocked||r.isHidden||r.parentId!==t||this.initialSelectedIds.has(r.id)||this.initialSelectedIds.has(r.parentId))).map(r=>({id:r.id,bounds:this.app.getShapeUtil(r).getBounds(r),selectId:r.id})),this.update()}},qQ=class extends Oi{constructor(e,t){super(e),S(this,"type","draw"),S(this,"performanceMode"),S(this,"status","creating"),S(this,"topLeft"),S(this,"points"),S(this,"initialShape"),S(this,"lastAdjustedPoint"),S(this,"shiftedPoints",[]),S(this,"shapeId"),S(this,"isLocked"),S(this,"isExtending"),S(this,"lockedDirection"),S(this,"start",()=>{var f;let C=this.app.originPoint,y=[0,0,(f=C[2])!=null?f:.5];this.points.push(y);let b=[Math.min(this.topLeft[0],C[0]),Math.min(this.topLeft[1],C[1])],R=D.sub(b,C);return this.topLeft=b,this.shiftedPoints=this.points.map(k=>D.toFixed(D.sub(k,R)).concat(k[2])),{document:{pages:{[this.app.currentPageId]:{shapes:{[this.shapeId]:{point:this.topLeft,points:this.shiftedPoints}}}},pageStates:{[this.app.currentPageId]:{selectedIds:[this.shapeId]}}}}}),S(this,"update",()=>{let{shapeId:f}=this,{currentPoint:C,originPoint:y,shiftKey:b,zoom:R}=this.app;if(!this.lockedDirection&&this.points.length>1){let A=D.sub(C,y);D.len(A)>3/R&&(this.lockedDirection=Math.abs(A[0])>Math.abs(A[1])?"horizontal":"vertical")}if(b){if(!this.isLocked&&this.points.length>2){if(!this.lockedDirection){let O=D.sub(C,y);D.len(O)>3/R&&(this.lockedDirection=Math.abs(O[0])>Math.abs(O[1])?"horizontal":"vertical")}this.isLocked=!0;let A=[...this.lastAdjustedPoint];this.lockedDirection==="vertical"?A[0]=0:A[1]=0,this.points.push(A.concat(C[2]))}}else this.isLocked&&(this.isLocked=!1);this.isLocked&&(this.lockedDirection==="vertical"?C[0]=y[0]:C[1]=y[1]);let k=this.addPoint(C);if(k)return{document:{pages:{[this.app.currentPageId]:{shapes:{[f]:k}}},pageStates:{[this.app.currentPageId]:{selectedIds:[f]}}}}}),S(this,"cancel",()=>{let{shapeId:f}=this,C=this.app.currentPageId;return{document:{pages:{[C]:{shapes:{[f]:this.isExtending?this.initialShape:void 0}}},pageStates:{[C]:{selectedIds:[]}}}}}),S(this,"complete",()=>{let{shapeId:f}=this,C=this.app.currentPageId,y=this.app.getShape(f);return{id:"create_draw",before:{document:{pages:{[C]:{shapes:{[f]:this.isExtending?this.initialShape:void 0}}},pageStates:{[C]:{selectedIds:[]}}}},after:{document:{pages:{[C]:{shapes:{[f]:ye(Y({},y),{point:D.toFixed(y.point),points:y.points.map(b=>D.toFixed(b)),isComplete:!0})}}},pageStates:{[this.app.currentPageId]:{selectedIds:[]}}}}}}),S(this,"addPoint",f=>{let{originPoint:C}=this.app,y=D.toFixed(D.sub(f,C)).concat(f[2]);if(D.isEqual(this.lastAdjustedPoint,y))return;this.points.push(y),this.lastAdjustedPoint=y;let b=[...this.topLeft],R=[Math.min(this.topLeft[0],f[0]),Math.min(this.topLeft[1],f[1])],k=D.sub(R,C),A;return b[0]!==R[0]||b[1]!==R[1]?(this.topLeft=R,A=this.points.map(O=>D.toFixed(D.sub(O,k)).concat(O[2]))):A=[...this.shiftedPoints,D.sub(y,k).concat(y[2])],this.shiftedPoints=A,{point:this.topLeft,points:A}});var r;let{originPoint:i}=this.app;this.shapeId=t,this.initialShape=this.app.getShape(t),this.topLeft=[...this.initialShape.point];let s=[0,0,(r=i[2])!=null?r:.5],l=D.sub(i,this.topLeft),h=this.initialShape.points.map(f=>D.sub(f,l).concat(f[2]));this.isExtending=h.length>0;let g=[];if(this.isExtending){let f=h[h.length-1];if(f){g.push(f,f);let C=Math.floor(D.dist(f,s)/16);if(C>1)for(let y=0;y<C;y++){let b=y/(C-1);g.push(D.lrp(f,s,b).concat(f[2]))}else g.push(s,s)}}else g.push(s);this.points=[...h,...g],this.shiftedPoints=this.points.map(f=>D.add(f,l).concat(f[2])),this.lastAdjustedPoint=this.points[this.points.length-1]}},JQ=class extends Oi{constructor(e,t,r){super(e),S(this,"type","edit"),S(this,"performanceMode"),S(this,"initialShape"),S(this,"initialSelectedIds"),S(this,"currentPageId"),S(this,"isCreating"),S(this,"start",()=>{}),S(this,"update",()=>{}),S(this,"cancel",()=>({document:{pages:{[this.currentPageId]:{shapes:{[this.initialShape.id]:this.isCreating?void 0:this.initialShape}}},pageStates:{[this.currentPageId]:{selectedIds:this.isCreating?[]:this.initialSelectedIds,editingId:void 0}}}})),S(this,"complete",()=>{let i=this.app.getShape(this.initialShape.id);return{id:"edit",before:{document:{pages:{[this.currentPageId]:{shapes:{[this.initialShape.id]:this.isCreating?void 0:this.initialShape}}},pageStates:{[this.currentPageId]:{selectedIds:this.isCreating?[]:this.initialSelectedIds,editingId:void 0}}}},after:{document:{pages:{[this.currentPageId]:{shapes:{[this.initialShape.id]:i}}},pageStates:{[this.currentPageId]:{selectedIds:[i.id],editingId:void 0}}}}}}),this.initialShape=e.getShape(t,e.currentPageId),this.currentPageId=e.currentPageId,this.isCreating=r,this.initialSelectedIds=[...e.selectedIds]}},QQ=class extends Oi{constructor(e){super(e),S(this,"type","draw"),S(this,"performanceMode"),S(this,"status","creating"),S(this,"isLocked"),S(this,"lockedDirection"),S(this,"erasedShapes",new Set),S(this,"erasedBindings",new Set),S(this,"initialSelectedShapes"),S(this,"erasableShapes"),S(this,"prevPoint"),S(this,"prevEraseShapesSize",0),S(this,"interval"),S(this,"timestamp1",0),S(this,"timestamp2",0),S(this,"prevErasePoint",[]),S(this,"loop",()=>{let t=Date.now(),r=t-this.timestamp1,i=t-this.timestamp2,{eraseLine:s}=this.app.appState,l=[...s],h=!1;r>16&&this.prevErasePoint!==this.prevPoint&&(h=!0,l=[...s,this.prevPoint],this.prevErasePoint=this.prevPoint),i>32&&l.length>1&&(h=!0,l.splice(0,Math.ceil(l.length*.1)),this.timestamp2=t),h&&this.app.patchState({appState:{eraseLine:l}},"eraseline"),this.interval=requestAnimationFrame(this.loop)}),S(this,"start",()=>{}),S(this,"update",()=>{let{page:t,shiftKey:r,originPoint:i,currentPoint:s,zoom:l}=this.app;if(r){let C=D.sub(s,i);if(!this.isLocked&&D.len(C)>3/l){if(!this.lockedDirection){let y=D.sub(s,i);this.lockedDirection=Math.abs(y[0])>Math.abs(y[1])?"horizontal":"vertical"}this.isLocked=!0}}else this.isLocked&&(this.isLocked=!1);this.isLocked&&(this.lockedDirection==="vertical"?s[0]=i[0]:s[1]=i[1]);let h=D.toFixed(D.add(i,D.sub(s,i))),g=new Set([]);this.erasableShapes.forEach(C=>{if(!this.erasedShapes.has(C)&&this.app.getShapeUtil(C).hitTestLineSegment(C,this.prevPoint,h)&&(this.erasedShapes.add(C),g.add(C.id),C.children!==void 0))for(let y of C.children)this.erasedShapes.add(this.app.getShape(y)),g.add(y)}),Object.values(t.bindings).forEach(C=>{for(let y of[C.toId,C.fromId])g.has(y)&&this.erasedBindings.add(C)}),this.erasedShapes.forEach(C=>{this.app.getShape(C.id)||(this.erasedShapes.delete(C),this.erasableShapes.delete(C),g.delete(C.id))});let f=Array.from(this.erasedShapes.values());if(this.prevPoint=h,f.length!==this.prevEraseShapesSize)return this.prevEraseShapesSize=f.length,{document:{pages:{[t.id]:{shapes:Object.fromEntries(f.map(C=>[C.id,{isGhost:!0}]))}}}}}),S(this,"cancel",()=>{let{page:t}=this.app;cancelAnimationFrame(this.interval),this.erasedShapes.forEach(i=>{this.app.getShape(i.id)||(this.erasedShapes.delete(i),this.erasableShapes.delete(i))});let r=Array.from(this.erasedShapes.values());return{document:{pages:{[t.id]:{shapes:Object.fromEntries(r.map(i=>[i.id,{isGhost:!1}]))}},pageStates:{[t.id]:{selectedIds:this.initialSelectedShapes.map(i=>i.id)}}},appState:{eraseLine:[]}}}),S(this,"complete",()=>{let{page:t}=this.app;cancelAnimationFrame(this.interval),this.erasedShapes.forEach(f=>{this.app.getShape(f.id)||(this.erasedShapes.delete(f),this.erasableShapes.delete(f))}),this.erasedBindings.forEach(f=>{this.app.getBinding(f.id)||this.erasedBindings.delete(f)});let r=Array.from(this.erasedShapes.values()),i=Array.from(this.erasedBindings.values()),s=r.map(f=>f.id),l=i.map(f=>f.id),h={shapes:Object.fromEntries(r.map(f=>[f.id,f])),bindings:Object.fromEntries(i.map(f=>[f.id,f]))},g={shapes:Object.fromEntries(r.map(f=>[f.id,void 0])),bindings:Object.fromEntries(i.map(f=>[f.id,void 0]))};return this.app.shapes.forEach(f=>{f.handles&&!g.shapes[f.id]&&Object.values(f.handles).forEach(C=>{var y,b;C.bindingId&&l.includes(C.bindingId)&&(h.shapes[f.id]=ye(Y({},h.shapes[f.id]),{handles:ye(Y({},(y=h.shapes[f.id])==null?void 0:y.handles),{[C.id]:C})}),s.includes(f.id)||(g.shapes[f.id]=ye(Y({},g.shapes[f.id]),{handles:ye(Y({},(b=g.shapes[f.id])==null?void 0:b.handles),{[C.id]:ye(Y({},C),{bindingId:void 0})})})))})}),{id:"erase",before:{document:{pages:{[t.id]:h},pageStates:{[t.id]:{selectedIds:this.initialSelectedShapes.filter(f=>!!this.app.getShape(f.id)).map(f=>f.id)}}},appState:{eraseLine:[]}},after:{document:{pages:{[t.id]:g},pageStates:{[t.id]:{selectedIds:this.initialSelectedShapes.filter(f=>!!this.app.getShape(f.id)).filter(f=>!s.includes(f.id)).map(f=>f.id)}}},appState:{eraseLine:[]}}}}),this.prevPoint=[...e.originPoint],this.initialSelectedShapes=this.app.selectedIds.map(t=>this.app.getShape(t)),this.erasableShapes=new Set(this.app.shapes.filter(t=>!t.isLocked)),this.interval=this.loop()}},eee=class extends Oi{constructor(e,t){super(e),S(this,"type","grid"),S(this,"performanceMode"),S(this,"status","translating"),S(this,"shape"),S(this,"bounds"),S(this,"initialSelectedIds"),S(this,"initialSiblings"),S(this,"grid",{}),S(this,"columns",1),S(this,"rows",1),S(this,"isCopying",!1),S(this,"start",()=>{}),S(this,"update",()=>{let{currentPageId:i,altKey:s,shiftKey:l,currentPoint:h}=this.app,g={},f={},C=X.getBoundsCenter(this.bounds),y=D.sub(h,C);l&&(Math.abs(y[0])<Math.abs(y[1])?y[0]=0:y[1]=0);let b=this.bounds.width+32,R=this.bounds.height+32,k=Math.ceil(y[0]/b),A=Math.ceil(y[1]/R),O=Math.min(k,0),B=Math.min(A,0),F=Math.max(k,1),j=Math.max(A,1),J=new Set,ce=s;ce!==this.isCopying&&(Object.values(this.grid).filter(re=>re!==this.shape.id).forEach(re=>g[re]=void 0),this.grid={"0_0":this.shape.id},this.isCopying=ce);for(let re=O;re<F;re++)for(let ne=B;ne<j;ne++){let le=`${re}_${ne}`;if(J.add(le),this.grid[le]||re===0&&ne===0)continue;let me=this.getClone(D.add(this.shape.point,[re*b,ne*R]),ce);g[me.id]=me,this.grid[le]=me.id}if(Object.entries(this.grid).forEach(([re,ne])=>{J.has(re)||(g[ne]=void 0,delete this.grid[re])}),Object.values(g).length!==0)return this.initialSiblings&&(g[this.shape.parentId]={children:[...this.initialSiblings,...Object.values(this.grid)]}),{document:{pages:{[i]:{shapes:g}},pageStates:{[i]:f}}}}),S(this,"cancel",()=>{let{currentPageId:i}=this.app,s={};return Object.values(this.grid).forEach(l=>{s[l]=void 0}),s[this.shape.id]=ye(Y({},s[this.shape.id]),{point:this.shape.point}),this.initialSiblings&&(s[this.shape.parentId]={children:[...this.initialSiblings,this.shape.id]}),{document:{pages:{[i]:{shapes:s}},pageStates:{[i]:{selectedIds:[this.shape.id]}}}}}),S(this,"complete",()=>{let{currentPageId:i}=this.app,s={},l={},h=[];if(Object.values(this.grid).forEach(g=>{s[g]=void 0,l[g]=this.app.getShape(g),h.push(g)}),s[this.shape.id]=this.shape,this.initialSiblings&&(s[this.shape.parentId]={children:[...this.initialSiblings,this.shape.id]},l[this.shape.parentId]={children:[...this.initialSiblings,...Object.values(this.grid)]}),h.length!==1)return{id:"grid",before:{document:{pages:{[i]:{shapes:s}},pageStates:{[i]:{selectedIds:[],hoveredId:void 0}}}},after:{document:{pages:{[i]:{shapes:l}},pageStates:{[i]:{selectedIds:h,hoveredId:void 0}}}}}}),S(this,"getClone",(i,s)=>{let l=ye(Y({},this.shape),{id:X.uniqueId(),point:i});return s||l.type==="sticky"&&(l.text=""),l});var r;this.shape=this.app.getShape(t),this.grid["0_0"]=this.shape.id,this.bounds=this.app.getShapeBounds(t),this.initialSelectedIds=[...this.app.selectedIds],this.shape.parentId!==this.app.currentPageId&&(this.initialSiblings=(r=this.app.getShape(this.shape.parentId).children)==null?void 0:r.filter(i=>i!==this.shape.id))}},tee=class extends Oi{constructor(e,t,r,i="move_handle"){super(e),S(this,"type","handle"),S(this,"performanceMode"),S(this,"status","translatingHandle"),S(this,"commandId"),S(this,"topLeft"),S(this,"shiftKey",!1),S(this,"initialShape"),S(this,"handleId"),S(this,"start",()=>{}),S(this,"update",()=>{var l,h;let{initialShape:g,app:{currentPageId:f,currentPoint:C}}=this,y=this.app.getShape(g.id);if(y.isLocked)return;let b=y.handles,R=this.handleId,k=D.sub(C,b[R].point),A={[R]:ye(Y({},b[R]),{point:D.sub(D.add(b[R].point,k),y.point)})},O=(h=(l=_e.getShapeUtil(y)).onHandleChange)==null?void 0:h.call(l,y,A);if(O)return{document:{pages:{[f]:{shapes:{[y.id]:O}}}}}}),S(this,"cancel",()=>{let{initialShape:l,app:{currentPageId:h}}=this;return{document:{pages:{[h]:{shapes:{[l.id]:l}}}}}}),S(this,"complete",()=>{let{initialShape:l,app:{currentPageId:h}}=this;return{id:this.commandId,before:{document:{pages:{[h]:{shapes:{[l.id]:l}}}}},after:{document:{pages:{[h]:{shapes:{[l.id]:_e.onSessionComplete(this.app.getShape(this.initialShape.id))}}}}}}});let{originPoint:s}=e;this.topLeft=[...s],this.handleId=r,this.initialShape=this.app.getShape(t),this.commandId=i}},ree=class extends Oi{constructor(e){super(e),S(this,"type","rotate"),S(this,"status","transforming"),S(this,"performanceMode"),S(this,"delta",[0,0]),S(this,"commonBoundsCenter"),S(this,"initialAngle"),S(this,"initialShapes"),S(this,"changes",{}),S(this,"start",()=>{}),S(this,"update",()=>{let{commonBoundsCenter:l,initialShapes:h,app:{currentPageId:g,currentPoint:f,shiftKey:C}}=this,y={},b=D.angle(l,f)-this.initialAngle;return C&&(b=X.snapAngleToSegments(b,24)),h.forEach(({center:R,shape:k})=>{let{rotation:A=0}=k,O=0;C&&(O=X.snapAngleToSegments(A,24)-A);let B=_e.getRotatedShapeMutation(k,R,l,C?b+O:b);B&&(y[k.id]=B)}),this.changes=y,{document:{pages:{[g]:{shapes:y}}}}}),S(this,"cancel",()=>{let{initialShapes:l,app:{currentPageId:h}}=this,g={};return l.forEach(({shape:f})=>g[f.id]=f),{document:{pages:{[h]:{shapes:g}}}}}),S(this,"complete",()=>{let{initialShapes:l,app:{currentPageId:h}}=this,g={},f=this.changes;return l.forEach(({shape:{id:C,point:y,rotation:b,handles:R}})=>{g[C]={point:y,rotation:b,handles:R}}),{id:"rotate",before:{document:{pages:{[h]:{shapes:g}}}},after:{document:{pages:{[h]:{shapes:f}}}}}});let{app:{currentPageId:t,pageState:r,originPoint:i}}=this,s=_e.getSelectedBranchSnapshot(e.state,t).filter(l=>!l.isLocked);if(s.length===0)throw Error("No selected shapes!");if(e.rotationInfo.selectedIds===r.selectedIds){if(e.rotationInfo.center===void 0)throw Error("We should have a center for rotation!");this.commonBoundsCenter=e.rotationInfo.center}else this.commonBoundsCenter=X.getBoundsCenter(X.getCommonBounds(s.map(_e.getBounds))),e.rotationInfo.selectedIds=r.selectedIds,e.rotationInfo.center=this.commonBoundsCenter;this.initialShapes=s.filter(l=>l.children===void 0).map(l=>({shape:l,center:this.app.getShapeUtil(l).getCenter(l)})),this.initialAngle=D.angle(this.commonBoundsCenter,i)}},nee=class extends Oi{constructor(e,t=Dn.BottomRight,r=!1){super(e),this.transformType=t,this.isCreate=r,S(this,"type","transform"),S(this,"performanceMode"),S(this,"status","transforming"),S(this,"scaleX",1),S(this,"scaleY",1),S(this,"initialShapes"),S(this,"initialShapeIds"),S(this,"initialSelectedIds"),S(this,"shapeBounds"),S(this,"hasUnlockedShapes"),S(this,"isAllAspectRatioLocked"),S(this,"initialCommonBounds"),S(this,"snapInfo",{state:"empty"}),S(this,"prevPoint",[0,0]),S(this,"speed",1),S(this,"start",()=>{this.snapInfo={state:"ready",bounds:this.app.shapes.filter(h=>!this.initialShapeIds.includes(h.id)).map(h=>X.getBoundsWithCenter(_e.getRotatedBounds(h)))}}),S(this,"update",()=>{let{transformType:h,shapeBounds:g,initialCommonBounds:f,isAllAspectRatioLocked:C,app:{currentPageId:y,pageState:{camera:b},viewport:R,currentPoint:k,previousPoint:A,originPoint:O,shiftKey:B,altKey:F,metaKey:j,currentGrid:J,settings:{isSnapping:ce,showGrid:re}}}=this,ne={},le=F?D.mul(D.sub(k,O),2):D.sub(k,O),me=X.getTransformedBoundingBox(f,h,le,0,B||C);F&&(me=Y(Y({},me),X.centerBounds(me,X.getBoundsCenter(f)))),re&&(me=Y(Y({},me),X.snapBoundsToGrid(me,J)));let Ve=D.dist(k,A)-this.speed;this.speed=this.speed+Ve*(Ve>1?.5:.15);let lt=[];if((ce&&!j||!ce&&j)&&this.speed*b.zoom<10&&this.snapInfo.state==="ready"){let Ye=X.getSnapPoints(X.getBoundsWithCenter(me),this.snapInfo.bounds.filter(ct=>X.boundsContain(R,ct)||X.boundsCollide(R,ct)),5/b.zoom);Ye&&(lt=Ye.snapLines,me=X.getTransformedBoundingBox(f,h,D.sub(le,Ye.offset),0,B||C))}return this.scaleX=me.scaleX,this.scaleY=me.scaleY,g.forEach(({initialShape:Ye,initialShapeBounds:ct,transformOrigin:pt})=>{let tr=X.getRelativeTransformedBoundingBox(me,f,ct,this.scaleX<0,this.scaleY<0);re&&(tr=X.snapBoundsToGrid(tr,J));let qt=_e.transform(this.app.getShape(Ye.id),tr,{type:this.transformType,initialShape:Ye,scaleX:this.scaleX,scaleY:this.scaleY,transformOrigin:pt});ne[Ye.id]=qt}),{appState:{snapLines:lt},document:{pages:{[y]:{shapes:ne}}}}}),S(this,"cancel",()=>{let{shapeBounds:h,app:{currentPageId:g}}=this,f={};return this.isCreate?h.forEach(C=>f[C.initialShape.id]=void 0):h.forEach(C=>f[C.initialShape.id]=C.initialShape),{appState:{snapLines:[]},document:{pages:{[g]:{shapes:f}},pageStates:{[g]:{selectedIds:this.isCreate?[]:h.map(C=>C.initialShape.id)}}}}}),S(this,"complete",()=>{let{isCreate:h,shapeBounds:g,hasUnlockedShapes:f,app:{currentPageId:C}}=this;if(!f)return;if(this.isCreate&&D.dist(this.app.originPoint,this.app.currentPoint)<2)return this.cancel();let y={},b={},R,k;return h?(R=[],k=[],g.forEach(({initialShape:A})=>{y[A.id]=void 0,b[A.id]=this.app.getShape(A.id)})):(R=this.initialSelectedIds,k=this.initialSelectedIds,g.forEach(({initialShape:A})=>{y[A.id]=A,b[A.id]=this.app.getShape(A.id)})),{id:"transform",before:{appState:{snapLines:[]},document:{pages:{[C]:{shapes:y}},pageStates:{[C]:{selectedIds:R,hoveredId:void 0,editingId:void 0}}}},after:{appState:{snapLines:[]},document:{pages:{[C]:{shapes:b}},pageStates:{[C]:{selectedIds:k,hoveredId:void 0,editingId:void 0}}}}}}),this.initialSelectedIds=[...this.app.selectedIds],this.app.rotationInfo.selectedIds=[...this.initialSelectedIds],this.initialShapes=_e.getSelectedBranchSnapshot(this.app.state,this.app.currentPageId).filter(h=>!h.isLocked),this.initialShapeIds=this.initialShapes.map(h=>h.id),this.hasUnlockedShapes=this.initialShapes.length>0,this.isAllAspectRatioLocked=this.initialShapes.every(h=>h.isAspectRatioLocked||_e.getShapeUtil(h).isAspectRatioLocked);let i=Object.fromEntries(this.initialShapes.map(h=>[h.id,_e.getBounds(h)])),s=Object.values(i);this.initialCommonBounds=X.getCommonBounds(s);let l=X.getBoundsFromPoints(s.map(X.getBoundsCenter));this.shapeBounds=this.initialShapes.map(h=>{let g=i[h.id],f=X.getBoundsCenter(g),C=(f[0]-l.minX)/l.width,y=(f[1]-l.minY)/l.height;return{initialShape:h,initialShapeBounds:g,transformOrigin:[C,y]}})}},iee=class extends Oi{constructor(e,t,r,i=!1){super(e),S(this,"type","transformSingle"),S(this,"status","transforming"),S(this,"performanceMode"),S(this,"transformType"),S(this,"scaleX",1),S(this,"scaleY",1),S(this,"isCreate"),S(this,"initialShape"),S(this,"initialShapeBounds"),S(this,"initialCommonBounds"),S(this,"snapInfo",{state:"empty"}),S(this,"prevPoint",[0,0]),S(this,"speed",1),S(this,"start",()=>{this.snapInfo={state:"ready",bounds:this.app.shapes.filter(l=>l.id!==this.initialShape.id).map(l=>X.getBoundsWithCenter(_e.getRotatedBounds(l)))}}),S(this,"update",()=>{let{transformType:l,initialShape:h,initialShapeBounds:g,app:{settings:{isSnapping:f,showGrid:C},currentPageId:y,pageState:{camera:b},viewport:R,currentPoint:k,previousPoint:A,originPoint:O,currentGrid:B,shiftKey:F,altKey:j,metaKey:J}}=this;if(h.isLocked)return;let ce={},re=j?D.mul(D.sub(k,O),2):D.sub(k,O),ne=this.app.getShape(h.id),le=_e.getShapeUtil(ne),me=X.getTransformedBoundingBox(g,l,re,ne.rotation,F||ne.isAspectRatioLocked||le.isAspectRatioLocked);j&&(me=Y(Y({},me),X.centerBounds(me,X.getBoundsCenter(g)))),C&&(me=Y(Y({},me),X.snapBoundsToGrid(me,B)));let Ve=D.dist(k,A)-this.speed;this.speed=this.speed+Ve*(Ve>1?.5:.15);let lt=[];if((f&&!J||!f&&J)&&!h.rotation&&this.speed*b.zoom<10&&this.snapInfo.state==="ready"){let ct=X.getSnapPoints(X.getBoundsWithCenter(me),this.snapInfo.bounds.filter(pt=>X.boundsContain(R,pt)||X.boundsCollide(R,pt)),5/b.zoom);ct&&(lt=ct.snapLines,me=X.getTransformedBoundingBox(g,l,D.sub(re,ct.offset),ne.rotation,F||ne.isAspectRatioLocked||le.isAspectRatioLocked))}let Ye=_e.getShapeUtil(ne).transformSingle(ne,me,{initialShape:h,type:this.transformType,scaleX:me.scaleX,scaleY:me.scaleY,transformOrigin:[.5,.5]});return Ye&&(ce[ne.id]=Ye),C&&Ye&&Ye.point&&(Ye.point=D.snap(Ye.point,B)),{appState:{snapLines:lt},document:{pages:{[y]:{shapes:ce}}}}}),S(this,"cancel",()=>{let{initialShape:l,app:{currentPageId:h}}=this,g={};return this.isCreate?g[l.id]=void 0:g[l.id]=l,{appState:{snapLines:[]},document:{pages:{[h]:{shapes:g}},pageStates:{[h]:{selectedIds:this.isCreate?[]:[l.id]}}}}}),S(this,"complete",()=>{let{initialShape:l,app:{currentPageId:h}}=this;if(l.isLocked)return;if(this.isCreate&&D.dist(this.app.originPoint,this.app.currentPoint)<2)return this.cancel();let g={},f={};return g[l.id]=this.isCreate?void 0:l,f[l.id]=_e.onSessionComplete(this.app.getShape(l.id)),{id:"transform_single",before:{appState:{snapLines:[]},document:{pages:{[h]:{shapes:g}},pageStates:{[h]:{selectedIds:this.isCreate?[]:[l.id],editingId:void 0,hoveredId:void 0}}}},after:{appState:{snapLines:[]},document:{pages:{[h]:{shapes:f}},pageStates:{[h]:{selectedIds:[l.id],editingId:void 0,hoveredId:void 0}}}}}}),this.isCreate=i,this.transformType=r;let s=this.app.getShape(t);this.initialShape=s,this.initialShapeBounds=_e.getBounds(s),this.initialCommonBounds=_e.getRotatedBounds(s),this.app.rotationInfo.selectedIds=[s.id]}},oee=class extends Oi{constructor(e,t=!1,r=!1){super(e),S(this,"performanceMode"),S(this,"type","translate"),S(this,"status","translating"),S(this,"delta",[0,0]),S(this,"prev",[0,0]),S(this,"prevPoint",[0,0]),S(this,"speed",1),S(this,"cloneInfo",{state:"empty"}),S(this,"snapInfo",{state:"empty"}),S(this,"snapLines",[]),S(this,"isCloning",!1),S(this,"isCreate"),S(this,"link"),S(this,"initialIds"),S(this,"hasUnlockedShapes"),S(this,"initialSelectedIds"),S(this,"initialCommonBounds"),S(this,"initialShapes"),S(this,"initialParentChildren"),S(this,"bindingsToDelete"),S(this,"start",()=>{let{bindingsToDelete:f,initialIds:C,app:{currentPageId:y,page:b}}=this,R=[],k=[];if(Object.values(b.shapes).forEach(B=>{let F=X.getBoundsWithCenter(_e.getRotatedBounds(B));R.push(F),C.has(B.id)||k.push(F)}),this.snapInfo={state:"ready",bounds:R,others:k},f.length===0)return;let A={},O={};return f.forEach(B=>{A[B.id]=void 0;let F=this.app.getShape(B.fromId);O[B.fromId]={handles:ye(Y({},F.handles),{[B.handleId]:ye(Y({},F.handles[B.handleId]),{bindingId:void 0})})}}),{document:{pages:{[y]:{bindings:A,shapes:O}}}}}),S(this,"update",()=>{let{initialParentChildren:f,initialShapes:C,initialCommonBounds:y,bindingsToDelete:b,app:{pageState:{camera:R},settings:{isSnapping:k,showGrid:A},currentPageId:O,viewport:B,selectedIds:F,currentPoint:j,previousPoint:J,originPoint:ce,altKey:re,shiftKey:ne,metaKey:le,currentGrid:me}}=this,Ve={},lt={},Ye={},ct=D.sub(j,ce),pt=!1;this.isCreate||(re&&!this.isCloning?(this.isCloning=!0,pt=!0):!re&&this.isCloning&&(this.isCloning=!1,pt=!0)),ne&&(Math.abs(ct[0])<Math.abs(ct[1])?ct[0]=0:ct[1]=0);let tr=D.dist(j,J)-this.speed;if(this.speed=this.speed+tr*(tr>1?.5:.15),this.snapLines=[],(k&&!le||!k&&le)&&this.speed*R.zoom<10&&this.snapInfo.state==="ready"){let qt=X.getSnapPoints(X.getBoundsWithCenter(A?X.snapBoundsToGrid(X.translateBounds(y,ct),me):X.translateBounds(y,ct)),(this.isCloning?this.snapInfo.bounds:this.snapInfo.others).filter(_r=>X.boundsContain(B,_r)||X.boundsCollide(B,_r)),5/R.zoom);qt&&(this.snapLines=qt.snapLines,ct=D.sub(ct,qt.offset))}if(this.prev=ct,this.isCloning)if(pt){if(this.cloneInfo.state==="empty"&&this.createCloneInfo(),this.cloneInfo.state==="empty")throw Error;let{clones:qt,clonedBindings:_r}=this.cloneInfo;this.isCloning=!0,b.forEach(Ge=>Ve[Ge.id]=Ge),C.forEach(Ge=>lt[Ge.id]={point:Ge.point}),qt.forEach(Ge=>{var Gt;if(lt[Ge.id]=Y({},Ge),Ge.parentId!==O&&!F.includes(Ge.parentId)){let Jt=((Gt=lt[Ge.parentId])==null?void 0:Gt.children)||f[Ge.parentId];Jt.includes(Ge.id)||(lt[Ge.parentId]=ye(Y({},lt[Ge.parentId]),{children:[...Jt,Ge.id]}))}});for(let Ge of _r)Ve[Ge.id]=Ge;Ye.selectedIds=qt.map(Ge=>Ge.id),qt.forEach(Ge=>{lt[Ge.id]=ye(Y({},Ge),{point:A?D.snap(D.toFixed(D.add(Ge.point,ct)),me):D.toFixed(D.add(Ge.point,ct))})})}else{if(this.cloneInfo.state==="empty")throw Error;let{clones:qt}=this.cloneInfo;qt.forEach(_r=>{lt[_r.id]={point:A?D.snap(D.toFixed(D.add(_r.point,ct)),me):D.toFixed(D.add(_r.point,ct))}})}else if(pt){if(this.cloneInfo.state==="empty")throw Error;let{clones:qt,clonedBindings:_r}=this.cloneInfo;this.isCloning=!1,b.forEach(Ge=>Ve[Ge.id]=void 0),qt.forEach(Ge=>{Ge.parentId!==O&&(lt[Ge.parentId]=ye(Y({},lt[Ge.parentId]),{children:f[Ge.parentId]}))}),qt.forEach(Ge=>lt[Ge.id]=void 0),C.forEach(Ge=>{lt[Ge.id]={point:A?D.snap(D.toFixed(D.add(Ge.point,ct)),me):D.toFixed(D.add(Ge.point,ct))}});for(let Ge of _r)Ve[Ge.id]=void 0;Ye.selectedIds=C.map(Ge=>Ge.id)}else C.forEach(qt=>{lt[qt.id]={point:A?D.snap(D.toFixed(D.add(qt.point,ct)),me):D.toFixed(D.add(qt.point,ct))}});return{appState:{snapLines:this.snapLines},document:{pages:{[O]:{shapes:lt,bindings:Ve}},pageStates:{[O]:Ye}}}}),S(this,"cancel",()=>{let{initialShapes:f,initialSelectedIds:C,bindingsToDelete:y,app:{currentPageId:b}}=this,R={},k={},A={editingId:void 0,hoveredId:void 0};if(this.isCreate?(f.forEach(({id:O})=>k[O]=void 0),A.selectedIds=[]):(f.forEach(({id:O,point:B,handles:F})=>k[O]=F?ye(Y({},k[O]),{point:B,handles:F}):ye(Y({},k[O]),{point:B})),A.selectedIds=C,y.forEach(O=>{R[O.id]=O})),this.cloneInfo.state==="ready"){let{clones:O,clonedBindings:B}=this.cloneInfo;O.forEach(F=>k[F.id]=void 0),B.forEach(F=>R[F.id]=void 0)}return{appState:{snapLines:[]},document:{pages:{[b]:{shapes:k,bindings:R}},pageStates:{[b]:A}}}}),S(this,"complete",()=>{let{initialShapes:f,initialParentChildren:C,bindingsToDelete:y,app:{currentPageId:b}}=this,R={},k={},A={},O={};if(this.isCloning){if(this.cloneInfo.state==="empty"&&this.createCloneInfo(),this.cloneInfo.state!=="ready")throw Error;let{clones:B,clonedBindings:F}=this.cloneInfo;B.forEach(j=>{k[j.id]=void 0,O[j.id]=this.app.getShape(j.id),j.parentId!==b&&(k[j.parentId]=ye(Y({},k[j.parentId]),{children:C[j.parentId]}),O[j.parentId]=ye(Y({},O[j.parentId]),{children:this.app.getShape(j.parentId).children}))}),F.forEach(j=>{R[j.id]=void 0,A[j.id]=this.app.getBinding(j.id)})}else f.forEach(B=>{k[B.id]=this.isCreate?void 0:ye(Y({},k[B.id]),{point:B.point}),O[B.id]=Y(Y({},O[B.id]),this.isCreate?this.app.getShape(B.id):{point:this.app.getShape(B.id).point})});return y.forEach(B=>{var F,j,J,ce,re;R[B.id]=B,k[B.fromId]=ye(Y({},k[B.fromId]),{id:B.fromId,handles:ye(Y({},(F=k[B.fromId])==null?void 0:F.handles),{[B.handleId]:ye(Y({},(J=(j=k[B.fromId])==null?void 0:j.handles)==null?void 0:J[B.handleId]),{bindingId:B.id})})}),O[B.fromId]=ye(Y({},O[B.fromId]),{id:B.fromId,handles:ye(Y({},O[B.fromId].handles),{[B.handleId]:ye(Y({},(re=(ce=O[B.fromId])==null?void 0:ce.handles)==null?void 0:re[B.handleId]),{bindingId:void 0})})})}),y.forEach(B=>A[B.id]=void 0),{id:"translate",before:{appState:{snapLines:[]},document:{pages:{[b]:{shapes:k,bindings:R}},pageStates:{[b]:{selectedIds:this.isCreate?[]:[...this.initialSelectedIds]}}}},after:{appState:{snapLines:[]},document:{pages:{[b]:{shapes:O,bindings:A}},pageStates:{[b]:{selectedIds:[...this.app.selectedIds]}}}}}}),S(this,"createCloneInfo",()=>{let{initialShapes:f,initialParentChildren:C,app:{selectedIds:y,currentPageId:b,page:R}}=this,k={},A={},O=[],B=[];f.forEach(j=>{let J=X.uniqueId();C[J]=C[j.id],k[j.id]=J;let ce=ye(Y({},X.deepClone(j)),{id:J,parentId:j.parentId,childIndex:_e.getChildIndexAbove(this.app.state,j.id,b)});if(ce.type==="video"){let re=document.getElementById(j.id+"_video");re&&(ce.currentTime=(re.currentTime+16)%re.duration)}B.push(ce)}),B.forEach(j=>{j.children!==void 0&&(j.children=j.children.map(J=>k[J]))}),B.forEach(j=>{y.includes(j.parentId)&&(j.parentId=k[j.parentId])});let F=new Set(Object.keys(k));Object.values(R.bindings).filter(j=>F.has(j.fromId)||F.has(j.toId)).forEach(j=>{if(F.has(j.fromId)&&F.has(j.toId)){let J=X.uniqueId(),ce=ye(Y({},X.deepClone(j)),{id:J,fromId:k[j.fromId]||j.fromId,toId:k[j.toId]||j.toId});A[j.id]=J,O.push(ce)}}),B.forEach(j=>{if(j.handles&&j.handles)for(let J in j.handles){let ce=j.handles[J];ce.bindingId=ce.bindingId?A[ce.bindingId]:void 0}}),B.forEach(j=>{if(R.shapes[j.id])throw Error("uh oh, we didn't clone correctly")}),this.cloneInfo={state:"ready",clones:B,cloneMap:k,clonedBindings:O}}),this.isCreate=t,this.link=r;let{currentPageId:i,selectedIds:s,page:l}=this.app;this.initialSelectedIds=[...s];let h=(r?_e.getLinkedShapeIds(this.app.state,i,r,!1):s).map(f=>this.app.getShape(f)).filter(f=>!f.isLocked),g=new Set(h.map(f=>f.id));this.hasUnlockedShapes=h.length>0,this.initialShapes=Array.from(new Set(h.filter(f=>!g.has(f.parentId)).flatMap(f=>f.children?[f,...f.children.map(C=>this.app.getShape(C))]:[f])).values()),this.initialIds=new Set(this.initialShapes.map(f=>f.id)),this.bindingsToDelete=[],Object.values(l.bindings).filter(f=>this.initialIds.has(f.fromId)||this.initialIds.has(f.toId)).forEach(f=>{this.initialIds.has(f.fromId)&&(this.initialIds.has(f.toId)||this.bindingsToDelete.push(f))}),this.initialParentChildren={},this.initialShapes.map(f=>f.parentId).filter(f=>f!==l.id).forEach(f=>{this.initialParentChildren[f]=this.app.getShape(f).children}),this.initialCommonBounds=X.getCommonBounds(this.initialShapes.map(_e.getRotatedBounds)),this.app.rotationInfo.selectedIds=[...this.app.selectedIds]}},see={arrow:YQ,brush:XQ,draw:qQ,erase:QQ,handle:tee,rotate:ree,transform:nee,transformSingle:iee,translate:oee,grid:eee,edit:JQ},aee=e=>see[e],ro=class extends U5{constructor(e){super(),this.app=e,S(this,"type","select"),S(this,"previous"),S(this,"status","idle"),S(this,"setStatus",t=>{this.status=t,this.app.setStatus(this.status)}),S(this,"onEnter",()=>{this.setStatus("idle")}),S(this,"onExit",()=>{this.setStatus("idle")}),S(this,"onCancel",()=>{this.status==="idle"?this.app.selectTool("select"):this.setStatus("idle"),this.app.cancelSession()}),S(this,"getNextChildIndex",()=>{let{shapes:t,appState:{currentPageId:r}}=this.app;return t.length===0?1:t.filter(i=>i.parentId===r).sort((i,s)=>s.childIndex-i.childIndex)[0].childIndex+1}),S(this,"onPinchStart",()=>{this.app.cancelSession(),this.setStatus("pinching")}),S(this,"onPinchEnd",()=>{X.isMobileSafari()&&this.app.undoSelect(),this.setStatus("idle")}),S(this,"onPinch",(t,r)=>{var i;this.status==="pinching"&&(isNaN(t.delta[0])||isNaN(t.delta[1])||(this.app.pinchZoom(t.point,t.delta,t.delta[2]),(i=this.onPointerMove)==null||i.call(this,t,r)))}),S(this,"onKeyDown",t=>{if(t==="Escape"){this.onCancel();return}if(t==="Meta"||t==="Control"||t==="Alt"){this.app.updateSession();return}}),S(this,"onKeyUp",t=>{if(t==="Meta"||t==="Control"||t==="Alt"){this.app.updateSession();return}}),S(this,"onPointerMove",()=>{this.status==="creating"&&this.app.updateSession()}),S(this,"onPointerUp",()=>{if(this.status==="creating"){this.app.completeSession();let{isToolLocked:t}=this.app.appState;t||this.app.selectTool("select")}this.setStatus("idle")})}},t2=class extends ro{constructor(){super(...arguments),S(this,"type","arrow"),S(this,"onPointerDown",()=>{if(this.status!=="idle")return;let{currentPoint:e,currentGrid:t,settings:{showGrid:r},appState:{currentPageId:i,currentStyle:s}}=this.app,l=this.getNextChildIndex(),h=X.uniqueId(),g=gu.create({id:h,parentId:i,childIndex:l,point:r?ee.snap(e,t):e,style:Y({},s)});this.app.patchCreate([g]),this.app.startSession("arrow",g.id,"end",!0),this.setStatus("creating")})}},r2=class extends ro{constructor(){super(...arguments),S(this,"type","draw"),S(this,"lastShapeId"),S(this,"onEnter",()=>{this.lastShapeId=void 0}),S(this,"onCancel",()=>{switch(this.status){case"idle":{this.app.selectTool("select");break}default:{this.setStatus("idle");break}}this.app.cancelSession()}),S(this,"onPointerDown",e=>{if(this.status!=="idle"||this.app.readOnly)return;let{currentPoint:t,appState:{currentPageId:r,currentStyle:i}}=this.app,s=this.lastShapeId&&this.app.getShape(this.lastShapeId);if(e.shiftKey&&s)this.app.startSession("draw",s.id),this.setStatus("extending");else{let l=this.getNextChildIndex(),h=X.uniqueId(),g=Bd.create({id:h,parentId:r,childIndex:l,point:t,style:Y({},i)});this.lastShapeId=h,this.app.patchCreate([g]),this.app.startSession("draw",h),this.setStatus("creating")}}),S(this,"onPointerMove",()=>{if(!this.app.readOnly)switch(this.status){case"extending":case"creating":this.app.updateSession()}}),S(this,"onPointerUp",()=>{this.app.completeSession(),this.setStatus("idle")})}},n2=class extends ro{constructor(){super(...arguments),S(this,"type","ellipse"),S(this,"onPointerDown",()=>{if(this.app.readOnly||this.status!=="idle")return;let{currentPoint:e,currentGrid:t,settings:{showGrid:r},appState:{currentPageId:i,currentStyle:s}}=this.app,l=this.getNextChildIndex(),h=X.uniqueId(),g=Od.create({id:h,parentId:i,childIndex:l,point:r?ee.snap(e,t):e,style:Y({},s)});this.app.patchCreate([g]),this.app.startSession("transformSingle",g.id,Dn.BottomRight,!0),this.setStatus("creating")})}},i2=class extends ro{constructor(){super(...arguments),S(this,"type","erase"),S(this,"status","idle"),S(this,"onPointerDown",()=>{this.app.readOnly||this.status==="idle"&&this.setStatus("pointing")}),S(this,"onPointerMove",e=>{if(!this.app.readOnly)switch(this.status){case"pointing":{ee.dist(e.origin,e.point)>3&&(this.app.startSession("erase"),this.app.updateSession(),this.setStatus("erasing"));break}case"erasing":this.app.updateSession()}}),S(this,"onPointerUp",()=>{if(!this.app.readOnly){switch(this.status){case"pointing":{let e=this.app.shapes.filter(t=>!t.isLocked).filter(t=>this.app.getShapeUtil(t).hitTestPoint(t,this.app.currentPoint)).flatMap(t=>t.children?[t.id,...t.children]:t.id);this.app.delete(e);break}case"erasing":this.app.completeSession()}this.setStatus("idle")}}),S(this,"onCancel",()=>{this.status==="idle"?this.previous?this.app.selectTool(this.previous):this.app.selectTool("select"):this.setStatus("idle"),this.app.cancelSession()})}},o2=class extends ro{constructor(){super(...arguments),S(this,"type","line"),S(this,"onPointerDown",()=>{if(this.app.readOnly||this.status!=="idle")return;let{currentPoint:e,currentGrid:t,settings:{showGrid:r},appState:{currentPageId:i,currentStyle:s}}=this.app,l=this.getNextChildIndex(),h=X.uniqueId(),g=gu.create({id:h,parentId:i,childIndex:l,point:r?ee.snap(e,t):e,decorations:{start:void 0,end:void 0},style:Y({},s)});this.app.patchCreate([g]),this.app.startSession("arrow",g.id,"end",!0),this.setStatus("creating")})}},s2=class extends ro{constructor(){super(...arguments),S(this,"type","rectangle"),S(this,"onPointerDown",()=>{if(this.app.readOnly||this.status!=="idle")return;let{currentPoint:e,currentGrid:t,settings:{showGrid:r},appState:{currentPageId:i,currentStyle:s}}=this.app,l=this.getNextChildIndex(),h=X.uniqueId(),g=Pd.create({id:h,parentId:i,childIndex:l,point:r?ee.snap(e,t):e,style:Y({},s)});this.app.patchCreate([g]),this.app.startSession("transformSingle",g.id,Dn.BottomRight,!0),this.setStatus("creating")})}},a2=class extends ro{constructor(){super(...arguments),S(this,"type","select"),S(this,"pointedId"),S(this,"selectedGroupId"),S(this,"pointedHandleId"),S(this,"pointedBoundsHandle"),S(this,"pointedLinkHandleId"),S(this,"onEnter",()=>{this.setStatus("idle")}),S(this,"onExit",()=>{this.setStatus("idle")}),S(this,"clonePaint",e=>{if(this.app.selectedIds.length===0)return;let t=this.app.selectedIds.map(g=>this.app.getShape(g)),r=X.expandBounds(X.getCommonBounds(t.map(_e.getBounds)),16),i=X.getBoundsCenter(r),s=[r.width,r.height],l=[i[0]+s[0]*Math.floor((e[0]+s[0]/2-i[0])/s[0]),i[1]+s[1]*Math.floor((e[1]+s[1]/2-i[1])/s[1])],h=X.centerBounds(r,l);this.app.shapes.some(g=>_e.getShapeUtil(g).hitTestBounds(g,h))||this.app.duplicate(this.app.selectedIds,l)}),S(this,"getShapeClone",(e,t)=>{let r=this.app.getShape(e),i=_e.getShapeUtil(r);if(i.canClone){let s=i.getBounds(r),l=i.getCenter(r),h={top:[s.minX,s.minY-(s.height+32)],right:[s.maxX+32,s.minY],bottom:[s.minX,s.maxY+32],left:[s.minX-(s.width+32),s.minY],topLeft:[s.minX-(s.width+32),s.minY-(s.height+32)],topRight:[s.maxX+32,s.minY-(s.height+32)],bottomLeft:[s.minX-(s.width+32),s.maxY+32],bottomRight:[s.maxX+32,s.maxY+32]}[t];if(r.rotation!==0){let C=ee.add(h,[s.width/2,s.height/2]),y=ee.rotWith(C,l,r.rotation||0);h=ee.sub(y,[s.width/2,s.height/2])}let g=X.uniqueId(),f=ye(Y({},r),{id:g,point:h});return f.type==="sticky"&&(f.text=""),f}}),S(this,"onCancel",()=>{this.app.session?this.app.cancelSession():this.selectNone(),this.setStatus("idle")}),S(this,"onKeyDown",(e,t,r)=>{switch(e){case"Escape":{this.onCancel();break}case"Tab":{if(this.app.readOnly)return;if(!this.app.pageState.editingId&&this.status==="idle"&&this.app.selectedIds.length===1){let[i]=this.app.selectedIds,s=this.getShapeClone(i,"right");s&&(this.app.createShapes(s),this.setStatus("idle"),s.type==="sticky"&&(this.app.select(s.id),this.app.setEditingId(s.id)))}break}case"Meta":case"Control":case"Alt":{this.app.updateSession();break}case"Enter":{if(this.app.readOnly)return;let{pageState:i}=this.app;i.selectedIds.length===1&&!i.editingId&&(this.app.setEditingId(i.selectedIds[0]),r.preventDefault())}}}),S(this,"onKeyUp",(e,t)=>{if(this.status==="clonePainting"&&!(t.altKey&&t.shiftKey)){this.setStatus("idle");return}if(e==="Meta"||e==="Control"||e==="Alt"){this.app.updateSession();return}}),S(this,"onPointerMove",()=>{let{originPoint:e,currentPoint:t}=this.app;if(this.app.readOnly&&this.app.isPointing){this.app.session?this.app.updateSession():ee.dist(e,t)>3&&(this.app.startSession("brush"),this.setStatus("brushing"));return}switch(this.status){case"pointingBoundsHandle":{if(!this.pointedBoundsHandle)throw Error("No pointed bounds handle");if(ee.dist(e,t)>3){if(this.pointedBoundsHandle==="rotate")this.setStatus("rotating"),this.app.startSession("rotate");else if(this.pointedBoundsHandle==="center"||this.pointedBoundsHandle==="left"||this.pointedBoundsHandle==="right")this.setStatus("translating"),this.app.startSession("translate",!1,this.pointedBoundsHandle);else{this.setStatus("transforming");let r=this.app.selectedIds.flatMap(i=>_e.getDocumentBranch(this.app.state,i,this.app.currentPageId));r.length===1?this.app.startSession("transformSingle",r[0],this.pointedBoundsHandle):this.app.startSession("transform",this.pointedBoundsHandle)}this.app.updateSession()}break}case"pointingCanvas":{ee.dist(e,t)>3&&(this.app.startSession("brush"),this.setStatus("brushing"));break}case"pointingClone":{ee.dist(e,t)>3&&(this.setStatus("translatingClone"),this.app.startSession("translate"),this.app.updateSession());break}case"pointingBounds":{ee.dist(e,t)>3&&(this.setStatus("translating"),this.app.startSession("translate"),this.app.updateSession());break}case"pointingHandle":{if(!this.pointedHandleId)throw Error("No pointed handle");if(ee.dist(e,t)>3){this.setStatus("translatingHandle");let r=this.app.getShape(this.app.selectedIds[0]);r&&(this.pointedHandleId==="bend"?(this.app.startSession("handle",r.id,this.pointedHandleId),this.app.updateSession()):(this.app.startSession("arrow",r.id,this.pointedHandleId,!1),this.app.updateSession()))}break}case"clonePainting":{this.clonePaint(t);break}default:if(this.app.session){this.app.updateSession();break}}}),S(this,"onPointerDown",(e,t)=>{if(e.target==="canvas"&&this.status==="idle"){let{currentPoint:r}=this.app;if(e.spaceKey&&t.buttons===1)return;if(this.status==="idle"&&e.altKey&&e.shiftKey){this.setStatus("clonePainting"),this.clonePaint(r);return}if(!e.shiftKey){if(this.app.onShapeBlur(),e.altKey&&this.app.selectedIds.length>0){this.app.duplicate(this.app.selectedIds,r);return}this.selectNone()}this.setStatus("pointingCanvas")}}),S(this,"onPointerUp",e=>{var t;if(this.status==="translatingClone"||this.status==="pointingClone"){this.pointedId&&(this.app.completeSession(),this.app.setEditingId(this.pointedId)),this.setStatus("idle"),this.pointedId=void 0;return}if(this.status==="pointingBounds"){if(e.target==="bounds")this.selectNone();else if(this.app.isSelected(e.target))e.shiftKey?this.pointedId!==e.target&&this.deselect(e.target):this.pointedId!==e.target&&this.app.selectedIds.length>1&&this.select(e.target);else if(this.pointedId===e.target){if(this.app.getShape(e.target).isLocked)return;e.shiftKey?this.pushSelect(e.target):this.select(e.target)}}this.setStatus("idle"),this.pointedBoundsHandle=void 0,this.pointedHandleId=void 0,this.pointedId=void 0,((t=this.app.session)==null?void 0:t.type)!=="edit"&&this.app.completeSession()}),S(this,"onDoubleClickCanvas",()=>{this.app.readOnly}),S(this,"onPointShape",(e,t)=>{if(e.spaceKey&&t.buttons===1||this.app.getShape(e.target).isLocked)return;let{editingId:r,hoveredId:i}=this.app.pageState;if(r&&e.target!==r&&this.app.onShapeBlur(),(this.status==="idle"||this.status==="pointingBounds")&&e.metaKey&&e.shiftKey&&i){this.pointedId=i,this.app.isSelected(i)?this.deselect(i):(this.pushSelect(i),this.setStatus("pointingBounds"));return}if(this.status==="pointingBounds"){let{parentId:s}=this.app.getShape(e.target);this.pointedId=s===this.app.currentPageId?e.target:s;return}if(this.status==="idle"){if(this.setStatus("pointingBounds"),e.metaKey){e.shiftKey||this.selectNone(),this.app.startSession("brush"),this.setStatus("brushing");return}let s,{parentId:l}=this.app.getShape(e.target);l===this.app.currentPageId?(s=e.target,this.selectedGroupId=void 0):l===this.selectedGroupId?s=e.target:(s=l,this.selectedGroupId=void 0),this.app.isSelected(s)||(this.pointedId=s,e.shiftKey?this.pushSelect(s):this.select(s))}}),S(this,"onDoubleClickShape",e=>{if(this.app.readOnly)return;let t=this.app.getShape(e.target);if(t.isLocked){this.app.select(e.target);return}_e.getShapeUtil(t.type).canEdit&&(t.parentId===this.app.currentPageId||t.parentId===this.selectedGroupId)&&this.app.setEditingId(e.target),t.parentId!==this.app.currentPageId&&(this.selectedGroupId=t.parentId),this.app.select(e.target)}),S(this,"onRightPointShape",e=>{this.app.isSelected(e.target)||this.app.select(e.target)}),S(this,"onHoverShape",e=>{this.app.setHoveredId(e.target)}),S(this,"onUnhoverShape",e=>{let{currentPageId:t}=this.app;requestAnimationFrame(()=>{t===this.app.currentPageId&&this.app.pageState.hoveredId===e.target&&this.app.setHoveredId(void 0)})}),S(this,"onPointBounds",e=>{if(e.metaKey){e.shiftKey||this.selectNone(),this.app.startSession("brush"),this.setStatus("brushing");return}this.setStatus("pointingBounds")}),S(this,"onRightPointBounds",(e,t)=>{t.stopPropagation()}),S(this,"onReleaseBounds",()=>{(this.status==="translating"||this.status==="brushing")&&this.app.completeSession(),this.setStatus("idle")}),S(this,"onPointBoundsHandle",e=>{this.pointedBoundsHandle=e.target,this.setStatus("pointingBoundsHandle")}),S(this,"onDoubleClickBoundsHandle",e=>{switch(e.target){case"center":case"left":case"right":{this.app.select(..._e.getLinkedShapeIds(this.app.state,this.app.currentPageId,e.target,e.shiftKey));break}default:if(this.app.selectedIds.length===1){this.app.resetBounds(this.app.selectedIds);let t=this.app.getShape(this.app.selectedIds[0]);"label"in t&&this.app.setEditingId(t.id)}}}),S(this,"onReleaseBoundsHandle",()=>{this.setStatus("idle")}),S(this,"onPointHandle",e=>{this.pointedHandleId=e.target,this.setStatus("pointingHandle")}),S(this,"onDoubleClickHandle",e=>{if(e.target==="bend"){let{selectedIds:t}=this.app;if(t.length!==1)return;let r=this.app.getShape(t[0]);_e.getShapeUtil(r.type).canEdit&&(r.parentId===this.app.currentPageId||r.parentId===this.selectedGroupId)&&this.app.setEditingId(r.id);return}this.app.toggleDecoration(e.target)}),S(this,"onReleaseHandle",()=>{this.setStatus("idle")}),S(this,"onShapeClone",e=>{let t=this.app.selectedIds[0],r=this.getShapeClone(t,e.target);e.target==="left"||e.target==="right"||e.target==="top"||e.target==="bottom"?r&&(this.app.createShapes(r),this.pointedId=r.id,this.setStatus("pointingClone")):(this.setStatus("gridCloning"),this.app.startSession("grid",t))})}deselect(e){this.app.select(...this.app.selectedIds.filter(t=>t!==e))}select(e){this.app.select(e)}pushSelect(e){let t=this.app.getShape(e);this.app.select(...this.app.selectedIds.filter(r=>r!==t.parentId),e)}selectNone(){this.app.selectNone()}},l2=class extends ro{constructor(){super(...arguments),S(this,"type","sticky"),S(this,"shapeId"),S(this,"onPointerDown",()=>{if(!this.app.readOnly){if(this.status==="creating"){this.setStatus("idle"),this.app.appState.isToolLocked||this.app.selectTool("select");return}if(this.status==="idle"){let{currentPoint:e,currentGrid:t,settings:{showGrid:r},appState:{currentPageId:i,currentStyle:s}}=this.app,l=this.getNextChildIndex(),h=X.uniqueId();this.shapeId=h;let g=mu.create({id:h,parentId:i,childIndex:l,point:r?ee.snap(e,t):e,style:Y({},s)}),f=mu.getBounds(g);g.point=ee.sub(g.point,[f.width/2,f.height/2]),this.app.patchCreate([g]),this.app.startSession("translate"),this.setStatus("creating")}}}),S(this,"onPointerUp",()=>{this.app.readOnly||this.status==="creating"&&(this.setStatus("idle"),this.app.completeSession(),this.app.selectTool("select"),this.app.setEditingId(this.shapeId))})}},u2=class extends ro{constructor(){super(...arguments),S(this,"type","text"),S(this,"stopEditingShape",()=>{this.setStatus("idle"),this.app.appState.isToolLocked||this.app.selectTool("select")}),S(this,"onKeyUp",()=>{}),S(this,"onKeyDown",()=>{}),S(this,"onPointerDown",()=>{if(this.status==="creating"){this.stopEditingShape();return}if(this.status==="idle"){let{currentPoint:e,currentGrid:t,settings:{showGrid:r}}=this.app;this.app.createTextShapeAtPoint(r?ee.snap(e,t):e,void 0,!0),this.setStatus("creating");return}}),S(this,"onPointerUp",()=>{}),S(this,"onPointShape",e=>{if(this.app.readOnly)return;let t=this.app.getShape(e.target);t.type==="text"&&(this.setStatus("idle"),this.app.setEditingId(t.id))}),S(this,"onShapeBlur",()=>{this.app.readOnly||this.stopEditingShape()})}},c2=class extends ro{constructor(){super(...arguments),S(this,"type","triangle"),S(this,"onPointerDown",()=>{if(this.app.readOnly||this.status!=="idle")return;let{currentPoint:e,currentGrid:t,settings:{showGrid:r},appState:{currentPageId:i,currentStyle:s}}=this.app,l=this.getNextChildIndex(),h=X.uniqueId(),g=Md.create({id:h,parentId:i,childIndex:l,point:r?ee.snap(e,t):e,style:Y({},s)});this.app.patchCreate([g]),this.app.startSession("transformSingle",g.id,Dn.BottomRight,!0),this.setStatus("creating")})}},yu=X.uniqueId(),mn=class extends xQ{constructor(e,t={}){super(mn.defaultState,e,mn.version,(r,i,s)=>bo(ye(Y({},i),{document:ye(Y(Y({},i.document),r.document),{version:s})}),mn.version)),S(this,"callbacks",{}),S(this,"tools",{select:new a2(this),erase:new i2(this),text:new u2(this),draw:new r2(this),ellipse:new n2(this),rectangle:new s2(this),triangle:new c2(this),line:new o2(this),arrow:new t2(this),sticky:new l2(this)}),S(this,"currentTool",this.tools.select),S(this,"session"),S(this,"readOnly",!1),S(this,"isDirty",!1),S(this,"isCreating",!1),S(this,"originPoint",[0,0]),S(this,"currentPoint",[0,0]),S(this,"previousPoint",[0,0]),S(this,"shiftKey",!1),S(this,"altKey",!1),S(this,"metaKey",!1),S(this,"ctrlKey",!1),S(this,"spaceKey",!1),S(this,"isPointing",!1),S(this,"isForcePanning",!1),S(this,"isPastePrevented",!1),S(this,"editingStartTime",-1),S(this,"fileSystemHandle",null),S(this,"viewport",X.getBoundsFromPoints([[0,0],[100,100]])),S(this,"rendererBounds",X.getBoundsFromPoints([[0,0],[100,100]])),S(this,"selectHistory",{stack:[[]],pointer:0}),S(this,"clipboard"),S(this,"rotationInfo",{selectedIds:[],center:[0,0]}),S(this,"migrate",r=>bo(r,mn.version)),S(this,"onReady",()=>{var r,i;this.loadDocument(this.document),Kd().then(s=>{this.fileSystemHandle=s});try{this.patchState(ye(Y({},bo(this.state,mn.version)),{appState:{status:"idle"}}))}catch(s){console.error("The data appears to be corrupted. Resetting!",s),localStorage.setItem(this.document.id+"_corrupted",JSON.stringify(this.document)),this.patchState(ye(Y({},mn.defaultState),{appState:ye(Y({},mn.defaultState.appState),{status:"idle"})}))}(i=(r=this.callbacks).onMount)==null||i.call(r,this)}),S(this,"cleanup",(r,i)=>{var s;let l=Y({},r);l.document!==i.document&&Object.entries(l.document.pages).forEach(([f,C])=>{if(C===void 0){delete l.document.pages[f],delete l.document.pageStates[f];return}let y=i.document.pages[f],b={};if(!y||C.shapes!==y.shapes||C.bindings!==y.bindings){C.shapes=Y({},C.shapes),C.bindings=Y({},C.bindings);let k=new Set;Object.entries(C.shapes).forEach(([B,F])=>{var j;let J;F?J=F.parentId:(J=(j=y?.shapes[B])==null?void 0:j.parentId,delete C.shapes[B]),C.id===l.appState.currentPageId&&y?.shapes[B]!==F&&(b[B]=F),J&&J!==f&&C.shapes[J]!==void 0&&k.add(C.shapes[J])}),Object.keys(C.bindings).forEach(B=>{C.bindings[B]||delete C.bindings[B]}),l.document.pages[f]=C;let A=_e.getRelatedBindings(l,Object.keys(b),f),O=new Set;A.forEach(B=>{if(!C.bindings[B.id])return;let F=C.shapes[B.toId],j=C.shapes[B.fromId];if(!(F&&j)){delete l.document.pages[f].bindings[B.id];return}if(O.has(j))return;let J=_e.updateArrowBindings(C,j);if(O.add(j),J){let ce=Y(Y({},j),J);C.shapes[j.id]=ce}}),k.forEach(B=>{if(!B)throw Error("no group!");let F=B.children.filter(J=>C.shapes[J]!==void 0),j=X.getCommonBounds(F.map(J=>C.shapes[J]).filter(Boolean).map(J=>_e.getRotatedBounds(J)));C.shapes[B.id]=ye(Y({},B),{point:[j.minX,j.minY],size:[j.width,j.height],children:F})})}let R=Y({},l.document.pageStates[f]);R.brush||delete R.brush,R.hoveredId&&!C.shapes[R.hoveredId]&&delete R.hoveredId,R.bindingId&&!C.bindings[R.bindingId]&&(_e.warn(`Could not find the binding of ${f}`),delete R.bindingId),R.editingId&&!C.shapes[R.editingId]&&(_e.warn("Could not find the editing shape!"),delete R.editingId),l.document.pageStates[f]=R}),Object.keys((s=l.document.assets)!=null?s:{}).forEach(f=>{var C,y;((C=l.document.assets)==null?void 0:C[f])||(y=l.document.assets)==null||delete y[f]});let h=l.appState.currentPageId,g=l.document.pageStates[h];if(l.room&&l.room!==i.room){let f=ye(Y({},l.room),{users:Y({},l.room.users)});i.room&&Object.values(i.room.users).filter(Boolean).forEach(C=>{f.users[C.id]===void 0&&delete f.users[C.id]}),l.room=f}return l.room&&(l.room.users[l.room.userId]=ye(Y({},l.room.users[l.room.userId]),{point:this.currentPoint,selectedIds:g.selectedIds})),this.readOnly&&(l.document.pages=i.document.pages),l}),S(this,"broadcastPatch",(r,i)=>{var s,l,h,g,f,C,y,b,R;let k={},A={},O={},B=(h=(l=(s=r?.document)==null?void 0:s.pages)==null?void 0:l[this.currentPageId])==null?void 0:h.shapes,F=(C=(f=(g=r?.document)==null?void 0:g.pages)==null?void 0:f[this.currentPageId])==null?void 0:C.bindings,j=(y=r?.document)==null?void 0:y.assets;B&&Object.keys(B).forEach(J=>{k[J]=this.getShape(J,this.currentPageId)}),F&&Object.keys(F).forEach(J=>{A[J]=this.getBinding(J,this.currentPageId)}),j&&Object.keys(j).forEach(J=>{O[J]=this.document.assets[J]}),(R=(b=this.callbacks).onChangePage)==null||R.call(b,this,k,A,O,i)}),S(this,"onPatch",(r,i,s)=>{var l,h,g,f,C,y;(this.callbacks.onChangePage&&((h=(l=i?.document)==null?void 0:l.pages)==null?void 0:h[this.currentPageId])||((g=i?.document)==null?void 0:g.assets))&&(((f=i?.document)==null?void 0:f.assets)||this.session&&this.session.type!=="brush"&&this.session.type!=="erase"&&this.session.type!=="draw")&&this.broadcastPatch(i,!1),(y=(C=this.callbacks).onPatch)==null||y.call(C,this,i,s)}),S(this,"onCommand",(r,i,s)=>{var l,h;this.clearSelectHistory(),this.isDirty=!0,(h=(l=this.callbacks).onCommand)==null||h.call(l,this,i,s)}),S(this,"onReplace",()=>{this.clearSelectHistory(),this.isDirty=!1}),S(this,"onUndo",()=>{var r,i;this.rotationInfo.selectedIds=[...this.selectedIds],(i=(r=this.callbacks).onUndo)==null||i.call(r,this)}),S(this,"onRedo",()=>{var r,i;this.rotationInfo.selectedIds=[...this.selectedIds],(i=(r=this.callbacks).onRedo)==null||i.call(r,this)}),S(this,"onPersist",(r,i)=>{var s,l;(l=(s=this.callbacks).onPersist)==null||l.call(s,this),this.broadcastPatch(i,!0)}),S(this,"prevSelectedIds",this.selectedIds),S(this,"onStateDidChange",(r,i)=>{var s,l,h,g;(l=(s=this.callbacks).onChange)==null||l.call(s,this,i),this.room&&this.selectedIds!==this.prevSelectedIds&&((g=(h=this.callbacks).onChangePresence)==null||g.call(h,this,ye(Y({},this.room.users[this.room.userId]),{selectedIds:this.selectedIds,session:!!this.session})),this.prevSelectedIds=this.selectedIds)}),S(this,"preventPaste",()=>{if(this.isPastePrevented)return;let r=s=>s.stopImmediatePropagation(),i=()=>{setTimeout(()=>{document.removeEventListener("paste",r,{capture:!0}),this.isPastePrevented=!1},50)};document.addEventListener("paste",r,{capture:!0}),window.addEventListener("pointerup",i,{once:!0}),this.isPastePrevented=!0}),S(this,"justSent",!1),S(this,"getReservedContent",(r,i=this.currentPageId)=>{let{bindings:s}=this.document.pages[i],l={},h={},g=Object.values(s),f=new Map(g.map(A=>[A.toId,A])),C=new Map(g.map(A=>[A.fromId,A])),y=[f,C],b=[];this.session&&r.forEach(A=>b.push(A)),this.pageState.editingId&&b.push(this.pageState.editingId);let R=new Set(b),k=new Set;for(;b.length>0;){let A=b.pop();if(!A)break;if(k.has(A))continue;k.add(A);let O=this.getShape(A);l[A]=O,O.parentId!==i&&b.push(O.parentId),O.children&&b.push(...O.children),y.map(B=>B.get(O.id)).filter(Boolean).forEach(B=>{h[B.id]=B,b.push(B.toId,B.fromId)})}return{reservedShapes:l,reservedBindings:h,strongReservedShapeIds:R}}),S(this,"replacePageContent",(r,i,s,l=this.currentPageId)=>{if(this.justSent)return this.justSent=!1,this;let h=this.document.pages[this.currentPageId];return Object.values(r).forEach(g=>{g.parentId!==l&&!(h.shapes[g.parentId]||r[g.parentId])&&(console.warn("Added a shape without a parent on the page"),g.parentId=l)}),this.useStore.setState(g=>{let{hoveredId:f,editingId:C,bindingId:y,selectedIds:b}=g.document.pageStates[l],R=[...b],k=C&&g.document.pages[this.currentPageId].shapes[C];k&&R.push(k.id);let{reservedShapes:A,reservedBindings:O,strongReservedShapeIds:B}=this.getReservedContent(R,this.currentPageId);Object.values(A).filter(me=>!("text"in me)).forEach(me=>{let Ve=r[me.id];if(Ve){if(!(me.type==="arrow"||B.has(me.id))){r[me.id]=Ve;return}"decorations"in Ve&&"decorations"in me&&(r[me.id]=ye(Y({},me),{decorations:Ve.decorations})),me.style=Ve.style}});let F=Y(Y({},r),A);k&&(F[k.id]=k);let j=Y(Y({},i),O),J=Y({},s),ce=ye(Y({},g),{document:ye(Y({},g.document),{pages:{[l]:ye(Y({},g.document.pages[l]),{shapes:F,bindings:j})},assets:J,pageStates:ye(Y({},g.document.pageStates),{[l]:ye(Y({},g.document.pageStates[l]),{selectedIds:b.filter(me=>F[me]!==void 0),hoveredId:f?F[f]===void 0?void 0:f:void 0,editingId:C,bindingId:y?j[y]===void 0?void 0:y:void 0})})})}),re=ce.document.pages[l],ne=_e.getRelatedBindings(ce,Object.keys(F),l),le=new Set;return ne.forEach(me=>{if(!re.bindings[me.id])return;let Ve=re.shapes[me.fromId];if(le.has(Ve))return;let lt=_e.updateArrowBindings(re,Ve);if(le.add(Ve),lt){let Ye=Y(Y({},Ve),lt);re.shapes[Ve.id]=Ye}}),Object.values(F).forEach(me=>{if(me.type!=="group")return;let Ve=me.children.filter(Ye=>re.shapes[Ye]!==void 0),lt=X.getCommonBounds(Ve.map(Ye=>re.shapes[Ye]).filter(Boolean).map(Ye=>_e.getRotatedBounds(Ye)));re.shapes[me.id]=ye(Y({},me),{point:[lt.minX,lt.minY],size:[lt.width,lt.height],children:Ve})}),this.state.document=ce.document,ce},!0),this}),S(this,"updateBounds",r=>{this.rendererBounds=r;let{point:i,zoom:s}=this.camera;this.updateViewport(i,s),!this.readOnly&&this.session&&this.session.update()}),S(this,"updateViewport",(r,i)=>{let{width:s,height:l}=this.rendererBounds,[h,g]=D.sub(D.div([0,0],i),r),[f,C]=D.sub(D.div([s,l],i),r);this.viewport={minX:h,minY:g,maxX:f,maxY:C,height:f-h,width:C-g}}),S(this,"setEditingId",(r,i=!1)=>{if(!this.readOnly){if(r)this.startSession("edit",r,i);else{if(!this.pageState.editingId)return;this.completeSession()}this.editingStartTime=performance.now(),this.patchState({document:{pageStates:{[this.currentPageId]:{editingId:r}}}},"set_editing_id")}}),S(this,"setHoveredId",r=>{this.patchState({document:{pageStates:{[this.currentPageId]:{hoveredId:r}}}},"set_hovered_id")}),S(this,"setSetting",(r,i)=>{if(this.session)return this;let s={settings:{[r]:typeof i=="function"?i(this.settings[r]):i}};return this.patchState(s,`settings:${r}`),this.persist(s),this}),S(this,"toggleFocusMode",()=>{if(this.session)return this;let r={settings:{isFocusMode:!this.settings.isFocusMode}};return this.patchState(r,"settings:toggled_focus_mode"),this.persist(r),this}),S(this,"togglePenMode",()=>{if(this.session)return this;let r={settings:{isPenMode:!this.settings.isPenMode}};return this.patchState(r,"settings:toggled_pen_mode"),this.persist(r),this}),S(this,"toggleDarkMode",()=>{if(this.session)return this;let r={settings:{isDarkMode:!this.settings.isDarkMode}};return this.patchState(r,"settings:toggled_dark_mode"),this.persist(r),this}),S(this,"toggleZoomSnap",()=>{if(this.session)return this;let r={settings:{isZoomSnap:!this.settings.isZoomSnap}};return this.patchState(r,"settings:toggled_zoom_snap"),this.persist(r),this}),S(this,"toggleDebugMode",()=>{if(this.session)return this;let r={settings:{isDebugMode:!this.settings.isDebugMode}};return this.patchState(r,"settings:toggled_debug"),this.persist(r),this}),S(this,"setMenuOpen",r=>{let i={appState:{isMenuOpen:r}};return this.patchState(i,"ui:toggled_menu_opened"),this.persist(i),this}),S(this,"setIsLoading",r=>{let i={appState:{isLoading:r}};return this.patchState(i,"ui:toggled_is_loading"),this.persist(i),this}),S(this,"setDisableAssets",r=>(this.patchState({appState:{disableAssets:r}},"ui:toggled_disable_images"),this)),S(this,"toggleGrid",()=>{if(this.session)return this;let r={settings:{showGrid:!this.settings.showGrid}};return this.patchState(r,"settings:toggled_grid"),this.persist(r),this}),S(this,"selectTool",r=>{if(this.readOnly||this.session)return this;this.isPointing=!1;let i=this.tools[r];return i===this.currentTool?(this.patchState({appState:{isToolLocked:!1}}),this):(this.currentTool.onExit(),i.previous=this.currentTool.type,this.currentTool=i,this.currentTool.onEnter(),this.patchState({appState:{activeTool:r,isToolLocked:!1}},`selected_tool:${r}`))}),S(this,"toggleToolLock",()=>this.session?this:this.patchState({appState:{isToolLocked:!this.appState.isToolLocked}},"toggled_tool_lock")),S(this,"resetDocument",()=>{if(this.session)return this;this.session=void 0,this.currentTool=this.tools.select;let r=mn.defaultDocument;return r.pages.page.name="Page 1",this.resetHistory().clearSelectHistory().loadDocument(mn.defaultDocument).persist({}),this}),S(this,"updateUsers",(r,i=!1)=>{this.patchState({room:{users:Object.fromEntries(r.map(s=>[s.id,s]))}},i?"room:self:update":"room:user:update")}),S(this,"removeUser",r=>{this.patchState({room:{users:{[r]:void 0}}})}),S(this,"mergeDocument",r=>{if(this.document.id!==r.id)return this.replaceState(ye(Y({},bo(ye(Y({},this.state),{document:r}),mn.version)),{appState:ye(Y({},this.appState),{currentPageId:Object.keys(r.pages)[0]})})),this;let i=Y({},this.document.pageStates),s=ye(Y({},this.appState),{currentPageId:r.pages[this.currentPageId]?this.currentPageId:Object.keys(r.pages)[0],pages:Object.values(r.pages).map((h,g)=>({id:h.id,name:h.name,childIndex:h.childIndex||g}))});this.resetHistory(),Object.keys(this.document.pages).forEach(h=>{r.pages[h]||(h===this.appState.currentPageId&&(this.cancelSession(),this.selectNone()),i[h]=void 0)}),this.session&&this.selectedIds.filter(h=>!r.pages[this.currentPageId].shapes[h]).forEach(h=>r.pages[this.currentPageId].shapes[h]=this.page.shapes[h]),Object.entries(i).forEach(([h,g])=>{g.selectedIds=g.selectedIds.filter(f=>!!r.pages[h].shapes[f])});let{editingId:l}=this.pageState;return l&&(r.pages[this.currentPageId].shapes[l]=this.page.shapes[l],i[this.currentPageId].selectedIds=[l]),this.replaceState(ye(Y({},bo(ye(Y({},this.state),{document:ye(Y({},r),{pageStates:i})}),mn.version)),{appState:s}),"merge")}),S(this,"updateDocument",(r,i="updated_document")=>{let s=this.state,l=ye(Y({},s),{document:ye(Y({},s.document),{assets:r.assets})});r.pages[this.currentPageId]||(l.appState=ye(Y({},s.appState),{currentPageId:Object.keys(r.pages)[0]}));let h=1;for(let g of Object.values(r.pages))g!==s.document.pages[g.id]&&(l.document.pages[g.id]=g,g.name||(l.document.pages[g.id].name=`Page ${h+1}`,h++));for(let g of Object.values(r.pageStates))if(g!==s.document.pageStates[g.id]){l.document.pageStates[g.id]=g;let f=r.pages[g.id],C=["bindingId","editingId","hoveredId","pointedId"];for(let y of C)f.shapes[y]||(g[y]=void 0);g.selectedIds=g.selectedIds.filter(y=>!!r.pages[f.id].shapes[y])}return this.replaceState(bo(l,l.document.version||0),`${i}:${r.id}`)}),S(this,"loadRoom",r=>(this.patchState({room:{id:r,userId:yu,users:{[yu]:{id:yu,color:dd[Math.floor(Math.random()*dd.length)],point:[100,100],selectedIds:[],activeShapes:[]}}}}),this)),S(this,"loadDocument",r=>{this.setIsLoading(!0),this.selectNone(),this.resetHistory(),this.clearSelectHistory(),this.session=void 0;let i=ye(Y({},mn.defaultState),{settings:Y({},this.state.settings),document:r,appState:ye(Y(Y({},mn.defaultState.appState),this.state.appState),{currentPageId:Object.keys(r.pages)[0],disableAssets:this.disableAssets})});this.replaceState(bo(i,mn.version),"loaded_document");let{point:s,zoom:l}=this.camera;return this.updateViewport(s,l),this.setIsLoading(!1),this}),S(this,"loadPageFromURL",(r,i)=>{let s=r.id,l=ye(Y({},this.state.document),{pageStates:ye(Y({},this.state.document.pageStates),{[s]:i}),pages:ye(Y({},this.document.pages),{[s]:r})});this.loadDocument(l),this.persist({})}),S(this,"newProject",()=>{!this.isLocal||(this.fileSystemHandle=null,this.resetDocument())}),S(this,"saveProject",()=>Ft(this,null,function*(){if(this.readOnly)return;let r=yield Eu(bo(this.state,mn.version).document,this.fileSystemHandle);return this.fileSystemHandle=r,this.persist({}),this.isDirty=!1,this})),S(this,"saveProjectAs",r=>Ft(this,null,function*(){try{let i=yield Eu(this.document,null,r);this.fileSystemHandle=i,this.persist({}),this.isDirty=!1}catch(i){console.error(i.message)}return this})),S(this,"openProject",()=>Ft(this,null,function*(){if(this.isLocal)try{let r=yield Yd();if(!r)throw Error();let{fileHandle:i,document:s}=r;this.loadDocument(s),this.fileSystemHandle=i,this.zoomToFit(),this.persist({})}catch(r){console.error(r)}finally{this.persist({})}})),S(this,"openAsset",()=>Ft(this,null,function*(){if(!this.disableAssets)try{let r=yield Xd();if(Array.isArray(r))this.addMediaFromFiles(r,this.centerPoint);else{if(!r)return;this.addMediaFromFiles([r])}}catch(r){console.error(r)}finally{this.persist({})}})),S(this,"signOut",()=>{}),S(this,"getAppState",()=>this.appState),S(this,"getPage",(r=this.currentPageId)=>_e.getPage(this.state,r||this.currentPageId)),S(this,"getShapes",(r=this.currentPageId)=>_e.getShapes(this.state,r||this.currentPageId)),S(this,"getBindings",(r=this.currentPageId)=>_e.getBindings(this.state,r||this.currentPageId)),S(this,"getShape",(r,i=this.currentPageId)=>_e.getShape(this.state,r,i)),S(this,"getShapeBounds",(r,i=this.currentPageId)=>_e.getBounds(this.getShape(r,i))),S(this,"getBinding",(r,i=this.currentPageId)=>_e.getBinding(this.state,r,i)),S(this,"getPageState",(r=this.currentPageId)=>_e.getPageState(this.state,r||this.currentPageId)),S(this,"getPagePoint",(r,i=this.currentPageId)=>{let{camera:s}=this.getPageState(i);return D.sub(D.div(r,s.zoom),s.point)}),S(this,"createPage",(r,i)=>{if(this.readOnly)return this;let{width:s,height:l}=this.rendererBounds;return this.setState(IQ(this,[-s/2,-l/2],r,i))}),S(this,"changePage",r=>this.setState(SQ(this,r))),S(this,"movePage",(r,i)=>this.readOnly?this:this.setState($Q(this,r,i))),S(this,"renamePage",(r,i)=>this.readOnly?this:this.setState(FQ(this,r,i))),S(this,"duplicatePage",r=>this.readOnly?this:this.setState(PQ(this,r))),S(this,"deletePage",r=>this.readOnly?this:Object.values(this.document.pages).length<=1?this:this.setState(TQ(this,r||this.currentPageId))),S(this,"cut",(r=this.selectedIds,i)=>(i?.preventDefault(),this.copy(r,i),this.readOnly||this.delete(r),this)),S(this,"copy",(r=this.selectedIds,i)=>{var s;i?.preventDefault(),this.clipboard=this.getContent(r);let l=`<tldraw>${JSON.stringify(Y({type:"tldr/clipboard"},this.clipboard))}</tldraw>`;return bQ(l),i&&((s=i.clipboardData)==null||s.setData("text/html",l)),navigator.clipboard&&window.ClipboardItem&&navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([l],{type:"text/html"})})]),this}),S(this,"paste",(r,i)=>Ft(this,null,function*(){var s,l;if(this.readOnly)return;let h=[],g=[],f,C=R=>Ft(this,null,function*(){let k=document.createElement("div");k.innerHTML=R;let A=k.firstChild;A.style.setProperty("background-color","transparent");let O=yield _e.getImageForSvg(A,"svg",{scale:1,quality:1});if(O){let B=new File([O],"image.svg");h.push(B)}else y(R)}),y=R=>{let k=this.getPagePoint(r??this.centerPoint,this.currentPageId),A=R.includes(`
`);g.push(_e.getShapeUtil("text").getShape({id:X.uniqueId(),type:"text",parentId:this.appState.currentPageId,text:_e.normalizeText(R.trim()),point:k,style:ye(Y({},this.appState.currentStyle),{textAlign:A?"start":this.appState.currentStyle.textAlign})}))},b=R=>{var k;try{let A=(k=R.match(/<tldraw>(.*)<\/tldraw>/))==null?void 0:k[1];if(!A)return;let O=JSON.parse(A);if(O.type==="tldr/clipboard"){f=O;return}else throw Error("Not tldraw data!")}catch{y(R)}};if(i!==void 0){let R=Array.from((l=(s=i.clipboardData)==null?void 0:s.items)!=null?l:[]);yield Promise.all(R.map(k=>Ft(this,null,function*(){var A;let{type:O,kind:B}=k;switch(B){case"string":{let F=yield new Promise(j=>k.getAsString(j));switch(O){case"text/html":{if((A=F.match(/<tldraw>(.*)<\/tldraw>/))!=null&&A[1]){b(F);return}break}case"text/plain":{F.startsWith("<svg")?yield C(F):y(F);break}}break}case"file":{let F=k.getAsFile();F&&h.push(F);break}}})))}if(f)return this.insertContent(f,{point:r,select:!0}),this;if(h.length)return this.addMediaFromFiles(h,r),this;if(g.length){let R=this.getPagePoint(r??this.centerPoint,this.currentPageId),k=D.add(R,[0,0]);return g.forEach((A,O)=>{let B=_e.getBounds(A);O===0&&(k[0]-=B.width/2,k[1]-=B.height/2),A.point=[...k],k[0]+=B.width}),this.createShapes(...g),this}return this.clipboard?this.insertContent(this.clipboard):wQ().then(R=>{R&&b(R)}),this})),S(this,"getSvg",(...r)=>Ft(this,[...r],function*(i=this.selectedIds.length?this.selectedIds:Object.keys(this.page.shapes),s={}){if(i.length===0)return;let l=document.createElementNS("http://www.w3.org/2000/svg","svg"),h=document.createElementNS("http://www.w3.org/2000/svg","defs"),g=document.createElementNS("http://www.w3.org/2000/svg","style");if(typeof window<"u"&&window.focus(),s.includeFonts)try{let{fonts:A}=yield fetch(mn.assetSrc,{mode:"no-cors"}).then(O=>O.json());g.textContent=`
          @font-face {
            font-family: 'Caveat Brush';
            src: url(data:application/x-font-woff;charset=utf-8;base64,${A.caveat}) format('woff');
            font-weight: 500;
            font-style: normal;
          }
          @font-face {
            font-family: 'Source Code Pro';
            src: url(data:application/x-font-woff;charset=utf-8;base64,${A.source_code_pro}) format('woff');
            font-weight: 500;
            font-style: normal;
          }
          @font-face {
            font-family: 'Source Sans Pro';
            src: url(data:application/x-font-woff;charset=utf-8;base64,${A.source_sans_pro}) format('woff');
            font-weight: 500;
            font-style: normal;
          }
          @font-face {
            font-family: 'Crimson Pro';
            src: url(data:application/x-font-woff;charset=utf-8;base64,${A.crimson_pro}) format('woff');
            font-weight: 500;
            font-style: normal;
          }
          `}catch{_e.warn("Could not find tldraw-assets.json file.")}else g.textContent="@import url('https://fonts.googleapis.com/css2?family=Caveat+Brush&family=Source+Code+Pro&family=Source+Sans+Pro&family=Crimson+Pro&display=block');";h.append(g),l.append(h);let f=i.map(A=>this.getShape(A,this.currentPageId)).sort((A,O)=>A.childIndex-O.childIndex),C=X.getCommonBounds(f.map(_e.getRotatedBounds)),y=A=>{let O=_e.getShapeUtil(A),B=O.getBounds(A),F=O.getSvgElement(A,this.settings.isDarkMode);if(F)return A.type==="image"?F.setAttribute("xlink:href",this.document.assets[A.assetId].src):A.type==="video"&&F.setAttribute("xlink:href",this.serializeVideo(A.id)),F.setAttribute("transform",`translate(${(16+A.point[0]-C.minX).toFixed(2)}, ${(16+A.point[1]-C.minY).toFixed(2)}) rotate(${((A.rotation||0)*180/Math.PI).toFixed(2)}, ${(B.width/2).toFixed(2)}, ${(B.height/2).toFixed(2)})`),F};f.forEach(A=>{var O;if((O=A.children)!=null&&O.length){let F=document.createElementNS("http://www.w3.org/2000/svg","g");A.children.forEach(j=>{let J=this.getShape(j,this.currentPageId),ce=y(J);ce&&F.append(ce)}),l.append(F);return}let B=y(A);B&&l.append(B)}),l.setAttribute("viewBox",[0,0,C.width+16*2,C.height+16*2].join(" ")),l.setAttribute("width",(C.width+16*2).toString()),l.setAttribute("height",(C.height+16*2).toString());let b=this.settings.exportBackground,R="#212529",k="rgb(248, 249, 250)";switch(b){case"auto":{l.style.setProperty("background-color",this.settings.isDarkMode?R:k);break}case"dark":{l.style.setProperty("background-color",R);break}case"light":{l.style.setProperty("background-color",k);break}case"transparent":default:{l.style.setProperty("background-color","transparent");break}}return l.querySelectorAll(".tl-fill-hitarea, .tl-stroke-hitarea, .tl-binding-indicator").forEach(A=>A.remove()),l})),S(this,"copySvg",(...r)=>Ft(this,[...r],function*(i=this.selectedIds.length?this.selectedIds:Object.keys(this.page.shapes)){if(i.length===0)return;let s=yield this.getSvg(i);if(!s)return;let l=_e.getSvgString(s,1);this.clipboard=this.getContent(i);let h=JSON.stringify(Y({type:"tldr/clipboard"},this.clipboard));return navigator.clipboard&&window.ClipboardItem&&navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([h],{type:"text/html"}),"text/plain":new Blob([l],{type:"text/plain"})})]),l})),S(this,"getContent",r=>{let i=this.getPage(this.currentPageId);if(r&&r.length===0||(r||(r=this.selectedIds),r.length===0&&(r=Object.keys(i.shapes)),r.length===0))return;let s=r.map(f=>i.shapes[f]).flatMap(f=>{var C;return[f,...((C=f.children)!=null?C:[]).map(y=>i.shapes[y])]}).map(ui),l=new Set(s.map(f=>f.id));s.forEach(f=>{f.parentId===this.currentPageId&&(f.parentId="currentPageId")});let h=Object.values(i.bindings).filter(f=>{if(l.has(f.fromId)||l.has(f.toId))return!0;if(l.has(f.fromId)){let C=s.find(y=>y.id===f.fromId).handles;C&&Object.values(C).forEach(y=>{y.bindingId===f.id&&(y.bindingId=void 0)})}if(l.has(f.toId)){let C=s.find(y=>y.id===f.toId).handles;C&&Object.values(C).forEach(y=>{y.bindingId===f.id&&(y.bindingId=void 0)})}return!1}).map(ui),g=[...new Set(s.map(f=>{if(f.assetId)return this.document.assets[f.assetId]}).filter(Boolean).map(ui))];return{shapes:s,bindings:h,assets:g}}),S(this,"copyJson",(r=this.selectedIds)=>{let i=this.getContent(r);return i&&_e.copyStringToClipboard(JSON.stringify(i)),this}),S(this,"exportJson",(r=this.selectedIds)=>{let i=this.getContent(r);if(i){let s=new Blob([JSON.stringify(i)],{type:"application/json"}),l=URL.createObjectURL(s),h=document.createElement("a");h.href=l,h.download="export.json",h.click()}return this}),S(this,"insertContent",(r,i={})=>this.setState(WQ(this,r,i),"insert_content")),S(this,"getImage",(...r)=>Ft(this,[...r],function*(i="png",s={}){let{ids:l=this.selectedIds.length?this.selectedIds:Object.keys(this.page.shapes)}=s,h=yield this.getSvg(l,{includeFonts:i!=="svg"});if(!h)return;if(i==="svg"){let f=_e.getSvgString(h,1);return new Blob([f],{type:"image/svg+xml"})}let g=yield _e.getImageForSvg(h,i,s);if(g)return g})),S(this,"copyImage",(...r)=>Ft(this,[...r],function*(i="png",s={}){if(i==="svg"){this.copySvg(s.ids);return}if(!(navigator.clipboard&&window.ClipboardItem)){console.warn("Sorry, your browser does not support copying images.");return}let l=yield this.getImage(i,s);!l||navigator.clipboard.write([new ClipboardItem({[l.type]:l})])})),S(this,"exportImage",(...r)=>Ft(this,[...r],function*(i="png",s={}){var l;let{pageId:h=this.currentPageId}=s,g=yield this.getImage(i,s);if(!g)return;let f=(l=this.document.pages[h].name)!=null?l:"export";if(this.callbacks.onExport)this.callbacks.onExport(this,{name:f,type:i,blob:g});else{let C=URL.createObjectURL(g),y=document.createElement("a");y.href=C,y.download=`${f}.${i}`,y.click()}})),S(this,"setCamera",(r,i,s)=>(this.updateViewport(r,i),this.patchState({document:{pageStates:{[this.currentPageId]:{camera:{point:r,zoom:i}}}}},s),this)),S(this,"resetCamera",()=>this.setCamera(this.centerPoint,1,"reset_camera")),S(this,"pan",r=>{let{camera:i}=this.pageState;return this.setCamera(D.toFixed(D.sub(i.point,r)),i.zoom,"panned")}),S(this,"pinchZoom",(r,i,s)=>{let{camera:l}=this.pageState,h=D.sub(l.point,D.div(i,l.zoom)),g=s,f=D.sub(D.div(r,l.zoom),h),C=D.sub(D.div(r,g),h);return this.setCamera(D.toFixed(D.add(h,D.sub(C,f))),g,"pinch_zoomed")}),S(this,"zoomTo",(r,i=this.centerPoint)=>{let{zoom:s,point:l}=this.camera,h=D.sub(D.div(i,s),l),g=D.sub(D.div(i,r),l);return this.setCamera(D.toFixed(D.add(l,D.sub(g,h))),r,"zoomed_camera")}),S(this,"zoomIn",()=>{let r=Math.round(this.camera.zoom*100/25),i=_e.getCameraZoom((r+1)*.25);return this.zoomTo(i)}),S(this,"zoomOut",()=>{let r=Math.round(this.camera.zoom*100/25),i=_e.getCameraZoom((r-1)*.25);return this.zoomTo(i)}),S(this,"zoomToFit",()=>{let{shapes:r,pageState:{camera:i}}=this;if(r.length===0)return this;let{rendererBounds:s}=this,l=X.getCommonBounds(r.map(_e.getBounds)),h=_e.getCameraZoom(Math.min((s.width-128)/l.width,(s.height-128)/l.height));h=i.zoom===h||i.zoom<1?Math.min(1,h):h;let g=(s.width-l.width*h)/2/h,f=(s.height-l.height*h)/2/h;return this.setCamera(D.toFixed(D.sub([g,f],[l.minX,l.minY])),h,"zoomed_to_fit")}),S(this,"zoomToSelection",()=>{if(this.selectedIds.length===0)return this;let{rendererBounds:r}=this,i=_e.getSelectedBounds(this.state),s=_e.getCameraZoom(Math.min((r.width-128)/i.width,(r.height-128)/i.height));s=this.camera.zoom===s||this.camera.zoom<1?Math.min(1,s):s;let l=(r.width-i.width*s)/2/s,h=(r.height-i.height*s)/2/s;return this.setCamera(D.toFixed(D.sub([l,h],[i.minX,i.minY])),s,"zoomed_to_selection")}),S(this,"zoomToContent",()=>{let r=this.shapes,i=this.pageState;if(r.length===0)return this;let{rendererBounds:s}=this,{zoom:l}=i.camera,h=X.getCommonBounds(r.map(_e.getBounds)),g=(s.width-h.width*l)/2/l,f=(s.height-h.height*l)/2/l;return this.setCamera(D.toFixed(D.sub([g,f],[h.minX,h.minY])),this.camera.zoom,"zoomed_to_content")}),S(this,"resetZoom",()=>this.zoomTo(1)),S(this,"zoomBy",X.throttle((r,i)=>{let{zoom:s}=this.camera,l=_e.getCameraZoom(s-r*s);return this.zoomTo(l,i)},16)),S(this,"clearSelectHistory",()=>(this.selectHistory.pointer=0,this.selectHistory.stack=[this.selectedIds],this)),S(this,"addToSelectHistory",r=>(this.selectHistory.pointer<this.selectHistory.stack.length&&(this.selectHistory.stack=this.selectHistory.stack.slice(0,this.selectHistory.pointer+1)),this.selectHistory.pointer++,this.selectHistory.stack.push(r),this)),S(this,"setSelectedIds",(r,i=!1)=>{let s=i?[...this.pageState.selectedIds,...r]:[...r];return this.patchState({appState:{activeTool:"select"},document:{pageStates:{[this.currentPageId]:{selectedIds:s}}}},"selected")}),S(this,"undoSelect",()=>(this.selectHistory.pointer>0&&(this.selectHistory.pointer--,this.setSelectedIds(this.selectHistory.stack[this.selectHistory.pointer])),this)),S(this,"redoSelect",()=>(this.selectHistory.pointer<this.selectHistory.stack.length-1&&(this.selectHistory.pointer++,this.setSelectedIds(this.selectHistory.stack[this.selectHistory.pointer])),this)),S(this,"select",(...r)=>(r.forEach(i=>{if(!this.page.shapes[i])throw Error(`That shape does not exist on page ${this.currentPageId}`)}),this.setSelectedIds(r),this.addToSelectHistory(r),this)),S(this,"selectAll",(r=this.currentPageId)=>this.session?this:(this.setSelectedIds(Object.values(this.document.pages[r].shapes).filter(i=>i.parentId===r).map(i=>i.id)),this.addToSelectHistory(this.selectedIds),this.selectTool("select"),this)),S(this,"selectNone",()=>(this.setSelectedIds([]),this.addToSelectHistory(this.selectedIds),this)),S(this,"startSession",(r,...i)=>{var s,l;if(this.readOnly&&r!=="brush")return this;this.session&&(_e.warn(`Already in a session! (${this.session.constructor.name})`),this.cancelSession());let h=aee(r);this.session=new h(this,...i);let g=this.session.start();return g&&this.patchState(g,`session:start_${this.session.constructor.name}`),(l=(s=this.callbacks).onSessionStart)==null||l.call(s,this,this.session.constructor.name),this}),S(this,"updateSession",()=>{let{session:r}=this;if(!r)return this;let i=r.update();return i?this.patchState(i,`session:${r?.constructor.name}`):this}),S(this,"cancelSession",()=>{var r,i;let{session:s}=this;if(!s)return this;this.session=void 0;let l=s.cancel();return l&&this.patchState(l,`session:cancel:${s.constructor.name}`),this.setEditingId(),(i=(r=this.callbacks).onSessionEnd)==null||i.call(r,this,s.constructor.name),this}),S(this,"completeSession",()=>{var r,i,s,l,h,g,f,C,y;let{session:b}=this;if(!b)return this;this.session=void 0;let R=b.complete();if(R===void 0)this.isCreating=!1,this.patchState({appState:{status:"idle"},document:{pageStates:{[this.currentPageId]:{editingId:void 0,bindingId:void 0,hoveredId:void 0}}}},`session:complete:${b.constructor.name}`);else if("after"in R){if(this.isCreating){if(R.before={appState:ye(Y({},R.before.appState),{status:"idle"}),document:{pages:{[this.currentPageId]:{shapes:Object.fromEntries(this.selectedIds.map(k=>[k,void 0]))}},pageStates:{[this.currentPageId]:{selectedIds:[],editingId:null,bindingId:null,hoveredId:null}}}},this.appState.isToolLocked){let k=((s=(i=(r=R.after)==null?void 0:r.document)==null?void 0:i.pageStates)==null?void 0:s[this.currentPageId])||{};k.selectedIds=[]}this.isCreating=!1}R.after.appState=ye(Y({},R.after.appState),{status:"idle"}),R.after.document=ye(Y({},R.after.document),{pageStates:ye(Y({},(l=R.after.document)==null?void 0:l.pageStates),{[this.currentPageId]:ye(Y({},(((h=R.after.document)==null?void 0:h.pageStates)||{})[this.currentPageId]),{editingId:null})})}),this.setState(R,`session:complete:${b.constructor.name}`)}else this.patchState(ye(Y({},R),{appState:ye(Y({},R.appState),{status:"idle"}),document:ye(Y({},R.document),{pageStates:{[this.currentPageId]:ye(Y({},(f=(g=R.document)==null?void 0:g.pageStates)==null?void 0:f[this.currentPageId]),{editingId:null})}})}),`session:complete:${b.constructor.name}`);return(y=(C=this.callbacks).onSessionEnd)==null||y.call(C,this,b.constructor.name),this}),S(this,"createShapes",(...r)=>r.length===0?this:this.create(r.map(i=>_e.getShapeUtil(i.type).create(Y({parentId:this.currentPageId},i))))),S(this,"updateShapes",(...r)=>{let i=this.document.pages[this.currentPageId].shapes,s=r.filter(l=>i[l.id]);return s.length===0?this:this.setState(zd(this,s,this.currentPageId),"updated_shapes")}),S(this,"create",(r=[],i=[])=>r.length===0?this:this.setState(Vd(this,r,i))),S(this,"patchCreate",(r=[],i=[])=>r.length===0?this:this.patchState(Vd(this,r,i).after)),S(this,"delete",(r=this.selectedIds)=>{var i,s;if(r.length===0)return this;if(this.session)return this;let l=jd(this,r);if(this.callbacks.onAssetDelete&&((i=l.before.document)==null?void 0:i.assets)&&((s=l.after.document)==null?void 0:s.assets)){let h=Object.keys(l.before.document.assets).filter(f=>!!l.before.document.assets[f]),g=Object.keys(l.after.document.assets).filter(f=>!!l.after.document.assets[f]);h.filter(f=>!g.includes(f)).forEach(f=>this.callbacks.onAssetDelete(this,f))}return this.setState(l)}),S(this,"deleteAll",()=>(this.selectAll(),this.delete(),this)),S(this,"style",(r,i=this.selectedIds)=>this.setState(jQ(this,i,r))),S(this,"align",(r,i=this.selectedIds)=>i.length<2?this:this.setState(_Q(this,i,r))),S(this,"distribute",(r,i=this.selectedIds)=>i.length<3?this:this.setState(AQ(this,i,r))),S(this,"stretch",(r,i=this.selectedIds)=>i.length<2?this:this.setState(VQ(this,i,r))),S(this,"flipHorizontal",(r=this.selectedIds)=>r.length===0?this:this.setState(Ud(this,r,"horizontal"))),S(this,"flipVertical",(r=this.selectedIds)=>r.length===0?this:this.setState(Ud(this,r,"vertical"))),S(this,"moveToPage",(r,i=this.currentPageId,s=this.selectedIds)=>{if(s.length===0)return this;let{rendererBounds:l}=this;return this.setState(BQ(this,s,l,i,r)),this}),S(this,"moveToBack",(r=this.selectedIds)=>r.length===0?this:this.setState(Sl(this,r,"toBack"))),S(this,"moveBackward",(r=this.selectedIds)=>r.length===0?this:this.setState(Sl(this,r,"backward"))),S(this,"moveForward",(r=this.selectedIds)=>r.length===0?this:this.setState(Sl(this,r,"forward"))),S(this,"moveToFront",(r=this.selectedIds)=>r.length===0?this:this.setState(Sl(this,r,"toFront"))),S(this,"nudge",(r,i=!1,s=this.selectedIds)=>{if(s.length===0)return this;let l=i?this.settings.showGrid?this.currentGrid*4:10:this.settings.showGrid?this.currentGrid:1;return this.setState(ZQ(this,s,D.mul(r,l)))}),S(this,"duplicate",(r=this.selectedIds,i)=>this.readOnly?this:r.length===0?this:this.setState(MQ(this,r,i))),S(this,"resetBounds",(r=this.selectedIds)=>{let i=Zd(this,r,this.currentPageId);return this.setState(Zd(this,r,this.currentPageId),i.id)}),S(this,"toggleHidden",(r=this.selectedIds)=>r.length===0?this:this.setState(vu(this,r,"isHidden"))),S(this,"toggleLocked",(r=this.selectedIds)=>r.length===0?this:this.setState(vu(this,r,"isLocked"))),S(this,"toggleAspectRatioLocked",(r=this.selectedIds)=>r.length===0?this:this.setState(vu(this,r,"isAspectRatioLocked"))),S(this,"toggleDecoration",(r,i=this.selectedIds)=>i.length===0||!(r==="start"||r==="end")?this:this.setState(UQ(this,i,r))),S(this,"setShapeProps",(r,i=this.selectedIds)=>this.setState(GQ(this,i,r))),S(this,"rotate",(r=Math.PI*-.5,i=this.selectedIds)=>{if(i.length===0)return this;let s=NQ(this,i,r);return s?this.setState(s):this}),S(this,"group",(r=this.selectedIds,i=X.uniqueId(),s=this.currentPageId)=>{if(this.readOnly)return this;if(r.length===1&&this.getShape(r[0],s).type==="group")return this.ungroup(r,s);if(r.length<2)return this;let l=OQ(this,r,i,s);return l?this.setState(l):this}),S(this,"ungroup",(r=this.selectedIds,i=this.currentPageId)=>{if(this.readOnly)return this;let s=r.map(h=>this.getShape(h,i)).filter(h=>h.type==="group");if(s.length===0)return this;let l=zQ(this,r,s,i);return l?this.setState(l):this}),S(this,"cancel",()=>{var r,i;return(i=(r=this.currentTool).onCancel)==null||i.call(r),this}),S(this,"addMediaFromFiles",(r,...i)=>Ft(this,[r,...i],function*(s,l=this.centerPoint){this.setIsLoading(!0);let h=[],g=this.getPagePoint(l);for(let f of s){let C=X.uniqueId(),y=f.name.match(/\.[0-9a-z]+$/i);if(!y)throw Error("No extension");let b=hd.includes(y[0].toLowerCase()),R=fd.includes(y[0].toLowerCase());if(!(b||R))throw Error("Wrong extension");let k=b?"image":"video",A=b?"image":"video",O;try{if(this.callbacks.onAssetCreate){let B=yield this.callbacks.onAssetCreate(this,f,C);if(!B)throw Error("Asset creation callback returned false");O=B}else O=yield qd(f);if(typeof O=="string"){let B=[0,0];if(b){if(y[0]==".svg"){let J,ce=yield Jd(f),re=this.getViewboxFromSVG(ce);re&&(J=re.split(" "),B[0]=parseFloat(J[2]),B[1]=parseFloat(J[3]))}D.isEqual(B,[0,0])&&(B=yield Qd(O))}else B=yield e2(O);let F=Object.values(this.document.assets).find(J=>J.type===A&&J.src===O),j;if(F)j=F.id;else{j=C;let J={id:j,type:A,name:f.name,src:O,size:B};this.patchState({document:{assets:{[j]:J}}})}h.push(this.getImageOrVideoShapeAtPoint(C,k,l,B,j))}}catch(B){console.warn(B)}}if(h.length){let f=D.add(g,[0,0]);h.forEach((y,b)=>{let R=_e.getBounds(y);b===0&&(f[0]-=R.width/2,f[1]-=R.height/2),y.point=[...f],f[0]+=R.width});let C=X.getCommonBounds(h.map(_e.getBounds));this.createShapes(...h),X.boundsContain(this.viewport,C)||(this.zoomToSelection(),this.zoom>1&&this.resetZoom())}return this.setIsLoading(!1),this})),S(this,"getViewboxFromSVG",r=>{let i=/.*?viewBox=["'](-?[\d.]+[, ]+-?[\d.]+[, ][\d.]+[, ][\d.]+)["']/;if(typeof r=="string"){let s=r.match(i);return s&&s.length>=2?s[1]:null}return this.setIsLoading(!1),null}),S(this,"onKeyDown",(r,i,s)=>{var l,h;switch(s.key){case"/":{if(this.status==="idle"&&!this.pageState.editingId){let{shiftKey:g,metaKey:f,altKey:C,ctrlKey:y,spaceKey:b}=this;this.onPointerDown({target:"canvas",pointerId:0,origin:i.point,point:i.point,delta:[0,0],pressure:.5,shiftKey:g,ctrlKey:y,metaKey:f,altKey:C,spaceKey:b},{shiftKey:g,altKey:C,ctrlKey:y,pointerId:0,clientX:i.point[0],clientY:i.point[1]})}break}case"Escape":{this.cancel();break}case"Meta":{this.metaKey=!0;break}case"Alt":{this.altKey=!0;break}case"Control":{this.ctrlKey=!0;break}case" ":{this.isForcePanning=!0,this.spaceKey=!0;break}}return(h=(l=this.currentTool).onKeyDown)==null||h.call(l,r,i,s),this}),S(this,"onKeyUp",(r,i,s)=>{var l,h;if(i){switch(s.key){case"/":{let{currentPoint:g,shiftKey:f,metaKey:C,altKey:y,ctrlKey:b,spaceKey:R}=this;this.onPointerUp({target:"canvas",pointerId:0,origin:g,point:g,delta:[0,0],pressure:.5,shiftKey:f,ctrlKey:b,metaKey:C,altKey:y,spaceKey:R},{shiftKey:f,altKey:y,ctrlKey:b,pointerId:0,clientX:g[0],clientY:g[1]});break}case"Meta":{this.metaKey=!1;break}case"Alt":{this.altKey=!1;break}case"Control":{this.ctrlKey=!1;break}case" ":{this.isForcePanning=!1,this.spaceKey=!1;break}}(h=(l=this.currentTool).onKeyUp)==null||h.call(l,r,i,s)}}),S(this,"refreshBoundingBoxes",()=>{let r=this.shapes.map(s=>[s.id,Y({point:[...s.point]},"label"in s&&{label:""})]),i=this.shapes.map(s=>[s.id,Y({point:[...s.point]},"label"in s&&{label:s.label})]);bq(),this.patchState({document:{pages:{[this.currentPageId]:{shapes:Object.fromEntries(r)}}}}),this.patchState({document:{pages:{[this.currentPageId]:{shapes:Object.fromEntries(i)}}}})}),S(this,"onDragOver",r=>{r.preventDefault()}),S(this,"onDrop",r=>Ft(this,null,function*(){var i;return r.preventDefault(),this.disableAssets?this:((i=r.dataTransfer.files)!=null&&i.length&&this.addMediaFromFiles(Object.values(r.dataTransfer.files),[r.clientX,r.clientY]),this)})),S(this,"onPinchStart",(r,i)=>{var s,l;(l=(s=this.currentTool).onPinchStart)==null||l.call(s,r,i)}),S(this,"onPinchEnd",(r,i)=>{var s,l;return(l=(s=this.currentTool).onPinchEnd)==null?void 0:l.call(s,r,i)}),S(this,"onPinch",(r,i)=>{var s,l;return(l=(s=this.currentTool).onPinch)==null?void 0:l.call(s,r,i)}),S(this,"onPan",(r,i)=>{if(this.appState.status==="pinching")return;let s=D.div(r.delta,this.camera.zoom),l=this.camera.point,h=D.sub(l,s);D.isEqual(h,l)||(this.pan(s),this.isForcePanning||this.onPointerMove(r,i),Cq&&this.isForcePanning&&this.preventPaste())}),S(this,"onZoom",(r,i)=>{if(this.state.appState.status!=="idle")return;let s=r.delta[2]/50;this.zoomBy(s,r.point),this.onPointerMove(r,i)}),S(this,"updateInputs",r=>{this.currentPoint=this.getPagePoint(r.point).concat(r.pressure),this.shiftKey=r.shiftKey,this.altKey=r.altKey,this.ctrlKey=r.ctrlKey,this.metaKey=r.metaKey}),S(this,"onPointerMove",(r,i)=>{var s,l,h,g,f;if(this.previousPoint=this.currentPoint,this.updateInputs(r,i),this.isForcePanning&&this.isPointing){(s=this.onPan)==null||s.call(this,ye(Y({},r),{delta:D.neg(r.delta)}),i);return}if((h=(l=this.currentTool).onPointerMove)==null||h.call(l,r,i),this.state.room){let{users:C,userId:y}=this.state.room;(f=(g=this.callbacks).onChangePresence)==null||f.call(g,this,ye(Y({},C[y]),{point:this.getPagePoint(r.point),session:!!this.session}))}}),S(this,"onPointerDown",(r,i)=>{var s,l;if(i.buttons===4)this.isForcePanning=!0;else if(this.isPointing)return;this.isPointing=!0,this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),!this.isForcePanning&&((l=(s=this.currentTool).onPointerDown)==null||l.call(s,r,i))}),S(this,"onPointerUp",(r,i)=>{var s,l;this.isPointing=!1,this.shiftKey||(this.isForcePanning=!1),this.updateInputs(r,i),(l=(s=this.currentTool).onPointerUp)==null||l.call(s,r,i)}),S(this,"onPointCanvas",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onPointCanvas)==null||l.call(s,r,i)}),S(this,"onDoubleClickCanvas",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onDoubleClickCanvas)==null||l.call(s,r,i)}),S(this,"onRightPointCanvas",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onRightPointCanvas)==null||l.call(s,r,i)}),S(this,"onDragCanvas",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onDragCanvas)==null||l.call(s,r,i)}),S(this,"onReleaseCanvas",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onReleaseCanvas)==null||l.call(s,r,i)}),S(this,"onPointShape",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onPointShape)==null||l.call(s,r,i)}),S(this,"onReleaseShape",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onReleaseShape)==null||l.call(s,r,i)}),S(this,"onDoubleClickShape",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onDoubleClickShape)==null||l.call(s,r,i)}),S(this,"onRightPointShape",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onRightPointShape)==null||l.call(s,r,i)}),S(this,"onDragShape",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onDragShape)==null||l.call(s,r,i)}),S(this,"onHoverShape",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onHoverShape)==null||l.call(s,r,i)}),S(this,"onUnhoverShape",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onUnhoverShape)==null||l.call(s,r,i)}),S(this,"onPointBounds",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onPointBounds)==null||l.call(s,r,i)}),S(this,"onDoubleClickBounds",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onDoubleClickBounds)==null||l.call(s,r,i)}),S(this,"onRightPointBounds",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onRightPointBounds)==null||l.call(s,r,i)}),S(this,"onDragBounds",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onDragBounds)==null||l.call(s,r,i)}),S(this,"onHoverBounds",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onHoverBounds)==null||l.call(s,r,i)}),S(this,"onUnhoverBounds",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onUnhoverBounds)==null||l.call(s,r,i)}),S(this,"onReleaseBounds",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onReleaseBounds)==null||l.call(s,r,i)}),S(this,"onPointBoundsHandle",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onPointBoundsHandle)==null||l.call(s,r,i)}),S(this,"onDoubleClickBoundsHandle",(r,i)=>{var s,l;if(this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onDoubleClickBoundsHandle)==null||l.call(s,r,i),this.selectedIds.length!==1)return;let h=this.getShape(this.selectedIds[0]);if(h.type==="image"||h.type==="video"){let g=this.document.assets[h.assetId],f=_e.getShapeUtil(h),C=f.getCenter(h),y=f.getCenter(ye(Y({},h),{size:g.size})),b=D.sub(y,C);this.updateShapes({id:h.id,point:D.sub(h.point,b),size:g.size})}}),S(this,"onRightPointBoundsHandle",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onRightPointBoundsHandle)==null||l.call(s,r,i)}),S(this,"onDragBoundsHandle",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onDragBoundsHandle)==null||l.call(s,r,i)}),S(this,"onHoverBoundsHandle",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onHoverBoundsHandle)==null||l.call(s,r,i)}),S(this,"onUnhoverBoundsHandle",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onUnhoverBoundsHandle)==null||l.call(s,r,i)}),S(this,"onReleaseBoundsHandle",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onReleaseBoundsHandle)==null||l.call(s,r,i)}),S(this,"onPointHandle",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onPointHandle)==null||l.call(s,r,i)}),S(this,"onDoubleClickHandle",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onDoubleClickHandle)==null||l.call(s,r,i)}),S(this,"onRightPointHandle",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onRightPointHandle)==null||l.call(s,r,i)}),S(this,"onDragHandle",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onDragHandle)==null||l.call(s,r,i)}),S(this,"onHoverHandle",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onHoverHandle)==null||l.call(s,r,i)}),S(this,"onUnhoverHandle",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onUnhoverHandle)==null||l.call(s,r,i)}),S(this,"onReleaseHandle",(r,i)=>{var s,l;this.updateInputs(r,i),(l=(s=this.currentTool).onReleaseHandle)==null||l.call(s,r,i)}),S(this,"onShapeChange",r=>{let i=this.document.pages[this.currentPageId].shapes,s=Y(Y({},i[r.id]),r),l=zd(this,[s],this.currentPageId).after;return this.patchState(l,"patched_shapes")}),S(this,"onShapeBlur",()=>{var r,i;if(performance.now()-this.editingStartTime<50)return;let{editingId:s}=this.pageState,{isToolLocked:l}=this.getAppState();if(s){let h=this.getShape(s);this.setEditingId(),h.type==="text"&&(h.text.trim().length<=0?this.patchState(jd(this,[s]).after,"delete_empty_text"):l||this.select(s))}(i=(r=this.currentTool).onShapeBlur)==null||i.call(r)}),S(this,"onShapeClone",(r,i)=>{var s,l;this.originPoint=this.getPagePoint(r.point).concat(r.pressure),this.updateInputs(r,i),(l=(s=this.currentTool).onShapeClone)==null||l.call(s,r,i)}),S(this,"onRenderCountChange",r=>{let i=this.getAppState();i.isEmptyCanvas&&r.length>0?this.patchState({appState:{isEmptyCanvas:!1}},"empty_canvas:false"):!i.isEmptyCanvas&&r.length<=0&&this.patchState({appState:{isEmptyCanvas:!0}},"empty_canvas:true")}),S(this,"onError",()=>{}),S(this,"getShapeUtil",_e.getShapeUtil),this.callbacks=t}setStatus(e){return this.patchState({appState:{status:e}},`set_status:${e}`)}get isMenuOpen(){return this.appState.isMenuOpen}get isLoading(){return this.appState.isLoading}get disableAssets(){return this.appState.disableAssets}get history(){return this.stack.slice(0,this.pointer+1)}set history(e){this.replaceHistory(e)}get document(){return this.state.document}get settings(){return this.state.settings}get appState(){return this.state.appState}get currentPageId(){return this.state.appState.currentPageId}get page(){return this.state.document.pages[this.currentPageId]}get shapes(){return Object.values(this.page.shapes)}get bindings(){return Object.values(this.page.bindings)}get assets(){return Object.values(this.document.assets)}get pageState(){return this.state.document.pageStates[this.currentPageId]}get camera(){return this.pageState.camera}get zoom(){return this.pageState.camera.zoom}get selectedIds(){return this.pageState.selectedIds}createTextShapeAtPoint(e,t,r){let{shapes:i,appState:{currentPageId:s,currentStyle:l}}=this,h=i.length===0?1:i.filter(y=>y.parentId===s).sort((y,b)=>b.childIndex-y.childIndex)[0].childIndex+1,g=ia.text,f=g.create({id:t||X.uniqueId(),parentId:s,childIndex:h,point:e,style:Y({},l)}),C=g.getBounds(f);return f.point=D.sub(f.point,[C.width/2,C.height/2]),r?this.patchCreate([_e.getShapeUtil(f.type).create(f)]):this.createShapes(f),this.setEditingId(f.id,!0),this}getImageOrVideoShapeAtPoint(e,t,r,i,s){let{shapes:l,appState:{currentPageId:h,currentStyle:g}}=this,f=l.length===0?1:l.filter(y=>y.parentId===h).sort((y,b)=>b.childIndex-y.childIndex)[0].childIndex+1,C=ia[t];if(i[0]>this.viewport.width){let y=i[1]/i[0];i[0]=this.viewport.width-128/this.camera.zoom*2,i[1]=i[0]*y,(i[1]<32||i[1]<32)&&(i[1]=32,i[0]=i[1]/y)}else if(i[1]>this.viewport.height){let y=i[0]/i[1];i[1]=this.viewport.height-128/this.camera.zoom*2,i[0]=i[1]*y,(i[1]<32||i[1]<32)&&(i[0]=32,i[1]=i[0]/y)}return C.create({id:e,parentId:h,childIndex:f,point:r,size:i,style:Y({},g),assetId:s})}isSelected(e){return this.selectedIds.includes(e)}serializeVideo(e){let t=document.getElementById(e+"_video");if(t){let r=document.createElement("canvas");return r.width=t.videoWidth,r.height=t.videoHeight,r.getContext("2d").drawImage(t,0,0),r.toDataURL("image/png")}else throw new Error("Video with id "+e+" not found")}serializeImage(e){let t=document.getElementById(e+"_image");if(t){let r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0),r.toDataURL("image/png")}else throw new Error("Image with id "+e+" not found")}patchAssets(e){this.document.assets=Y(Y({},this.document.assets),e)}get room(){return this.state.room}get isLocal(){return this.state.room===void 0||this.state.room.id==="local"}get status(){return this.appState.status}get currentUser(){if(this.state.room)return this.state.room.users[this.state.room.userId]}get centerPoint(){let{width:e,height:t}=this.rendererBounds;return D.toFixed([e/2,t/2])}get currentGrid(){let{zoom:e}=this.camera;return e<.15?8*16:e<1?8*4:8*1}},oa=mn;S(oa,"version",15.5),S(oa,"defaultDocument",{id:"doc",name:"New Document",version:mn.version,pages:{page:{id:"page",name:"Page 1",childIndex:1,shapes:{},bindings:{}}},pageStates:{page:{id:"page",selectedIds:[],camera:{point:[0,0],zoom:1}}},assets:{}}),S(oa,"defaultState",{settings:{isCadSelectMode:!1,isPenMode:!1,isDarkMode:!1,isZoomSnap:!1,isFocusMode:!1,isSnapping:!1,isDebugMode:!1,isReadonlyMode:!1,keepStyleMenuOpen:!1,nudgeDistanceLarge:16,nudgeDistanceSmall:1,showRotateHandles:!0,showBindingHandles:!0,showCloneHandles:!1,showGrid:!1,language:"en",dockPosition:"bottom",exportBackground:"transparent"},appState:{status:"idle",activeTool:"select",hoveredId:void 0,currentPageId:"page",currentStyle:eo,isToolLocked:!1,isMenuOpen:!1,isEmptyCanvas:!1,eraseLine:[],snapLines:[],isLoading:!1,disableAssets:!1},document:mn.defaultDocument}),S(oa,"assetSrc","tldraw-assets.json");var z0e={select:a2,erase:i2,text:u2,draw:r2,ellipse:n2,rectangle:s2,triangle:c2,line:o2,arrow:t2,sticky:l2},lee=Ql.ErrorBoundary,uee=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches:!1;function cee({id:e,document:t,currentPageId:r,autofocus:i=!0,showMenu:s=!0,showMultiplayerMenu:l=!0,showPages:h=!0,showTools:g=!0,showZoom:f=!0,showStyles:C=!0,showUI:y=!0,readOnly:b=!1,disableAssets:R=!1,darkMode:k=uee,components:A,onMount:O,onChange:B,onChangePresence:F,onNewProject:j,onSaveProject:J,onSaveProjectAs:ce,onOpenProject:re,onOpenMedia:ne,onUndo:le,onRedo:me,onPersist:Ve,onPatch:lt,onCommand:Ye,onChangePage:ct,onAssetCreate:pt,onAssetDelete:tr,onAssetUpload:qt,onSessionStart:_r,onSessionEnd:Ge,onExport:Gt,hideCursors:Jt}){let[nr,kn]=u.useState(e),[cr,qn]=u.useState(()=>new oa(e,{onMount:O,onChange:B,onChangePresence:F,onNewProject:j,onSaveProject:J,onSaveProjectAs:ce,onOpenProject:re,onOpenMedia:ne,onUndo:le,onRedo:me,onPersist:Ve,onPatch:lt,onCommand:Ye,onChangePage:ct,onAssetDelete:tr,onAssetCreate:pt,onAssetUpload:qt,onSessionStart:_r,onSessionEnd:Ge})),[vn,yn]=u.useState(null),[ci,xo]=u.useState(null),[Ts,Ll]=u.useState(null),[no,sa]=u.useState(null),aa=u.useCallback((la,Rl,mee,vee)=>{sa(()=>la),yn(()=>vee),xo(()=>Rl),Ll(()=>mee)},[]);return u.useLayoutEffect(()=>{if(e===nr)return;let la=new oa(e,{onMount:O,onChange:B,onChangePresence:F,onNewProject:j,onSaveProject:J,onSaveProjectAs:ce,onOpenProject:re,onOpenMedia:ne,onUndo:le,onRedo:me,onPersist:Ve,onPatch:lt,onCommand:Ye,onChangePage:ct,onAssetDelete:tr,onAssetCreate:pt,onAssetUpload:qt,onExport:Gt,onSessionStart:_r,onSessionEnd:Ge});kn(e),qn(la)},[nr,e]),u.useEffect(()=>{!t||(t.id===cr.document.id?cr.updateDocument(t):cr.loadDocument(t))},[t,cr]),u.useEffect(()=>{cr.setDisableAssets(R)},[cr,R]),u.useEffect(()=>{!r||cr.changePage(r)},[r,cr]),u.useEffect(()=>{cr.readOnly=b,b||(cr.selectNone(),cr.cancelSession(),cr.setEditingId())},[cr,b]),u.useEffect(()=>{k!==cr.settings.isDarkMode&&cr.toggleDarkMode()},[cr,k]),u.useEffect(()=>{cr.callbacks={onMount:O,onChange:B,onChangePresence:F,onNewProject:j,onSaveProject:J,onSaveProjectAs:ce,onOpenProject:re,onOpenMedia:ne,onUndo:le,onRedo:me,onPersist:Ve,onPatch:lt,onCommand:Ye,onChangePage:ct,onAssetDelete:tr,onAssetCreate:pt,onAssetUpload:qt,onExport:Gt,onSessionStart:_r,onSessionEnd:Ge}},[O,B,F,j,J,ce,re,ne,le,me,Ve,lt,Ye,ct,tr,pt,qt,Gt,_r,Ge]),u.useLayoutEffect(()=>{var la;if(typeof window>"u"||!((la=window.document)!=null&&la.fonts))return;function Rl(){cr.refreshBoundingBoxes()}return window.document.fonts.addEventListener("loadingdone",Rl),()=>{window.document.fonts.removeEventListener("loadingdone",Rl)}},[cr]),u.createElement(ed.Provider,{value:cr},u.createElement(rd.Provider,{value:{onYes:ci,onCancel:vn,onNo:Ts,dialogState:no,setDialogState:sa,openDialog:aa}},u.createElement(dee,{key:nr||"Tldraw",id:nr,autofocus:i,showPages:h,showMenu:s,showMultiplayerMenu:l,showStyles:C,showZoom:f,showTools:g,showUI:y,readOnly:b,components:A,hideCursors:Jt})))}var dee=u.memo(function({id:e,autofocus:t,showPages:r,showMenu:i,showMultiplayerMenu:s,showZoom:l,showStyles:h,showTools:g,readOnly:f,showUI:C,components:y,hideCursors:b}){var R,k;let A=Dr(),[O,B]=u.useState(null),F=u.useRef(null),j=A.useStore(),{document:J,settings:ce,appState:re,room:ne}=j,le=j.appState.activeTool==="select",me=J.pages[re.currentPageId],Ve=J.pageStates[me.id],lt=J.assets,{selectedIds:Ye}=Ve,ct=Ye.length===1&&me.shapes[Ye[0]]&&_e.getShapeUtil(me.shapes[Ye[0]].type).hideBounds,pt=Ye.length===1&&me.shapes[Ye[0]]&&_e.getShapeUtil(me.shapes[Ye[0]].type).hideResizeHandles,tr=u.useMemo(()=>({isDarkMode:ce.isDarkMode}),[ce.isDarkMode]),qt=ce.isCadSelectMode?!re.selectByContain:re.selectByContain,_r=u.useMemo(()=>{let{selectByContain:qn}=re,{isDarkMode:vn,isCadSelectMode:yn}=ce;if(vn){let xo=yn?qn?"69, 155, 255":"105, 209, 73":"180, 180, 180";return{brushFill:`rgba(${xo}, ${yn?.08:.05})`,brushStroke:`rgba(${xo}, ${yn?.5:.25})`,brushDashStroke:`rgba(${xo}, .6)`,selected:"rgba(38, 150, 255, 1.000)",selectFill:"rgba(38, 150, 255, 0.05)",background:"#212529",foreground:"#49555f"}}let ci=yn?qn?"0, 89, 242":"51, 163, 23":"0,0,0";return{brushFill:`rgba(${ci}, ${yn?.08:.05})`,brushStroke:`rgba(${ci}, ${yn?.4:.25})`,brushDashStroke:`rgba(${ci}, .6)`}},[ce.isDarkMode,ce.isCadSelectMode,re.selectByContain]),Ge=A.session!==void 0,Gt=Ge&&((R=A.session)==null?void 0:R.constructor.name)!=="BrushSession"||!le||ct||!!Ve.editingId,Jt=Ge||!le,nr=Ge&&j.appState.status!=="brushing"||!le,kn=Ge||!le||Ve.camera.zoom<.2,cr=dY(ce.language);return u.useLayoutEffect(()=>{let qn=F.current;!qn||(ce.isDarkMode?qn.classList.add(Gc):qn.classList.remove(Gc))},[ce.isDarkMode]),yQ(F),u.createElement(td.Provider,{value:F},u.createElement(M2,{locale:cr.locale,messages:cr.messages},u.createElement(VY,{container:O}),u.createElement(fee,{ref:F,tabIndex:-0},u.createElement(PY,null),u.createElement(hee,{focusableRef:F,autofocus:t}),u.createElement(SY,null,u.createElement(lee,{FallbackComponent:LY},u.createElement(oi,{id:e,containerRef:F,shapeUtils:ia,page:me,pageState:Ve,assets:lt,snapLines:re.snapLines,eraseLine:re.eraseLine,grid:8,users:ne?.users,userId:ne?.userId,theme:_r,meta:tr,components:y,hideCursors:b,hideBounds:Gt,hideHandles:Jt,hideResizeHandles:pt,hideIndicators:nr,hideBindingHandles:!ce.showBindingHandles,hideCloneHandles:kn,hideRotateHandles:!ce.showRotateHandles,hideGrid:!ce.showGrid,showDashedBrush:qt,performanceMode:(k=A.session)==null?void 0:k.performanceMode,onPinchStart:A.onPinchStart,onPinchEnd:A.onPinchEnd,onPinch:A.onPinch,onPan:A.onPan,onZoom:A.onZoom,onPointerDown:A.onPointerDown,onPointerMove:A.onPointerMove,onPointerUp:A.onPointerUp,onPointCanvas:A.onPointCanvas,onDoubleClickCanvas:A.onDoubleClickCanvas,onRightPointCanvas:A.onRightPointCanvas,onDragCanvas:A.onDragCanvas,onReleaseCanvas:A.onReleaseCanvas,onPointShape:A.onPointShape,onDoubleClickShape:A.onDoubleClickShape,onRightPointShape:A.onRightPointShape,onDragShape:A.onDragShape,onHoverShape:A.onHoverShape,onUnhoverShape:A.onUnhoverShape,onReleaseShape:A.onReleaseShape,onPointBounds:A.onPointBounds,onDoubleClickBounds:A.onDoubleClickBounds,onRightPointBounds:A.onRightPointBounds,onDragBounds:A.onDragBounds,onHoverBounds:A.onHoverBounds,onUnhoverBounds:A.onUnhoverBounds,onReleaseBounds:A.onReleaseBounds,onPointBoundsHandle:A.onPointBoundsHandle,onDoubleClickBoundsHandle:A.onDoubleClickBoundsHandle,onRightPointBoundsHandle:A.onRightPointBoundsHandle,onDragBoundsHandle:A.onDragBoundsHandle,onHoverBoundsHandle:A.onHoverBoundsHandle,onUnhoverBoundsHandle:A.onUnhoverBoundsHandle,onReleaseBoundsHandle:A.onReleaseBoundsHandle,onPointHandle:A.onPointHandle,onDoubleClickHandle:A.onDoubleClickHandle,onRightPointHandle:A.onRightPointHandle,onDragHandle:A.onDragHandle,onHoverHandle:A.onHoverHandle,onUnhoverHandle:A.onUnhoverHandle,onReleaseHandle:A.onReleaseHandle,onError:A.onError,onRenderCountChange:A.onRenderCountChange,onShapeChange:A.onShapeChange,onShapeBlur:A.onShapeBlur,onShapeClone:A.onShapeClone,onBoundsChange:A.updateBounds,onKeyDown:A.onKeyDown,onKeyUp:A.onKeyUp,onDragOver:A.onDragOver,onDrop:A.onDrop}))),C&&u.createElement(pee,{ref:B},ce.isFocusMode?u.createElement(DY,{onSelect:A.toggleFocusMode}):u.createElement(u.Fragment,null,u.createElement(EQ,{readOnly:f,showPages:r,showMenu:i,showMultiplayerMenu:s,showStyles:h,showZoom:l}),u.createElement(gee,null),g&&!f&&u.createElement(oq,null))))))}),hee=u.memo(function({focusableRef:e,autofocus:t}){return i3(e),s3(),u.useEffect(()=>{var r;t&&((r=e.current)==null||r.focus())},[t]),null}),fee=qe("div",{position:"absolute",height:"100%",width:"100%",minHeight:0,minWidth:0,maxHeight:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box",outline:"none","& .tl-container":{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:1},"& input, textarea, button, select, label, button":{webkitTouchCallout:"none",webkitUserSelect:"none","-webkit-tap-highlight-color":"transparent","tap-highlight-color":"transparent"}}),pee=qe("div",{position:"absolute",top:0,left:0,height:"100%",width:"100%",padding:"8px 8px 0 8px",display:"flex",alignItems:"flex-start",justifyContent:"flex-start",pointerEvents:"none",zIndex:2,"& > *":{pointerEvents:"all"}}),gee=qe("div",{flexGrow:2})},2093:(gt,ue,q)=>{"use strict";q.d(ue,{Z:()=>vo});var W={},u={get exports(){return W},set exports(m){W=m}};(function(m,n){(function(o){var a=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,c=/^(?=([^\/?#]*))\1([^]*)$/,d=/(?:\/|^)\.(?=\/)/g,p=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,v={buildAbsoluteURL:function(E,w,I){if(I=I||{},E=E.trim(),w=w.trim(),!w){if(!I.alwaysNormalize)return E;var T=v.parseURL(E);if(!T)throw new Error("Error trying to parse base URL.");return T.path=v.normalizePath(T.path),v.buildURLFromParts(T)}var $=v.parseURL(w);if(!$)throw new Error("Error trying to parse relative URL.");if($.scheme)return I.alwaysNormalize?($.path=v.normalizePath($.path),v.buildURLFromParts($)):w;var H=v.parseURL(E);if(!H)throw new Error("Error trying to parse base URL.");if(!H.netLoc&&H.path&&H.path[0]!=="/"){var V=c.exec(H.path);H.netLoc=V[1],H.path=V[2]}H.netLoc&&!H.path&&(H.path="/");var U={scheme:H.scheme,netLoc:$.netLoc,path:null,params:$.params,query:$.query,fragment:$.fragment};if(!$.netLoc&&(U.netLoc=H.netLoc,$.path[0]!=="/"))if(!$.path)U.path=H.path,$.params||(U.params=H.params,$.query||(U.query=H.query));else{var z=H.path,se=z.substring(0,z.lastIndexOf("/")+1)+$.path;U.path=v.normalizePath(se)}return U.path===null&&(U.path=I.alwaysNormalize?v.normalizePath($.path):$.path),v.buildURLFromParts(U)},parseURL:function(E){var w=a.exec(E);return w?{scheme:w[1]||"",netLoc:w[2]||"",path:w[3]||"",params:w[4]||"",query:w[5]||"",fragment:w[6]||""}:null},normalizePath:function(E){for(E=E.split("").reverse().join("").replace(d,"");E.length!==(E=E.replace(p,"")).length;);return E.split("").reverse().join("")},buildURLFromParts:function(E){return E.scheme+E.netLoc+E.path+E.params+E.query+E.fragment}};m.exports=v})()})(u);function oe(m,n){var o=Object.keys(m);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(m);n&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(m,c).enumerable})),o.push.apply(o,a)}return o}function xe(m){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?oe(Object(o),!0).forEach(function(a){te(m,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(o)):oe(Object(o)).forEach(function(a){Object.defineProperty(m,a,Object.getOwnPropertyDescriptor(o,a))})}return m}function te(m,n,o){return n=ee(n),n in m?Object.defineProperty(m,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):m[n]=o,m}function ae(){return ae=Object.assign?Object.assign.bind():function(m){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(m[a]=o[a])}return m},ae.apply(this,arguments)}function D(m,n){if(typeof m!="object"||m===null)return m;var o=m[Symbol.toPrimitive];if(o!==void 0){var a=o.call(m,n||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(m)}function ee(m){var n=D(m,"string");return typeof n=="symbol"?n:String(n)}const fe=Number.isFinite||function(m){return typeof m=="number"&&isFinite(m)};let P=function(m){return m.MEDIA_ATTACHING="hlsMediaAttaching",m.MEDIA_ATTACHED="hlsMediaAttached",m.MEDIA_DETACHING="hlsMediaDetaching",m.MEDIA_DETACHED="hlsMediaDetached",m.BUFFER_RESET="hlsBufferReset",m.BUFFER_CODECS="hlsBufferCodecs",m.BUFFER_CREATED="hlsBufferCreated",m.BUFFER_APPENDING="hlsBufferAppending",m.BUFFER_APPENDED="hlsBufferAppended",m.BUFFER_EOS="hlsBufferEos",m.BUFFER_FLUSHING="hlsBufferFlushing",m.BUFFER_FLUSHED="hlsBufferFlushed",m.MANIFEST_LOADING="hlsManifestLoading",m.MANIFEST_LOADED="hlsManifestLoaded",m.MANIFEST_PARSED="hlsManifestParsed",m.LEVEL_SWITCHING="hlsLevelSwitching",m.LEVEL_SWITCHED="hlsLevelSwitched",m.LEVEL_LOADING="hlsLevelLoading",m.LEVEL_LOADED="hlsLevelLoaded",m.LEVEL_UPDATED="hlsLevelUpdated",m.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",m.LEVELS_UPDATED="hlsLevelsUpdated",m.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",m.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",m.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",m.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",m.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",m.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",m.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",m.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",m.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",m.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",m.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",m.CUES_PARSED="hlsCuesParsed",m.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",m.INIT_PTS_FOUND="hlsInitPtsFound",m.FRAG_LOADING="hlsFragLoading",m.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",m.FRAG_LOADED="hlsFragLoaded",m.FRAG_DECRYPTED="hlsFragDecrypted",m.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",m.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",m.FRAG_PARSING_METADATA="hlsFragParsingMetadata",m.FRAG_PARSED="hlsFragParsed",m.FRAG_BUFFERED="hlsFragBuffered",m.FRAG_CHANGED="hlsFragChanged",m.FPS_DROP="hlsFpsDrop",m.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",m.ERROR="hlsError",m.DESTROYING="hlsDestroying",m.KEY_LOADING="hlsKeyLoading",m.KEY_LOADED="hlsKeyLoaded",m.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",m.BACK_BUFFER_REACHED="hlsBackBufferReached",m}({}),be=function(m){return m.NETWORK_ERROR="networkError",m.MEDIA_ERROR="mediaError",m.KEY_SYSTEM_ERROR="keySystemError",m.MUX_ERROR="muxError",m.OTHER_ERROR="otherError",m}({}),Z=function(m){return m.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",m.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",m.KEY_SYSTEM_NO_SESSION="keySystemNoSession",m.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",m.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",m.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",m.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",m.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",m.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",m.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",m.MANIFEST_LOAD_ERROR="manifestLoadError",m.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",m.MANIFEST_PARSING_ERROR="manifestParsingError",m.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",m.LEVEL_EMPTY_ERROR="levelEmptyError",m.LEVEL_LOAD_ERROR="levelLoadError",m.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",m.LEVEL_PARSING_ERROR="levelParsingError",m.LEVEL_SWITCH_ERROR="levelSwitchError",m.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",m.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",m.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",m.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",m.FRAG_LOAD_ERROR="fragLoadError",m.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",m.FRAG_DECRYPT_ERROR="fragDecryptError",m.FRAG_PARSING_ERROR="fragParsingError",m.FRAG_GAP="fragGap",m.REMUX_ALLOC_ERROR="remuxAllocError",m.KEY_LOAD_ERROR="keyLoadError",m.KEY_LOAD_TIMEOUT="keyLoadTimeOut",m.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",m.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",m.BUFFER_APPEND_ERROR="bufferAppendError",m.BUFFER_APPENDING_ERROR="bufferAppendingError",m.BUFFER_STALLED_ERROR="bufferStalledError",m.BUFFER_FULL_ERROR="bufferFullError",m.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",m.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",m.INTERNAL_EXCEPTION="internalException",m.INTERNAL_ABORTED="aborted",m.UNKNOWN="unknown",m}({});const Q=function(){},ie={trace:Q,debug:Q,log:Q,warn:Q,info:Q,error:Q};let he=ie;function ve(m){const n=self.console[m];return n?n.bind(self.console,`[${m}] >`):Q}function Je(m,...n){n.forEach(function(o){he[o]=m[o]?m[o].bind(m):ve(o)})}function rt(m,n){if(self.console&&m===!0||typeof m=="object"){Je(m,"debug","log","info","warn","error");try{he.log(`Debug logs enabled for "${n}" in hls.js version 1.4.0`)}catch{he=ie}}else he=ie}const K=he,St=/^(\d+)x(\d+)$/,Se=/(.+?)=(".*?"|.*?)(?:,|$)/g;class He{constructor(n){typeof n=="string"&&(n=He.parseAttrList(n));for(const o in n)n.hasOwnProperty(o)&&(o.substring(0,2)==="X-"&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(o)),this[o]=n[o])}decimalInteger(n){const o=parseInt(this[n],10);return o>Number.MAX_SAFE_INTEGER?1/0:o}hexadecimalInteger(n){if(this[n]){let o=(this[n]||"0x").slice(2);o=(o.length&1?"0":"")+o;const a=new Uint8Array(o.length/2);for(let c=0;c<o.length/2;c++)a[c]=parseInt(o.slice(c*2,c*2+2),16);return a}else return null}hexadecimalIntegerAsNumber(n){const o=parseInt(this[n],16);return o>Number.MAX_SAFE_INTEGER?1/0:o}decimalFloatingPoint(n){return parseFloat(this[n])}optionalFloat(n,o){const a=this[n];return a?parseFloat(a):o}enumeratedString(n){return this[n]}bool(n){return this[n]==="YES"}decimalResolution(n){const o=St.exec(this[n]);if(o!==null)return{width:parseInt(o[1],10),height:parseInt(o[2],10)}}static parseAttrList(n){let o;const a={},c='"';for(Se.lastIndex=0;(o=Se.exec(n))!==null;){let d=o[2];d.indexOf(c)===0&&d.lastIndexOf(c)===d.length-1&&(d=d.slice(1,-1));const p=o[1].trim();a[p]=d}return a}}function Qe(m){return m!=="ID"&&m!=="CLASS"&&m!=="START-DATE"&&m!=="DURATION"&&m!=="END-DATE"&&m!=="END-ON-NEXT"}function It(m){return m==="SCTE35-OUT"||m==="SCTE35-IN"}class yt{constructor(n,o){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,o){const a=o.attr;for(const c in a)if(Object.prototype.hasOwnProperty.call(n,c)&&n[c]!==a[c]){K.warn(`DATERANGE tag attribute: "${c}" does not match for tags with ID: "${n.ID}"`),this._badValueForSameId=c;break}n=ae(new He({}),a,n)}if(this.attr=n,this._startDate=new Date(n["START-DATE"]),"END-DATE"in this.attr){const a=new Date(this.attr["END-DATE"]);fe(a.getTime())&&(this._endDate=a)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const n=this.duration;return n!==null?new Date(this._startDate.getTime()+n*1e3):null}get duration(){if("DURATION"in this.attr){const n=this.attr.decimalFloatingPoint("DURATION");if(fe(n))return n}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&fe(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Ut{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var wt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class we{constructor(n){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[wt.AUDIO]:null,[wt.VIDEO]:null,[wt.AUDIOVIDEO]:null},this.baseurl=n}setByteRange(n,o){const a=n.split("@",2),c=[];a.length===1?c[0]=o?o.byteRangeEndOffset:0:c[0]=parseInt(a[1]),c[1]=parseInt(a[0])+c[0],this._byteRange=c}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=W.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(n){this._url=n}}class De extends we{constructor(n,o){super(o),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Ut,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=n}get decryptdata(){const{levelkeys:n}=this;if(!n&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const o=this.levelkeys.identity;if(o)this._decryptdata=o.getDecryptData(this.sn);else{const a=Object.keys(this.levelkeys);if(a.length===1)return this._decryptdata=this.levelkeys[a[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!fe(this.programDateTime))return null;const n=fe(this.duration)?this.duration:0;return this.programDateTime+n*1e3}get encrypted(){var n;if((n=this._decryptdata)!=null&&n.encrypted)return!0;if(this.levelkeys){const o=Object.keys(this.levelkeys),a=o.length;if(a>1||a===1&&this.levelkeys[o[0]].encrypted)return!0}return!1}setKeyFormat(n){if(this.levelkeys){const o=this.levelkeys[n];o&&!this._decryptdata&&(this._decryptdata=o.getDecryptData(this.sn))}}abortRequests(){var n,o;(n=this.loader)==null||n.abort(),(o=this.keyLoader)==null||o.abort()}setElementaryStreamInfo(n,o,a,c,d,p=!1){const{elementaryStreams:v}=this,E=v[n];if(!E){v[n]={startPTS:o,endPTS:a,startDTS:c,endDTS:d,partial:p};return}E.startPTS=Math.min(E.startPTS,o),E.endPTS=Math.max(E.endPTS,a),E.startDTS=Math.min(E.startDTS,c),E.endDTS=Math.max(E.endDTS,d)}clearElementaryStreamInfo(){const{elementaryStreams:n}=this;n[wt.AUDIO]=null,n[wt.VIDEO]=null,n[wt.AUDIOVIDEO]=null}}class Ze extends we{constructor(n,o,a,c,d){super(a),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Ut,this.duration=n.decimalFloatingPoint("DURATION"),this.gap=n.bool("GAP"),this.independent=n.bool("INDEPENDENT"),this.relurl=n.enumeratedString("URI"),this.fragment=o,this.index=c;const p=n.enumeratedString("BYTERANGE");p&&this.setByteRange(p,d),d&&(this.fragOffset=d.fragOffset+d.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:n}=this;return!!(n.audio||n.video||n.audiovideo)}}const Ht=10;class Le{constructor(n){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=n}reloaded(n){if(!n){this.advanced=!0,this.updated=!0;return}const o=this.lastPartSn-n.lastPartSn,a=this.lastPartIndex-n.lastPartIndex;this.updated=this.endSN!==n.endSN||!!a||!!o,this.advanced=this.endSN>n.endSN||o>0||o===0&&a>0,this.updated||this.advanced?this.misses=Math.floor(n.misses*.6):this.misses=n.misses+1,this.availabilityDelay=n.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?fe(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Ht}get drift(){const n=this.driftEndTime-this.driftStartTime;return n>0?(this.driftEnd-this.driftStart)*1e3/n:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var n;return(n=this.partList)!=null&&n.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var n;return(n=this.fragments)!=null&&n.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var n;return(n=this.partList)!=null&&n.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var n;return(n=this.partList)!=null&&n.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function Fe(m){return Uint8Array.from(atob(m),n=>n.charCodeAt(0))}function at(m){const n=Zt(m).subarray(0,16),o=new Uint8Array(16);return o.set(n,16-n.length),o}function Ae(m){const n=function(a,c,d){const p=a[c];a[c]=a[d],a[d]=p};n(m,0,3),n(m,1,2),n(m,4,5),n(m,6,7)}function $t(m){const n=m.split(":");let o=null;if(n[0]==="data"&&n.length===2){const a=n[1].split(";"),c=a[a.length-1].split(",");if(c.length===2){const d=c[0]==="base64",p=c[1];d?(a.splice(-1,1),o=Fe(p)):o=at(p)}}return o}function Zt(m){return Uint8Array.from(unescape(encodeURIComponent(m)),n=>n.charCodeAt(0))}var pe={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Pe={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function je(m){switch(m){case Pe.FAIRPLAY:return pe.FAIRPLAY;case Pe.PLAYREADY:return pe.PLAYREADY;case Pe.WIDEVINE:return pe.WIDEVINE;case Pe.CLEARKEY:return pe.CLEARKEY}}var Ue={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function Xe(m){if(m===Ue.WIDEVINE)return pe.WIDEVINE}function dt(m){switch(m){case pe.FAIRPLAY:return Pe.FAIRPLAY;case pe.PLAYREADY:return Pe.PLAYREADY;case pe.WIDEVINE:return Pe.WIDEVINE;case pe.CLEARKEY:return Pe.CLEARKEY}}function ht(m){const{drmSystems:n,widevineLicenseUrl:o}=m,a=n?[pe.FAIRPLAY,pe.WIDEVINE,pe.PLAYREADY,pe.CLEARKEY].filter(c=>!!n[c]):[];return!a[pe.WIDEVINE]&&o&&a.push(pe.WIDEVINE),a}const Pt=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function jt(m,n,o,a){let c;switch(m){case pe.FAIRPLAY:c=["cenc","sinf"];break;case pe.WIDEVINE:case pe.PLAYREADY:c=["cenc"];break;case pe.CLEARKEY:c=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${m}`)}return Lr(c,n,o,a)}function Lr(m,n,o,a){return[{initDataTypes:m,persistentState:a.persistentState||"not-allowed",distinctiveIdentifier:a.distinctiveIdentifier||"not-allowed",sessionTypes:a.sessionTypes||[a.sessionType||"temporary"],audioCapabilities:n.map(d=>({contentType:`audio/mp4; codecs="${d}"`,robustness:a.audioRobustness||"",encryptionScheme:a.audioEncryptionScheme||null})),videoCapabilities:o.map(d=>({contentType:`video/mp4; codecs="${d}"`,robustness:a.videoRobustness||"",encryptionScheme:a.videoEncryptionScheme||null}))}]}function dr(m,n,o){return Uint8Array.prototype.slice?m.slice(n,o):new Uint8Array(Array.prototype.slice.call(m,n,o))}const Rr=(m,n)=>n+10<=m.length&&m[n]===73&&m[n+1]===68&&m[n+2]===51&&m[n+3]<255&&m[n+4]<255&&m[n+6]<128&&m[n+7]<128&&m[n+8]<128&&m[n+9]<128,Jr=(m,n)=>n+10<=m.length&&m[n]===51&&m[n+1]===68&&m[n+2]===73&&m[n+3]<255&&m[n+4]<255&&m[n+6]<128&&m[n+7]<128&&m[n+8]<128&&m[n+9]<128,Qr=(m,n)=>{const o=n;let a=0;for(;Rr(m,n);)a+=10,a+=Tt(m,n+6),Jr(m,n+10)&&(a+=10),n+=a;if(a>0)return m.subarray(o,o+a)},Tt=(m,n)=>{let o=0;return o=(m[n]&127)<<21,o|=(m[n+1]&127)<<14,o|=(m[n+2]&127)<<7,o|=m[n+3]&127,o},Kt=(m,n)=>Rr(m,n)&&Tt(m,n+6)+10<=m.length-n,Yt=m=>{const n=yr(m);for(let o=0;o<n.length;o++){const a=n[o];if(Qt(a))return on(a)}},Qt=m=>m&&m.key==="PRIV"&&m.info==="com.apple.streaming.transportStreamTimestamp",Nr=m=>{const n=String.fromCharCode(m[0],m[1],m[2],m[3]),o=Tt(m,4),a=10;return{type:n,size:o,data:m.subarray(a,a+o)}},yr=m=>{let n=0;const o=[];for(;Rr(m,n);){const a=Tt(m,n+6);n+=10;const c=n+a;for(;n+8<c;){const d=Nr(m.subarray(n)),p=vr(d);p&&o.push(p),n+=d.size+10}Jr(m,n)&&(n+=10)}return o},vr=m=>m.type==="PRIV"?nn(m):m.type[0]==="W"?en(m):Xr(m),nn=m=>{if(m.size<2)return;const n=lr(m.data,!0),o=new Uint8Array(m.data.subarray(n.length+1));return{key:m.type,info:n,data:o.buffer}},Xr=m=>{if(m.size<2)return;if(m.type==="TXXX"){let o=1;const a=lr(m.data.subarray(o),!0);o+=a.length+1;const c=lr(m.data.subarray(o));return{key:m.type,info:a,data:c}}const n=lr(m.data.subarray(1));return{key:m.type,data:n}},en=m=>{if(m.type==="WXXX"){if(m.size<2)return;let o=1;const a=lr(m.data.subarray(o),!0);o+=a.length+1;const c=lr(m.data.subarray(o));return{key:m.type,info:a,data:c}}const n=lr(m.data);return{key:m.type,data:n}},on=m=>{if(m.data.byteLength===8){const n=new Uint8Array(m.data),o=n[3]&1;let a=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7];return a/=45,o&&(a+=4772185884e-2),Math.round(a)}},lr=(m,n=!1)=>{const o=zr();if(o){const w=o.decode(m);if(n){const I=w.indexOf("\0");return I!==-1?w.substring(0,I):w}return w.replace(/\0/g,"")}const a=m.length;let c,d,p,v="",E=0;for(;E<a;){if(c=m[E++],c===0&&n)return v;if(c===0||c===3)continue;switch(c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:v+=String.fromCharCode(c);break;case 12:case 13:d=m[E++],v+=String.fromCharCode((c&31)<<6|d&63);break;case 14:d=m[E++],p=m[E++],v+=String.fromCharCode((c&15)<<12|(d&63)<<6|(p&63)<<0);break}}return v};let zt;function zr(){return!zt&&typeof self.TextDecoder<"u"&&(zt=new self.TextDecoder("utf-8")),zt}const Vr={hexDump:function(m){let n="";for(let o=0;o<m.length;o++){let a=m[o].toString(16);a.length<2&&(a="0"+a),n+=a}return n}},wn=Math.pow(2,32)-1,bi=[].push,Ln={video:1,audio:2,id3:3,text:4};function Ir(m){return String.fromCharCode.apply(null,m)}function Pn(m,n){const o=m[n]<<8|m[n+1];return o<0?65536+o:o}function Mt(m,n){const o=_o(m,n);return o<0?4294967296+o:o}function _o(m,n){return m[n]<<24|m[n+1]<<16|m[n+2]<<8|m[n+3]}function xi(m,n,o){m[n]=o>>24,m[n+1]=o>>16&255,m[n+2]=o>>8&255,m[n+3]=o&255}function er(m,n){const o=[];if(!n.length)return o;const a=m.byteLength;for(let c=0;c<a;){const d=Mt(m,c),p=Ir(m.subarray(c+4,c+8)),v=d>1?c+d:a;if(p===n[0])if(n.length===1)o.push(m.subarray(c+8,v));else{const E=er(m.subarray(c+8,v),n.slice(1));E.length&&bi.apply(o,E)}c=v}return o}function ts(m){const n=[],o=m[0];let a=8;const c=Mt(m,a);a+=4;const d=0,p=0;o===0?a+=8:a+=16,a+=2;let v=m.length+p;const E=Pn(m,a);a+=2;for(let w=0;w<E;w++){let I=a;const T=Mt(m,I);I+=4;const $=T&2147483647;if((T&2147483648)>>>31===1)return K.warn("SIDX has hierarchical references (not supported)"),null;const V=Mt(m,I);I+=4,n.push({referenceSize:$,subsegmentDuration:V,info:{duration:V/c,start:v,end:v+$-1}}),v+=$,I+=4,a=I}return{earliestPresentationTime:d,timescale:c,version:o,referencesCount:E,references:n}}function So(m){const n=[],o=er(m,["moov","trak"]);for(let c=0;c<o.length;c++){const d=o[c],p=er(d,["tkhd"])[0];if(p){let v=p[0],E=v===0?12:20;const w=Mt(p,E),I=er(d,["mdia","mdhd"])[0];if(I){v=I[0],E=v===0?12:20;const T=Mt(I,E),$=er(d,["mdia","hdlr"])[0];if($){const H=Ir($.subarray(8,12)),V={soun:wt.AUDIO,vide:wt.VIDEO}[H];if(V){const U=er(d,["mdia","minf","stbl","stsd"])[0];let z;U&&(z=Ir(U.subarray(12,16))),n[w]={timescale:T,type:V},n[V]={timescale:T,id:w,codec:z}}}}}}return er(m,["moov","mvex","trex"]).forEach(c=>{const d=Mt(c,4),p=n[d];p&&(p.default={duration:Mt(c,12),flags:Mt(c,20)})}),n}function Lo(m,n){if(!m||!n)return m;const o=n.keyId;return o&&n.isCommonEncryption&&er(m,["moov","trak"]).forEach(c=>{const p=er(c,["mdia","minf","stbl","stsd"])[0].subarray(8);let v=er(p,["enca"]);const E=v.length>0;E||(v=er(p,["encv"])),v.forEach(w=>{const I=E?w.subarray(28):w.subarray(78);er(I,["sinf"]).forEach($=>{const H=Bi($);if(H){const V=H.subarray(8,24);V.some(U=>U!==0)||(K.log(`[eme] Patching keyId in 'enc${E?"a":"v"}>sinf>>tenc' box: ${Vr.hexDump(V)} -> ${Vr.hexDump(o)}`),H.set(o,8))}})})}),m}function Bi(m){const n=er(m,["schm"])[0];if(n){const o=Ir(n.subarray(4,8));if(o==="cbcs"||o==="cenc")return er(m,["schi","tenc"])[0]}return K.error("[eme] missing 'schm' box"),null}function Fn(m,n){return er(n,["moof","traf"]).reduce((o,a)=>{const c=er(a,["tfdt"])[0],d=c[0],p=er(a,["tfhd"]).reduce((v,E)=>{const w=Mt(E,4),I=m[w];if(I){let T=Mt(c,4);if(d===1){if(T===wn)return K.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),v;T*=wn+1,T+=Mt(c,8)}const $=I.timescale||9e4,H=T/$;if(isFinite(H)&&(v===null||H<v))return H}return v},null);return p!==null&&isFinite(p)&&(o===null||p<o)?p:o},null)}function $i(m,n){let o=0,a=0,c=0;const d=er(m,["moof","traf"]);for(let p=0;p<d.length;p++){const v=d[p],E=er(v,["tfhd"])[0],w=Mt(E,4),I=n[w];if(!I)continue;const T=I.default,$=Mt(E,0)|T?.flags;let H=T?.duration;$&8&&($&2?H=Mt(E,12):H=Mt(E,8));const V=I.timescale||9e4,U=er(v,["trun"]);for(let z=0;z<U.length;z++){if(o=Ro(U[z]),!o&&H){const se=Mt(U[z],4);o=H*se}I.type===wt.VIDEO?a+=o/V:I.type===wt.AUDIO&&(c+=o/V)}}if(a===0&&c===0){let p=0;const v=er(m,["sidx"]);for(let E=0;E<v.length;E++){const w=ts(v[E]);w!=null&&w.references&&(p+=w.references.reduce((I,T)=>I+T.info.duration||0,0))}return p}return a||c}function Ro(m){const n=Mt(m,0);let o=8;n&1&&(o+=4),n&4&&(o+=4);let a=0;const c=Mt(m,4);for(let d=0;d<c;d++)n&256&&(a+=Mt(m,o),o+=4),n&512&&(o+=4),n&1024&&(o+=4),n&2048&&(o+=4);return a}function Rn(m,n,o){er(n,["moof","traf"]).forEach(a=>{er(a,["tfhd"]).forEach(c=>{const d=Mt(c,4),p=m[d];if(!p)return;const v=p.timescale||9e4;er(a,["tfdt"]).forEach(E=>{const w=E[0];let I=Mt(E,4);if(w===0)I-=o*v,I=Math.max(I,0),xi(E,4,I);else{I*=Math.pow(2,32),I+=Mt(E,8),I-=o*v,I=Math.max(I,0);const T=Math.floor(I/(wn+1)),$=Math.floor(I%(wn+1));xi(E,4,T),xi(E,8,$)}})})})}function Io(m){const n={valid:null,remainder:null},o=er(m,["moof"]);if(o){if(o.length<2)return n.remainder=m,n}else return n;const a=o[o.length-1];return n.valid=dr(m,0,a.byteOffset-8),n.remainder=dr(m,a.byteOffset-8),n}function Jn(m,n){const o=new Uint8Array(m.length+n.length);return o.set(m),o.set(n,m.length),o}function To(m,n){const o=[],a=n.samples,c=n.timescale,d=n.id;let p=!1;return er(a,["moof"]).map(E=>{const w=E.byteOffset-8;er(E,["traf"]).map(T=>{const $=er(T,["tfdt"]).map(H=>{const V=H[0];let U=Mt(H,4);return V===1&&(U*=Math.pow(2,32),U+=Mt(H,8)),U/c})[0];return $!==void 0&&(m=$),er(T,["tfhd"]).map(H=>{const V=Mt(H,4),U=Mt(H,0)&16777215,z=(U&1)!==0,se=(U&2)!==0,Ee=(U&8)!==0;let de=0;const ke=(U&16)!==0;let Ie=0;const it=(U&32)!==0;let $e=8;V===d&&(z&&($e+=8),se&&($e+=4),Ee&&(de=Mt(H,$e),$e+=4),ke&&(Ie=Mt(H,$e),$e+=4),it&&($e+=4),n.type==="video"&&(p=rs(n.codec)),er(T,["trun"]).map(ot=>{const ut=ot[0],Oe=Mt(ot,0)&16777215,Ot=(Oe&1)!==0;let ft=0;const Wt=(Oe&4)!==0,br=(Oe&256)!==0;let $r=0;const Ur=(Oe&512)!==0;let Pr=0;const Ct=(Oe&1024)!==0,kt=(Oe&2048)!==0;let Sr=0;const pr=Mt(ot,4);let Er=8;Ot&&(ft=Mt(ot,Er),Er+=4),Wt&&(Er+=4);let rn=ft+w;for(let On=0;On<pr;On++){if(br?($r=Mt(ot,Er),Er+=4):$r=de,Ur?(Pr=Mt(ot,Er),Er+=4):Pr=Ie,Ct&&(Er+=4),kt&&(ut===0?Sr=Mt(ot,Er):Sr=_o(ot,Er),Er+=4),n.type===wt.VIDEO){let Wn=0;for(;Wn<Pr;){const dn=Mt(a,rn);if(rn+=4,di(p,a[rn])){const Co=a.subarray(rn,rn+dn);Do(Co,p?2:1,m+Sr/c,o)}rn+=dn,Wn+=dn+4}}m+=$r/c}}))})})}),o}function rs(m){if(!m)return!1;const n=m.indexOf("."),o=n<0?m:m.substring(0,n);return o==="hvc1"||o==="hev1"||o==="dvh1"||o==="dvhe"}function di(m,n){if(m){const o=n>>1&63;return o===39||o===40}else return(n&31)===6}function Do(m,n,o,a){const c=oo(m);let d=0;d+=n;let p=0,v=0,E=!1,w=0;for(;d<c.length;){p=0;do{if(d>=c.length)break;w=c[d++],p+=w}while(w===255);v=0;do{if(d>=c.length)break;w=c[d++],v+=w}while(w===255);const I=c.length-d;if(!E&&p===4&&d<c.length){if(E=!0,c[d++]===181){const $=Pn(c,d);if(d+=2,$===49){const H=Mt(c,d);if(d+=4,H===1195456820){const V=c[d++];if(V===3){const U=c[d++],z=31&U,se=64&U,Ee=se?2+z*3:0,de=new Uint8Array(Ee);if(se){de[0]=U;for(let ke=1;ke<Ee;ke++)de[ke]=c[d++]}a.push({type:V,payloadType:p,pts:o,bytes:de})}}}}}else if(p===5&&v<I){if(E=!0,v>16){const T=[];for(let V=0;V<16;V++){const U=c[d++].toString(16);T.push(U.length==1?"0"+U:U),(V===3||V===5||V===7||V===9)&&T.push("-")}const $=v-16,H=new Uint8Array($);for(let V=0;V<$;V++)H[V]=c[d++];a.push({payloadType:p,pts:o,uuid:T.join(""),userData:lr(H),userDataBytes:H})}}else if(v<I)d+=v;else if(v>I)break}}function oo(m){const n=m.byteLength,o=[];let a=1;for(;a<n-2;)m[a]===0&&m[a+1]===0&&m[a+2]===3?(o.push(a+2),a+=2):a++;if(o.length===0)return m;const c=n-o.length,d=new Uint8Array(c);let p=0;for(a=0;a<c;p++,a++)p===o[0]&&(p++,o.shift()),d[a]=m[p];return d}function Ao(m){const n=m[0];let o="",a="",c=0,d=0,p=0,v=0,E=0,w=0;if(n===0){for(;Ir(m.subarray(w,w+1))!=="\0";)o+=Ir(m.subarray(w,w+1)),w+=1;for(o+=Ir(m.subarray(w,w+1)),w+=1;Ir(m.subarray(w,w+1))!=="\0";)a+=Ir(m.subarray(w,w+1)),w+=1;a+=Ir(m.subarray(w,w+1)),w+=1,c=Mt(m,12),d=Mt(m,16),v=Mt(m,20),E=Mt(m,24),w=28}else if(n===1){w+=4,c=Mt(m,w),w+=4;const T=Mt(m,w);w+=4;const $=Mt(m,w);for(w+=4,p=2**32*T+$,Number.isSafeInteger(p)||(p=Number.MAX_SAFE_INTEGER,K.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),v=Mt(m,w),w+=4,E=Mt(m,w),w+=4;Ir(m.subarray(w,w+1))!=="\0";)o+=Ir(m.subarray(w,w+1)),w+=1;for(o+=Ir(m.subarray(w,w+1)),w+=1;Ir(m.subarray(w,w+1))!=="\0";)a+=Ir(m.subarray(w,w+1)),w+=1;a+=Ir(m.subarray(w,w+1)),w+=1}const I=m.subarray(w,m.byteLength);return{schemeIdUri:o,value:a,timeScale:c,presentationTime:p,presentationTimeDelta:d,eventDuration:v,id:E,payload:I}}function ko(m,...n){const o=n.length;let a=8,c=o;for(;c--;)a+=n[c].byteLength;const d=new Uint8Array(a);for(d[0]=a>>24&255,d[1]=a>>16&255,d[2]=a>>8&255,d[3]=a&255,d.set(m,4),c=0,a=8;c<o;c++)d.set(n[c],a),a+=n[c].byteLength;return d}function Fi(m,n,o){if(m.byteLength!==16)throw new RangeError("Invalid system id");let a,c;if(n){a=1,c=new Uint8Array(n.length*16);for(let v=0;v<n.length;v++){const E=n[v];if(E.byteLength!==16)throw new RangeError("Invalid key");c.set(E,v*16)}}else a=0,c=new Uint8Array;let d;a>0?(d=new Uint8Array(4),n.length>0&&new DataView(d.buffer).setUint32(0,n.length,!1)):d=new Uint8Array;const p=new Uint8Array(4);return o&&o.byteLength>0&&new DataView(p.buffer).setUint32(0,o.byteLength,!1),ko([112,115,115,104],new Uint8Array([a,0,0,0]),m,d,c,p,o||new Uint8Array)}function ns(m){if(!(m instanceof ArrayBuffer)||m.byteLength<32)return null;const n={version:0,systemId:"",kids:null,data:null},o=new DataView(m),a=o.getUint32(0);if(m.byteLength!==a&&a>44||o.getUint32(4)!==1886614376||(n.version=o.getUint32(8)>>>24,n.version>1))return null;n.systemId=Vr.hexDump(new Uint8Array(m,12,16));const d=o.getUint32(28);if(n.version===0){if(a-32<d)return null;n.data=new Uint8Array(m,32,d)}else if(n.version===1){n.kids=[];for(let p=0;p<d;p++)n.kids.push(new Uint8Array(m,32+p*16,16))}return n}let Hi={};class Hn{static clearKeyUriToKeyIdMap(){Hi={}}constructor(n,o,a,c=[1],d=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=n,this.uri=o,this.keyFormat=a,this.keyFormatVersions=c,this.iv=d,this.encrypted=n?n!=="NONE":!1,this.isCommonEncryption=this.encrypted&&n!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Pe.FAIRPLAY:case Pe.WIDEVINE:case Pe.PLAYREADY:case Pe.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(n){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof n!="number"&&(this.method==="AES-128"&&!this.iv&&K.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),n=0);const a=Ni(n);return new Hn(this.method,this.uri,"identity",this.keyFormatVersions,a)}const o=$t(this.uri);if(o)switch(this.keyFormat){case Pe.WIDEVINE:this.pssh=o,o.length>=22&&(this.keyId=o.subarray(o.length-22,o.length-6));break;case Pe.PLAYREADY:{const a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Fi(a,null,o);const c=new Uint16Array(o.buffer,o.byteOffset,o.byteLength/2),d=String.fromCharCode.apply(null,Array.from(c)),p=d.substring(d.indexOf("<"),d.length),w=new DOMParser().parseFromString(p,"text/xml").getElementsByTagName("KID")[0];if(w){const I=w.childNodes[0]?w.childNodes[0].nodeValue:w.getAttribute("VALUE");if(I){const T=Fe(I).subarray(0,16);Ae(T),this.keyId=T}}break}default:{let a=o.subarray(0,16);if(a.length!==16){const c=new Uint8Array(16);c.set(a,16-a.length),a=c}this.keyId=a;break}}if(!this.keyId||this.keyId.byteLength!==16){let a=Hi[this.uri];if(!a){const c=Object.keys(Hi).length%Number.MAX_SAFE_INTEGER;a=new Uint8Array(16),new DataView(a.buffer,12,4).setUint32(0,c),Hi[this.uri]=a}this.keyId=a}return this}}function Ni(m){const n=new Uint8Array(16);for(let o=12;o<16;o++)n[o]=m>>8*(15-o)&255;return n}const so=/\{\$([a-zA-Z0-9-_]+)\}/g;function ao(m){return so.test(m)}function sn(m,n,o){if(m.variableList!==null||m.hasVariableRefs)for(let a=o.length;a--;){const c=o[a],d=n[c];d&&(n[c]=ge(m,d))}}function ge(m,n){if(m.variableList!==null||m.hasVariableRefs){const o=m.variableList;return n.replace(so,a=>{const c=a.substring(2,a.length-1),d=o?.[c];return d===void 0?(m.playlistParsingError||(m.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${c}"`)),a):d})}return n}function Me(m,n,o){let a=m.variableList;a||(m.variableList=a={});let c,d;if("QUERYPARAM"in n){c=n.QUERYPARAM;try{const p=new self.URL(o).searchParams;if(p.has(c))d=p.get(c);else throw new Error(`"${c}" does not match any query parameter in URI: "${o}"`)}catch(p){m.playlistParsingError||(m.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${p.message}`))}}else c=n.NAME,d=n.VALUE;c in a?m.playlistParsingError||(m.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${c}"`)):a[c]=d||""}function Ne(m,n,o){const a=n.IMPORT;if(o&&a in o){let c=m.variableList;c||(m.variableList=c={}),c[a]=o[a]}else m.playlistParsingError||(m.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${a}"`))}const Te={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function ze(m,n){const o=Te[n];return!!o&&o[m.slice(0,4)]===!0}function We(m,n){return MediaSource.isTypeSupported(`${n||"video"}/mp4;codecs="${m}"`)}const mt=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,tt=/#EXT-X-MEDIA:(.*)/g,xt=/^#EXT(?:INF|-X-TARGETDURATION):/m,Lt=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Rt=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Et{static findGroup(n,o){for(let a=0;a<n.length;a++){const c=n[a];if(c.id===o)return c}}static convertAVC1ToAVCOTI(n){const o=n.split(".");if(o.length>2){let a=o.shift()+".";return a+=parseInt(o.shift()).toString(16),a+=("000"+parseInt(o.shift()).toString(16)).slice(-4),a}return n}static resolve(n,o){return W.buildAbsoluteURL(o,n,{alwaysNormalize:!0})}static isMediaPlaylist(n){return xt.test(n)}static parseMasterPlaylist(n,o){const a=ao(n),c={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:a},d=[];mt.lastIndex=0;let p;for(;(p=mt.exec(n))!=null;)if(p[1]){var v;const w=new He(p[1]);sn(c,w,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const I=ge(c,p[2]),T={attrs:w,bitrate:w.decimalInteger("AVERAGE-BANDWIDTH")||w.decimalInteger("BANDWIDTH"),name:w.NAME,url:Et.resolve(I,o)},$=w.decimalResolution("RESOLUTION");$&&(T.width=$.width,T.height=$.height),hr((w.CODECS||"").split(/[ ,]+/).filter(H=>H),T),T.videoCodec&&T.videoCodec.indexOf("avc1")!==-1&&(T.videoCodec=Et.convertAVC1ToAVCOTI(T.videoCodec)),(v=T.unknownCodecs)!=null&&v.length||d.push(T),c.levels.push(T)}else if(p[3]){const w=p[3],I=p[4];switch(w){case"SESSION-DATA":{const T=new He(I);sn(c,T,["DATA-ID","LANGUAGE","VALUE","URI"]);const $=T["DATA-ID"];$&&(c.sessionData===null&&(c.sessionData={}),c.sessionData[$]=T);break}case"SESSION-KEY":{const T=vt(I,o,c);T.encrypted&&T.isSupported()?(c.sessionKeys===null&&(c.sessionKeys=[]),c.sessionKeys.push(T)):K.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${I}"`);break}case"DEFINE":{{const T=new He(I);sn(c,T,["NAME","VALUE","QUERYPARAM"]),Me(c,T,o)}break}case"CONTENT-STEERING":{const T=new He(I);sn(c,T,["SERVER-URI","PATHWAY-ID"]),c.contentSteering={uri:Et.resolve(T["SERVER-URI"],o),pathwayId:T["PATHWAY-ID"]||"."};break}case"START":{c.startTimeOffset=ur(I);break}}}const E=d.length>0&&d.length<c.levels.length;return c.levels=E?d:c.levels,c.levels.length===0&&(c.playlistParsingError=new Error("no levels found in manifest")),c}static parseMasterPlaylistMedia(n,o,a){let c;const d={},p=a.levels,v={AUDIO:p.map(w=>({id:w.attrs.AUDIO,audioCodec:w.audioCodec})),SUBTITLES:p.map(w=>({id:w.attrs.SUBTITLES,textCodec:w.textCodec})),"CLOSED-CAPTIONS":[]};let E=0;for(tt.lastIndex=0;(c=tt.exec(n))!==null;){const w=new He(c[1]),I=w.TYPE;if(I){const T=v[I],$=d[I]||[];d[I]=$,sn(a,w,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const H={attrs:w,bitrate:0,id:E++,groupId:w["GROUP-ID"]||"",instreamId:w["INSTREAM-ID"],name:w.NAME||w.LANGUAGE||"",type:I,default:w.bool("DEFAULT"),autoselect:w.bool("AUTOSELECT"),forced:w.bool("FORCED"),lang:w.LANGUAGE,url:w.URI?Et.resolve(w.URI,o):""};if(T!=null&&T.length){const V=Et.findGroup(T,H.groupId)||T[0];jr(H,V,"audioCodec"),jr(H,V,"textCodec")}$.push(H)}}return d}static parseLevelPlaylist(n,o,a,c,d,p){const v=new Le(o),E=v.fragments;let w=null,I=0,T=0,$=0,H=0,V=null,U=new De(c,o),z,se,Ee,de=-1,ke=!1;for(Lt.lastIndex=0,v.m3u8=n,v.hasVariableRefs=ao(n);(z=Lt.exec(n))!==null;){ke&&(ke=!1,U=new De(c,o),U.start=$,U.sn=I,U.cc=H,U.level=a,w&&(U.initSegment=w,U.rawProgramDateTime=w.rawProgramDateTime,w.rawProgramDateTime=null));const ot=z[1];if(ot){U.duration=parseFloat(ot);const ut=(" "+z[2]).slice(1);U.title=ut||null,U.tagList.push(ut?["INF",ot,ut]:["INF",ot])}else if(z[3]){if(fe(U.duration)){U.start=$,Ee&&Br(U,Ee,v),U.sn=I,U.level=a,U.cc=H,U.urlId=d,E.push(U);const ut=(" "+z[3]).slice(1);U.relurl=ge(v,ut),Or(U,V),V=U,$+=U.duration,I++,T=0,ke=!0}}else if(z[4]){const ut=(" "+z[4]).slice(1);V?U.setByteRange(ut,V):U.setByteRange(ut)}else if(z[5])U.rawProgramDateTime=(" "+z[5]).slice(1),U.tagList.push(["PROGRAM-DATE-TIME",U.rawProgramDateTime]),de===-1&&(de=E.length);else{if(z=z[0].match(Rt),!z){K.warn("No matches on slow regex match for level playlist!");continue}for(se=1;se<z.length&&!(typeof z[se]<"u");se++);const ut=(" "+z[se]).slice(1),Oe=(" "+z[se+1]).slice(1),Ot=z[se+2]?(" "+z[se+2]).slice(1):"";switch(ut){case"PLAYLIST-TYPE":v.type=Oe.toUpperCase();break;case"MEDIA-SEQUENCE":I=v.startSN=parseInt(Oe);break;case"SKIP":{const ft=new He(Oe);sn(v,ft,["RECENTLY-REMOVED-DATERANGES"]);const Wt=ft.decimalInteger("SKIPPED-SEGMENTS");if(fe(Wt)){v.skippedSegments=Wt;for(let $r=Wt;$r--;)E.unshift(null);I+=Wt}const br=ft.enumeratedString("RECENTLY-REMOVED-DATERANGES");br&&(v.recentlyRemovedDateranges=br.split("	"));break}case"TARGETDURATION":v.targetduration=Math.max(parseInt(Oe),1);break;case"VERSION":v.version=parseInt(Oe);break;case"EXTM3U":break;case"ENDLIST":v.live=!1;break;case"#":(Oe||Ot)&&U.tagList.push(Ot?[Oe,Ot]:[Oe]);break;case"DISCONTINUITY":H++,U.tagList.push(["DIS"]);break;case"GAP":U.gap=!0,U.tagList.push([ut]);break;case"BITRATE":U.tagList.push([ut,Oe]);break;case"DATERANGE":{const ft=new He(Oe);sn(v,ft,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),sn(v,ft,ft.clientAttrs);const Wt=new yt(ft,v.dateRanges[ft.ID]);Wt.isValid||v.skippedSegments?v.dateRanges[Wt.id]=Wt:K.warn(`Ignoring invalid DATERANGE tag: "${Oe}"`),U.tagList.push(["EXT-X-DATERANGE",Oe]);break}case"DEFINE":{{const ft=new He(Oe);sn(v,ft,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in ft?Ne(v,ft,p):Me(v,ft,o)}break}case"DISCONTINUITY-SEQUENCE":H=parseInt(Oe);break;case"KEY":{const ft=vt(Oe,o,v);if(ft.isSupported()){if(ft.method==="NONE"){Ee=void 0;break}Ee||(Ee={}),Ee[ft.keyFormat]&&(Ee=ae({},Ee)),Ee[ft.keyFormat]=ft}else K.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${Oe}"`);break}case"START":v.startTimeOffset=ur(Oe);break;case"MAP":{const ft=new He(Oe);if(sn(v,ft,["BYTERANGE","URI"]),U.duration){const Wt=new De(c,o);wr(Wt,ft,a,Ee),w=Wt,U.initSegment=w,w.rawProgramDateTime&&!U.rawProgramDateTime&&(U.rawProgramDateTime=w.rawProgramDateTime)}else wr(U,ft,a,Ee),w=U,ke=!0;break}case"SERVER-CONTROL":{const ft=new He(Oe);v.canBlockReload=ft.bool("CAN-BLOCK-RELOAD"),v.canSkipUntil=ft.optionalFloat("CAN-SKIP-UNTIL",0),v.canSkipDateRanges=v.canSkipUntil>0&&ft.bool("CAN-SKIP-DATERANGES"),v.partHoldBack=ft.optionalFloat("PART-HOLD-BACK",0),v.holdBack=ft.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const ft=new He(Oe);v.partTarget=ft.decimalFloatingPoint("PART-TARGET");break}case"PART":{let ft=v.partList;ft||(ft=v.partList=[]);const Wt=T>0?ft[ft.length-1]:void 0,br=T++,$r=new He(Oe);sn(v,$r,["BYTERANGE","URI"]);const Ur=new Ze($r,U,o,br,Wt);ft.push(Ur),U.duration+=Ur.duration;break}case"PRELOAD-HINT":{const ft=new He(Oe);sn(v,ft,["URI"]),v.preloadHint=ft;break}case"RENDITION-REPORT":{const ft=new He(Oe);sn(v,ft,["URI"]),v.renditionReports=v.renditionReports||[],v.renditionReports.push(ft);break}default:K.warn(`line parsed but not handled: ${z}`);break}}}V&&!V.relurl?(E.pop(),$-=V.duration,v.partList&&(v.fragmentHint=V)):v.partList&&(Or(U,V),U.cc=H,v.fragmentHint=U,Ee&&Br(U,Ee,v));const Ie=E.length,it=E[0],$e=E[Ie-1];if($+=v.skippedSegments*v.targetduration,$>0&&Ie&&$e){v.averagetargetduration=$/Ie;const ot=$e.sn;v.endSN=ot!=="initSegment"?ot:0,v.live||($e.endList=!0),it&&(v.startCC=it.cc)}else v.endSN=0,v.startCC=0;return v.fragmentHint&&($+=v.fragmentHint.duration),v.totalduration=$,v.endCC=H,de>0&&Mr(E,de),v}}function vt(m,n,o){var a,c;const d=new He(m);sn(o,d,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const p=(a=d.METHOD)!=null?a:"",v=d.URI,E=d.hexadecimalInteger("IV"),w=d.KEYFORMATVERSIONS,I=(c=d.KEYFORMAT)!=null?c:"identity";v&&d.IV&&!E&&K.error(`Invalid IV: ${d.IV}`);const T=v?Et.resolve(v,n):"",$=(w||"1").split("/").map(Number).filter(Number.isFinite);return new Hn(p,T,I,$,E)}function ur(m){const o=new He(m).decimalFloatingPoint("TIME-OFFSET");return fe(o)?o:null}function hr(m,n){["video","audio","text"].forEach(o=>{const a=m.filter(c=>ze(c,o));if(a.length){const c=a.filter(d=>d.lastIndexOf("avc1",0)===0||d.lastIndexOf("mp4a",0)===0);n[`${o}Codec`]=c.length>0?c[0]:a[0],m=m.filter(d=>a.indexOf(d)===-1)}}),n.unknownCodecs=m}function jr(m,n,o){const a=n[o];a&&(m[o]=a)}function Mr(m,n){let o=m[n];for(let a=n;a--;){const c=m[a];if(!c)return;c.programDateTime=o.programDateTime-c.duration*1e3,o=c}}function Or(m,n){m.rawProgramDateTime?m.programDateTime=Date.parse(m.rawProgramDateTime):n!=null&&n.programDateTime&&(m.programDateTime=n.endProgramDateTime),fe(m.programDateTime)||(m.programDateTime=null,m.rawProgramDateTime=null)}function wr(m,n,o,a){m.relurl=n.URI,n.BYTERANGE&&m.setByteRange(n.BYTERANGE),m.level=o,m.sn="initSegment",a&&(m.levelkeys=a),m.initSegment=null}function Br(m,n,o){m.levelkeys=n;const{encryptedFragments:a}=o;(!a.length||a[a.length-1].levelkeys!==n)&&Object.keys(n).some(c=>n[c].isCommonEncryption)&&a.push(m)}var At={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},bt={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function mr(m){const{type:n}=m;switch(n){case At.AUDIO_TRACK:return bt.AUDIO;case At.SUBTITLE_TRACK:return bt.SUBTITLE;default:return bt.MAIN}}function an(m,n){let o=m.url;return(o===void 0||o.indexOf("data:")===0)&&(o=n.url),o}class bn{constructor(n){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=n,this.registerListeners()}startLoad(n){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:n}=this;n.on(P.MANIFEST_LOADING,this.onManifestLoading,this),n.on(P.LEVEL_LOADING,this.onLevelLoading,this),n.on(P.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),n.on(P.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:n}=this;n.off(P.MANIFEST_LOADING,this.onManifestLoading,this),n.off(P.LEVEL_LOADING,this.onLevelLoading,this),n.off(P.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),n.off(P.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(n){const o=this.hls.config,a=o.pLoader,c=o.loader,d=a||c,p=new d(o);return this.loaders[n.type]=p,p}getInternalLoader(n){return this.loaders[n.type]}resetInternalLoader(n){this.loaders[n]&&delete this.loaders[n]}destroyInternalLoaders(){for(const n in this.loaders){const o=this.loaders[n];o&&o.destroy(),this.resetInternalLoader(n)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(n,o){const{url:a}=o;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:At.MANIFEST,url:a,deliveryDirectives:null})}onLevelLoading(n,o){const{id:a,level:c,url:d,deliveryDirectives:p}=o;this.load({id:a,level:c,responseType:"text",type:At.LEVEL,url:d,deliveryDirectives:p})}onAudioTrackLoading(n,o){const{id:a,groupId:c,url:d,deliveryDirectives:p}=o;this.load({id:a,groupId:c,level:null,responseType:"text",type:At.AUDIO_TRACK,url:d,deliveryDirectives:p})}onSubtitleTrackLoading(n,o){const{id:a,groupId:c,url:d,deliveryDirectives:p}=o;this.load({id:a,groupId:c,level:null,responseType:"text",type:At.SUBTITLE_TRACK,url:d,deliveryDirectives:p})}load(n){var o;const a=this.hls.config;let c=this.getInternalLoader(n);if(c){const w=c.context;if(w&&w.url===n.url){K.trace("[playlist-loader]: playlist request ongoing");return}K.log(`[playlist-loader]: aborting previous loader for type: ${n.type}`),c.abort()}let d;if(n.type===At.MANIFEST?d=a.manifestLoadPolicy.default:d=ae({},a.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),c=this.createInternalLoader(n),(o=n.deliveryDirectives)!=null&&o.part){let w;if(n.type===At.LEVEL&&n.level!==null?w=this.hls.levels[n.level].details:n.type===At.AUDIO_TRACK&&n.id!==null?w=this.hls.audioTracks[n.id].details:n.type===At.SUBTITLE_TRACK&&n.id!==null&&(w=this.hls.subtitleTracks[n.id].details),w){const I=w.partTarget,T=w.targetduration;if(I&&T){const $=Math.max(I*3,T*.8)*1e3;d=ae({},d,{maxTimeToFirstByteMs:Math.min($,d.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min($,d.maxTimeToFirstByteMs)})}}}const p=d.errorRetry||d.timeoutRetry||{},v={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:p.maxNumRetry||0,retryDelay:p.retryDelayMs||0,maxRetryDelay:p.maxRetryDelayMs||0},E={onSuccess:(w,I,T,$)=>{const H=this.getInternalLoader(T);this.resetInternalLoader(T.type);const V=w.data;if(V.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(w,T,new Error("no EXTM3U delimiter"),$||null,I);return}I.parsing.start=performance.now(),Et.isMediaPlaylist(V)?this.handleTrackOrLevelPlaylist(w,I,T,$||null,H):this.handleMasterPlaylist(w,I,T,$)},onError:(w,I,T,$)=>{this.handleNetworkError(I,T,!1,w,$)},onTimeout:(w,I,T)=>{this.handleNetworkError(I,T,!0,void 0,w)}};c.load(n,v,E)}handleMasterPlaylist(n,o,a,c){const d=this.hls,p=n.data,v=an(n,a),E=Et.parseMasterPlaylist(p,v);if(E.playlistParsingError){this.handleManifestParsingError(n,a,E.playlistParsingError,c,o);return}const{contentSteering:w,levels:I,sessionData:T,sessionKeys:$,startTimeOffset:H,variableList:V}=E;this.variableList=V;const{AUDIO:U=[],SUBTITLES:z,"CLOSED-CAPTIONS":se}=Et.parseMasterPlaylistMedia(p,v,E);U.length&&!U.some(de=>!de.url)&&I[0].audioCodec&&!I[0].attrs.AUDIO&&(K.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),U.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new He({}),bitrate:0,url:""})),d.trigger(P.MANIFEST_LOADED,{levels:I,audioTracks:U,subtitles:z,captions:se,contentSteering:w,url:v,stats:o,networkDetails:c,sessionData:T,sessionKeys:$,startTimeOffset:H,variableList:V})}handleTrackOrLevelPlaylist(n,o,a,c,d){const p=this.hls,{id:v,level:E,type:w}=a,I=an(n,a),T=fe(v)?v:0,$=fe(E)?E:T,H=mr(a),V=Et.parseLevelPlaylist(n.data,I,$,H,T,this.variableList);if(w===At.MANIFEST){const U={attrs:new He({}),bitrate:0,details:V,name:"",url:I};p.trigger(P.MANIFEST_LOADED,{levels:[U],audioTracks:[],url:I,stats:o,networkDetails:c,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}o.parsing.end=performance.now(),a.levelDetails=V,this.handlePlaylistLoaded(V,n,o,a,c,d)}handleManifestParsingError(n,o,a,c,d){this.hls.trigger(P.ERROR,{type:be.NETWORK_ERROR,details:Z.MANIFEST_PARSING_ERROR,fatal:o.type===At.MANIFEST,url:n.url,err:a,error:a,reason:a.message,response:n,context:o,networkDetails:c,stats:d})}handleNetworkError(n,o,a=!1,c,d){let p=`A network ${a?"timeout":"error"+(c?" (status "+c.code+")":"")} occurred while loading ${n.type}`;n.type===At.LEVEL?p+=`: ${n.level} id: ${n.id}`:(n.type===At.AUDIO_TRACK||n.type===At.SUBTITLE_TRACK)&&(p+=` id: ${n.id} group-id: "${n.groupId}"`);const v=new Error(p);K.warn(`[playlist-loader]: ${p}`);let E=Z.UNKNOWN,w=!1;const I=this.getInternalLoader(n);switch(n.type){case At.MANIFEST:E=a?Z.MANIFEST_LOAD_TIMEOUT:Z.MANIFEST_LOAD_ERROR,w=!0;break;case At.LEVEL:E=a?Z.LEVEL_LOAD_TIMEOUT:Z.LEVEL_LOAD_ERROR,w=!1;break;case At.AUDIO_TRACK:E=a?Z.AUDIO_TRACK_LOAD_TIMEOUT:Z.AUDIO_TRACK_LOAD_ERROR,w=!1;break;case At.SUBTITLE_TRACK:E=a?Z.SUBTITLE_TRACK_LOAD_TIMEOUT:Z.SUBTITLE_LOAD_ERROR,w=!1;break}I&&this.resetInternalLoader(n.type);const T={type:be.NETWORK_ERROR,details:E,fatal:w,url:n.url,loader:I,context:n,error:v,networkDetails:o,stats:d};if(c){const $=o?.url||n.url;T.response=xe({url:$,data:void 0},c)}this.hls.trigger(P.ERROR,T)}handlePlaylistLoaded(n,o,a,c,d,p){const v=this.hls,{type:E,level:w,id:I,groupId:T,deliveryDirectives:$}=c,H=an(o,c),V=mr(c),U=typeof c.level=="number"&&V===bt.MAIN?w:void 0;if(!n.fragments.length){const se=new Error("No Segments found in Playlist");v.trigger(P.ERROR,{type:be.NETWORK_ERROR,details:Z.LEVEL_EMPTY_ERROR,fatal:!1,url:H,error:se,reason:se.message,response:o,context:c,level:U,parent:V,networkDetails:d,stats:a});return}n.targetduration||(n.playlistParsingError=new Error("Missing Target Duration"));const z=n.playlistParsingError;if(z){v.trigger(P.ERROR,{type:be.NETWORK_ERROR,details:Z.LEVEL_PARSING_ERROR,fatal:!1,url:H,error:z,reason:z.message,response:o,context:c,level:U,parent:V,networkDetails:d,stats:a});return}switch(n.live&&p&&(p.getCacheAge&&(n.ageHeader=p.getCacheAge()||0),(!p.getCacheAge||isNaN(n.ageHeader))&&(n.ageHeader=0)),E){case At.MANIFEST:case At.LEVEL:v.trigger(P.LEVEL_LOADED,{details:n,level:U||0,id:I||0,stats:a,networkDetails:d,deliveryDirectives:$});break;case At.AUDIO_TRACK:v.trigger(P.AUDIO_TRACK_LOADED,{details:n,id:I||0,groupId:T||"",stats:a,networkDetails:d,deliveryDirectives:$});break;case At.SUBTITLE_TRACK:v.trigger(P.SUBTITLE_TRACK_LOADED,{details:n,id:I||0,groupId:T||"",stats:a,networkDetails:d,deliveryDirectives:$});break}}}function hi(m,n){let o;try{o=new Event("addtrack")}catch{o=document.createEvent("Event"),o.initEvent("addtrack",!1,!1)}o.track=m,n.dispatchEvent(o)}function lo(m,n){const o=m.mode;if(o==="disabled"&&(m.mode="hidden"),m.cues&&!m.cues.getCueById(n.id))try{if(m.addCue(n),!m.cues.getCueById(n.id))throw new Error(`addCue is failed for: ${n}`)}catch(a){K.debug(`[texttrack-utils]: ${a}`);const c=new self.TextTrackCue(n.startTime,n.endTime,n.text);c.id=n.id,m.addCue(c)}o==="disabled"&&(m.mode=o)}function Qn(m){const n=m.mode;if(n==="disabled"&&(m.mode="hidden"),m.cues)for(let o=m.cues.length;o--;)m.removeCue(m.cues[o]);n==="disabled"&&(m.mode=n)}function Vi(m,n,o,a){const c=m.mode;if(c==="disabled"&&(m.mode="hidden"),m.cues&&m.cues.length>0){const d=_i(m.cues,n,o);for(let p=0;p<d.length;p++)(!a||a(d[p]))&&m.removeCue(d[p])}c==="disabled"&&(m.mode=c)}function is(m,n){if(n<m[0].startTime)return 0;const o=m.length-1;if(n>m[o].endTime)return-1;let a=0,c=o;for(;a<=c;){const d=Math.floor((c+a)/2);if(n<m[d].startTime)c=d-1;else if(n>m[d].startTime&&a<o)a=d+1;else return d}return m[a].startTime-n<n-m[c].startTime?a:c}function _i(m,n,o){const a=[],c=is(m,n);if(c>-1)for(let d=c,p=m.length;d<p;d++){const v=m[d];if(v.startTime>=n&&v.endTime<=o)a.push(v);else if(v.startTime>o)return a}return a}var xn={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const Ds=.25;function fi(){if(!(typeof self>"u"))return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const Po=(()=>{const m=fi();try{new m(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Mo(m,n){return m.getTime()/1e3-n}function uo(m){return Uint8Array.from(m.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class os{constructor(n){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=n,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:n}=this;n.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(P.MANIFEST_LOADING,this.onManifestLoading,this),n.on(P.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),n.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),n.on(P.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:n}=this;n.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(P.MANIFEST_LOADING,this.onManifestLoading,this),n.off(P.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),n.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),n.off(P.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(n,o){this.media=o.media}onMediaDetaching(){!this.id3Track||(Qn(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(n){const o=this.getID3Track(n.textTracks);return o.mode="hidden",o}getID3Track(n){if(!!this.media){for(let o=0;o<n.length;o++){const a=n[o];if(a.kind==="metadata"&&a.label==="id3")return hi(a,this.media),a}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(n,o){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:c}}}=this;if(!a&&!c)return;const{samples:d}=o;this.id3Track||(this.id3Track=this.createTrack(this.media));const p=fi();for(let v=0;v<d.length;v++){const E=d[v].type;if(E===xn.emsg&&!a||!c)continue;const w=yr(d[v].data);if(w){const I=d[v].pts;let T=I+d[v].duration;T>Po&&(T=Po),T-I<=0&&(T=I+Ds);for(let H=0;H<w.length;H++){const V=w[H];if(!Qt(V)){this.updateId3CueEnds(I);const U=new p(I,T,"");U.value=V,E&&(U.type=E),this.id3Track.addCue(U)}}}}}updateId3CueEnds(n){var o;const a=(o=this.id3Track)==null?void 0:o.cues;if(a)for(let c=a.length;c--;){const d=a[c];d.startTime<n&&d.endTime===Po&&(d.endTime=n)}}onBufferFlushing(n,{startOffset:o,endOffset:a,type:c}){const{id3Track:d,hls:p}=this;if(!p)return;const{config:{enableEmsgMetadataCues:v,enableID3MetadataCues:E}}=p;if(d&&(v||E)){let w;c==="audio"?w=I=>I.type===xn.audioId3&&E:c==="video"?w=I=>I.type===xn.emsg&&v:w=I=>I.type===xn.audioId3&&E||I.type===xn.emsg&&v,Vi(d,o,a,w)}}onLevelUpdated(n,{details:o}){if(!this.media||!o.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:a,id3Track:c}=this,{dateRanges:d}=o,p=Object.keys(d);if(c){const I=Object.keys(a).filter(T=>!p.includes(T));for(let T=I.length;T--;){const $=I[T];Object.keys(a[$].cues).forEach(H=>{c.removeCue(a[$].cues[H])}),delete a[$]}}const v=o.fragments[o.fragments.length-1];if(p.length===0||!fe(v?.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const E=v.programDateTime/1e3-v.start,w=fi();for(let I=0;I<p.length;I++){const T=p[I],$=d[T],H=a[T],V=H?.cues||{};let U=H?.durationKnown||!1;const z=Mo($.startDate,E);let se=Po;const Ee=$.endDate;if(Ee)se=Mo(Ee,E),U=!0;else if($.endOnNext&&!U){const ke=p.reduce((Ie,it)=>{const $e=d[it];return $e.class===$.class&&$e.id!==it&&$e.startDate>$.startDate&&Ie.push($e),Ie},[]).sort((Ie,it)=>Ie.startDate.getTime()-it.startDate.getTime())[0];ke&&(se=Mo(ke.startDate,E),U=!0)}const de=Object.keys($.attr);for(let ke=0;ke<de.length;ke++){const Ie=de[ke];if(!Qe(Ie))continue;let it=V[Ie];if(it)U&&!H.durationKnown&&(it.endTime=se);else{let $e=$.attr[Ie];it=new w(z,se,""),It(Ie)&&($e=uo($e)),it.value={key:Ie,data:$e},it.type=xn.dateRange,it.id=T,this.id3Track.addCue(it),V[Ie]=it}}a[T]={cues:V,dateRange:$,durationKnown:U}}}}class ji{constructor(n){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=n,this.config=n.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:n,levelDetails:o}=this;return n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:o?n.liveMaxLatencyDurationCount*o.targetduration:0}get targetLatency(){const{levelDetails:n}=this;if(n===null)return null;const{holdBack:o,partHoldBack:a,targetduration:c}=n,{liveSyncDuration:d,liveSyncDurationCount:p,lowLatencyMode:v}=this.config,E=this.hls.userConfig;let w=v&&a||o;(E.liveSyncDuration||E.liveSyncDurationCount||w===0)&&(w=d!==void 0?d:p*c);const I=c,T=1;return w+Math.min(this.stallCount*T,I)}get liveSyncPosition(){const n=this.estimateLiveEdge(),o=this.targetLatency,a=this.levelDetails;if(n===null||o===null||a===null)return null;const c=a.edge,d=n-o-this.edgeStalled,p=c-a.totalduration,v=c-(this.config.lowLatencyMode&&a.partTarget||a.targetduration);return Math.min(Math.max(p,d),v)}get drift(){const{levelDetails:n}=this;return n===null?1:n.drift}get edgeStalled(){const{levelDetails:n}=this;if(n===null)return 0;const o=(this.config.lowLatencyMode&&n.partTarget||n.targetduration)*3;return Math.max(n.age-o,0)}get forwardBufferLength(){const{media:n,levelDetails:o}=this;if(!n||!o)return 0;const a=n.buffered.length;return(a?n.buffered.end(a-1):o.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(P.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(P.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(P.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(P.ERROR,this.onError,this)}onMediaAttached(n,o){this.media=o.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(n,{details:o}){this.levelDetails=o,o.advanced&&this.timeupdate(),!o.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(n,o){var a;o.details===Z.BUFFER_STALLED_ERROR&&(this.stallCount++,(a=this.levelDetails)!=null&&a.live&&K.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:n,levelDetails:o}=this;if(!n||!o)return;this.currentTime=n.currentTime;const a=this.computeLatency();if(a===null)return;this._latency=a;const{lowLatencyMode:c,maxLiveSyncPlaybackRate:d}=this.config;if(!c||d===1)return;const p=this.targetLatency;if(p===null)return;const v=a-p,E=Math.min(this.maxLatency,p+o.targetduration),w=v<E;if(o.live&&w&&v>.05&&this.forwardBufferLength>1){const I=Math.min(2,Math.max(1,d)),T=Math.round(2/(1+Math.exp(-.75*v-this.edgeStalled))*20)/20;n.playbackRate=Math.min(I,Math.max(1,T))}else n.playbackRate!==1&&n.playbackRate!==0&&(n.playbackRate=1)}estimateLiveEdge(){const{levelDetails:n}=this;return n===null?null:n.edge+n.age}computeLatency(){const n=this.estimateLiveEdge();return n===null?null:n-this.currentTime}}const ss=["NONE","TYPE-0","TYPE-1",null];var ei={No:"",Yes:"YES",v2:"v2"};function ti(m,n){const{canSkipUntil:o,canSkipDateRanges:a,endSN:c}=m,d=n!==void 0?n-c:0;return o&&d<o?a?ei.v2:ei.Yes:ei.No}class As{constructor(n,o,a){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=n,this.part=o,this.skip=a}addDirectives(n){const o=new self.URL(n);return this.msn!==void 0&&o.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&o.searchParams.set("_HLS_part",this.part.toString()),this.skip&&o.searchParams.set("_HLS_skip",this.skip),o.href}}class Ui{constructor(n){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[n.url],this._attrs=[n.attrs],this.bitrate=n.bitrate,n.details&&(this.details=n.details),this.id=n.id||0,this.name=n.name,this.width=n.width||0,this.height=n.height||0,this.audioCodec=n.audioCodec,this.videoCodec=n.videoCodec,this.unknownCodecs=n.unknownCodecs,this.codecSet=[n.videoCodec,n.audioCodec].filter(o=>o).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(n){const o=n%this.url.length;this._urlId!==o&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=o)}get audioGroupId(){var n;return(n=this.audioGroupIds)==null?void 0:n[this.urlId]}get textGroupId(){var n;return(n=this.textGroupIds)==null?void 0:n[this.urlId]}addFallback(n){this.url.push(n.url),this._attrs.push(n.attrs)}}function Oo(m,n){const o=n.startPTS;if(fe(o)){let a=0,c;n.sn>m.sn?(a=o-m.start,c=m):(a=m.start-o,c=n),c.duration!==a&&(c.duration=a)}else n.sn>m.sn?m.cc===n.cc&&m.minEndPTS?n.start=m.start+(m.minEndPTS-m.start):n.start=m.start+m.duration:n.start=Math.max(m.start-n.duration,0)}function pi(m,n,o,a,c,d){a-o<=0&&(K.warn("Fragment should have a positive duration",n),a=o+n.duration,d=c+n.duration);let v=o,E=a;const w=n.startPTS,I=n.endPTS;if(fe(w)){const z=Math.abs(w-o);fe(n.deltaPTS)?n.deltaPTS=Math.max(z,n.deltaPTS):n.deltaPTS=z,v=Math.max(o,w),o=Math.min(o,w),c=Math.min(c,n.startDTS),E=Math.min(a,I),a=Math.max(a,I),d=Math.max(d,n.endDTS)}const T=o-n.start;n.start!==0&&(n.start=o),n.duration=a-n.start,n.startPTS=o,n.maxStartPTS=v,n.startDTS=c,n.endPTS=a,n.minEndPTS=E,n.endDTS=d;const $=n.sn;if(!m||$<m.startSN||$>m.endSN)return 0;let H;const V=$-m.startSN,U=m.fragments;for(U[V]=n,H=V;H>0;H--)Oo(U[H],U[H-1]);for(H=V;H<U.length-1;H++)Oo(U[H],U[H+1]);return m.fragmentHint&&Oo(U[U.length-1],m.fragmentHint),m.PTSKnown=m.alignedSliding=!0,T}function ua(m,n){let o=null;const a=m.fragments;for(let E=a.length-1;E>=0;E--){const w=a[E].initSegment;if(w){o=w;break}}m.fragmentHint&&delete m.fragmentHint.endPTS;let c=0,d;if(ls(m,n,(E,w)=>{E.relurl&&(c=E.cc-w.cc),fe(E.startPTS)&&fe(E.endPTS)&&(w.start=w.startPTS=E.startPTS,w.startDTS=E.startDTS,w.maxStartPTS=E.maxStartPTS,w.endPTS=E.endPTS,w.endDTS=E.endDTS,w.minEndPTS=E.minEndPTS,w.duration=E.endPTS-E.startPTS,w.duration&&(d=w),n.PTSKnown=n.alignedSliding=!0),w.elementaryStreams=E.elementaryStreams,w.loader=E.loader,w.stats=E.stats,w.urlId=E.urlId,E.initSegment&&(w.initSegment=E.initSegment,o=E.initSegment)}),o&&(n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments).forEach(w=>{var I;(!w.initSegment||w.initSegment.relurl===((I=o)==null?void 0:I.relurl))&&(w.initSegment=o)}),n.skippedSegments)if(n.deltaUpdateFailed=n.fragments.some(E=>!E),n.deltaUpdateFailed){K.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let E=n.skippedSegments;E--;)n.fragments.shift();n.startSN=n.fragments[0].sn,n.startCC=n.fragments[0].cc}else n.canSkipDateRanges&&(n.dateRanges=Bo(m.dateRanges,n.dateRanges,n.recentlyRemovedDateranges));const p=n.fragments;if(c){K.warn("discontinuity sliding from playlist, take drift into account");for(let E=0;E<p.length;E++)p[E].cc+=c}n.skippedSegments&&(n.startCC=n.fragments[0].cc),as(m.partList,n.partList,(E,w)=>{w.elementaryStreams=E.elementaryStreams,w.stats=E.stats}),d?pi(n,d,d.startPTS,d.endPTS,d.startDTS,d.endDTS):ir(m,n),p.length&&(n.totalduration=n.edge-p[0].start),n.driftStartTime=m.driftStartTime,n.driftStart=m.driftStart;const v=n.advancedDateTime;if(n.advanced&&v){const E=n.edge;n.driftStart||(n.driftStartTime=v,n.driftStart=E),n.driftEndTime=v,n.driftEnd=E}else n.driftEndTime=m.driftEndTime,n.driftEnd=m.driftEnd,n.advancedDateTime=m.advancedDateTime}function Bo(m,n,o){const a=ae({},m);return o&&o.forEach(c=>{delete a[c]}),Object.keys(n).forEach(c=>{const d=new yt(n[c].attr,a[c]);d.isValid?a[c]=d:K.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(n[c].attr)}"`)}),a}function as(m,n,o){if(m&&n){let a=0;for(let c=0,d=m.length;c<=d;c++){const p=m[c],v=n[c+a];p&&v&&p.index===v.index&&p.fragment.sn===v.fragment.sn?o(p,v):a--}}}function ls(m,n,o){const a=n.skippedSegments,c=Math.max(m.startSN,n.startSN)-n.startSN,d=(m.fragmentHint?1:0)+(a?n.endSN:Math.min(m.endSN,n.endSN))-n.startSN,p=n.startSN-m.startSN,v=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments,E=m.fragmentHint?m.fragments.concat(m.fragmentHint):m.fragments;for(let w=c;w<=d;w++){const I=E[p+w];let T=v[w];a&&!T&&w<a&&(T=n.fragments[w]=I),I&&T&&o(I,T)}}function ir(m,n){const o=n.startSN+n.skippedSegments-m.startSN,a=m.fragments;o<0||o>=a.length||Nn(n,a[o].start)}function Nn(m,n){if(n){const o=m.fragments;for(let a=m.skippedSegments;a<o.length;a++)o[a].start+=n;m.fragmentHint&&(m.fragmentHint.start+=n)}}function ca(m,n=1/0){let o=1e3*m.targetduration;if(m.updated){const a=m.fragments,c=4;if(a.length&&o*c>n){const d=a[a.length-1].duration*1e3;d<o&&(o=d)}}else o/=2;return Math.round(o)}function us(m,n,o){if(!(m!=null&&m.details))return null;const a=m.details;let c=a.fragments[n-a.startSN];return c||(c=a.fragmentHint,c&&c.sn===n)?c:n<a.startSN&&o&&o.sn===n?o:null}function da(m,n,o){var a;return m!=null&&m.details?Zi((a=m.details)==null?void 0:a.partList,n,o):null}function Zi(m,n,o){if(m)for(let a=m.length;a--;){const c=m[a];if(c.index===o&&c.fragment.sn===n)return c}return null}function zi(m){switch(m.details){case Z.FRAG_LOAD_TIMEOUT:case Z.KEY_LOAD_TIMEOUT:case Z.LEVEL_LOAD_TIMEOUT:case Z.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function $o(m,n){const o=zi(n);return m.default[`${o?"timeout":"error"}Retry`]}function ri(m,n){const o=m.backoff==="linear"?1:Math.pow(2,n);return Math.min(o*m.retryDelayMs,m.maxRetryDelayMs)}function ha(m){return xe(xe({},m),{errorRetry:null,timeoutRetry:null})}function In(m,n,o,a){return!!m&&n<m.maxNumRetry&&(fa(a)||!!o)}function fa(m){return m===0&&navigator.onLine===!1||!!m&&(m<400||m>499)}const ks={search:function(m,n){let o=0,a=m.length-1,c=null,d=null;for(;o<=a;){c=(o+a)/2|0,d=m[c];const p=n(d);if(p>0)o=c+1;else if(p<0)a=c-1;else return d}return null}};function Si(m,n,o){if(n===null||!Array.isArray(m)||!m.length||!fe(n))return null;const a=m[0].programDateTime;if(n<(a||0))return null;const c=m[m.length-1].endProgramDateTime;if(n>=(c||0))return null;o=o||0;for(let d=0;d<m.length;++d){const p=m[d];if(ho(n,o,p))return p}return null}function Vn(m,n,o=0,a=0){let c=null;if(m?c=n[m.sn-n[0].sn+1]||null:o===0&&n[0].start===0&&(c=n[0]),c&&co(o,a,c)===0)return c;const d=ks.search(n,co.bind(null,o,a));return d&&(d!==m||!c)?d:c}function co(m=0,n=0,o){if(o.start<=m&&o.start+o.duration>m)return 0;const a=Math.min(n,o.duration+(o.deltaPTS?o.deltaPTS:0));return o.start+o.duration-a<=m?1:o.start-a>m&&o.start?-1:0}function ho(m,n,o){const a=Math.min(n,o.duration+(o.deltaPTS?o.deltaPTS:0))*1e3;return(o.endProgramDateTime||0)-a>m}function pa(m,n){return ks.search(m,o=>o.cc<n?1:o.cc>n?-1:0)}const ga=3e5;var fn={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},Cn={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class ma{constructor(n){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=n,this.log=K.log.bind(K,"[info]:"),this.warn=K.warn.bind(K,"[warning]:"),this.error=K.error.bind(K,"[error]:"),this.registerListeners()}registerListeners(){const n=this.hls;n.on(P.ERROR,this.onError,this),n.on(P.MANIFEST_LOADING,this.onManifestLoading,this)}unregisterListeners(){const n=this.hls;!n||(n.off(P.ERROR,this.onError,this),n.off(P.ERROR,this.onErrorOut,this),n.off(P.MANIFEST_LOADING,this.onManifestLoading,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(n){this.playlistError=0}stopLoad(){}getVariantLevelIndex(n){return n?.type===bt.MAIN?n.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onError(n,o){var a;if(o.fatal)return;const c=this.hls,d=o.context;switch(o.details){case Z.FRAG_LOAD_ERROR:case Z.FRAG_LOAD_TIMEOUT:case Z.KEY_LOAD_ERROR:case Z.KEY_LOAD_TIMEOUT:o.errorAction=this.getFragRetryOrSwitchAction(o);return;case Z.FRAG_GAP:case Z.FRAG_PARSING_ERROR:case Z.FRAG_DECRYPT_ERROR:{o.errorAction=this.getFragRetryOrSwitchAction(o),o.errorAction.action=fn.SendAlternateToPenaltyBox;return}case Z.LEVEL_EMPTY_ERROR:case Z.LEVEL_PARSING_ERROR:{var p,v;const E=o.parent===bt.MAIN?o.level:c.loadLevel;o.details===Z.LEVEL_EMPTY_ERROR&&!!((p=o.context)!=null&&(v=p.levelDetails)!=null&&v.live)?o.errorAction=this.getPlaylistRetryOrSwitchAction(o,E):(o.levelRetry=!1,o.errorAction=this.getLevelSwitchAction(o,E))}return;case Z.LEVEL_LOAD_ERROR:case Z.LEVEL_LOAD_TIMEOUT:typeof d?.level=="number"&&(o.errorAction=this.getPlaylistRetryOrSwitchAction(o,d.level));return;case Z.AUDIO_TRACK_LOAD_ERROR:case Z.AUDIO_TRACK_LOAD_TIMEOUT:case Z.SUBTITLE_LOAD_ERROR:case Z.SUBTITLE_TRACK_LOAD_TIMEOUT:if(d){const E=c.levels[c.loadLevel];if(E&&(d.type===At.AUDIO_TRACK&&d.groupId===E.audioGroupId||d.type===At.SUBTITLE_TRACK&&d.groupId===E.textGroupId)){o.errorAction=this.getPlaylistRetryOrSwitchAction(o,c.loadLevel),o.errorAction.action=fn.SendAlternateToPenaltyBox,o.errorAction.flags=Cn.MoveAllAlternatesMatchingHost;return}}return;case Z.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const E=c.levels[c.loadLevel],w=E?.attrs["HDCP-LEVEL"];w&&(o.errorAction={action:fn.SendAlternateToPenaltyBox,flags:Cn.MoveAllAlternatesMatchingHDCP,hdcpLevel:w})}return;case Z.BUFFER_ADD_CODEC_ERROR:case Z.REMUX_ALLOC_ERROR:o.errorAction=this.getLevelSwitchAction(o,(a=o.level)!=null?a:c.loadLevel);return;case Z.INTERNAL_EXCEPTION:case Z.BUFFER_APPENDING_ERROR:case Z.BUFFER_APPEND_ERROR:case Z.BUFFER_FULL_ERROR:case Z.LEVEL_SWITCH_ERROR:case Z.BUFFER_STALLED_ERROR:case Z.BUFFER_SEEK_OVER_HOLE:case Z.BUFFER_NUDGE_ON_STALL:o.errorAction={action:fn.DoNothing,flags:Cn.None};return}if(o.type===be.KEY_SYSTEM_ERROR){const E=this.getVariantLevelIndex(o.frag);o.levelRetry=!1,o.errorAction=this.getLevelSwitchAction(o,E);return}}getPlaylistRetryOrSwitchAction(n,o){var a,c;const d=this.hls,p=$o(d.config.playlistLoadPolicy,n),v=this.playlistError++,E=(a=n.response)==null?void 0:a.code;return In(p,v,zi(n),E)?{action:fn.RetryRequest,flags:Cn.None,retryConfig:p,retryCount:v}:(c=n.context)!=null&&c.deliveryDirectives?{action:fn.DoNothing,flags:Cn.None,retryConfig:p||{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},retryCount:v}:this.getLevelSwitchAction(n,o)}getFragRetryOrSwitchAction(n){const o=this.hls,a=this.getVariantLevelIndex(n.frag),c=o.levels[a],{fragLoadPolicy:d,keyLoadPolicy:p}=o.config,v=$o(n.details.startsWith("key")?p:d,n),E=o.levels.reduce((T,$)=>T+$.fragmentError,0);if(c){var w;n.details!==Z.FRAG_GAP&&c.fragmentError++;const T=(w=n.response)==null?void 0:w.code;if(In(v,E,zi(n),T))return{action:fn.RetryRequest,flags:Cn.None,retryConfig:v,retryCount:E}}const I=this.getLevelSwitchAction(n,a);return v&&(I.retryConfig=v,I.retryCount=E),I}getLevelSwitchAction(n,o){const a=this.hls;o==null&&(o=a.loadLevel);const c=this.hls.levels[o];if(c&&(c.loadError++,a.autoLevelEnabled)){var d,p;let v=-1;const E=a.levels,w=(d=n.frag)==null?void 0:d.type,{type:I,groupId:T}=(p=n.context)!=null?p:{};for(let $=E.length;$--;){const H=($+a.loadLevel)%E.length;if(H!==a.loadLevel&&E[H].loadError===0){const V=E[H];if(n.details===Z.FRAG_GAP&&n.frag){const U=E[H].details;if(U){const z=Vn(n.frag,U.fragments,n.frag.start);if(z!=null&&z.gap)continue}}else{if(I===At.AUDIO_TRACK&&T===V.audioGroupId||I===At.SUBTITLE_TRACK&&T===V.textGroupId)continue;if(w===bt.AUDIO&&c.audioGroupId===V.audioGroupId||w===bt.SUBTITLE&&c.textGroupId===V.textGroupId)continue}v=H;break}}if(v>-1&&a.loadLevel!==v)return n.levelRetry=!0,{action:fn.SendAlternateToPenaltyBox,flags:Cn.None,nextAutoLevel:v}}return{action:fn.SendAlternateToPenaltyBox,flags:Cn.MoveAllAlternatesMatchingHost}}onErrorOut(n,o){var a;switch((a=o.errorAction)==null?void 0:a.action){case fn.DoNothing:break;case fn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(o),!o.errorAction.resolved&&o.details!==Z.FRAG_GAP&&(o.fatal=!0);break}if(o.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(n){const o=this.hls,a=n.errorAction;if(!a)return;const{flags:c,hdcpLevel:d,nextAutoLevel:p}=a;switch(c){case Cn.None:this.switchLevel(n,p);break;case Cn.MoveAllAlternatesMatchingHost:a.resolved||(a.resolved=this.redundantFailover(n));break;case Cn.MoveAllAlternatesMatchingHDCP:d&&(o.maxHdcpLevel=ss[ss.indexOf(d)-1],a.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${o.maxHdcpLevel}" or lower`);break}a.resolved||this.switchLevel(n,p)}switchLevel(n,o){o!==void 0&&n.errorAction&&(this.warn(`switching to level ${o} after ${n.details}`),this.hls.nextAutoLevel=o,n.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(n){const{hls:o,penalizedRenditions:a}=this,c=n.parent===bt.MAIN?n.level:o.loadLevel,d=o.levels[c],p=d.url.length,v=n.frag?n.frag.urlId:d.urlId;d.urlId===v&&(!n.frag||d.details)&&this.penalizeRendition(d,n);for(let E=1;E<p;E++){const w=(v+E)%p,I=a[w];if(!I||Ps(I,n,a[v]))return this.warn(`Switching to Redundant Stream ${w+1}/${p}: "${d.url[w]}" after ${n.details}`),this.playlistError=0,o.levels.forEach(T=>{T.urlId=w}),o.nextLoadLevel=c,!0}return!1}penalizeRendition(n,o){const{penalizedRenditions:a}=this,c=a[n.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};c.lastErrorPerfMs=performance.now(),c.errors.push(o),c.details=n.details,a[n.urlId]=c}}function Ps(m,n,o){if(performance.now()-m.lastErrorPerfMs>ga)return!0;const a=m.details;if(n.details===Z.FRAG_GAP&&a&&n.frag){const c=n.frag.start,d=Vn(null,a.fragments,c);if(d&&!d.gap)return!0}if(o&&m.errors.length<o.errors.length){const c=m.errors[m.errors.length-1];if(a&&c.frag&&n.frag&&Math.abs(c.frag.start-n.frag.start)>a.targetduration*3)return!0}return!1}class fo{constructor(n,o){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=K.log.bind(K,`${o}:`),this.warn=K.warn.bind(K,`${o}:`),this.hls=n}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(n,o){const a=o?.renditionReports;if(a){let c=-1;for(let d=0;d<a.length;d++){const p=a[d];let v;try{v=new self.URL(p.URI,o.url).href}catch(E){K.warn(`Could not construct new URL for Rendition Report: ${E}`),v=p.URI||""}if(v===n){c=d;break}else v===n.substring(0,v.length)&&(c=d)}if(c!==-1){const d=a[c],p=parseInt(d["LAST-MSN"])||o?.lastPartSn;let v=parseInt(d["LAST-PART"])||o?.lastPartIndex;if(this.hls.config.lowLatencyMode){const E=Math.min(o.age-o.partTarget,o.targetduration);v>=0&&E>o.partTarget&&(v+=1)}return new As(p,v>=0?v:void 0,ei.No)}}}loadPlaylist(n){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(n){return this.canLoad&&!!n&&!!n.url&&(!n.details||n.details.live)}shouldReloadPlaylist(n){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(n)}playlistLoaded(n,o,a){const{details:c,stats:d}=o,p=self.performance.now(),v=d.loading.first?Math.max(0,p-d.loading.first):0;if(c.advancedDateTime=Date.now()-v,c.live||a!=null&&a.live){if(c.reloaded(a),a&&this.log(`live playlist ${n} ${c.advanced?"REFRESHED "+c.lastPartSn+"-"+c.lastPartIndex:"MISSED"}`),a&&c.fragments.length>0&&ua(a,c),!this.canLoad||!c.live)return;let E,w,I;if(c.canBlockReload&&c.endSN&&c.advanced){const z=this.hls.config.lowLatencyMode,se=c.lastPartSn,Ee=c.endSN,de=c.lastPartIndex,ke=de!==-1,Ie=se===Ee,it=z?0:de;ke?(w=Ie?Ee+1:se,I=Ie?it:de+1):w=Ee+1;const $e=c.age,ot=$e+c.ageHeader;let ut=Math.min(ot-c.partTarget,c.targetduration*1.5);if(ut>0){if(a&&ut>a.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${a.tuneInGoal} to: ${ut} with playlist age: ${c.age}`),ut=0;else{const Oe=Math.floor(ut/c.targetduration);w+=Oe,I!==void 0&&(I+=Math.round(ut%c.targetduration/c.partTarget)),this.log(`CDN Tune-in age: ${c.ageHeader}s last advanced ${$e.toFixed(2)}s goal: ${ut} skip sn ${Oe} to part ${I}`)}c.tuneInGoal=ut}if(E=this.getDeliveryDirectives(c,o.deliveryDirectives,w,I),z||!Ie){this.loadPlaylist(E);return}}else c.canBlockReload&&(E=this.getDeliveryDirectives(c,o.deliveryDirectives,w,I));const T=this.hls.mainForwardBufferInfo,$=T?T.end-T.len:0,H=(c.edge-$)*1e3,V=ca(c,H);c.updated&&p>this.requestScheduled+V&&(this.requestScheduled=d.loading.start),w!==void 0&&c.canBlockReload?this.requestScheduled=d.loading.first+V-(c.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+V<p?this.requestScheduled=p:this.requestScheduled-p<=0&&(this.requestScheduled+=V);let U=this.requestScheduled-p;U=Math.max(0,U),this.log(`reload live playlist ${n} in ${Math.round(U)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(E),U)}else this.clearTimer()}getDeliveryDirectives(n,o,a,c){let d=ti(n,a);return o!=null&&o.skip&&n.deltaUpdateFailed&&(a=o.msn,c=o.part,d=ei.No),new As(a,c,d)}checkRetry(n){const o=n.details,a=zi(n),c=n.errorAction,{action:d,retryCount:p=0,retryConfig:v}=c||{},E=d===fn.RetryRequest&&!!c&&!!v;if(E){var w;if(this.requestScheduled=-1,a&&(w=n.context)!=null&&w.deliveryDirectives)this.warn(`Retrying playlist loading ${p+1}/${v.maxNumRetry} after "${o}" without delivery-directives`),this.loadPlaylist();else{const I=ri(v,p);this.timer=self.setTimeout(()=>this.loadPlaylist(),I),this.warn(`Retrying playlist loading ${p+1}/${v.maxNumRetry} after "${o}" in ${I}ms`)}n.levelRetry=!0,c.resolved=!0}return E}}let gi;class cs extends fo{constructor(n,o){super(n,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=o,this._registerListeners()}_registerListeners(){const{hls:n}=this;n.on(P.MANIFEST_LOADING,this.onManifestLoading,this),n.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),n.on(P.LEVEL_LOADED,this.onLevelLoaded,this),n.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),n.on(P.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.on(P.FRAG_LOADED,this.onFragLoaded,this),n.on(P.ERROR,this.onError,this)}_unregisterListeners(){const{hls:n}=this;n.off(P.MANIFEST_LOADING,this.onManifestLoading,this),n.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),n.off(P.LEVEL_LOADED,this.onLevelLoaded,this),n.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),n.off(P.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.off(P.FRAG_LOADED,this.onFragLoaded,this),n.off(P.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach(o=>{o.loadError=0,o.fragmentError=0}),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(n,o){this.resetLevels()}onManifestLoaded(n,o){const a=[],c={};let d;o.levels.forEach(p=>{var v;const E=p.attrs;((v=p.audioCodec)==null?void 0:v.indexOf("mp4a.40.34"))!==-1&&(gi||(gi=/chrome|firefox/i.test(navigator.userAgent)),gi&&(p.audioCodec=void 0));const{AUDIO:w,CODECS:I,"FRAME-RATE":T,"PATHWAY-ID":$,RESOLUTION:H,SUBTITLES:V}=E,z=`${`${$||"."}-`}${p.bitrate}-${H}-${T}-${I}`;d=c[z],d?d.addFallback(p):(d=new Ui(p),c[z]=d,a.push(d)),Fo(d,"audio",w),Fo(d,"text",V)}),this.filterAndSortMediaOptions(a,o)}filterAndSortMediaOptions(n,o){let a=[],c=[],d=!1,p=!1,v=!1,E=n.filter(({audioCodec:H,videoCodec:V,width:U,height:z,unknownCodecs:se})=>(d||(d=!!(U&&z)),p||(p=!!V),v||(v=!!H),!(se!=null&&se.length)&&(!H||We(H,"audio"))&&(!V||We(V,"video"))));if((d||p)&&v&&(E=E.filter(({videoCodec:H,width:V,height:U})=>!!H||!!(V&&U))),E.length===0){Promise.resolve().then(()=>{if(this.hls){const H=new Error("no level with compatible codecs found in manifest");this.hls.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:o.url,error:H,reason:H.message})}});return}o.audioTracks&&(a=o.audioTracks.filter(H=>!H.audioCodec||We(H.audioCodec,"audio")),Ms(a)),o.subtitles&&(c=o.subtitles,Ms(c));const w=E.slice(0);E.sort((H,V)=>H.attrs["HDCP-LEVEL"]!==V.attrs["HDCP-LEVEL"]?(H.attrs["HDCP-LEVEL"]||"")>(V.attrs["HDCP-LEVEL"]||"")?1:-1:H.bitrate!==V.bitrate?H.bitrate-V.bitrate:H.attrs["FRAME-RATE"]!==V.attrs["FRAME-RATE"]?H.attrs.decimalFloatingPoint("FRAME-RATE")-V.attrs.decimalFloatingPoint("FRAME-RATE"):H.attrs.SCORE!==V.attrs.SCORE?H.attrs.decimalFloatingPoint("SCORE")-V.attrs.decimalFloatingPoint("SCORE"):d&&H.height!==V.height?H.height-V.height:0);let I=w[0];if(this.steering&&(E=this.steering.filterParsedLevels(E),E.length!==w.length)){for(let H=0;H<w.length;H++)if(w[H].pathwayId===E[0].pathwayId){I=w[H];break}}this._levels=E;for(let H=0;H<E.length;H++)if(E[H]===I){this._firstLevel=H,this.log(`manifest loaded, ${E.length} level(s) found, first bitrate: ${I.bitrate}`);break}const T=v&&!p,$={levels:E,audioTracks:a,subtitleTracks:c,sessionData:o.sessionData,sessionKeys:o.sessionKeys,firstLevel:this._firstLevel,stats:o.stats,audio:v,video:p,altAudio:!T&&a.some(H=>!!H.url)};this.hls.trigger(P.MANIFEST_PARSED,$),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(n){const o=this._levels;if(o.length===0)return;if(n<0||n>=o.length){const I=new Error("invalid level idx"),T=n<0;if(this.hls.trigger(P.ERROR,{type:be.OTHER_ERROR,details:Z.LEVEL_SWITCH_ERROR,level:n,fatal:T,error:I,reason:I.message}),T)return;n=Math.min(n,o.length-1)}const a=this.currentLevelIndex,c=this.currentLevel,d=c?c.attrs["PATHWAY-ID"]:void 0,p=o[n],v=p.attrs["PATHWAY-ID"];if(this.currentLevelIndex=n,this.currentLevel=p,a===n&&p.details&&c&&d===v)return;this.log(`Switching to level ${n}${v?" with Pathway "+v:""} from level ${a}${d?" with Pathway "+d:""}`);const E=ae({},p,{level:n,maxBitrate:p.maxBitrate,attrs:p.attrs,uri:p.uri,urlId:p.urlId});delete E._attrs,delete E._urlId,this.hls.trigger(P.LEVEL_SWITCHING,E);const w=p.details;if(!w||w.live){const I=this.switchParams(p.uri,c?.details);this.loadPlaylist(I)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(n){this.manualLevelIndex=n,this._startLevel===void 0&&(this._startLevel=n),n!==-1&&(this.level=n)}get firstLevel(){return this._firstLevel}set firstLevel(n){this._firstLevel=n}get startLevel(){if(this._startLevel===void 0){const n=this.hls.config.startLevel;return n!==void 0?n:this._firstLevel}else return this._startLevel}set startLevel(n){this._startLevel=n}onError(n,o){o.fatal||!o.context||o.context.type===At.LEVEL&&o.context.level===this.level&&this.checkRetry(o)}onFragLoaded(n,{frag:o}){if(o!==void 0&&o.type===bt.MAIN){const a=this._levels[o.level];a!==void 0&&(a.loadError=0)}}onLevelLoaded(n,o){var a;const{level:c,details:d}=o,p=this._levels[c];if(!p){var v;this.warn(`Invalid level index ${c}`),(v=o.deliveryDirectives)!=null&&v.skip&&(d.deltaUpdateFailed=!0);return}c===this.currentLevelIndex?(p.fragmentError===0&&(p.loadError=0),this.playlistLoaded(c,o,p.details)):(a=o.deliveryDirectives)!=null&&a.skip&&(d.deltaUpdateFailed=!0)}onAudioTrackSwitched(n,o){const a=this.currentLevel;if(!a)return;const c=this.hls.audioTracks[o.id].groupId;if(a.audioGroupIds&&a.audioGroupId!==c){let d=-1;for(let p=0;p<a.audioGroupIds.length;p++)if(a.audioGroupIds[p]===c){d=p;break}d!==-1&&d!==a.urlId&&(a.urlId=d,this.canLoad&&this.startLoad())}}loadPlaylist(n){super.loadPlaylist();const o=this.currentLevelIndex,a=this.currentLevel;if(a&&this.shouldLoadPlaylist(a)){const c=a.urlId;let d=a.uri;if(n)try{d=n.addDirectives(d)}catch(v){this.warn(`Could not construct new URL with HLS Delivery Directives: ${v}`)}const p=a.attrs["PATHWAY-ID"];this.log(`Loading level index ${o}${n?.msn!==void 0?" at sn "+n.msn+" part "+n.part:""} with${p?" Pathway "+p:""} URI ${c+1}/${a.url.length} ${d}`),this.clearTimer(),this.hls.trigger(P.LEVEL_LOADING,{url:d,level:o,id:c,deliveryDirectives:n||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(n){this.level=n,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=n)}removeLevel(n,o){const a=(d,p)=>p!==o,c=this._levels.filter((d,p)=>p!==n?!0:d.url.length>1&&o!==void 0?(d.url=d.url.filter(a),d.audioGroupIds&&(d.audioGroupIds=d.audioGroupIds.filter(a)),d.textGroupIds&&(d.textGroupIds=d.textGroupIds.filter(a)),d.urlId=0,!0):(this.steering&&this.steering.removeLevel(d),!1));this.hls.trigger(P.LEVELS_UPDATED,{levels:c})}onLevelsUpdated(n,{levels:o}){o.forEach((a,c)=>{const{details:d}=a;d!=null&&d.fragments&&d.fragments.forEach(p=>{p.level=c})}),this._levels=o}}function Fo(m,n,o){!o||(n==="audio"?(m.audioGroupIds||(m.audioGroupIds=[]),m.audioGroupIds[m.url.length-1]=o):n==="text"&&(m.textGroupIds||(m.textGroupIds=[]),m.textGroupIds[m.url.length-1]=o))}function Ms(m){const n={};m.forEach(o=>{const a=o.groupId||"";o.id=n[a]=n[a]||0,n[a]++})}var ln={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Os{constructor(n){this.mainFragEntity=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=n,this._registerListeners()}_registerListeners(){const{hls:n}=this;n.on(P.BUFFER_APPENDED,this.onBufferAppended,this),n.on(P.FRAG_BUFFERED,this.onFragBuffered,this),n.on(P.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:n}=this;n.off(P.BUFFER_APPENDED,this.onBufferAppended,this),n.off(P.FRAG_BUFFERED,this.onFragBuffered,this),n.off(P.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.mainFragEntity=this.activeParts=null}getAppendedFrag(n,o){if(o===bt.MAIN){const{mainFragEntity:a,activeParts:c}=this;if(a){if(a&&c)for(let d=c.length;d--;){const p=c[d],v=p?p.end:a.appendedPTS;if(p.start<=n&&v!==null&&n<=v)return d>9&&(this.activeParts=c.slice(d-9)),p}else if(a.body.start<=n&&a.appendedPTS!==null&&n<=a.appendedPTS)return a.body}}return this.getBufferedFrag(n,o)}getBufferedFrag(n,o){const{fragments:a}=this,c=Object.keys(a);for(let d=c.length;d--;){const p=a[c[d]];if(p?.body.type===o&&p.buffered){const v=p.body;if(v.start<=n&&n<=v.end)return v}}return null}detectEvictedFragments(n,o,a){this.timeRanges&&(this.timeRanges[n]=o),Object.keys(this.fragments).forEach(c=>{const d=this.fragments[c];if(!d)return;if(!d.buffered&&!d.loaded){d.body.type===a&&this.removeFragment(d.body);return}const p=d.range[n];!p||p.time.some(v=>{const E=!this.isTimeBuffered(v.startPTS,v.endPTS,o);return E&&this.removeFragment(d.body),E})})}detectPartialFragments(n){const o=this.timeRanges,{frag:a,part:c}=n;if(!o||a.sn==="initSegment")return;const d=ni(a),p=this.fragments[d];!p||(Object.keys(o).forEach(v=>{const E=a.elementaryStreams[v];if(!E)return;const w=o[v],I=c!==null||E.partial===!0;p.range[v]=this.getBufferedTimes(a,c,I,w)}),p.loaded=null,Object.keys(p.range).length?(p.buffered=!0,p.body.endList&&(this.endListFragments[p.body.type]=p)):this.removeFragment(p.body))}fragBuffered(n,o){const a=ni(n);let c=this.fragments[a];!c&&o&&(c=this.fragments[a]={body:n,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},n.gap&&(this.hasGaps=!0)),c&&(c.loaded=null,c.buffered=!0)}getBufferedTimes(n,o,a,c){const d={time:[],partial:a},p=o?o.start:n.start,v=o?o.end:n.end,E=n.minEndPTS||v,w=n.maxStartPTS||p;for(let I=0;I<c.length;I++){const T=c.start(I)-this.bufferPadding,$=c.end(I)+this.bufferPadding;if(w>=T&&E<=$){d.time.push({startPTS:Math.max(p,c.start(I)),endPTS:Math.min(v,c.end(I))});break}else if(p<$&&v>T)d.partial=!0,d.time.push({startPTS:Math.max(p,c.start(I)),endPTS:Math.min(v,c.end(I))});else if(v<=T)break}return d}getPartialFragment(n){let o=null,a,c,d,p=0;const{bufferPadding:v,fragments:E}=this;return Object.keys(E).forEach(w=>{const I=E[w];!I||ds(I)&&(c=I.body.start-v,d=I.body.end+v,n>=c&&n<=d&&(a=Math.min(n-c,d-n),p<=a&&(o=I.body,p=a)))}),o}isEndListAppended(n){const o=this.endListFragments[n];return o!==void 0&&(o.buffered||ds(o))}getState(n){const o=ni(n),a=this.fragments[o];return a?a.buffered?ds(a)?ln.PARTIAL:ln.OK:ln.APPENDING:ln.NOT_LOADED}isTimeBuffered(n,o,a){let c,d;for(let p=0;p<a.length;p++){if(c=a.start(p)-this.bufferPadding,d=a.end(p)+this.bufferPadding,n>=c&&o<=d)return!0;if(o<=c)return!1}return!1}onFragLoaded(n,o){const{frag:a,part:c}=o;if(a.sn==="initSegment"||a.bitrateTest||c)return;const d=ni(a);this.fragments[d]={body:a,appendedPTS:null,loaded:o,buffered:!1,range:Object.create(null)}}onBufferAppended(n,o){const{frag:a,part:c,timeRanges:d}=o;let p=this.mainFragEntity;if(a.type===bt.MAIN){const v=p?p.body:null;if(v!==a){p&&v&&v.sn!==a.sn&&(p.buffered=!0,this.fragments[ni(v)]=p);const E=ni(a);p=this.mainFragEntity=this.fragments[E]||{body:a,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)}}if(c){let E=this.activeParts;E||(this.activeParts=E=[]),E.push(c)}else this.activeParts=null}this.timeRanges=d,Object.keys(d).forEach(v=>{const E=d[v];if(this.detectEvictedFragments(v,E),!c&&p){const w=a.elementaryStreams[v];if(!w)return;for(let I=0;I<E.length;I++){const T=E.end(I);T<=w.endPTS&&T>w.startPTS?p.appendedPTS=Math.max(T,p.appendedPTS||0):p.appendedPTS=w.endPTS}}})}onFragBuffered(n,o){this.detectPartialFragments(o)}hasFragment(n){const o=ni(n);return!!this.fragments[o]}removeFragmentsInRange(n,o,a,c,d){c&&!this.hasGaps||Object.keys(this.fragments).forEach(p=>{const v=this.fragments[p];if(!v)return;const E=v.body;E.type!==a||c&&!E.gap||E.start<o&&E.end>n&&(v.buffered||d)&&this.removeFragment(E)})}removeFragment(n){const o=ni(n);n.stats.loaded=0,n.clearElementaryStreamInfo(),this.mainFragEntity===this.fragments[o]&&(this.mainFragEntity=null),delete this.fragments[o],n.endList&&delete this.endListFragments[n.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.mainFragEntity=null,this.activeParts=null,this.hasGaps=!1}}function ds(m){var n,o;return m.buffered&&(m.body.gap||((n=m.range.video)==null?void 0:n.partial)||((o=m.range.audio)==null?void 0:o.partial))}function ni(m){return`${m.type}_${m.level}_${m.urlId}_${m.sn}`}const hs=Math.pow(2,17);class t1{constructor(n){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=n}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(n,o){const a=n.url;if(!a)return Promise.reject(new jn({type:be.NETWORK_ERROR,details:Z.FRAG_LOAD_ERROR,fatal:!1,frag:n,error:new Error(`Fragment does not have a ${a?"part list":"url"}`),networkDetails:null}));this.abort();const c=this.config,d=c.fLoader,p=c.loader;return new Promise((v,E)=>{if(this.loader&&this.loader.destroy(),n.gap){E(Bs(n));return}const w=this.loader=n.loader=d?new d(c):new p(c),I=va(n),T=ha(c.fragLoadPolicy.default),$={loadPolicy:T,timeout:T.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:n.sn==="initSegment"?1/0:hs};n.stats=w.stats,w.load(I,$,{onSuccess:(H,V,U,z)=>{this.resetLoader(n,w);let se=H.data;U.resetIV&&n.decryptdata&&(n.decryptdata.iv=new Uint8Array(se.slice(0,16)),se=se.slice(16)),v({frag:n,part:null,payload:se,networkDetails:z})},onError:(H,V,U,z)=>{this.resetLoader(n,w),E(new jn({type:be.NETWORK_ERROR,details:Z.FRAG_LOAD_ERROR,fatal:!1,frag:n,response:xe({url:a,data:void 0},H),error:new Error(`HTTP Error ${H.code} ${H.text}`),networkDetails:U,stats:z}))},onAbort:(H,V,U)=>{this.resetLoader(n,w),E(new jn({type:be.NETWORK_ERROR,details:Z.INTERNAL_ABORTED,fatal:!1,frag:n,error:new Error("Aborted"),networkDetails:U,stats:H}))},onTimeout:(H,V,U)=>{this.resetLoader(n,w),E(new jn({type:be.NETWORK_ERROR,details:Z.FRAG_LOAD_TIMEOUT,fatal:!1,frag:n,error:new Error(`Timeout after ${$.timeout}ms`),networkDetails:U,stats:H}))},onProgress:(H,V,U,z)=>{o&&o({frag:n,part:null,payload:U,networkDetails:z})}})})}loadPart(n,o,a){this.abort();const c=this.config,d=c.fLoader,p=c.loader;return new Promise((v,E)=>{if(this.loader&&this.loader.destroy(),n.gap||o.gap){E(Bs(n,o));return}const w=this.loader=n.loader=d?new d(c):new p(c),I=va(n,o),T=ha(c.fragLoadPolicy.default),$={loadPolicy:T,timeout:T.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:hs};o.stats=w.stats,w.load(I,$,{onSuccess:(H,V,U,z)=>{this.resetLoader(n,w),this.updateStatsFromPart(n,o);const se={frag:n,part:o,payload:H.data,networkDetails:z};a(se),v(se)},onError:(H,V,U,z)=>{this.resetLoader(n,w),E(new jn({type:be.NETWORK_ERROR,details:Z.FRAG_LOAD_ERROR,fatal:!1,frag:n,part:o,response:xe({url:I.url,data:void 0},H),error:new Error(`HTTP Error ${H.code} ${H.text}`),networkDetails:U,stats:z}))},onAbort:(H,V,U)=>{n.stats.aborted=o.stats.aborted,this.resetLoader(n,w),E(new jn({type:be.NETWORK_ERROR,details:Z.INTERNAL_ABORTED,fatal:!1,frag:n,part:o,error:new Error("Aborted"),networkDetails:U,stats:H}))},onTimeout:(H,V,U)=>{this.resetLoader(n,w),E(new jn({type:be.NETWORK_ERROR,details:Z.FRAG_LOAD_TIMEOUT,fatal:!1,frag:n,part:o,error:new Error(`Timeout after ${$.timeout}ms`),networkDetails:U,stats:H}))}})})}updateStatsFromPart(n,o){const a=n.stats,c=o.stats,d=c.total;if(a.loaded+=c.loaded,d){const E=Math.round(n.duration/o.duration),w=Math.min(Math.round(a.loaded/d),E),T=(E-w)*Math.round(a.loaded/w);a.total=a.loaded+T}else a.total=Math.max(a.loaded,a.total);const p=a.loading,v=c.loading;p.start?p.first+=v.first-v.start:(p.start=v.start,p.first=v.first),p.end=v.end}resetLoader(n,o){n.loader=null,this.loader===o&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),o.destroy()}}function va(m,n=null){const o=n||m,a={frag:m,part:n,responseType:"arraybuffer",url:o.url,headers:{},rangeStart:0,rangeEnd:0},c=o.byteRangeStartOffset,d=o.byteRangeEndOffset;if(fe(c)&&fe(d)){var p;let v=c,E=d;if(m.sn==="initSegment"&&((p=m.decryptdata)==null?void 0:p.method)==="AES-128"){const w=d-c;w%16&&(E=d+(16-w%16)),c!==0&&(a.resetIV=!0,v=c-16)}a.rangeStart=v,a.rangeEnd=E}return a}function Bs(m,n){const o=new Error(`GAP ${m.gap?"tag":"attribute"} found`),a={type:be.MEDIA_ERROR,details:Z.FRAG_GAP,fatal:!1,frag:m,error:o,networkDetails:null};return n&&(a.part=n),(n||m).stats.aborted=!0,new jn(a)}class jn extends Error{constructor(n){super(n.error.message),this.data=void 0,this.data=n}}class Ca{constructor(n){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=n}abort(){for(const n in this.keyUriToKeyInfo){const o=this.keyUriToKeyInfo[n].loader;o&&o.abort()}}detach(){for(const n in this.keyUriToKeyInfo){const o=this.keyUriToKeyInfo[n];(o.mediaKeySessionContext||o.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[n]}}destroy(){this.detach();for(const n in this.keyUriToKeyInfo){const o=this.keyUriToKeyInfo[n].loader;o&&o.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(n,o=Z.KEY_LOAD_ERROR,a,c,d){return new jn({type:be.NETWORK_ERROR,details:o,fatal:!1,frag:n,response:d,error:a,networkDetails:c})}loadClear(n,o){if(this.emeController&&this.config.emeEnabled){const{sn:a,cc:c}=n;for(let d=0;d<o.length;d++){const p=o[d];if(c<=p.cc&&(a==="initSegment"||p.sn==="initSegment"||a<p.sn)){this.emeController.selectKeySystemFormat(p).then(v=>{p.setKeyFormat(v)});break}}}}load(n){return!n.decryptdata&&n.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(n).then(o=>this.loadInternal(n,o)):this.loadInternal(n)}loadInternal(n,o){var a,c;o&&n.setKeyFormat(o);const d=n.decryptdata;if(!d){const w=new Error(o?`Expected frag.decryptdata to be defined after setting format ${o}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(n,Z.KEY_LOAD_ERROR,w))}const p=d.uri;if(!p)return Promise.reject(this.createKeyLoadError(n,Z.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${p}"`)));let v=this.keyUriToKeyInfo[p];if((a=v)!=null&&a.decryptdata.key)return d.key=v.decryptdata.key,Promise.resolve({frag:n,keyInfo:v});if((c=v)!=null&&c.keyLoadPromise){var E;switch((E=v.mediaKeySessionContext)==null?void 0:E.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return v.keyLoadPromise.then(w=>(d.key=w.keyInfo.decryptdata.key,{frag:n,keyInfo:v}))}}switch(v=this.keyUriToKeyInfo[p]={decryptdata:d,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},d.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return d.keyFormat==="identity"?this.loadKeyHTTP(v,n):this.loadKeyEME(v,n);case"AES-128":return this.loadKeyHTTP(v,n);default:return Promise.reject(this.createKeyLoadError(n,Z.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${d.method}"`)))}}loadKeyEME(n,o){const a={frag:o,keyInfo:n};if(this.emeController&&this.config.emeEnabled){const c=this.emeController.loadKey(a);if(c)return(n.keyLoadPromise=c.then(d=>(n.mediaKeySessionContext=d,a))).catch(d=>{throw n.keyLoadPromise=null,d})}return Promise.resolve(a)}loadKeyHTTP(n,o){const a=this.config,c=a.loader,d=new c(a);return o.keyLoader=n.loader=d,n.keyLoadPromise=new Promise((p,v)=>{const E={keyInfo:n,frag:o,responseType:"arraybuffer",url:n.decryptdata.uri},w=a.keyLoadPolicy.default,I={loadPolicy:w,timeout:w.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},T={onSuccess:($,H,V,U)=>{const{frag:z,keyInfo:se,url:Ee}=V;if(!z.decryptdata||se!==this.keyUriToKeyInfo[Ee])return v(this.createKeyLoadError(z,Z.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),U));se.decryptdata.key=z.decryptdata.key=new Uint8Array($.data),z.keyLoader=null,se.loader=null,p({frag:z,keyInfo:se})},onError:($,H,V,U)=>{this.resetLoader(H),v(this.createKeyLoadError(o,Z.KEY_LOAD_ERROR,new Error(`HTTP Error ${$.code} loading key ${$.text}`),V,xe({url:E.url,data:void 0},$)))},onTimeout:($,H,V)=>{this.resetLoader(H),v(this.createKeyLoadError(o,Z.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),V))},onAbort:($,H,V)=>{this.resetLoader(H),v(this.createKeyLoadError(o,Z.INTERNAL_ABORTED,new Error("key loading aborted"),V))}};d.load(E,I,T)})}resetLoader(n){const{frag:o,keyInfo:a,url:c}=n,d=a.loader;o.keyLoader===d&&(o.keyLoader=null,a.loader=null),delete this.keyUriToKeyInfo[c],d&&d.destroy()}}class r1{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(n){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,n),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}const Ea={length:0,start:()=>0,end:()=>0};class kr{static isBuffered(n,o){try{if(n){const a=kr.getBuffered(n);for(let c=0;c<a.length;c++)if(o>=a.start(c)&&o<=a.end(c))return!0}}catch{}return!1}static bufferInfo(n,o,a){try{if(n){const c=kr.getBuffered(n),d=[];let p;for(p=0;p<c.length;p++)d.push({start:c.start(p),end:c.end(p)});return this.bufferedInfo(d,o,a)}}catch{}return{len:0,start:o,end:o,nextStart:void 0}}static bufferedInfo(n,o,a){o=Math.max(0,o),n.sort(function(w,I){const T=w.start-I.start;return T||I.end-w.end});let c=[];if(a)for(let w=0;w<n.length;w++){const I=c.length;if(I){const T=c[I-1].end;n[w].start-T<a?n[w].end>T&&(c[I-1].end=n[w].end):c.push(n[w])}else c.push(n[w])}else c=n;let d=0,p,v=o,E=o;for(let w=0;w<c.length;w++){const I=c[w].start,T=c[w].end;if(o+a>=I&&o<T)v=I,E=T,d=E-o;else if(o+a<I){p=I;break}}return{len:d,start:v||0,end:E||0,nextStart:p}}static getBuffered(n){try{return n.buffered}catch(o){return K.log("failed to get media.buffered",o),Ea}}}class Ho{constructor(n,o,a,c=0,d=-1,p=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=fs(),this.buffering={audio:fs(),video:fs(),audiovideo:fs()},this.level=n,this.sn=o,this.id=a,this.size=c,this.part=d,this.partial=p}}function fs(){return{start:0,executeStart:0,executeEnd:0,end:0}}function $s(m,n){let o=null;for(let a=0,c=m.length;a<c;a++){const d=m[a];if(d&&d.cc===n){o=d;break}}return o}function Xt(m,n,o){return!!(n.details&&(o.endCC>o.startCC||m&&m.cc<o.startCC))}function Fs(m,n,o=0){const a=m.fragments,c=n.fragments;if(!c.length||!a.length){K.log("No fragments to align");return}const d=$s(a,c[0].cc);if(!d||d&&!d.startPTS){K.log("No frag in previous level to align on");return}return d}function No(m,n){if(m){const o=m.start+n;m.start=m.startPTS=o,m.endPTS=o+m.duration}}function Vo(m,n){const o=n.fragments;for(let a=0,c=o.length;a<c;a++)No(o[a],m);n.fragmentHint&&No(n.fragmentHint,m),n.alignedSliding=!0}function ya(m,n,o){!n||(n1(m,o,n),!o.alignedSliding&&n.details&&i1(o,n.details),!o.alignedSliding&&n.details&&!o.skippedSegments&&ir(n.details,o))}function n1(m,n,o){if(Xt(m,o,n)){const a=Fs(o.details,n);a&&fe(a.start)&&(K.log(`Adjusting PTS using last level due to CC increase within current level ${n.url}`),Vo(a.start,n))}}function i1(m,n){if(!n.fragments.length||!m.hasProgramDateTime||!n.hasProgramDateTime)return;const o=n.fragments[0].programDateTime,a=m.fragments[0].programDateTime,c=(a-o)/1e3+n.fragments[0].start;c&&fe(c)&&(K.log(`Adjusting PTS using programDateTime delta ${a-o}ms, sliding:${c.toFixed(3)} ${m.url} `),Vo(c,m))}function ps(m,n){if(!m.hasProgramDateTime||!n.hasProgramDateTime)return;const o=m.fragments,a=n.fragments;if(!o.length||!a.length)return;const c=Math.round(a.length/2)-1,d=a[c],p=$s(o,d.cc)||o[Math.round(o.length/2)-1],v=d.programDateTime,E=p.programDateTime;if(v===null||E===null)return;const w=(E-v)/1e3-(p.start-d.start);Vo(w,m)}class o1{constructor(n,o){this.subtle=void 0,this.aesIV=void 0,this.subtle=n,this.aesIV=o}decrypt(n,o){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},o,n)}}class s1{constructor(n,o){this.subtle=void 0,this.key=void 0,this.subtle=n,this.key=o}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function Hs(m){const n=m.byteLength,o=n&&new DataView(m.buffer).getUint8(n-1);return o?dr(m,0,n-o):m}class a1{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(n){const o=new DataView(n),a=new Uint32Array(4);for(let c=0;c<4;c++)a[c]=o.getUint32(c*4);return a}initTable(){const n=this.sBox,o=this.invSBox,a=this.subMix,c=a[0],d=a[1],p=a[2],v=a[3],E=this.invSubMix,w=E[0],I=E[1],T=E[2],$=E[3],H=new Uint32Array(256);let V=0,U=0,z=0;for(z=0;z<256;z++)z<128?H[z]=z<<1:H[z]=z<<1^283;for(z=0;z<256;z++){let se=U^U<<1^U<<2^U<<3^U<<4;se=se>>>8^se&255^99,n[V]=se,o[se]=V;const Ee=H[V],de=H[Ee],ke=H[de];let Ie=H[se]*257^se*16843008;c[V]=Ie<<24|Ie>>>8,d[V]=Ie<<16|Ie>>>16,p[V]=Ie<<8|Ie>>>24,v[V]=Ie,Ie=ke*16843009^de*65537^Ee*257^V*16843008,w[se]=Ie<<24|Ie>>>8,I[se]=Ie<<16|Ie>>>16,T[se]=Ie<<8|Ie>>>24,$[se]=Ie,V?(V=Ee^H[H[H[ke^Ee]]],U^=H[H[U]]):V=U=1}}expandKey(n){const o=this.uint8ArrayToUint32Array_(n);let a=!0,c=0;for(;c<o.length&&a;)a=o[c]===this.key[c],c++;if(a)return;this.key=o;const d=this.keySize=o.length;if(d!==4&&d!==6&&d!==8)throw new Error("Invalid aes key size="+d);const p=this.ksRows=(d+6+1)*4;let v,E;const w=this.keySchedule=new Uint32Array(p),I=this.invKeySchedule=new Uint32Array(p),T=this.sBox,$=this.rcon,H=this.invSubMix,V=H[0],U=H[1],z=H[2],se=H[3];let Ee,de;for(v=0;v<p;v++){if(v<d){Ee=w[v]=o[v];continue}de=Ee,v%d===0?(de=de<<8|de>>>24,de=T[de>>>24]<<24|T[de>>>16&255]<<16|T[de>>>8&255]<<8|T[de&255],de^=$[v/d|0]<<24):d>6&&v%d===4&&(de=T[de>>>24]<<24|T[de>>>16&255]<<16|T[de>>>8&255]<<8|T[de&255]),w[v]=Ee=(w[v-d]^de)>>>0}for(E=0;E<p;E++)v=p-E,E&3?de=w[v]:de=w[v-4],E<4||v<=4?I[E]=de:I[E]=V[T[de>>>24]]^U[T[de>>>16&255]]^z[T[de>>>8&255]]^se[T[de&255]],I[E]=I[E]>>>0}networkToHostOrderSwap(n){return n<<24|(n&65280)<<8|(n&16711680)>>8|n>>>24}decrypt(n,o,a){const c=this.keySize+6,d=this.invKeySchedule,p=this.invSBox,v=this.invSubMix,E=v[0],w=v[1],I=v[2],T=v[3],$=this.uint8ArrayToUint32Array_(a);let H=$[0],V=$[1],U=$[2],z=$[3];const se=new Int32Array(n),Ee=new Int32Array(se.length);let de,ke,Ie,it,$e,ot,ut,Oe,Ot,ft,Wt,br,$r,Ur;const Pr=this.networkToHostOrderSwap;for(;o<se.length;){for(Ot=Pr(se[o]),ft=Pr(se[o+1]),Wt=Pr(se[o+2]),br=Pr(se[o+3]),$e=Ot^d[0],ot=br^d[1],ut=Wt^d[2],Oe=ft^d[3],$r=4,Ur=1;Ur<c;Ur++)de=E[$e>>>24]^w[ot>>16&255]^I[ut>>8&255]^T[Oe&255]^d[$r],ke=E[ot>>>24]^w[ut>>16&255]^I[Oe>>8&255]^T[$e&255]^d[$r+1],Ie=E[ut>>>24]^w[Oe>>16&255]^I[$e>>8&255]^T[ot&255]^d[$r+2],it=E[Oe>>>24]^w[$e>>16&255]^I[ot>>8&255]^T[ut&255]^d[$r+3],$e=de,ot=ke,ut=Ie,Oe=it,$r=$r+4;de=p[$e>>>24]<<24^p[ot>>16&255]<<16^p[ut>>8&255]<<8^p[Oe&255]^d[$r],ke=p[ot>>>24]<<24^p[ut>>16&255]<<16^p[Oe>>8&255]<<8^p[$e&255]^d[$r+1],Ie=p[ut>>>24]<<24^p[Oe>>16&255]<<16^p[$e>>8&255]<<8^p[ot&255]^d[$r+2],it=p[Oe>>>24]<<24^p[$e>>16&255]<<16^p[ot>>8&255]<<8^p[ut&255]^d[$r+3],Ee[o]=Pr(de^H),Ee[o+1]=Pr(it^V),Ee[o+2]=Pr(Ie^U),Ee[o+3]=Pr(ke^z),H=Ot,V=ft,U=Wt,z=br,o=o+4}return Ee.buffer}}const wa=16;class gs{constructor(n,{removePKCS7Padding:o=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=n.enableSoftwareAES,this.removePKCS7Padding=o,o)try{const a=self.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:n,remainderData:o}=this;if(!n||o)return this.reset(),null;const a=new Uint8Array(n);return this.reset(),this.removePKCS7Padding?Hs(a):a}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(n,o,a){return this.useSoftware?new Promise((c,d)=>{this.softwareDecrypt(new Uint8Array(n),o,a);const p=this.flush();p?c(p.buffer):d(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(n),o,a)}softwareDecrypt(n,o,a){const{currentIV:c,currentResult:d,remainderData:p}=this;this.logOnce("JS AES decrypt"),p&&(n=Jn(p,n),this.remainderData=null);const v=this.getValidChunk(n);if(!v.length)return null;c&&(a=c);let E=this.softwareDecrypter;E||(E=this.softwareDecrypter=new a1),E.expandKey(o);const w=d;return this.currentResult=E.decrypt(v.buffer,0,a),this.currentIV=dr(v,-16).buffer,w||null}webCryptoDecrypt(n,o,a){const c=this.subtle;return(this.key!==o||!this.fastAesKey)&&(this.key=o,this.fastAesKey=new s1(c,o)),this.fastAesKey.expandKey().then(d=>c?(this.logOnce("WebCrypto AES decrypt"),new o1(c,new Uint8Array(a)).decrypt(n.buffer,d)):Promise.reject(new Error("web crypto not initialized"))).catch(d=>(K.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${d.name}: ${d.message}`),this.onWebCryptoError(n,o,a)))}onWebCryptoError(n,o,a){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(n,o,a);const c=this.flush();if(c)return c.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(n){let o=n;const a=n.length-n.length%wa;return a!==n.length&&(o=dr(n,0,a),this.remainderData=dr(n,a)),o}logOnce(n){!this.logEnabled||(K.log(`[decrypter]: ${n}`),this.logEnabled=!1)}}const ba={toString:function(m){let n="";const o=m.length;for(let a=0;a<o;a++)n+=`[${m.start(a).toFixed(3)}-${m.end(a).toFixed(3)}]`;return n}},Be={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Gi extends r1{constructor(n,o,a,c,d){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Be.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=d,this.logPrefix=c,this.log=K.log.bind(K,`${c}:`),this.warn=K.warn.bind(K,`${c}:`),this.hls=n,this.fragmentLoader=new t1(n.config),this.keyLoader=a,this.fragmentTracker=o,this.config=n.config,this.decrypter=new gs(n.config),n.on(P.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(n){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort();const n=this.fragCurrent;n!=null&&n.loader&&(n.abortRequests(),this.fragmentTracker.removeFragment(n)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Be.STOPPED}_streamEnded(n,o){if(o.live||n.nextStart||!n.end||!this.media)return!1;const a=o.partList;if(a!=null&&a.length){const d=a[a.length-1];return kr.isBuffered(this.media,d.start+d.duration/2)}const c=o.fragments[o.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(c)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var n;return(n=this.levels[this.levelLastLoaded])==null?void 0:n.details}}onMediaAttached(n,o){const a=this.media=this.mediaBuffer=o.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),a.addEventListener("seeking",this.onvseeking),a.addEventListener("ended",this.onvended);const c=this.config;this.levels&&c.autoStartLoad&&this.state===Be.STOPPED&&this.startLoad(c.startPosition)}onMediaDetaching(){const n=this.media;n!=null&&n.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),n&&this.onvseeking&&this.onvended&&(n.removeEventListener("seeking",this.onvseeking),n.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:n,fragCurrent:o,media:a,mediaBuffer:c,state:d}=this,p=a?a.currentTime:0,v=kr.bufferInfo(c||a,p,n.maxBufferHole);if(this.log(`media seeking to ${fe(p)?p.toFixed(3):p}, state: ${d}`),this.state===Be.ENDED)this.resetLoadingState();else if(o){const E=n.maxFragLookUpTolerance,w=o.start-E,I=o.start+o.duration+E;if(!v.len||I<v.start||w>v.end){const T=p>I;(p<w||T)&&(T&&o.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.abortRequests()),this.resetLoadingState())}}a&&(this.fragmentTracker.removeFragmentsInRange(p,1/0,this.playlistType,!0),this.lastCurrentTime=p),!this.loadedmetadata&&!v.len&&(this.nextLoadPosition=this.startPosition=p),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(n,o){this.startTimeOffset=o.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state=Be.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(n,o,a){this._loadFragForPlayback(n,o,a)}_loadFragForPlayback(n,o,a){const c=d=>{if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${d.part?" p: "+d.part.index:""} of level ${n.level} was dropped during download.`),this.fragmentTracker.removeFragment(n);return}n.stats.chunkCount++,this._handleFragmentLoadProgress(d)};this._doFragLoad(n,o,a,c).then(d=>{if(!d)return;const p=this.state;if(this.fragContextChanged(n)){(p===Be.FRAG_LOADING||!this.fragCurrent&&p===Be.PARSING)&&(this.fragmentTracker.removeFragment(n),this.state=Be.IDLE);return}"payload"in d&&(this.log(`Loaded fragment ${n.sn} of level ${n.level}`),this.hls.trigger(P.FRAG_LOADED,d)),this._handleFragmentLoadComplete(d)}).catch(d=>{this.state===Be.STOPPED||this.state===Be.ERROR||(this.warn(d),this.resetFragmentLoading(n))})}clearTrackerIfNeeded(n){var o;if(this.fragmentTracker.getState(n)===ln.APPENDING){const c=n.type,d=this.getFwdBufferInfo(this.mediaBuffer,c),p=Math.max(n.duration,d?d.len:this.config.maxBufferLength);this.reduceMaxBufferLength(p)&&this.fragmentTracker.removeFragment(n)}else((o=this.mediaBuffer)==null?void 0:o.buffered.length)===0&&this.fragmentTracker.removeAllFragments()}flushMainBuffer(n,o,a=null){if(!(n-o))return;const c={startOffset:n,endOffset:o,type:a};this.hls.trigger(P.BUFFER_FLUSHING,c)}_loadInitSegment(n,o){this._doFragLoad(n,o).then(a=>{if(!a||this.fragContextChanged(n)||!this.levels)throw new Error("init load aborted");return a}).then(a=>{const{hls:c}=this,{payload:d}=a,p=n.decryptdata;if(d&&d.byteLength>0&&p&&p.key&&p.iv&&p.method==="AES-128"){const v=self.performance.now();return this.decrypter.decrypt(new Uint8Array(d),p.key.buffer,p.iv.buffer).catch(E=>{throw c.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.FRAG_DECRYPT_ERROR,fatal:!1,error:E,reason:E.message,frag:n}),E}).then(E=>{const w=self.performance.now();return c.trigger(P.FRAG_DECRYPTED,{frag:n,payload:E,stats:{tstart:v,tdecrypt:w}}),a.payload=E,a})}return a}).then(a=>{const{fragCurrent:c,hls:d,levels:p}=this;if(!p)throw new Error("init load aborted, missing levels");const v=n.stats;this.state=Be.IDLE,o.fragmentError=0,n.data=new Uint8Array(a.payload),v.parsing.start=v.buffering.start=self.performance.now(),v.parsing.end=v.buffering.end=self.performance.now(),a.frag===c&&d.trigger(P.FRAG_BUFFERED,{stats:v,frag:c,part:null,id:n.type}),this.tick()}).catch(a=>{this.state===Be.STOPPED||this.state===Be.ERROR||(this.warn(a),this.resetFragmentLoading(n))})}fragContextChanged(n){const{fragCurrent:o}=this;return!n||!o||n.level!==o.level||n.sn!==o.sn||n.urlId!==o.urlId}fragBufferedComplete(n,o){var a,c,d,p;const v=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${n.type} sn: ${n.sn}${o?" part: "+o.index:""} of ${this.logPrefix==="[stream-controller]"?"level":"track"} ${n.level} (frag:[${((a=n.startPTS)!=null?a:NaN).toFixed(3)}-${((c=n.endPTS)!=null?c:NaN).toFixed(3)}] > buffer:${v?ba.toString(kr.getBuffered(v)):"(detached)"})`),this.state=Be.IDLE,v&&(!this.loadedmetadata&&n.type==bt.MAIN&&v.buffered.length&&((d=this.fragCurrent)==null?void 0:d.sn)===((p=this.fragPrevious)==null?void 0:p.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(n){const{transmuxer:o}=this;if(!o)return;const{frag:a,part:c,partsLoaded:d}=n,p=!d||d.length===0||d.some(E=>!E),v=new Ho(a.level,a.sn,a.stats.chunkCount+1,0,c?c.index:-1,!p);o.flush(v)}_handleFragmentLoadProgress(n){}_doFragLoad(n,o,a=null,c){var d;const p=o?.details;if(!this.levels||!p)throw new Error(`frag load aborted, missing level${p?"":" detail"}s`);let v=null;if(n.encrypted&&!((d=n.decryptdata)!=null&&d.key)?(this.log(`Loading key for ${n.sn} of [${p.startSN}-${p.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${n.level}`),this.state=Be.KEY_LOADING,this.fragCurrent=n,v=this.keyLoader.load(n).then(I=>{if(!this.fragContextChanged(I.frag))return this.hls.trigger(P.KEY_LOADED,I),this.state===Be.KEY_LOADING&&(this.state=Be.IDLE),I}),this.hls.trigger(P.KEY_LOADING,{frag:n}),this.fragCurrent===null&&(v=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!n.encrypted&&p.encryptedFragments.length&&this.keyLoader.loadClear(n,p.encryptedFragments),a=Math.max(n.start,a||0),this.config.lowLatencyMode){const I=p.partList;if(I&&c){a>n.end&&p.fragmentHint&&(n=p.fragmentHint);const T=this.getNextPart(I,n,a);if(T>-1){const $=I[T];this.log(`Loading part sn: ${n.sn} p: ${$.index} cc: ${n.cc} of playlist [${p.startSN}-${p.endSN}] parts [0-${T}-${I.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${n.level}, target: ${parseFloat(a.toFixed(3))}`),this.nextLoadPosition=$.start+$.duration,this.state=Be.FRAG_LOADING;let H;return v?H=v.then(V=>!V||this.fragContextChanged(V.frag)?null:this.doFragPartsLoad(n,$,o,c)).catch(V=>this.handleFragLoadError(V)):H=this.doFragPartsLoad(n,$,o,c).catch(V=>this.handleFragLoadError(V)),this.hls.trigger(P.FRAG_LOADING,{frag:n,part:$,targetBufferTime:a}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):H}else if(!n.url||this.loadedEndOfParts(I,a))return Promise.resolve(null)}}this.log(`Loading fragment ${n.sn} cc: ${n.cc} ${p?"of ["+p.startSN+"-"+p.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${n.level}, target: ${parseFloat(a.toFixed(3))}`),fe(n.sn)&&!this.bitrateTest&&(this.nextLoadPosition=n.start+n.duration),this.state=Be.FRAG_LOADING;const E=this.config.progressive;let w;return E&&v?w=v.then(I=>!I||this.fragContextChanged(I?.frag)?null:this.fragmentLoader.load(n,c)).catch(I=>this.handleFragLoadError(I)):w=Promise.all([this.fragmentLoader.load(n,E?c:void 0),v]).then(([I])=>(!E&&I&&c&&c(I),I)).catch(I=>this.handleFragLoadError(I)),this.hls.trigger(P.FRAG_LOADING,{frag:n,targetBufferTime:a}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):w}doFragPartsLoad(n,o,a,c){return new Promise((d,p)=>{var v;const E=[],w=(v=a.details)==null?void 0:v.partList,I=T=>{this.fragmentLoader.loadPart(n,T,c).then($=>{E[T.index]=$;const H=$.part;this.hls.trigger(P.FRAG_LOADED,$);const V=da(a,n.sn,T.index+1)||Zi(w,n.sn,T.index+1);if(V)I(V);else return d({frag:n,part:H,partsLoaded:E})}).catch(p)};I(o)})}handleFragLoadError(n){if("data"in n){const o=n.data;n.data&&o.details===Z.INTERNAL_ABORTED?this.handleFragLoadAborted(o.frag,o.part):this.hls.trigger(P.ERROR,o)}else this.hls.trigger(P.ERROR,{type:be.OTHER_ERROR,details:Z.INTERNAL_EXCEPTION,err:n,error:n,fatal:!0});return null}_handleTransmuxerFlush(n){const o=this.getCurrentContext(n);if(!o||this.state!==Be.PARSING){!this.fragCurrent&&this.state!==Be.STOPPED&&this.state!==Be.ERROR&&(this.state=Be.IDLE);return}const{frag:a,part:c,level:d}=o,p=self.performance.now();a.stats.parsing.end=p,c&&(c.stats.parsing.end=p),this.updateLevelTiming(a,c,d,n.partial)}getCurrentContext(n){const{levels:o,fragCurrent:a}=this,{level:c,sn:d,part:p}=n;if(!(o!=null&&o[c]))return this.warn(`Levels object was unset while buffering fragment ${d} of level ${c}. The current chunk will not be buffered.`),null;const v=o[c],E=p>-1?da(v,d,p):null,w=E?E.fragment:us(v,d,a);return w?(a&&a!==w&&(w.stats=a.stats),{frag:w,part:E,level:v}):null}bufferFragmentData(n,o,a,c){var d;if(!n||this.state!==Be.PARSING)return;const{data1:p,data2:v}=n;let E=p;if(p&&v&&(E=Jn(p,v)),!((d=E)!=null&&d.length))return;const w={type:n.type,frag:o,part:a,chunkMeta:c,parent:o.type,data:E};this.hls.trigger(P.BUFFER_APPENDING,w),n.dropped&&n.independent&&!a&&this.flushBufferGap(o)}flushBufferGap(n){const o=this.media;if(!o)return;if(!kr.isBuffered(o,o.currentTime)){this.flushMainBuffer(0,n.start);return}const a=o.currentTime,c=kr.bufferInfo(o,a,0),d=n.duration,p=Math.min(this.config.maxFragLookUpTolerance*2,d*.25),v=Math.max(Math.min(n.start-p,c.end-p),a+p);n.start-v>p&&this.flushMainBuffer(v,n.start)}getFwdBufferInfo(n,o){const a=this.getLoadPosition();return fe(a)?this.getFwdBufferInfoAtPos(n,a,o):null}getFwdBufferInfoAtPos(n,o,a){const{config:{maxBufferHole:c}}=this,d=kr.bufferInfo(n,o,c);if(d.len===0&&d.nextStart!==void 0){const p=this.fragmentTracker.getBufferedFrag(o,a);if(p&&d.nextStart<p.end)return kr.bufferInfo(n,o,Math.max(d.nextStart,c))}return d}getMaxBufferLength(n){const{config:o}=this;let a;return n?a=Math.max(8*o.maxBufferSize/n,o.maxBufferLength):a=o.maxBufferLength,Math.min(a,o.maxMaxBufferLength)}reduceMaxBufferLength(n){const o=this.config,a=n||o.maxBufferLength;return o.maxMaxBufferLength>=a?(o.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${o.maxMaxBufferLength}s`),!0):!1}getNextFragment(n,o){const a=o.fragments,c=a.length;if(!c)return null;const{config:d}=this,p=a[0].start;let v;if(o.live){const E=d.initialLiveManifestSize;if(c<E)return this.warn(`Not enough fragments to start playback (have: ${c}, need: ${E})`),null;!o.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(v=this.getInitialLiveFragment(o,a),this.startPosition=v?this.hls.liveSyncPosition||v.start:n)}else n<=p&&(v=a[0]);if(!v){const E=d.lowLatencyMode?o.partEnd:o.fragmentEnd;v=this.getFragmentAtPosition(n,E,o)}return this.mapToInitFragWhenRequired(v)}isLoopLoading(n,o){const a=this.fragmentTracker.getState(n);return(a===ln.OK||a===ln.PARTIAL&&!!n.gap)&&this.nextLoadPosition>o}getNextFragmentLoopLoading(n,o,a,c,d){const p=n.gap,v=this.getNextFragment(this.nextLoadPosition,o);if(v===null)return v;if(n=v,p&&n&&!n.gap&&a.nextStart){const E=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,a.nextStart,c);if(E!==null&&a.len+E.len>=d)return this.log(`buffer full after gaps in "${c}" playlist starting at sn: ${n.sn}`),null}return n}mapToInitFragWhenRequired(n){return n!=null&&n.initSegment&&!(n!=null&&n.initSegment.data)&&!this.bitrateTest?n.initSegment:n}getNextPart(n,o,a){let c=-1,d=!1,p=!0;for(let v=0,E=n.length;v<E;v++){const w=n[v];if(p=p&&!w.independent,c>-1&&a<w.start)break;const I=w.loaded;I?c=-1:(d||w.independent||p)&&w.fragment===o&&(c=v),d=I}return c}loadedEndOfParts(n,o){const a=n[n.length-1];return a&&o>a.start&&a.loaded}getInitialLiveFragment(n,o){const a=this.fragPrevious;let c=null;if(a){if(n.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${a.programDateTime}`),c=Si(o,a.endProgramDateTime,this.config.maxFragLookUpTolerance)),!c){const d=a.sn+1;if(d>=n.startSN&&d<=n.endSN){const p=o[d-n.startSN];a.cc===p.cc&&(c=p,this.log(`Live playlist, switching playlist, load frag with next SN: ${c.sn}`))}c||(c=pa(o,a.cc),c&&this.log(`Live playlist, switching playlist, load frag with same CC: ${c.sn}`))}}else{const d=this.hls.liveSyncPosition;d!==null&&(c=this.getFragmentAtPosition(d,this.bitrateTest?n.fragmentEnd:n.edge,n))}return c}getFragmentAtPosition(n,o,a){const{config:c}=this;let{fragPrevious:d}=this,{fragments:p,endSN:v}=a;const{fragmentHint:E}=a,w=c.maxFragLookUpTolerance,I=!!(c.lowLatencyMode&&a.partList&&E);I&&E&&!this.bitrateTest&&(p=p.concat(E),v=E.sn);let T;if(n<o){const $=n>o-w?0:w;T=Vn(d,p,n,$)}else T=p[p.length-1];if(T){const $=T.sn-a.startSN,H=this.fragmentTracker.getState(T);if((H===ln.OK||H===ln.PARTIAL&&T.gap)&&(d=T),d&&T.sn===d.sn&&!I&&d&&T.level===d.level){const U=p[$+1];T.sn<v&&this.fragmentTracker.getState(U)!==ln.OK?T=U:T=null}}return T}synchronizeToLiveEdge(n){const{config:o,media:a}=this;if(!a)return;const c=this.hls.liveSyncPosition,d=a.currentTime,p=n.fragments[0].start,v=n.edge,E=d>=p-o.maxFragLookUpTolerance&&d<=v;if(c!==null&&a.duration>c&&(d<c||!E)){const w=o.liveMaxLatencyDuration!==void 0?o.liveMaxLatencyDuration:o.liveMaxLatencyDurationCount*n.targetduration;(!E&&a.readyState<4||d<v-w)&&(this.loadedmetadata||(this.nextLoadPosition=c),a.readyState&&(this.warn(`Playback: ${d.toFixed(3)} is located too far from the end of live sliding playlist: ${v}, reset currentTime to : ${c.toFixed(3)}`),a.currentTime=c))}}alignPlaylists(n,o){const{levels:a,levelLastLoaded:c,fragPrevious:d}=this,p=c!==null?a[c]:null,v=n.fragments.length;if(!v)return this.warn("No fragments in live playlist"),0;const E=n.fragments[0].start,w=!o,I=n.alignedSliding&&fe(E);if(w||!I&&!E){ya(d,p,n);const T=n.fragments[0].start;return this.log(`Live playlist sliding: ${T.toFixed(2)} start-sn: ${o?o.startSN:"na"}->${n.startSN} prev-sn: ${d?d.sn:"na"} fragments: ${v}`),T}return E}waitForCdnTuneIn(n){return n.live&&n.canBlockReload&&n.partTarget&&n.tuneInGoal>Math.max(n.partHoldBack,n.partTarget*3)}setStartPosition(n,o){let a=this.startPosition;if(a<o&&(a=-1),a===-1||this.lastCurrentTime===-1){const c=this.startTimeOffset!==null,d=c?this.startTimeOffset:n.startTimeOffset;d!==null&&fe(d)?(a=o+d,d<0&&(a+=n.totalduration),a=Math.min(Math.max(o,a),o+n.totalduration),this.log(`Start time offset ${d} found in ${c?"multivariant":"media"} playlist, adjust startPosition to ${a}`),this.startPosition=a):n.live?a=this.hls.liveSyncPosition||o:this.startPosition=a=0,this.lastCurrentTime=a}this.nextLoadPosition=a}getLoadPosition(){const{media:n}=this;let o=0;return this.loadedmetadata&&n?o=n.currentTime:this.nextLoadPosition&&(o=this.nextLoadPosition),o}handleFragLoadAborted(n,o){this.transmuxer&&n.sn!=="initSegment"&&n.stats.aborted&&(this.warn(`Fragment ${n.sn}${o?" part"+o.index:""} of level ${n.level} was aborted`),this.resetFragmentLoading(n))}resetFragmentLoading(n){(!this.fragCurrent||!this.fragContextChanged(n)&&this.state!==Be.FRAG_LOADING_WAITING_RETRY)&&(this.state=Be.IDLE)}onFragmentOrKeyLoadError(n,o){if(o.chunkMeta&&!o.frag){const I=this.getCurrentContext(o.chunkMeta);I&&(o.frag=I.frag)}const a=o.frag;if(!a||a.type!==n||!this.levels)return;if(this.fragContextChanged(a)){var c;this.warn(`Frag load error must match current frag to retry ${a.url} > ${(c=this.fragCurrent)==null?void 0:c.url}`);return}const d=o.details===Z.FRAG_GAP;d&&this.fragmentTracker.fragBuffered(a,!0);const p=o.errorAction,{action:v,retryCount:E=0,retryConfig:w}=p||{};if(p&&v===fn.RetryRequest&&w){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);const I=ri(w,E);this.warn(`Fragment ${a.sn} of ${n} ${a.level} errored with ${o.details}, retrying loading ${E+1}/${w.maxNumRetry} in ${I}ms`),p.resolved=!0,this.retryDate=self.performance.now()+I,this.state=Be.FRAG_LOADING_WAITING_RETRY}else w&&p?(this.resetFragmentErrors(n),E<w.maxNumRetry?d||(p.resolved=!0):K.warn(`${o.details} reached or exceeded max retry (${E})`)):this.state=Be.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(n){if(this.state===Be.PARSING||this.state===Be.PARSED){const o=n.parent,a=this.getFwdBufferInfo(this.mediaBuffer,o),c=a&&a.len>.5;c&&this.reduceMaxBufferLength(a.len);const d=!c;return d&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${o} buffer`),n.frag&&(this.fragmentTracker.removeFragment(n.frag),this.nextLoadPosition=n.frag.start),this.resetLoadingState(),d}return!1}resetFragmentErrors(n){n===bt.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Be.STOPPED&&(this.state=Be.IDLE)}afterBufferFlushed(n,o,a){if(!n)return;const c=kr.getBuffered(n);this.fragmentTracker.detectEvictedFragments(o,c,a),this.state===Be.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Be.IDLE}resetStartWhenNotLoaded(n){if(!this.loadedmetadata){this.startFragRequested=!1;const o=this.levels?this.levels[n].details:null;o!=null&&o.live?(this.startPosition=-1,this.setStartPosition(o,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(n){this.warn(`The loading context changed while buffering fragment ${n.sn} of level ${n.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(n.level),this.resetLoadingState()}removeUnbufferedFrags(n=0){this.fragmentTracker.removeFragmentsInRange(n,1/0,this.playlistType,!1,!0)}updateLevelTiming(n,o,a,c){var d;const p=a.details;if(!p){this.warn("level.details undefined");return}if(Object.keys(n.elementaryStreams).reduce((E,w)=>{const I=n.elementaryStreams[w];if(I){const T=I.endPTS-I.startPTS;if(T<=0)return this.warn(`Could not parse fragment ${n.sn} ${w} duration reliably (${T})`),E||!1;const $=c?0:pi(p,n,I.startPTS,I.endPTS,I.startDTS,I.endDTS);return this.hls.trigger(P.LEVEL_PTS_UPDATED,{details:p,level:a,drift:$,type:w,frag:n,start:I.startPTS,end:I.endPTS}),!0}return E},!1))a.fragmentError=0;else if(((d=this.transmuxer)==null?void 0:d.error)===null){const E=new Error(`Found no media in fragment ${n.sn} of level ${a.id} resetting transmuxer to fallback to playlist timing`);if(this.warn(E.message),this.hls.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.FRAG_PARSING_ERROR,fatal:!1,error:E,frag:n,reason:`Found no media in msn ${n.sn} of level "${a.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=Be.PARSED,this.hls.trigger(P.FRAG_PARSED,{frag:n,part:o})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(n){n.event==="demuxerWorker"&&(this.resetTransmuxer(),this.resetLoadingState())}set state(n){const o=this._state;o!==n&&(this._state=n,this.log(`${o}->${n}`))}get state(){return this._state}}function jo(){if(!(typeof self>"u"))return self.MediaSource||self.WebKitMediaSource}function Wi(){return self.SourceBuffer||self.WebKitSourceBuffer}function ms(){const m=jo();if(!m)return!1;const n=Wi(),o=m&&typeof m.isTypeSupported=="function"&&m.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!n||n.prototype&&typeof n.prototype.appendBuffer=="function"&&typeof n.prototype.remove=="function";return!!o&&!!a}function or(){var m;const n=Wi();return typeof(n==null||(m=n.prototype)==null?void 0:m.changeType)=="function"}function Un(){return typeof __HLS_WORKER_BUNDLE__=="function"}function Li(){const m=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(m);return{worker:new self.Worker(n),objectURL:n}}function Tr(m){const n=new self.URL(m,self.location.href).href;return{worker:new self.Worker(n),scriptURL:n}}function Tn(m="",n=9e4){return{type:m,id:-1,pid:-1,inputTimeScale:n,sequenceNumber:-1,samples:[],dropped:0}}class tn{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(n,o,a,c){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(n){this.initPTS=n,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(n,o){return!1}appendFrame(n,o,a){}demux(n,o){this.cachedData&&(n=Jn(this.cachedData,n),this.cachedData=null);let a=Qr(n,0),c=a?a.length:0,d;const p=this._audioTrack,v=this._id3Track,E=a?Yt(a):void 0,w=n.length;for((this.basePTS===null||this.frameIndex===0&&fe(E))&&(this.basePTS=xa(E,o,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),a&&a.length>0&&v.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:a,type:xn.audioId3,duration:Number.POSITIVE_INFINITY});c<w;){if(this.canParse(n,c)){const I=this.appendFrame(p,n,c);I?(this.frameIndex++,this.lastPTS=I.sample.pts,c+=I.length,d=c):c=w}else Kt(n,c)?(a=Qr(n,c),v.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:a,type:xn.audioId3,duration:Number.POSITIVE_INFINITY}),c+=a.length,d=c):c++;if(c===w&&d!==w){const I=dr(n,d);this.cachedData?this.cachedData=Jn(this.cachedData,I):this.cachedData=I}}return{audioTrack:p,videoTrack:Tn(),id3Track:v,textTrack:Tn()}}demuxSampleAes(n,o,a){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(n){const o=this.cachedData;return o&&(this.cachedData=null,this.demux(o,0)),{audioTrack:this._audioTrack,videoTrack:Tn(),id3Track:this._id3Track,textTrack:Tn()}}destroy(){}}const xa=(m,n,o)=>{if(fe(m))return m*90;const a=o?o.baseTime*9e4/o.timescale:0;return n*9e4+a};function _a(m,n,o,a){let c,d,p,v;const E=navigator.userAgent.toLowerCase(),w=a,I=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];c=((n[o+2]&192)>>>6)+1;const T=(n[o+2]&60)>>>2;if(T>I.length-1){m.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${T}`});return}return p=(n[o+2]&1)<<2,p|=(n[o+3]&192)>>>6,K.log(`manifest codec:${a}, ADTS type:${c}, samplingIndex:${T}`),/firefox/i.test(E)?T>=6?(c=5,v=new Array(4),d=T-3):(c=2,v=new Array(2),d=T):E.indexOf("android")!==-1?(c=2,v=new Array(2),d=T):(c=5,v=new Array(4),a&&(a.indexOf("mp4a.40.29")!==-1||a.indexOf("mp4a.40.5")!==-1)||!a&&T>=6?d=T-3:((a&&a.indexOf("mp4a.40.2")!==-1&&(T>=6&&p===1||/vivaldi/i.test(E))||!a&&p===1)&&(c=2,v=new Array(2)),d=T)),v[0]=c<<3,v[0]|=(T&14)>>1,v[1]|=(T&1)<<7,v[1]|=p<<3,c===5&&(v[1]|=(d&14)>>1,v[2]=(d&1)<<7,v[2]|=2<<2,v[3]=0),{config:v,samplerate:I[T],channelCount:p,codec:"mp4a.40."+c,manifestCodec:w}}function Dn(m,n){return m[n]===255&&(m[n+1]&246)===240}function Ns(m,n){return m[n+1]&1?7:9}function Ki(m,n){return(m[n+3]&3)<<11|m[n+4]<<3|(m[n+5]&224)>>>5}function Gr(m,n){return n+5<m.length}function X(m,n){return n+1<m.length&&Dn(m,n)}function ii(m,n){return Gr(m,n)&&Dn(m,n)&&Ki(m,n)<=m.length-n}function pn(m,n){if(X(m,n)){const o=Ns(m,n);if(n+o>=m.length)return!1;const a=Ki(m,n);if(a<=o)return!1;const c=n+a;return c===m.length||X(m,c)}return!1}function Vs(m,n,o,a,c){if(!m.samplerate){const d=_a(n,o,a,c);if(!d)return;m.config=d.config,m.samplerate=d.samplerate,m.channelCount=d.channelCount,m.codec=d.codec,m.manifestCodec=d.manifestCodec,K.log(`parsed codec:${m.codec}, rate:${d.samplerate}, channels:${d.channelCount}`)}}function _(m){return 1024*9e4/m}function x(m,n){const o=Ns(m,n);if(n+o<=m.length){const a=Ki(m,n)-o;if(a>0)return{headerLength:o,frameLength:a}}}function L(m,n,o,a,c){const d=_(m.samplerate),p=a+c*d,v=x(n,o);let E;if(v){const{frameLength:T,headerLength:$}=v,H=$+T,V=Math.max(0,o+H-n.length);V?(E=new Uint8Array(H-$),E.set(n.subarray(o+$,n.length),0)):E=n.subarray(o+$,o+H);const U={unit:E,pts:p};return V||m.samples.push(U),{sample:U,length:H,missing:V}}const w=n.length-o;return E=new Uint8Array(w),E.set(n.subarray(o,n.length),0),{sample:{unit:E,pts:p},length:w,missing:-1}}class M extends tn{constructor(n,o){super(),this.observer=void 0,this.config=void 0,this.observer=n,this.config=o}resetInitSegment(n,o,a,c){super.resetInitSegment(n,o,a,c),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:o,duration:c,inputTimeScale:9e4,dropped:0}}static probe(n){if(!n)return!1;let a=(Qr(n,0)||[]).length;for(let c=n.length;a<c;a++)if(pn(n,a))return K.log("ADTS sync word found !"),!0;return!1}canParse(n,o){return ii(n,o)}appendFrame(n,o,a){Vs(n,this.observer,o,a,n.manifestCodec);const c=L(n,o,a,this.basePTS,this.frameIndex);if(c&&c.missing===0)return c}}const N=/\/emsg[-/]ID3/i;class G{constructor(n,o){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=o}resetTimeStamp(){}resetInitSegment(n,o,a,c){const d=this.videoTrack=Tn("video",1),p=this.audioTrack=Tn("audio",1),v=this.txtTrack=Tn("text",1);if(this.id3Track=Tn("id3",1),this.timeOffset=0,!(n!=null&&n.byteLength))return;const E=So(n);if(E.video){const{id:w,timescale:I,codec:T}=E.video;d.id=w,d.timescale=v.timescale=I,d.codec=T}if(E.audio){const{id:w,timescale:I,codec:T}=E.audio;p.id=w,p.timescale=I,p.codec=T}v.id=Ln.text,d.sampleDuration=0,d.duration=p.duration=c}resetContiguity(){}static probe(n){return n=n.length>16384?n.subarray(0,16384):n,er(n,["moof"]).length>0}demux(n,o){this.timeOffset=o;let a=n;const c=this.videoTrack,d=this.txtTrack;if(this.config.progressive){this.remainderData&&(a=Jn(this.remainderData,n));const v=Io(a);this.remainderData=v.remainder,c.samples=v.valid||new Uint8Array}else c.samples=a;const p=this.extractID3Track(c,o);return d.samples=To(o,c),{videoTrack:c,audioTrack:this.audioTrack,id3Track:p,textTrack:this.txtTrack}}flush(){const n=this.timeOffset,o=this.videoTrack,a=this.txtTrack;o.samples=this.remainderData||new Uint8Array,this.remainderData=null;const c=this.extractID3Track(o,this.timeOffset);return a.samples=To(n,o),{videoTrack:o,audioTrack:Tn(),id3Track:c,textTrack:Tn()}}extractID3Track(n,o){const a=this.id3Track;if(n.samples.length){const c=er(n.samples,["emsg"]);c&&c.forEach(d=>{const p=Ao(d);if(N.test(p.schemeIdUri)){const v=fe(p.presentationTime)?p.presentationTime/p.timeScale:o+p.presentationTimeDelta/p.timeScale;let E=p.eventDuration===4294967295?Number.POSITIVE_INFINITY:p.eventDuration/p.timeScale;E<=.001&&(E=Number.POSITIVE_INFINITY);const w=p.payload;a.samples.push({data:w,len:w.byteLength,dts:v,pts:v,type:xn.emsg,duration:E})}})}return a}demuxSampleAes(n,o,a){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}let Re=null;const Ke=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],_t=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],nt=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],sr=[0,1,1,4];function un(m,n,o,a,c){if(o+24>n.length)return;const d=Mn(n,o);if(d&&o+d.frameLength<=n.length){const p=d.samplesPerFrame*9e4/d.sampleRate,v=a+c*p,E={unit:n.subarray(o,o+d.frameLength),pts:v,dts:v};return m.config=[],m.channelCount=d.channelCount,m.samplerate=d.sampleRate,m.samples.push(E),{sample:E,length:d.frameLength,missing:0}}}function Mn(m,n){const o=m[n+1]>>3&3,a=m[n+1]>>1&3,c=m[n+2]>>4&15,d=m[n+2]>>2&3;if(o!==1&&c!==0&&c!==15&&d!==3){const p=m[n+2]>>1&1,v=m[n+3]>>6,E=o===3?3-a:a===3?3:4,w=Ke[E*14+c-1]*1e3,T=_t[(o===3?0:o===2?1:2)*3+d],$=v===3?1:2,H=nt[o][a],V=sr[a],U=H*8*V,z=Math.floor(H*w/T+p)*V;if(Re===null){const de=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Re=de?parseInt(de[1]):0}return!!Re&&Re<=87&&a===2&&w>=224e3&&v===0&&(m[n+3]=m[n+3]|128),{sampleRate:T,channelCount:$,frameLength:z,samplesPerFrame:U}}}function vs(m,n){return m[n]===255&&(m[n+1]&224)===224&&(m[n+1]&6)!==0}function Cs(m,n){return n+1<m.length&&vs(m,n)}function Sa(m,n){return vs(m,n)&&4<=m.length-n}function Ri(m,n){if(n+1<m.length&&vs(m,n)){const a=Mn(m,n);let c=4;a!=null&&a.frameLength&&(c=a.frameLength);const d=n+c;return d===m.length||Cs(m,d)}return!1}class js{constructor(n){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=n,this.bytesAvailable=n.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const n=this.data,o=this.bytesAvailable,a=n.byteLength-o,c=new Uint8Array(4),d=Math.min(4,o);if(d===0)throw new Error("no bytes available");c.set(n.subarray(a,a+d)),this.word=new DataView(c.buffer).getUint32(0),this.bitsAvailable=d*8,this.bytesAvailable-=d}skipBits(n){let o;n=Math.min(n,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>n?(this.word<<=n,this.bitsAvailable-=n):(n-=this.bitsAvailable,o=n>>3,n-=o<<3,this.bytesAvailable-=o,this.loadWord(),this.word<<=n,this.bitsAvailable-=n)}readBits(n){let o=Math.min(this.bitsAvailable,n);const a=this.word>>>32-o;if(n>32&&K.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=o,this.bitsAvailable>0)this.word<<=o;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return o=n-o,o>0&&this.bitsAvailable?a<<o|this.readBits(o):a}skipLZ(){let n;for(n=0;n<this.bitsAvailable;++n)if((this.word&2147483648>>>n)!==0)return this.word<<=n,this.bitsAvailable-=n,n;return this.loadWord(),n+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const n=this.skipLZ();return this.readBits(n+1)-1}readEG(){const n=this.readUEG();return 1&n?1+n>>>1:-1*(n>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(n){let o=8,a=8,c;for(let d=0;d<n;d++)a!==0&&(c=this.readEG(),a=(o+c+256)%256),o=a===0?o:a}readSPS(){let n=0,o=0,a=0,c=0,d,p,v;const E=this.readUByte.bind(this),w=this.readBits.bind(this),I=this.readUEG.bind(this),T=this.readBoolean.bind(this),$=this.skipBits.bind(this),H=this.skipEG.bind(this),V=this.skipUEG.bind(this),U=this.skipScalingList.bind(this);E();const z=E();if(w(5),$(3),E(),V(),z===100||z===110||z===122||z===244||z===44||z===83||z===86||z===118||z===128){const it=I();if(it===3&&$(1),V(),V(),$(1),T())for(p=it!==3?8:12,v=0;v<p;v++)T()&&(v<6?U(16):U(64))}V();const se=I();if(se===0)I();else if(se===1)for($(1),H(),H(),d=I(),v=0;v<d;v++)H();V(),$(1);const Ee=I(),de=I(),ke=w(1);ke===0&&$(1),$(1),T()&&(n=I(),o=I(),a=I(),c=I());let Ie=[1,1];if(T()&&T())switch(E()){case 1:Ie=[1,1];break;case 2:Ie=[12,11];break;case 3:Ie=[10,11];break;case 4:Ie=[16,11];break;case 5:Ie=[40,33];break;case 6:Ie=[24,11];break;case 7:Ie=[20,11];break;case 8:Ie=[32,11];break;case 9:Ie=[80,33];break;case 10:Ie=[18,11];break;case 11:Ie=[15,11];break;case 12:Ie=[64,33];break;case 13:Ie=[160,99];break;case 14:Ie=[4,3];break;case 15:Ie=[3,2];break;case 16:Ie=[2,1];break;case 255:{Ie=[E()<<8|E(),E()<<8|E()];break}}return{width:Math.ceil((Ee+1)*16-n*2-o*2),height:(2-ke)*(de+1)*16-(ke?2:4)*(a+c),pixelRatio:Ie}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class Es{constructor(n,o,a){this.keyData=void 0,this.decrypter=void 0,this.keyData=a,this.decrypter=new gs(o,{removePKCS7Padding:!1})}decryptBuffer(n){return this.decrypter.decrypt(n,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(n,o,a){const c=n[o].unit;if(c.length<=16)return;const d=c.subarray(16,c.length-c.length%16),p=d.buffer.slice(d.byteOffset,d.byteOffset+d.length);this.decryptBuffer(p).then(v=>{const E=new Uint8Array(v);c.set(E,16),this.decrypter.isSync()||this.decryptAacSamples(n,o+1,a)})}decryptAacSamples(n,o,a){for(;;o++){if(o>=n.length){a();return}if(!(n[o].unit.length<32)&&(this.decryptAacSample(n,o,a),!this.decrypter.isSync()))return}}getAvcEncryptedData(n){const o=Math.floor((n.length-48)/160)*16+16,a=new Int8Array(o);let c=0;for(let d=32;d<n.length-16;d+=160,c+=16)a.set(n.subarray(d,d+16),c);return a}getAvcDecryptedUnit(n,o){const a=new Uint8Array(o);let c=0;for(let d=32;d<n.length-16;d+=160,c+=16)n.set(a.subarray(c,c+16),d);return n}decryptAvcSample(n,o,a,c,d){const p=oo(d.data),v=this.getAvcEncryptedData(p);this.decryptBuffer(v.buffer).then(E=>{d.data=this.getAvcDecryptedUnit(p,E),this.decrypter.isSync()||this.decryptAvcSamples(n,o,a+1,c)})}decryptAvcSamples(n,o,a,c){if(n instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;o++,a=0){if(o>=n.length){c();return}const d=n[o].units;for(;!(a>=d.length);a++){const p=d[a];if(!(p.data.length<=48||p.type!==1&&p.type!==5)&&(this.decryptAvcSample(n,o,a,c,p),!this.decrypter.isSync()))return}}}}const cn=188;class mi{constructor(n,o,a){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=n,this.config=o,this.typeSupported=a}static probe(n){const o=mi.syncOffset(n);return o>0&&K.warn(`MPEG2-TS detected but first sync word found @ offset ${o}`),o!==-1}static syncOffset(n){const o=n.length,a=Math.min(cn*5,n.length-cn)+1;let c=0;for(;c<a;){let d=!1;for(let p=c;p<o&&n[p]===71;p+=cn)if(!d&&Uo(n,p)===0&&(d=!0),d&&p+cn>a)return c;c++}return-1}static createTrack(n,o){return{container:n==="video"||n==="audio"?"video/mp2t":void 0,type:n,id:Ln[n],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:n==="audio"?o:void 0}}resetInitSegment(n,o,a,c){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=mi.createTrack("video"),this._audioTrack=mi.createTrack("audio",c),this._id3Track=mi.createTrack("id3"),this._txtTrack=mi.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=o,this.videoCodec=a,this._duration=c}resetTimeStamp(){}resetContiguity(){const{_audioTrack:n,_avcTrack:o,_id3Track:a}=this;n&&(n.pesData=null),o&&(o.pesData=null),a&&(a.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(n,o,a=!1,c=!1){a||(this.sampleAes=null);let d;const p=this._avcTrack,v=this._audioTrack,E=this._id3Track,w=this._txtTrack;let I=p.pid,T=p.pesData,$=v.pid,H=E.pid,V=v.pesData,U=E.pesData,z=null,se=this.pmtParsed,Ee=this._pmtId,de=n.length;if(this.remainderData&&(n=Jn(this.remainderData,n),de=n.length,this.remainderData=null),de<cn&&!c)return this.remainderData=n,{audioTrack:v,videoTrack:p,id3Track:E,textTrack:w};const ke=Math.max(0,mi.syncOffset(n));de-=(de-ke)%cn,de<n.byteLength&&!c&&(this.remainderData=new Uint8Array(n.buffer,de,n.buffer.byteLength-de));let Ie=0;for(let $e=ke;$e<de;$e+=cn)if(n[$e]===71){const ot=!!(n[$e+1]&64),ut=Uo(n,$e),Oe=(n[$e+3]&48)>>4;let Ot;if(Oe>1){if(Ot=$e+5+n[$e+4],Ot===$e+cn)continue}else Ot=$e+4;switch(ut){case I:ot&&(T&&(d=vi(T))&&this.parseAVCPES(p,w,d,!1),T={data:[],size:0}),T&&(T.data.push(n.subarray(Ot,$e+cn)),T.size+=$e+cn-Ot);break;case $:if(ot){if(V&&(d=vi(V)))switch(v.segmentCodec){case"aac":this.parseAACPES(v,d);break;case"mp3":this.parseMPEGPES(v,d);break}V={data:[],size:0}}V&&(V.data.push(n.subarray(Ot,$e+cn)),V.size+=$e+cn-Ot);break;case H:ot&&(U&&(d=vi(U))&&this.parseID3PES(E,d),U={data:[],size:0}),U&&(U.data.push(n.subarray(Ot,$e+cn)),U.size+=$e+cn-Ot);break;case 0:ot&&(Ot+=n[Ot]+1),Ee=this._pmtId=Us(n,Ot);break;case Ee:{ot&&(Ot+=n[Ot]+1);const ft=Zo(n,Ot,this.typeSupported,a);I=ft.avc,I>0&&(p.pid=I),$=ft.audio,$>0&&(v.pid=$,v.segmentCodec=ft.segmentCodec),H=ft.id3,H>0&&(E.pid=H),z!==null&&!se&&(K.warn(`MPEG-TS PMT found at ${$e} after unknown PID '${z}'. Backtracking to sync byte @${ke} to parse all TS packets.`),z=null,$e=ke-188),se=this.pmtParsed=!0;break}case 17:case 8191:break;default:z=ut;break}}else Ie++;if(Ie>0){const $e=new Error(`Found ${Ie} TS packet/s that do not start with 0x47`);this.observer.emit(P.ERROR,P.ERROR,{type:be.MEDIA_ERROR,details:Z.FRAG_PARSING_ERROR,fatal:!1,error:$e,reason:$e.message})}p.pesData=T,v.pesData=V,E.pesData=U;const it={audioTrack:v,videoTrack:p,id3Track:E,textTrack:w};return c&&this.extractRemainingSamples(it),it}flush(){const{remainderData:n}=this;this.remainderData=null;let o;return n?o=this.demux(n,-1,!1,!0):o={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(o),this.sampleAes?this.decrypt(o,this.sampleAes):o}extractRemainingSamples(n){const{audioTrack:o,videoTrack:a,id3Track:c,textTrack:d}=n,p=a.pesData,v=o.pesData,E=c.pesData;let w;if(p&&(w=vi(p))?(this.parseAVCPES(a,d,w,!0),a.pesData=null):a.pesData=p,v&&(w=vi(v))){switch(o.segmentCodec){case"aac":this.parseAACPES(o,w);break;case"mp3":this.parseMPEGPES(o,w);break}o.pesData=null}else v!=null&&v.size&&K.log("last AAC PES packet truncated,might overlap between fragments"),o.pesData=v;E&&(w=vi(E))?(this.parseID3PES(c,w),c.pesData=null):c.pesData=E}demuxSampleAes(n,o,a){const c=this.demux(n,a,!0,!this.config.progressive),d=this.sampleAes=new Es(this.observer,this.config,o);return this.decrypt(c,d)}decrypt(n,o){return new Promise(a=>{const{audioTrack:c,videoTrack:d}=n;c.samples&&c.segmentCodec==="aac"?o.decryptAacSamples(c.samples,0,()=>{d.samples?o.decryptAvcSamples(d.samples,0,0,()=>{a(n)}):a(n)}):d.samples&&o.decryptAvcSamples(d.samples,0,0,()=>{a(n)})})}destroy(){this._duration=0}parseAVCPES(n,o,a,c){const d=this.parseAVCNALu(n,a.data);let p=this.avcSample,v,E=!1;a.data=null,p&&d.length&&!n.audFound&&(zo(p,n),p=this.avcSample=po(!1,a.pts,a.dts,"")),d.forEach(w=>{switch(w.type){case 1:{v=!0,p||(p=this.avcSample=po(!0,a.pts,a.dts,"")),p.frame=!0;const I=w.data;if(E&&I.length>4){const T=new js(I).readSliceType();(T===2||T===4||T===7||T===9)&&(p.key=!0)}break}case 5:v=!0,p||(p=this.avcSample=po(!0,a.pts,a.dts,"")),p.key=!0,p.frame=!0;break;case 6:{v=!0,Do(w.data,1,a.pts,o.samples);break}case 7:if(v=!0,E=!0,!n.sps){const I=w.data,$=new js(I).readSPS();n.width=$.width,n.height=$.height,n.pixelRatio=$.pixelRatio,n.sps=[I],n.duration=this._duration;const H=I.subarray(1,4);let V="avc1.";for(let U=0;U<3;U++){let z=H[U].toString(16);z.length<2&&(z="0"+z),V+=z}n.codec=V}break;case 8:v=!0,n.pps||(n.pps=[w.data]);break;case 9:v=!1,n.audFound=!0,p&&zo(p,n),p=this.avcSample=po(!1,a.pts,a.dts,"");break;case 12:v=!0;break;default:v=!1,p&&(p.debug+="unknown NAL "+w.type+" ");break}p&&v&&p.units.push(w)}),c&&p&&(zo(p,n),this.avcSample=null)}getLastNalUnit(n){var o;let a=this.avcSample,c;if((!a||a.units.length===0)&&(a=n[n.length-1]),(o=a)!=null&&o.units){const d=a.units;c=d[d.length-1]}return c}parseAVCNALu(n,o){const a=o.byteLength;let c=n.naluState||0;const d=c,p=[];let v=0,E,w,I,T=-1,$=0;for(c===-1&&(T=0,$=o[0]&31,c=0,v=1);v<a;){if(E=o[v++],!c){c=E?0:1;continue}if(c===1){c=E?0:2;continue}if(!E)c=3;else if(E===1){if(T>=0){const H={data:o.subarray(T,v-c-1),type:$};p.push(H)}else{const H=this.getLastNalUnit(n.samples);if(H&&(d&&v<=4-d&&H.state&&(H.data=H.data.subarray(0,H.data.byteLength-d)),w=v-c-1,w>0)){const V=new Uint8Array(H.data.byteLength+w);V.set(H.data,0),V.set(o.subarray(0,w),H.data.byteLength),H.data=V,H.state=0}}v<a?(I=o[v]&31,T=v,$=I,c=0):c=-1}else c=0}if(T>=0&&c>=0){const H={data:o.subarray(T,a),type:$,state:c};p.push(H)}if(p.length===0){const H=this.getLastNalUnit(n.samples);if(H){const V=new Uint8Array(H.data.byteLength+o.byteLength);V.set(H.data,0),V.set(o,H.data.byteLength),H.data=V}}return n.naluState=c,p}parseAACPES(n,o){let a=0;const c=this.aacOverFlow;let d=o.data;if(c){this.aacOverFlow=null;const T=c.missing,$=c.sample.unit.byteLength;if(T===-1){const H=new Uint8Array($+d.byteLength);H.set(c.sample.unit,0),H.set(d,$),d=H}else{const H=$-T;c.sample.unit.set(d.subarray(0,T),H),n.samples.push(c.sample),a=c.missing}}let p,v;for(p=a,v=d.length;p<v-1&&!X(d,p);p++);if(p!==a){let T;const $=p<v-1;$?T=`AAC PES did not start with ADTS header,offset:${p}`:T="No ADTS header found in AAC PES";const H=new Error(T);if(K.warn(`parsing error: ${T}`),this.observer.emit(P.ERROR,P.ERROR,{type:be.MEDIA_ERROR,details:Z.FRAG_PARSING_ERROR,fatal:!1,levelRetry:$,error:H,reason:T}),!$)return}Vs(n,this.observer,d,p,this.audioCodec);let E;if(o.pts!==void 0)E=o.pts;else if(c){const T=_(n.samplerate);E=c.sample.pts+T}else{K.warn("[tsdemuxer]: AAC PES unknown PTS");return}let w=0,I;for(;p<v;)if(I=L(n,d,p,E,w),p+=I.length,I.missing){this.aacOverFlow=I;break}else for(w++;p<v-1&&!X(d,p);p++);}parseMPEGPES(n,o){const a=o.data,c=a.length;let d=0,p=0;const v=o.pts;if(v===void 0){K.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;p<c;)if(Cs(a,p)){const E=un(n,a,p,v,d);if(E)p+=E.length,d++;else break}else p++}parseID3PES(n,o){if(o.pts===void 0){K.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const a=ae({},o,{type:this._avcTrack?xn.emsg:xn.audioId3,duration:Number.POSITIVE_INFINITY});n.samples.push(a)}}function po(m,n,o,a){return{key:m,frame:!1,pts:n,dts:o,units:[],debug:a,length:0}}function Uo(m,n){return((m[n+1]&31)<<8)+m[n+2]}function Us(m,n){return(m[n+10]&31)<<8|m[n+11]}function Zo(m,n,o,a){const c={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},d=(m[n+1]&15)<<8|m[n+2],p=n+3+d-4,v=(m[n+10]&15)<<8|m[n+11];for(n+=12+v;n<p;){const E=Uo(m,n);switch(m[n]){case 207:if(!a){K.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:c.audio===-1&&(c.audio=E);break;case 21:c.id3===-1&&(c.id3=E);break;case 219:if(!a){K.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:c.avc===-1&&(c.avc=E);break;case 3:case 4:o.mpeg!==!0&&o.mp3!==!0?K.log("MPEG audio found, not supported in this browser"):c.audio===-1&&(c.audio=E,c.segmentCodec="mp3");break;case 36:K.warn("Unsupported HEVC stream type found");break}n+=((m[n+3]&15)<<8|m[n+4])+5}return c}function vi(m){let n=0,o,a,c,d,p;const v=m.data;if(!m||m.size===0)return null;for(;v[0].length<19&&v.length>1;){const w=new Uint8Array(v[0].length+v[1].length);w.set(v[0]),w.set(v[1],v[0].length),v[0]=w,v.splice(1,1)}if(o=v[0],(o[0]<<16)+(o[1]<<8)+o[2]===1){if(a=(o[4]<<8)+o[5],a&&a>m.size-6)return null;const w=o[7];w&192&&(d=(o[9]&14)*536870912+(o[10]&255)*4194304+(o[11]&254)*16384+(o[12]&255)*128+(o[13]&254)/2,w&64?(p=(o[14]&14)*536870912+(o[15]&255)*4194304+(o[16]&254)*16384+(o[17]&255)*128+(o[18]&254)/2,d-p>60*9e4&&(K.warn(`${Math.round((d-p)/9e4)}s delta between PTS and DTS, align them`),d=p)):p=d),c=o[8];let I=c+9;if(m.size<=I)return null;m.size-=I;const T=new Uint8Array(m.size);for(let $=0,H=v.length;$<H;$++){o=v[$];let V=o.byteLength;if(I)if(I>V){I-=V;continue}else o=o.subarray(I),V-=I,I=0;T.set(o,n),n+=V}return a&&(a-=c+3),{data:T,pts:d,dts:p,len:a}}return null}function zo(m,n){if(m.units.length&&m.frame){if(m.pts===void 0){const o=n.samples,a=o.length;if(a){const c=o[a-1];m.pts=c.pts,m.dts=c.dts}else{n.dropped++;return}}n.samples.push(m)}m.debug.length&&K.log(m.pts+"/"+m.dts+":"+m.debug)}class La extends tn{resetInitSegment(n,o,a,c){super.resetInitSegment(n,o,a,c),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:o,duration:c,inputTimeScale:9e4,dropped:0}}static probe(n){if(!n)return!1;let a=(Qr(n,0)||[]).length;for(let c=n.length;a<c;a++)if(Ri(n,a))return K.log("MPEG Audio sync word found !"),!0;return!1}canParse(n,o){return Sa(n,o)}appendFrame(n,o,a){if(this.basePTS!==null)return un(n,o,a,this.basePTS,this.frameIndex)}}class Yi{static getSilentFrame(n,o){switch(n){case"mp4a.40.2":if(o===1)return new Uint8Array([0,200,0,128,35,128]);if(o===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(o===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(o===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(o===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(o===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(o===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(o===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(o===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ci=Math.pow(2,32)-1;class Ce{static init(){Ce.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let n;for(n in Ce.types)Ce.types.hasOwnProperty(n)&&(Ce.types[n]=[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)]);const o=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),a=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Ce.HDLR_TYPES={video:o,audio:a};const c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),d=new Uint8Array([0,0,0,0,0,0,0,0]);Ce.STTS=Ce.STSC=Ce.STCO=d,Ce.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ce.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Ce.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Ce.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const p=new Uint8Array([105,115,111,109]),v=new Uint8Array([97,118,99,49]),E=new Uint8Array([0,0,0,1]);Ce.FTYP=Ce.box(Ce.types.ftyp,p,E,p,v),Ce.DINF=Ce.box(Ce.types.dinf,Ce.box(Ce.types.dref,c))}static box(n,...o){let a=8,c=o.length;const d=c;for(;c--;)a+=o[c].byteLength;const p=new Uint8Array(a);for(p[0]=a>>24&255,p[1]=a>>16&255,p[2]=a>>8&255,p[3]=a&255,p.set(n,4),c=0,a=8;c<d;c++)p.set(o[c],a),a+=o[c].byteLength;return p}static hdlr(n){return Ce.box(Ce.types.hdlr,Ce.HDLR_TYPES[n])}static mdat(n){return Ce.box(Ce.types.mdat,n)}static mdhd(n,o){o*=n;const a=Math.floor(o/(Ci+1)),c=Math.floor(o%(Ci+1));return Ce.box(Ce.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,a>>24,a>>16&255,a>>8&255,a&255,c>>24,c>>16&255,c>>8&255,c&255,85,196,0,0]))}static mdia(n){return Ce.box(Ce.types.mdia,Ce.mdhd(n.timescale,n.duration),Ce.hdlr(n.type),Ce.minf(n))}static mfhd(n){return Ce.box(Ce.types.mfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]))}static minf(n){return n.type==="audio"?Ce.box(Ce.types.minf,Ce.box(Ce.types.smhd,Ce.SMHD),Ce.DINF,Ce.stbl(n)):Ce.box(Ce.types.minf,Ce.box(Ce.types.vmhd,Ce.VMHD),Ce.DINF,Ce.stbl(n))}static moof(n,o,a){return Ce.box(Ce.types.moof,Ce.mfhd(n),Ce.traf(a,o))}static moov(n){let o=n.length;const a=[];for(;o--;)a[o]=Ce.trak(n[o]);return Ce.box.apply(null,[Ce.types.moov,Ce.mvhd(n[0].timescale,n[0].duration)].concat(a).concat(Ce.mvex(n)))}static mvex(n){let o=n.length;const a=[];for(;o--;)a[o]=Ce.trex(n[o]);return Ce.box.apply(null,[Ce.types.mvex,...a])}static mvhd(n,o){o*=n;const a=Math.floor(o/(Ci+1)),c=Math.floor(o%(Ci+1)),d=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,a>>24,a>>16&255,a>>8&255,a&255,c>>24,c>>16&255,c>>8&255,c&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ce.box(Ce.types.mvhd,d)}static sdtp(n){const o=n.samples||[],a=new Uint8Array(4+o.length);let c,d;for(c=0;c<o.length;c++)d=o[c].flags,a[c+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy;return Ce.box(Ce.types.sdtp,a)}static stbl(n){return Ce.box(Ce.types.stbl,Ce.stsd(n),Ce.box(Ce.types.stts,Ce.STTS),Ce.box(Ce.types.stsc,Ce.STSC),Ce.box(Ce.types.stsz,Ce.STSZ),Ce.box(Ce.types.stco,Ce.STCO))}static avc1(n){let o=[],a=[],c,d,p;for(c=0;c<n.sps.length;c++)d=n.sps[c],p=d.byteLength,o.push(p>>>8&255),o.push(p&255),o=o.concat(Array.prototype.slice.call(d));for(c=0;c<n.pps.length;c++)d=n.pps[c],p=d.byteLength,a.push(p>>>8&255),a.push(p&255),a=a.concat(Array.prototype.slice.call(d));const v=Ce.box(Ce.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|n.sps.length].concat(o).concat([n.pps.length]).concat(a))),E=n.width,w=n.height,I=n.pixelRatio[0],T=n.pixelRatio[1];return Ce.box(Ce.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,E>>8&255,E&255,w>>8&255,w&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),v,Ce.box(Ce.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ce.box(Ce.types.pasp,new Uint8Array([I>>24,I>>16&255,I>>8&255,I&255,T>>24,T>>16&255,T>>8&255,T&255])))}static esds(n){const o=n.config.length;return new Uint8Array([0,0,0,0,3,23+o,0,1,0,4,15+o,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([o]).concat(n.config).concat([6,1,2]))}static mp4a(n){const o=n.samplerate;return Ce.box(Ce.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n.channelCount,0,16,0,0,0,0,o>>8&255,o&255,0,0]),Ce.box(Ce.types.esds,Ce.esds(n)))}static mp3(n){const o=n.samplerate;return Ce.box(Ce.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n.channelCount,0,16,0,0,0,0,o>>8&255,o&255,0,0]))}static stsd(n){return n.type==="audio"?n.segmentCodec==="mp3"&&n.codec==="mp3"?Ce.box(Ce.types.stsd,Ce.STSD,Ce.mp3(n)):Ce.box(Ce.types.stsd,Ce.STSD,Ce.mp4a(n)):Ce.box(Ce.types.stsd,Ce.STSD,Ce.avc1(n))}static tkhd(n){const o=n.id,a=n.duration*n.timescale,c=n.width,d=n.height,p=Math.floor(a/(Ci+1)),v=Math.floor(a%(Ci+1));return Ce.box(Ce.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,o>>24&255,o>>16&255,o>>8&255,o&255,0,0,0,0,p>>24,p>>16&255,p>>8&255,p&255,v>>24,v>>16&255,v>>8&255,v&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,c>>8&255,c&255,0,0,d>>8&255,d&255,0,0]))}static traf(n,o){const a=Ce.sdtp(n),c=n.id,d=Math.floor(o/(Ci+1)),p=Math.floor(o%(Ci+1));return Ce.box(Ce.types.traf,Ce.box(Ce.types.tfhd,new Uint8Array([0,0,0,0,c>>24,c>>16&255,c>>8&255,c&255])),Ce.box(Ce.types.tfdt,new Uint8Array([1,0,0,0,d>>24,d>>16&255,d>>8&255,d&255,p>>24,p>>16&255,p>>8&255,p&255])),Ce.trun(n,a.length+16+20+8+16+8+8),a)}static trak(n){return n.duration=n.duration||4294967295,Ce.box(Ce.types.trak,Ce.tkhd(n),Ce.mdia(n))}static trex(n){const o=n.id;return Ce.box(Ce.types.trex,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(n,o){const a=n.samples||[],c=a.length,d=12+16*c,p=new Uint8Array(d);let v,E,w,I,T,$;for(o+=8+d,p.set([n.type==="video"?1:0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,c&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255],0),v=0;v<c;v++)E=a[v],w=E.duration,I=E.size,T=E.flags,$=E.cts,p.set([w>>>24&255,w>>>16&255,w>>>8&255,w&255,I>>>24&255,I>>>16&255,I>>>8&255,I&255,T.isLeading<<2|T.dependsOn,T.isDependedOn<<6|T.hasRedundancy<<4|T.paddingValue<<1|T.isNonSync,T.degradPrio&240<<8,T.degradPrio&15,$>>>24&255,$>>>16&255,$>>>8&255,$&255],12+16*v);return Ce.box(Ce.types.trun,p)}static initSegment(n){Ce.types||Ce.init();const o=Ce.moov(n),a=new Uint8Array(Ce.FTYP.byteLength+o.byteLength);return a.set(Ce.FTYP),a.set(o,Ce.FTYP.byteLength),a}}Ce.types=void 0,Ce.HDLR_TYPES=void 0,Ce.STTS=void 0,Ce.STSC=void 0,Ce.STCO=void 0,Ce.STSZ=void 0,Ce.VMHD=void 0,Ce.SMHD=void 0,Ce.STSD=void 0,Ce.FTYP=void 0,Ce.DINF=void 0;const Xi=9e4;function Ra(m,n,o=1,a=!1){const c=m*n*o;return a?Math.round(c):c}function Il(m,n,o=1,a=!1){return Ra(m,n,1/o,a)}function ys(m,n=!1){return Ra(m,1e3,1/Xi,n)}function l1(m,n=1){return Ra(m,Xi,1/n)}const Tl=10*1e3,u1=1024,Dl=1152;let _n=null,Ia=null;class Ta{constructor(n,o,a,c=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=n,this.config=o,this.typeSupported=a,this.ISGenerated=!1,_n===null){const p=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);_n=p?parseInt(p[1]):0}if(Ia===null){const d=navigator.userAgent.match(/Safari\/(\d+)/i);Ia=d?parseInt(d[1]):0}}destroy(){}resetTimeStamp(n){K.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=n}resetNextTimestamp(){K.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){K.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(n){let o=!1;const a=n.reduce((c,d)=>{const p=d.pts-c;return p<-4294967296?(o=!0,Zn(c,d.pts)):p>0?c:d.pts},n[0].pts);return o&&K.debug("PTS rollover detected"),a}remux(n,o,a,c,d,p,v,E){let w,I,T,$,H,V,U=d,z=d;const se=n.pid>-1,Ee=o.pid>-1,de=o.samples.length,ke=n.samples.length>0,Ie=v&&de>0||de>1;if((!se||ke)&&(!Ee||Ie)||this.ISGenerated||v){this.ISGenerated||(T=this.generateIS(n,o,d,p));const $e=this.isVideoContiguous;let ot=-1,ut;if(Ie&&(ot=Al(o.samples),!$e&&this.config.forceKeyFrameOnDiscontinuity))if(V=!0,ot>0){K.warn(`[mp4-remuxer]: Dropped ${ot} out of ${de} video samples due to a missing keyframe`);const Oe=this.getVideoStartPts(o.samples);o.samples=o.samples.slice(ot),o.dropped+=ot,z+=(o.samples[0].pts-Oe)/o.inputTimeScale,ut=z}else ot===-1&&(K.warn(`[mp4-remuxer]: No keyframe found out of ${de} video samples`),V=!1);if(this.ISGenerated){if(ke&&Ie){const Oe=this.getVideoStartPts(o.samples),ft=(Zn(n.samples[0].pts,Oe)-Oe)/o.inputTimeScale;U+=Math.max(0,ft),z+=Math.max(0,-ft)}if(ke){if(n.samplerate||(K.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),T=this.generateIS(n,o,d,p)),I=this.remuxAudio(n,U,this.isAudioContiguous,p,Ee||Ie||E===bt.AUDIO?z:void 0),Ie){const Oe=I?I.endPTS-I.startPTS:0;o.inputTimeScale||(K.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),T=this.generateIS(n,o,d,p)),w=this.remuxVideo(o,z,$e,Oe)}}else Ie&&(w=this.remuxVideo(o,z,$e,0));w&&(w.firstKeyFrame=ot,w.independent=ot!==-1,w.firstKeyFramePTS=ut)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(a.samples.length&&(H=Ii(a,d,this._initPTS,this._initDTS)),c.samples.length&&($=c1(c,d,this._initPTS))),{audio:I,video:w,initSegment:T,independent:V,text:$,id3:H}}generateIS(n,o,a,c){const d=n.samples,p=o.samples,v=this.typeSupported,E={},w=this._initPTS;let I=!w||c,T="audio/mp4",$,H,V;if(I&&($=H=1/0),n.config&&d.length){switch(n.timescale=n.samplerate,n.segmentCodec){case"mp3":v.mpeg?(T="audio/mpeg",n.codec=""):v.mp3&&(n.codec="mp3");break}E.audio={id:"audio",container:T,codec:n.codec,initSegment:n.segmentCodec==="mp3"&&v.mpeg?new Uint8Array(0):Ce.initSegment([n]),metadata:{channelCount:n.channelCount}},I&&(V=n.inputTimeScale,!w||V!==w.timescale?$=H=d[0].pts-Math.round(V*a):I=!1)}if(o.sps&&o.pps&&p.length&&(o.timescale=o.inputTimeScale,E.video={id:"main",container:"video/mp4",codec:o.codec,initSegment:Ce.initSegment([o]),metadata:{width:o.width,height:o.height}},I))if(V=o.inputTimeScale,!w||V!==w.timescale){const U=this.getVideoStartPts(p),z=Math.round(V*a);H=Math.min(H,Zn(p[0].dts,U)-z),$=Math.min($,U-z)}else I=!1;if(Object.keys(E).length)return this.ISGenerated=!0,I?(this._initPTS={baseTime:$,timescale:V},this._initDTS={baseTime:H,timescale:V}):$=V=void 0,{tracks:E,initPTS:$,timescale:V}}remuxVideo(n,o,a,c){const d=n.inputTimeScale,p=n.samples,v=[],E=p.length,w=this._initPTS;let I=this.nextAvcDts,T=8,$=this.videoSampleDuration,H,V,U=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY,se=!1;if(!a||I===null){const Ct=o*d,kt=p[0].pts-Zn(p[0].dts,p[0].pts);I=Ct-kt}const Ee=w.baseTime*d/w.timescale;for(let Ct=0;Ct<E;Ct++){const kt=p[Ct];kt.pts=Zn(kt.pts-Ee,I),kt.dts=Zn(kt.dts-Ee,I),kt.dts<p[Ct>0?Ct-1:Ct].dts&&(se=!0)}se&&p.sort(function(Ct,kt){const Sr=Ct.dts-kt.dts,pr=Ct.pts-kt.pts;return Sr||pr}),H=p[0].dts,V=p[p.length-1].dts;const de=V-H,ke=de?Math.round(de/(E-1)):$||n.inputTimeScale/30;if(a){const Ct=H-I,kt=Ct>ke,Sr=Ct<-1;if((kt||Sr)&&(kt?K.warn(`AVC: ${ys(Ct,!0)} ms (${Ct}dts) hole between fragments detected, filling it`):K.warn(`AVC: ${ys(-Ct,!0)} ms (${Ct}dts) overlapping between fragments detected`),!Sr||I>p[0].pts)){H=I;const pr=p[0].pts-Ct;p[0].dts=H,p[0].pts=pr,K.log(`Video: First PTS/DTS adjusted: ${ys(pr,!0)}/${ys(H,!0)}, delta: ${ys(Ct,!0)} ms`)}}H=Math.max(0,H);let Ie=0,it=0;for(let Ct=0;Ct<E;Ct++){const kt=p[Ct],Sr=kt.units,pr=Sr.length;let Er=0;for(let rn=0;rn<pr;rn++)Er+=Sr[rn].data.length;it+=Er,Ie+=pr,kt.length=Er,kt.dts=Math.max(kt.dts,H),U=Math.min(kt.pts,U),z=Math.max(kt.pts,z)}V=p[E-1].dts;const $e=it+4*Ie+8;let ot;try{ot=new Uint8Array($e)}catch(Ct){this.observer.emit(P.ERROR,P.ERROR,{type:be.MUX_ERROR,details:Z.REMUX_ALLOC_ERROR,fatal:!1,error:Ct,bytes:$e,reason:`fail allocating video mdat ${$e}`});return}const ut=new DataView(ot.buffer);ut.setUint32(0,$e),ot.set(Ce.types.mdat,4);let Oe=!1,Ot=Number.POSITIVE_INFINITY,ft=Number.POSITIVE_INFINITY,Wt=Number.NEGATIVE_INFINITY,br=Number.NEGATIVE_INFINITY;for(let Ct=0;Ct<E;Ct++){const kt=p[Ct],Sr=kt.units;let pr=0;for(let On=0,Wn=Sr.length;On<Wn;On++){const dn=Sr[On],Co=dn.data,xs=dn.data.byteLength;ut.setUint32(T,xs),T+=4,ot.set(Co,T),T+=xs,pr+=4+xs}let Er;if(Ct<E-1)$=p[Ct+1].dts-kt.dts,Er=p[Ct+1].pts-kt.pts;else{const On=this.config,Wn=Ct>0?kt.dts-p[Ct-1].dts:ke;if(Er=Ct>0?kt.pts-p[Ct-1].pts:ke,On.stretchShortVideoTrack&&this.nextAudioPts!==null){const dn=Math.floor(On.maxBufferHole*d),Co=(c?U+c*d:this.nextAudioPts)-kt.pts;Co>dn?($=Co-Wn,$<0?$=Wn:Oe=!0,K.log(`[mp4-remuxer]: It is approximately ${Co/90} ms to the next segment; using duration ${$/90} ms for the last video frame.`)):$=Wn}else $=Wn}const rn=Math.round(kt.pts-kt.dts);Ot=Math.min(Ot,$),Wt=Math.max(Wt,$),ft=Math.min(ft,Er),br=Math.max(br,Er),v.push(new d1(kt.key,$,pr,rn))}if(v.length){if(_n){if(_n<70){const Ct=v[0].flags;Ct.dependsOn=2,Ct.isNonSync=0}}else if(Ia&&br-ft<Wt-Ot&&ke/Wt<.025&&v[0].cts===0){K.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Ct=H;for(let kt=0,Sr=v.length;kt<Sr;kt++){const pr=Ct+v[kt].duration,Er=Ct+v[kt].cts;if(kt<Sr-1){const rn=pr+v[kt+1].cts;v[kt].duration=rn-Er}else v[kt].duration=kt?v[kt-1].duration:ke;v[kt].cts=0,Ct=pr}}}$=Oe||!$?ke:$,this.nextAvcDts=I=V+$,this.videoSampleDuration=$,this.isVideoContiguous=!0;const $r=Ce.moof(n.sequenceNumber++,H,ae({},n,{samples:v})),Ur="video",Pr={data1:$r,data2:ot,startPTS:U/d,endPTS:(z+$)/d,startDTS:H/d,endDTS:I/d,type:Ur,hasAudio:!1,hasVideo:!0,nb:v.length,dropped:n.dropped};return n.samples=[],n.dropped=0,Pr}remuxAudio(n,o,a,c,d){const p=n.inputTimeScale,v=n.samplerate?n.samplerate:p,E=p/v,w=n.segmentCodec==="aac"?u1:Dl,I=w*E,T=this._initPTS,$=n.segmentCodec==="mp3"&&this.typeSupported.mpeg,H=[],V=d!==void 0;let U=n.samples,z=$?0:8,se=this.nextAudioPts||-1;const Ee=o*p,de=T.baseTime*p/T.timescale;if(this.isAudioContiguous=a=a||U.length&&se>0&&(c&&Math.abs(Ee-se)<9e3||Math.abs(Zn(U[0].pts-de,Ee)-se)<20*I),U.forEach(function(Ur){Ur.pts=Zn(Ur.pts-de,Ee)}),!a||se<0){if(U=U.filter(Ur=>Ur.pts>=0),!U.length)return;d===0?se=0:c&&!V?se=Math.max(0,Ee):se=U[0].pts}if(n.segmentCodec==="aac"){const Ur=this.config.maxAudioFramesDrift;for(let Pr=0,Ct=se;Pr<U.length;Pr++){const kt=U[Pr],Sr=kt.pts,pr=Sr-Ct,Er=Math.abs(1e3*pr/p);if(pr<=-Ur*I&&V)Pr===0&&(K.warn(`Audio frame @ ${(Sr/p).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*pr/p)} ms.`),this.nextAudioPts=se=Ct=Sr);else if(pr>=Ur*I&&Er<Tl&&V){let rn=Math.round(pr/I);Ct=Sr-rn*I,Ct<0&&(rn--,Ct+=I),Pr===0&&(this.nextAudioPts=se=Ct),K.warn(`[mp4-remuxer]: Injecting ${rn} audio frame @ ${(Ct/p).toFixed(3)}s due to ${Math.round(1e3*pr/p)} ms gap.`);for(let On=0;On<rn;On++){const Wn=Math.max(Ct,0);let dn=Yi.getSilentFrame(n.manifestCodec||n.codec,n.channelCount);dn||(K.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),dn=kt.unit.subarray()),U.splice(Pr,0,{unit:dn,pts:Wn}),Ct+=I,Pr++}}kt.pts=Ct,Ct+=I}}let ke=null,Ie=null,it,$e=0,ot=U.length;for(;ot--;)$e+=U[ot].unit.byteLength;for(let Ur=0,Pr=U.length;Ur<Pr;Ur++){const Ct=U[Ur],kt=Ct.unit;let Sr=Ct.pts;if(Ie!==null){const Er=H[Ur-1];Er.duration=Math.round((Sr-Ie)/E)}else if(a&&n.segmentCodec==="aac"&&(Sr=se),ke=Sr,$e>0){$e+=z;try{it=new Uint8Array($e)}catch(Er){this.observer.emit(P.ERROR,P.ERROR,{type:be.MUX_ERROR,details:Z.REMUX_ALLOC_ERROR,fatal:!1,error:Er,bytes:$e,reason:`fail allocating audio mdat ${$e}`});return}$||(new DataView(it.buffer).setUint32(0,$e),it.set(Ce.types.mdat,4))}else return;it.set(kt,z);const pr=kt.byteLength;z+=pr,H.push(new d1(!0,w,pr,0)),Ie=Sr}const ut=H.length;if(!ut)return;const Oe=H[H.length-1];this.nextAudioPts=se=Ie+E*Oe.duration;const Ot=$?new Uint8Array(0):Ce.moof(n.sequenceNumber++,ke/E,ae({},n,{samples:H}));n.samples=[];const ft=ke/p,Wt=se/p,$r={data1:Ot,data2:it,startPTS:ft,endPTS:Wt,startDTS:ft,endDTS:Wt,type:"audio",hasAudio:!0,hasVideo:!1,nb:ut};return this.isAudioContiguous=!0,$r}remuxEmptyAudio(n,o,a,c){const d=n.inputTimeScale,p=n.samplerate?n.samplerate:d,v=d/p,E=this.nextAudioPts,w=this._initDTS,I=w.baseTime*9e4/w.timescale,T=(E!==null?E:c.startDTS*d)+I,$=c.endDTS*d+I,H=v*u1,V=Math.ceil(($-T)/H),U=Yi.getSilentFrame(n.manifestCodec||n.codec,n.channelCount);if(K.warn("[mp4-remuxer]: remux empty Audio"),!U){K.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const z=[];for(let se=0;se<V;se++){const Ee=T+se*H;z.push({unit:U,pts:Ee,dts:Ee})}return n.samples=z,this.remuxAudio(n,o,a,!1)}}function Zn(m,n){let o;if(n===null)return m;for(n<m?o=-8589934592:o=8589934592;Math.abs(m-n)>4294967296;)m+=o;return m}function Al(m){for(let n=0;n<m.length;n++)if(m[n].key)return n;return-1}function Ii(m,n,o,a){const c=m.samples.length;if(!c)return;const d=m.inputTimeScale;for(let v=0;v<c;v++){const E=m.samples[v];E.pts=Zn(E.pts-o.baseTime*9e4/o.timescale,n*d)/d,E.dts=Zn(E.dts-a.baseTime*9e4/a.timescale,n*d)/d}const p=m.samples;return m.samples=[],{samples:p}}function c1(m,n,o){const a=m.samples.length;if(!a)return;const c=m.inputTimeScale;for(let p=0;p<a;p++){const v=m.samples[p];v.pts=Zn(v.pts-o.baseTime*9e4/o.timescale,n*c)/c}m.samples.sort((p,v)=>p.pts-v.pts);const d=m.samples;return m.samples=[],{samples:d}}class d1{constructor(n,o,a,c){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=o,this.size=a,this.cts=c,this.flags=new kl(n)}}class kl{constructor(n){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=n?2:1,this.isNonSync=n?0:1}}class Pl{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(n){this.initPTS=n,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(n,o,a,c){this.audioCodec=o,this.videoCodec=a,this.generateInitSegment(Lo(n,c)),this.emitInitSegment=!0}generateInitSegment(n){let{audioCodec:o,videoCodec:a}=this;if(!(n!=null&&n.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const c=this.initData=So(n);o||(o=h1(c.audio,wt.AUDIO)),a||(a=h1(c.video,wt.VIDEO));const d={};c.audio&&c.video?d.audiovideo={container:"video/mp4",codec:o+","+a,initSegment:n,id:"main"}:c.audio?d.audio={container:"audio/mp4",codec:o,initSegment:n,id:"audio"}:c.video?d.video={container:"video/mp4",codec:a,initSegment:n,id:"main"}:K.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=d}remux(n,o,a,c,d,p){var v,E;let{initPTS:w,lastEndTime:I}=this;const T={audio:void 0,video:void 0,text:c,id3:a,initSegment:void 0};fe(I)||(I=this.lastEndTime=d||0);const $=o.samples;if(!($!=null&&$.length))return T;const H={initPTS:void 0,timescale:1};let V=this.initData;if((v=V)!=null&&v.length||(this.generateInitSegment($),V=this.initData),!((E=V)!=null&&E.length))return K.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),T;this.emitInitSegment&&(H.tracks=this.initTracks,this.emitInitSegment=!1);const U=Fn(V,$),z=U===null?d:U;(Zs(w,z,d)||H.timescale!==w.timescale&&p)&&(H.initPTS=z-d,this.initPTS=w={baseTime:H.initPTS,timescale:1});const se=$i($,V),Ee=n?z-w.baseTime/w.timescale:I,de=Ee+se;Rn(V,$,w.baseTime/w.timescale),se>0?this.lastEndTime=de:(K.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const ke=!!V.audio,Ie=!!V.video;let it="";ke&&(it+="audio"),Ie&&(it+="video");const $e={data1:$,startPTS:Ee,startDTS:Ee,endPTS:de,endDTS:de,type:it,hasAudio:ke,hasVideo:Ie,nb:1,dropped:0};return T.audio=$e.type==="audio"?$e:void 0,T.video=$e.type!=="audio"?$e:void 0,T.initSegment=H,T.id3=Ii(a,d,w,w),c.samples.length&&(T.text=c1(c,d,w)),T}}function Zs(m,n,o){if(m===null)return!0;const a=n-m.baseTime/m.timescale;return a<0&&Math.abs(a-o)>1}function h1(m,n){const o=m?.codec;return o&&o.length>4?o:o==="hvc1"||o==="hev1"?"hvc1.1.c.L120.90":o==="av01"?"av01.0.04M.08":o==="avc1"||n===wt.VIDEO?"avc1.42e01e":"mp4a.40.5"}let Ti;try{Ti=self.performance.now.bind(self.performance)}catch{K.debug("Unable to use Performance API on this environment"),Ti=typeof self<"u"&&self.Date.now}const Go=[{demux:G,remux:Pl},{demux:mi,remux:Ta},{demux:M,remux:Ta},{demux:La,remux:Ta}];class f1{constructor(n,o,a,c,d){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=n,this.typeSupported=o,this.config=a,this.vendor=c,this.id=d}configure(n){this.transmuxConfig=n,this.decrypter&&this.decrypter.reset()}push(n,o,a,c){const d=a.transmuxing;d.executeStart=Ti();let p=new Uint8Array(n);const{currentTransmuxState:v,transmuxConfig:E}=this;c&&(this.currentTransmuxState=c);const{contiguous:w,discontinuity:I,trackSwitch:T,accurateTimeOffset:$,timeOffset:H,initSegmentChange:V}=c||v,{audioCodec:U,videoCodec:z,defaultInitPts:se,duration:Ee,initSegmentData:de}=E,ke=Ml(p,o);if(ke&&ke.method==="AES-128"){const ot=this.getDecrypter();if(ot.isSync()){let ut=ot.softwareDecrypt(p,ke.key.buffer,ke.iv.buffer);if(a.part>-1&&(ut=ot.flush()),!ut)return d.executeEnd=Ti(),Da(a);p=new Uint8Array(ut)}else return this.decryptionPromise=ot.webCryptoDecrypt(p,ke.key.buffer,ke.iv.buffer).then(ut=>{const Oe=this.push(ut,null,a);return this.decryptionPromise=null,Oe}),this.decryptionPromise}const Ie=this.needsProbing(I,T);if(Ie){const ot=this.configureTransmuxer(p);if(ot)return K.warn(`[transmuxer] ${ot.message}`),this.observer.emit(P.ERROR,P.ERROR,{type:be.MEDIA_ERROR,details:Z.FRAG_PARSING_ERROR,fatal:!1,error:ot,reason:ot.message}),d.executeEnd=Ti(),Da(a)}(I||T||V||Ie)&&this.resetInitSegment(de,U,z,Ee,o),(I||V||Ie)&&this.resetInitialTimestamp(se),w||this.resetContiguity();const it=this.transmux(p,ke,H,$,a),$e=this.currentTransmuxState;return $e.contiguous=!0,$e.discontinuity=!1,$e.trackSwitch=!1,d.executeEnd=Ti(),it}flush(n){const o=n.transmuxing;o.executeStart=Ti();const{decrypter:a,currentTransmuxState:c,decryptionPromise:d}=this;if(d)return d.then(()=>this.flush(n));const p=[],{timeOffset:v}=c;if(a){const T=a.flush();T&&p.push(this.push(T,null,n))}const{demuxer:E,remuxer:w}=this;if(!E||!w)return o.executeEnd=Ti(),[Da(n)];const I=E.flush(v);return zs(I)?I.then(T=>(this.flushRemux(p,T,n),p)):(this.flushRemux(p,I,n),p)}flushRemux(n,o,a){const{audioTrack:c,videoTrack:d,id3Track:p,textTrack:v}=o,{accurateTimeOffset:E,timeOffset:w}=this.currentTransmuxState;K.log(`[transmuxer.ts]: Flushed fragment ${a.sn}${a.part>-1?" p: "+a.part:""} of level ${a.level}`);const I=this.remuxer.remux(c,d,p,v,w,E,!0,this.id);n.push({remuxResult:I,chunkMeta:a}),a.transmuxing.executeEnd=Ti()}resetInitialTimestamp(n){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetTimeStamp(n),a.resetTimeStamp(n))}resetContiguity(){const{demuxer:n,remuxer:o}=this;!n||!o||(n.resetContiguity(),o.resetNextTimestamp())}resetInitSegment(n,o,a,c,d){const{demuxer:p,remuxer:v}=this;!p||!v||(p.resetInitSegment(n,o,a,c),v.resetInitSegment(n,o,a,d))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(n,o,a,c,d){let p;return o&&o.method==="SAMPLE-AES"?p=this.transmuxSampleAes(n,o,a,c,d):p=this.transmuxUnencrypted(n,a,c,d),p}transmuxUnencrypted(n,o,a,c){const{audioTrack:d,videoTrack:p,id3Track:v,textTrack:E}=this.demuxer.demux(n,o,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(d,p,v,E,o,a,!1,this.id),chunkMeta:c}}transmuxSampleAes(n,o,a,c,d){return this.demuxer.demuxSampleAes(n,o,a).then(p=>({remuxResult:this.remuxer.remux(p.audioTrack,p.videoTrack,p.id3Track,p.textTrack,a,c,!1,this.id),chunkMeta:d}))}configureTransmuxer(n){const{config:o,observer:a,typeSupported:c,vendor:d}=this;let p;for(let T=0,$=Go.length;T<$;T++)if(Go[T].demux.probe(n)){p=Go[T];break}if(!p)return new Error("Failed to find demuxer by probing fragment data");const v=this.demuxer,E=this.remuxer,w=p.remux,I=p.demux;(!E||!(E instanceof w))&&(this.remuxer=new w(a,o,c,d)),(!v||!(v instanceof I))&&(this.demuxer=new I(a,o,c),this.probe=I.probe)}needsProbing(n,o){return!this.demuxer||!this.remuxer||n||o}getDecrypter(){let n=this.decrypter;return n||(n=this.decrypter=new gs(this.config)),n}}function Ml(m,n){let o=null;return m.byteLength>0&&n!=null&&n.key!=null&&n.iv!==null&&n.method!=null&&(o=n),o}const Da=m=>({remuxResult:{},chunkMeta:m});function zs(m){return"then"in m&&m.then instanceof Function}class Ol{constructor(n,o,a,c,d){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=n,this.videoCodec=o,this.initSegmentData=a,this.duration=c,this.defaultInitPts=d||null}}class Bl{constructor(n,o,a,c,d,p){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=n,this.contiguous=o,this.accurateTimeOffset=a,this.trackSwitch=c,this.timeOffset=d,this.initSegmentChange=p}}var ws={},$l={get exports(){return ws},set exports(m){ws=m}};(function(m){var n=Object.prototype.hasOwnProperty,o="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(o=!1));function c(E,w,I){this.fn=E,this.context=w,this.once=I||!1}function d(E,w,I,T,$){if(typeof I!="function")throw new TypeError("The listener must be a function");var H=new c(I,T||E,$),V=o?o+w:w;return E._events[V]?E._events[V].fn?E._events[V]=[E._events[V],H]:E._events[V].push(H):(E._events[V]=H,E._eventsCount++),E}function p(E,w){--E._eventsCount===0?E._events=new a:delete E._events[w]}function v(){this._events=new a,this._eventsCount=0}v.prototype.eventNames=function(){var w=[],I,T;if(this._eventsCount===0)return w;for(T in I=this._events)n.call(I,T)&&w.push(o?T.slice(1):T);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(I)):w},v.prototype.listeners=function(w){var I=o?o+w:w,T=this._events[I];if(!T)return[];if(T.fn)return[T.fn];for(var $=0,H=T.length,V=new Array(H);$<H;$++)V[$]=T[$].fn;return V},v.prototype.listenerCount=function(w){var I=o?o+w:w,T=this._events[I];return T?T.fn?1:T.length:0},v.prototype.emit=function(w,I,T,$,H,V){var U=o?o+w:w;if(!this._events[U])return!1;var z=this._events[U],se=arguments.length,Ee,de;if(z.fn){switch(z.once&&this.removeListener(w,z.fn,void 0,!0),se){case 1:return z.fn.call(z.context),!0;case 2:return z.fn.call(z.context,I),!0;case 3:return z.fn.call(z.context,I,T),!0;case 4:return z.fn.call(z.context,I,T,$),!0;case 5:return z.fn.call(z.context,I,T,$,H),!0;case 6:return z.fn.call(z.context,I,T,$,H,V),!0}for(de=1,Ee=new Array(se-1);de<se;de++)Ee[de-1]=arguments[de];z.fn.apply(z.context,Ee)}else{var ke=z.length,Ie;for(de=0;de<ke;de++)switch(z[de].once&&this.removeListener(w,z[de].fn,void 0,!0),se){case 1:z[de].fn.call(z[de].context);break;case 2:z[de].fn.call(z[de].context,I);break;case 3:z[de].fn.call(z[de].context,I,T);break;case 4:z[de].fn.call(z[de].context,I,T,$);break;default:if(!Ee)for(Ie=1,Ee=new Array(se-1);Ie<se;Ie++)Ee[Ie-1]=arguments[Ie];z[de].fn.apply(z[de].context,Ee)}}return!0},v.prototype.on=function(w,I,T){return d(this,w,I,T,!1)},v.prototype.once=function(w,I,T){return d(this,w,I,T,!0)},v.prototype.removeListener=function(w,I,T,$){var H=o?o+w:w;if(!this._events[H])return this;if(!I)return p(this,H),this;var V=this._events[H];if(V.fn)V.fn===I&&(!$||V.once)&&(!T||V.context===T)&&p(this,H);else{for(var U=0,z=[],se=V.length;U<se;U++)(V[U].fn!==I||$&&!V[U].once||T&&V[U].context!==T)&&z.push(V[U]);z.length?this._events[H]=z.length===1?z[0]:z:p(this,H)}return this},v.prototype.removeAllListeners=function(w){var I;return w?(I=o?o+w:w,this._events[I]&&p(this,I)):(this._events=new a,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=o,v.EventEmitter=v,m.exports=v})($l);const Aa=jo()||{isTypeSupported:()=>!1};class p1{constructor(n,o,a,c){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const d=n.config;this.hls=n,this.id=o,this.useWorker=!!d.enableWorker,this.onTransmuxComplete=a,this.onFlush=c;const p=(w,I)=>{I=I||{},I.frag=this.frag,I.id=this.id,w===P.ERROR&&(this.error=I.error),this.hls.trigger(w,I)};this.observer=new ws,this.observer.on(P.FRAG_DECRYPTED,p),this.observer.on(P.ERROR,p);const v={mp4:Aa.isTypeSupported("video/mp4"),mpeg:Aa.isTypeSupported("audio/mpeg"),mp3:Aa.isTypeSupported('audio/mp4; codecs="mp3"')},E=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(d.workerPath||Un())){try{d.workerPath?(K.log(`loading Web Worker ${d.workerPath} for "${o}"`),this.workerContext=Tr(d.workerPath)):(K.log(`injecting Web Worker for "${o}"`),this.workerContext=Li()),this.onwmsg=T=>this.onWorkerMessage(T);const{worker:I}=this.workerContext;I.addEventListener("message",this.onwmsg),I.onerror=T=>{const $=new Error(`${T.message}  (${T.filename}:${T.lineno})`);d.enableWorker=!1,K.warn(`Error in "${o}" Web Worker, fallback to inline`),this.hls.trigger(P.ERROR,{type:be.OTHER_ERROR,details:Z.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:$})},I.postMessage({cmd:"init",typeSupported:v,vendor:E,id:o,config:JSON.stringify(d)})}catch(I){K.warn(`Error setting up "${o}" Web Worker, fallback to inline`,I),this.resetWorker(),this.error=null,this.transmuxer=new f1(this.observer,v,d,E,o)}return}this.transmuxer=new f1(this.observer,v,d,E,o)}resetWorker(){if(this.workerContext){const{worker:n,objectURL:o}=this.workerContext;o&&self.URL.revokeObjectURL(o),n.removeEventListener("message",this.onwmsg),n.onerror=null,n.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const o=this.transmuxer;o&&(o.destroy(),this.transmuxer=null)}const n=this.observer;n&&n.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(n,o,a,c,d,p,v,E,w,I){var T,$;w.transmuxing.start=self.performance.now();const{transmuxer:H}=this,V=p?p.start:d.start,U=d.decryptdata,z=this.frag,se=!(z&&d.cc===z.cc),Ee=!(z&&w.level===z.level),de=z?w.sn-z.sn:-1,ke=this.part?w.part-this.part.index:-1,Ie=de===0&&w.id>1&&w.id===z?.stats.chunkCount,it=!Ee&&(de===1||de===0&&(ke===1||Ie&&ke<=0)),$e=self.performance.now();(Ee||de||d.stats.parsing.start===0)&&(d.stats.parsing.start=$e),p&&(ke||!it)&&(p.stats.parsing.start=$e);const ot=!(z&&((T=d.initSegment)==null?void 0:T.url)===(($=z.initSegment)==null?void 0:$.url)),ut=new Bl(se,it,E,Ee,V,ot);if(!it||se||ot){K.log(`[transmuxer-interface, ${d.type}]: Starting new transmux session for sn: ${w.sn} p: ${w.part} level: ${w.level} id: ${w.id}
        discontinuity: ${se}
        trackSwitch: ${Ee}
        contiguous: ${it}
        accurateTimeOffset: ${E}
        timeOffset: ${V}
        initSegmentChange: ${ot}`);const Oe=new Ol(a,c,o,v,I);this.configureTransmuxer(Oe)}if(this.frag=d,this.part=p,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:n,decryptdata:U,chunkMeta:w,state:ut},n instanceof ArrayBuffer?[n]:[]);else if(H){const Oe=H.push(n,U,w,ut);zs(Oe)?(H.async=!0,Oe.then(Ot=>{this.handleTransmuxComplete(Ot)}).catch(Ot=>{this.transmuxerError(Ot,w,"transmuxer-interface push error")})):(H.async=!1,this.handleTransmuxComplete(Oe))}}flush(n){n.transmuxing.start=self.performance.now();const{transmuxer:o}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:n});else if(o){let a=o.flush(n);zs(a)||o.async?(zs(a)||(a=Promise.resolve(a)),a.then(d=>{this.handleFlushResult(d,n)}).catch(d=>{this.transmuxerError(d,n,"transmuxer-interface flush error")})):this.handleFlushResult(a,n)}}transmuxerError(n,o,a){!this.hls||(this.error=n,this.hls.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.FRAG_PARSING_ERROR,chunkMeta:o,fatal:!1,error:n,err:n,reason:a}))}handleFlushResult(n,o){n.forEach(a=>{this.handleTransmuxComplete(a)}),this.onFlush(o)}onWorkerMessage(n){const o=n.data,a=this.hls;switch(o.event){case"init":{var c;const d=(c=this.workerContext)==null?void 0:c.objectURL;d&&self.URL.revokeObjectURL(d);break}case"transmuxComplete":{this.handleTransmuxComplete(o.data);break}case"flush":{this.onFlush(o.data);break}case"workerLog":K[o.data.logType]&&K[o.data.logType](o.data.message);break;default:{o.data=o.data||{},o.data.frag=this.frag,o.data.id=this.id,a.trigger(o.event,o.data);break}}}configureTransmuxer(n){const{transmuxer:o}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:n}):o&&o.configure(n)}handleTransmuxComplete(n){n.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(n)}}const Fl=250,ka=2,Hl=.1,Nl=.05;class Vl{constructor(n,o,a,c){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=n,this.media=o,this.fragmentTracker=a,this.hls=c}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(n,o){const{config:a,media:c,stalled:d}=this;if(c===null)return;const{currentTime:p,seeking:v}=c,E=this.seeking&&!v,w=!this.seeking&&v;if(this.seeking=v,p!==n){if(this.moved=!0,d!==null){if(this.stallReported){const se=self.performance.now()-d;K.warn(`playback not stuck anymore @${p}, after ${Math.round(se)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(w||E){this.stalled=null;return}if(c.paused&&!v||c.ended||c.playbackRate===0||!kr.getBuffered(c).length)return;const I=kr.bufferInfo(c,p,0),T=I.len>0,$=I.nextStart||0;if(!T&&!$)return;if(v){const se=I.len>ka,Ee=!$||o&&o.start<=p||$-p>ka&&!this.fragmentTracker.getPartialFragment(p);if(se||Ee)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var H;const se=Math.max($,I.start||0)-p,Ee=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,ke=(Ee==null||(H=Ee.details)==null?void 0:H.live)?Ee.details.targetduration*2:ka,Ie=this.fragmentTracker.getPartialFragment(p);if(se>0&&(se<=ke||Ie)){this._trySkipBufferHole(Ie);return}}const V=self.performance.now();if(d===null){this.stalled=V;return}const U=V-d;if(!v&&U>=Fl&&(this._reportStall(I),!this.media))return;const z=kr.bufferInfo(c,p,a.maxBufferHole);this._tryFixBufferStall(z,U)}_tryFixBufferStall(n,o){const{config:a,fragmentTracker:c,media:d}=this;if(d===null)return;const p=d.currentTime,v=c.getPartialFragment(p);v&&(this._trySkipBufferHole(v)||!this.media)||(n.len>a.maxBufferHole||n.nextStart&&n.nextStart-p<a.maxBufferHole)&&o>a.highBufferWatchdogPeriod*1e3&&(K.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(n){const{hls:o,media:a,stallReported:c}=this;if(!c&&a){this.stallReported=!0;const d=new Error(`Playback stalling at @${a.currentTime} due to low buffer (${JSON.stringify(n)})`);K.warn(d.message),o.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.BUFFER_STALLED_ERROR,fatal:!1,error:d,buffer:n.len})}}_trySkipBufferHole(n){const{config:o,hls:a,media:c}=this;if(c===null)return 0;const d=c.currentTime,p=kr.bufferInfo(c,d,0),v=d<p.start?p.start:p.nextStart;if(v){const E=p.len<=o.maxBufferHole,w=p.len>0&&p.len<1&&c.readyState<3,I=v-d;if(I>0&&(E||w)){if(I>o.maxBufferHole){const{fragmentTracker:$}=this;let H=!1;if(d===0){const V=$.getAppendedFrag(0,bt.MAIN);V&&v<V.end&&(H=!0)}if(!H){const V=n||$.getAppendedFrag(d,bt.MAIN);if(V){let U=!1,z=V.end;for(;z<v;){const se=$.getPartialFragment(z);if(se)z+=se.duration;else{U=!0;break}}if(U)return 0}}}const T=Math.max(v+Nl,d+Hl);if(K.warn(`skipping hole, adjusting currentTime from ${d} to ${T}`),this.moved=!0,this.stalled=null,c.currentTime=T,n&&!n.gap){const $=new Error(`fragment loaded with buffer holes, seeking from ${d} to ${T}`);a.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:$,reason:$.message,frag:n})}return T}}return 0}_tryNudgeBuffer(){const{config:n,hls:o,media:a,nudgeRetry:c}=this;if(a===null)return;const d=a.currentTime;if(this.nudgeRetry++,c<n.nudgeMaxRetry){const p=d+(c+1)*n.nudgeOffset,v=new Error(`Nudging 'currentTime' from ${d} to ${p}`);K.warn(v.message),a.currentTime=p,o.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.BUFFER_NUDGE_ON_STALL,error:v,fatal:!1})}else{const p=new Error(`Playhead still not moving while enough data buffered @${d} after ${n.nudgeMaxRetry} nudges`);K.error(p.message),o.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.BUFFER_STALLED_ERROR,error:p,fatal:!0})}}}const jl=100;class Ul extends Gi{constructor(n,o,a){super(n,o,a,"[stream-controller]",bt.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:n}=this;n.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(P.MANIFEST_LOADING,this.onManifestLoading,this),n.on(P.MANIFEST_PARSED,this.onManifestParsed,this),n.on(P.LEVEL_LOADING,this.onLevelLoading,this),n.on(P.LEVEL_LOADED,this.onLevelLoaded,this),n.on(P.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),n.on(P.ERROR,this.onError,this),n.on(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.on(P.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.on(P.BUFFER_CREATED,this.onBufferCreated,this),n.on(P.BUFFER_FLUSHED,this.onBufferFlushed,this),n.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),n.on(P.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:n}=this;n.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(P.MANIFEST_LOADING,this.onManifestLoading,this),n.off(P.MANIFEST_PARSED,this.onManifestParsed,this),n.off(P.LEVEL_LOADED,this.onLevelLoaded,this),n.off(P.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),n.off(P.ERROR,this.onError,this),n.off(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.off(P.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.off(P.BUFFER_CREATED,this.onBufferCreated,this),n.off(P.BUFFER_FLUSHED,this.onBufferFlushed,this),n.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),n.off(P.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(n){if(this.levels){const{lastCurrentTime:o,hls:a}=this;if(this.stopLoad(),this.setInterval(jl),this.level=-1,!this.startFragRequested){let c=a.startLevel;c===-1&&(a.config.testBandwidth&&this.levels.length>1?(c=0,this.bitrateTest=!0):c=a.nextAutoLevel),this.level=a.nextLoadLevel=c,this.loadedmetadata=!1}o>0&&n===-1&&(this.log(`Override startPosition with lastCurrentTime @${o.toFixed(3)}`),n=o),this.state=Be.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()}else this._forceStartLoad=!0,this.state=Be.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Be.WAITING_LEVEL:{var n;const{levels:a,level:c}=this,d=a==null||(n=a[c])==null?void 0:n.details;if(d&&(!d.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(d))break;this.state=Be.IDLE;break}break}case Be.FRAG_LOADING_WAITING_RETRY:{var o;const a=self.performance.now(),c=this.retryDate;(!c||a>=c||(o=this.media)!=null&&o.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=Be.IDLE)}break}this.state===Be.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:n,levelLastLoaded:o,levels:a,media:c}=this,{config:d,nextLoadLevel:p}=n;if(o===null||!c&&(this.startFragRequested||!d.startFragPrefetch)||this.altAudio&&this.audioOnly||!(a!=null&&a[p]))return;const v=a[p],E=this.getMainFwdBufferInfo();if(E===null)return;const w=this.getLevelDetails();if(w&&this._streamEnded(E,w)){const z={};this.altAudio&&(z.type="video"),this.hls.trigger(P.BUFFER_EOS,z),this.state=Be.ENDED;return}n.loadLevel!==p&&n.manualLevel===-1&&this.log(`Adapting to level ${p} from level ${this.level}`),this.level=n.nextLoadLevel=p;const I=v.details;if(!I||this.state===Be.WAITING_LEVEL||I.live&&this.levelLastLoaded!==p){this.level=p,this.state=Be.WAITING_LEVEL;return}const T=E.len,$=this.getMaxBufferLength(v.maxBitrate);if(T>=$)return;this.backtrackFragment&&this.backtrackFragment.start>E.end&&(this.backtrackFragment=null);const H=this.backtrackFragment?this.backtrackFragment.start:E.end;let V=this.getNextFragment(H,I);if(this.couldBacktrack&&!this.fragPrevious&&V&&V.sn!=="initSegment"&&this.fragmentTracker.getState(V)!==ln.OK){var U;const se=((U=this.backtrackFragment)!=null?U:V).sn-I.startSN,Ee=I.fragments[se-1];Ee&&V.cc===Ee.cc&&(V=Ee,this.fragmentTracker.removeFragment(Ee))}else this.backtrackFragment&&E.len&&(this.backtrackFragment=null);if(V&&this.isLoopLoading(V,H)){if(!V.gap){const se=this.audioOnly&&!this.altAudio?wt.AUDIO:wt.VIDEO,Ee=(se===wt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;Ee&&this.afterBufferFlushed(Ee,se,bt.MAIN)}V=this.getNextFragmentLoopLoading(V,I,E,bt.MAIN,$)}!V||(V.initSegment&&!V.initSegment.data&&!this.bitrateTest&&(V=V.initSegment),this.loadFragment(V,v,H))}loadFragment(n,o,a){const c=this.fragmentTracker.getState(n);this.fragCurrent=n,c===ln.NOT_LOADED?n.sn==="initSegment"?this._loadInitSegment(n,o):this.bitrateTest?(this.log(`Fragment ${n.sn} of level ${n.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(n,o)):(this.startFragRequested=!0,super.loadFragment(n,o,a)):this.clearTrackerIfNeeded(n)}getAppendedFrag(n){const o=this.fragmentTracker.getAppendedFrag(n,bt.MAIN);return o&&"fragment"in o?o.fragment:o}getBufferedFrag(n){return this.fragmentTracker.getBufferedFrag(n,bt.MAIN)}followingBufferedFrag(n){return n?this.getBufferedFrag(n.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:n,media:o}=this;if(o!=null&&o.readyState){let a;const c=this.getAppendedFrag(o.currentTime);if(c&&c.start>1&&this.flushMainBuffer(0,c.start-1),!o.paused&&n){const p=this.hls.nextLoadLevel,v=n[p],E=this.fragLastKbps;E&&this.fragCurrent?a=this.fragCurrent.duration*v.maxBitrate/(1e3*E)+1:a=0}else a=0;const d=this.getBufferedFrag(o.currentTime+a);if(d){const p=this.followingBufferedFrag(d);if(p){this.abortCurrentFrag();const v=p.maxStartPTS?p.maxStartPTS:p.start,E=p.duration,w=Math.max(d.end,v+Math.min(Math.max(E-this.config.maxFragLookUpTolerance,E*.5),E*.75));this.flushMainBuffer(w,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const n=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,n&&(n.abortRequests(),this.fragmentTracker.removeFragment(n)),this.state){case Be.KEY_LOADING:case Be.FRAG_LOADING:case Be.FRAG_LOADING_WAITING_RETRY:case Be.PARSING:case Be.PARSED:this.state=Be.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(n,o){super.flushMainBuffer(n,o,this.altAudio?"video":null)}onMediaAttached(n,o){super.onMediaAttached(n,o);const a=o.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),a.addEventListener("playing",this.onvplaying),a.addEventListener("seeked",this.onvseeked),this.gapController=new Vl(this.config,a,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:n}=this;n&&this.onvplaying&&this.onvseeked&&(n.removeEventListener("playing",this.onvplaying),n.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const n=this.media,o=n?n.currentTime:null;fe(o)&&this.log(`Media seeked to ${o.toFixed(3)}`);const a=this.getMainFwdBufferInfo();if(a===null||a.len===0){this.warn(`Main forward buffer length on "seeked" event ${a?a.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(P.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null}onManifestParsed(n,o){let a=!1,c=!1,d;o.levels.forEach(p=>{d=p.audioCodec,d&&(d.indexOf("mp4a.40.2")!==-1&&(a=!0),d.indexOf("mp4a.40.5")!==-1&&(c=!0))}),this.audioCodecSwitch=a&&c&&!or(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=o.levels,this.startFragRequested=!1}onLevelLoading(n,o){const{levels:a}=this;if(!a||this.state!==Be.IDLE)return;const c=a[o.level];(!c.details||c.details.live&&this.levelLastLoaded!==o.level||this.waitForCdnTuneIn(c.details))&&(this.state=Be.WAITING_LEVEL)}onLevelLoaded(n,o){var a;const{levels:c}=this,d=o.level,p=o.details,v=p.totalduration;if(!c){this.warn(`Levels were reset while loading level ${d}`);return}this.log(`Level ${d} loaded [${p.startSN},${p.endSN}], cc [${p.startCC}, ${p.endCC}] duration:${v}`);const E=c[d],w=this.fragCurrent;w&&(this.state===Be.FRAG_LOADING||this.state===Be.FRAG_LOADING_WAITING_RETRY)&&(w.level!==o.level||w.urlId!==E.urlId)&&w.loader&&this.abortCurrentFrag();let I=0;if(p.live||(a=E.details)!=null&&a.live){if(p.fragments[0]||(p.deltaUpdateFailed=!0),p.deltaUpdateFailed)return;I=this.alignPlaylists(p,E.details)}if(E.details=p,this.levelLastLoaded=d,this.hls.trigger(P.LEVEL_UPDATED,{details:p,level:d}),this.state===Be.WAITING_LEVEL){if(this.waitForCdnTuneIn(p))return;this.state=Be.IDLE}this.startFragRequested?p.live&&this.synchronizeToLiveEdge(p):this.setStartPosition(p,I),this.tick()}_handleFragmentLoadProgress(n){var o;const{frag:a,part:c,payload:d}=n,{levels:p}=this;if(!p){this.warn(`Levels were reset while fragment load was in progress. Fragment ${a.sn} of level ${a.level} will not be buffered`);return}const v=p[a.level],E=v.details;if(!E){this.warn(`Dropping fragment ${a.sn} of level ${a.level} after level details were reset`),this.fragmentTracker.removeFragment(a);return}const w=v.videoCodec,I=E.PTSKnown||!E.live,T=(o=a.initSegment)==null?void 0:o.data,$=this._getAudioCodec(v),H=this.transmuxer=this.transmuxer||new p1(this.hls,bt.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),V=c?c.index:-1,U=V!==-1,z=new Ho(a.level,a.sn,a.stats.chunkCount,d.byteLength,V,U),se=this.initPTS[a.cc];H.push(d,T,$,w,a,c,E.totalduration,I,z,se)}onAudioTrackSwitching(n,o){const a=this.altAudio;if(!!!o.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const p=this.fragCurrent;p&&(this.log("Switching to main audio track, cancel main fragment load"),p.abortRequests(),this.fragmentTracker.removeFragment(p)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const d=this.hls;a&&(d.trigger(P.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),d.trigger(P.AUDIO_TRACK_SWITCHED,o)}}onAudioTrackSwitched(n,o){const a=o.id,c=!!this.hls.audioTracks[a].url;if(c){const d=this.videoBuffer;d&&this.mediaBuffer!==d&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=d)}this.altAudio=c,this.tick()}onBufferCreated(n,o){const a=o.tracks;let c,d,p=!1;for(const v in a){const E=a[v];if(E.id==="main"){if(d=v,c=E,v==="video"){const w=a[v];w&&(this.videoBuffer=w.buffer)}}else p=!0}p&&c?(this.log(`Alternate track found, use ${d}.buffered to schedule main fragment loading`),this.mediaBuffer=c.buffer):this.mediaBuffer=this.media}onFragBuffered(n,o){const{frag:a,part:c}=o;if(a&&a.type!==bt.MAIN)return;if(this.fragContextChanged(a)){this.warn(`Fragment ${a.sn}${c?" p: "+c.index:""} of level ${a.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Be.PARSED&&(this.state=Be.IDLE);return}const d=c?c.stats:a.stats;this.fragLastKbps=Math.round(8*d.total/(d.buffering.end-d.loading.first)),a.sn!=="initSegment"&&(this.fragPrevious=a),this.fragBufferedComplete(a,c)}onError(n,o){var a;if(o.fatal){this.state=Be.ERROR;return}switch(o.details){case Z.FRAG_GAP:case Z.FRAG_PARSING_ERROR:case Z.FRAG_DECRYPT_ERROR:case Z.FRAG_LOAD_ERROR:case Z.FRAG_LOAD_TIMEOUT:case Z.KEY_LOAD_ERROR:case Z.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(bt.MAIN,o);break;case Z.LEVEL_LOAD_ERROR:case Z.LEVEL_LOAD_TIMEOUT:case Z.LEVEL_PARSING_ERROR:!o.levelRetry&&this.state===Be.WAITING_LEVEL&&((a=o.context)==null?void 0:a.type)===At.LEVEL&&(this.state=Be.IDLE);break;case Z.BUFFER_FULL_ERROR:if(!o.parent||o.parent!=="main")return;this.reduceLengthAndFlushBuffer(o)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Z.INTERNAL_EXCEPTION:this.recoverWorkerError(o);break}}checkBuffer(){const{media:n,gapController:o}=this;if(!(!n||!o||!n.readyState)){if(this.loadedmetadata||!kr.getBuffered(n).length){const a=this.state!==Be.IDLE?this.fragCurrent:null;o.poll(this.lastCurrentTime,a)}this.lastCurrentTime=n.currentTime}}onFragLoadEmergencyAborted(){this.state=Be.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(n,{type:o}){if(o!==wt.AUDIO||this.audioOnly&&!this.altAudio){const a=(o===wt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(a,o,bt.MAIN)}}onLevelsUpdated(n,o){this.levels=o.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:n}=this;if(!n)return;const o=n.currentTime;let a=this.startPosition;if(a>=0&&o<a){if(n.seeking){this.log(`could not seek to ${a}, already seeking at ${o}`);return}const c=kr.getBuffered(n),p=(c.length?c.start(0):0)-a;p>0&&(p<this.config.maxBufferHole||p<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${p} to match buffer start`),a+=p,this.startPosition=a),this.log(`seek to target start position ${a} from current time ${o}`),n.currentTime=a}}_getAudioCodec(n){let o=this.config.defaultAudioCodec||n.audioCodec;return this.audioCodecSwap&&o&&(this.log("Swapping audio codec"),o.indexOf("mp4a.40.5")!==-1?o="mp4a.40.2":o="mp4a.40.5"),o}_loadBitrateTestFrag(n,o){n.bitrateTest=!0,this._doFragLoad(n,o).then(a=>{const{hls:c}=this;if(!a||this.fragContextChanged(n))return;o.fragmentError=0,this.state=Be.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const d=n.stats;d.parsing.start=d.parsing.end=d.buffering.start=d.buffering.end=self.performance.now(),c.trigger(P.FRAG_LOADED,a),n.bitrateTest=!1})}_handleTransmuxComplete(n){var o;const a="main",{hls:c}=this,{remuxResult:d,chunkMeta:p}=n,v=this.getCurrentContext(p);if(!v){this.resetWhenMissingContext(p);return}const{frag:E,part:w,level:I}=v,{video:T,text:$,id3:H,initSegment:V}=d,{details:U}=I,z=this.altAudio?void 0:d.audio;if(this.fragContextChanged(E)){this.fragmentTracker.removeFragment(E);return}if(this.state=Be.PARSING,V){V.tracks&&(this._bufferInitSegment(I,V.tracks,E,p),c.trigger(P.FRAG_PARSING_INIT_SEGMENT,{frag:E,id:a,tracks:V.tracks}));const se=V.initPTS,Ee=V.timescale;fe(se)&&(this.initPTS[E.cc]={baseTime:se,timescale:Ee},c.trigger(P.INIT_PTS_FOUND,{frag:E,id:a,initPTS:se,timescale:Ee}))}if(T&&d.independent!==!1){if(U){const{startPTS:se,endPTS:Ee,startDTS:de,endDTS:ke}=T;if(w)w.elementaryStreams[T.type]={startPTS:se,endPTS:Ee,startDTS:de,endDTS:ke};else if(T.firstKeyFrame&&T.independent&&p.id===1&&(this.couldBacktrack=!0),T.dropped&&T.independent){const Ie=this.getMainFwdBufferInfo(),it=(Ie?Ie.end:this.getLoadPosition())+this.config.maxBufferHole,$e=T.firstKeyFramePTS?T.firstKeyFramePTS:se;if(it<$e-this.config.maxBufferHole){this.backtrack(E);return}E.setElementaryStreamInfo(T.type,E.start,Ee,E.start,ke,!0)}E.setElementaryStreamInfo(T.type,se,Ee,de,ke),this.backtrackFragment&&(this.backtrackFragment=E),this.bufferFragmentData(T,E,w,p)}}else if(d.independent===!1){this.backtrack(E);return}if(z){const{startPTS:se,endPTS:Ee,startDTS:de,endDTS:ke}=z;w&&(w.elementaryStreams[wt.AUDIO]={startPTS:se,endPTS:Ee,startDTS:de,endDTS:ke}),E.setElementaryStreamInfo(wt.AUDIO,se,Ee,de,ke),this.bufferFragmentData(z,E,w,p)}if(U&&H!=null&&(o=H.samples)!=null&&o.length){const se={id:a,frag:E,details:U,samples:H.samples};c.trigger(P.FRAG_PARSING_METADATA,se)}if(U&&$){const se={id:a,frag:E,details:U,samples:$.samples};c.trigger(P.FRAG_PARSING_USERDATA,se)}}_bufferInitSegment(n,o,a,c){if(this.state!==Be.PARSING)return;this.audioOnly=!!o.audio&&!o.video,this.altAudio&&!this.audioOnly&&delete o.audio;const{audio:d,video:p,audiovideo:v}=o;if(d){let E=n.audioCodec;const w=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(E&&(E.indexOf("mp4a.40.5")!==-1?E="mp4a.40.2":E="mp4a.40.5"),d.metadata.channelCount!==1&&w.indexOf("firefox")===-1&&(E="mp4a.40.5")),w.indexOf("android")!==-1&&d.container!=="audio/mpeg"&&(E="mp4a.40.2",this.log(`Android: force audio codec to ${E}`)),n.audioCodec&&n.audioCodec!==E&&this.log(`Swapping manifest audio codec "${n.audioCodec}" for "${E}"`),d.levelCodec=E,d.id="main",this.log(`Init audio buffer, container:${d.container}, codecs[selected/level/parsed]=[${E||""}/${n.audioCodec||""}/${d.codec}]`)}p&&(p.levelCodec=n.videoCodec,p.id="main",this.log(`Init video buffer, container:${p.container}, codecs[level/parsed]=[${n.videoCodec||""}/${p.codec}]`)),v&&this.log(`Init audiovideo buffer, container:${v.container}, codecs[level/parsed]=[${n.attrs.CODECS||""}/${v.codec}]`),this.hls.trigger(P.BUFFER_CODECS,o),Object.keys(o).forEach(E=>{const I=o[E].initSegment;I!=null&&I.byteLength&&this.hls.trigger(P.BUFFER_APPENDING,{type:E,data:I,frag:a,part:null,chunkMeta:c,parent:a.type})}),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,bt.MAIN)}backtrack(n){this.couldBacktrack=!0,this.backtrackFragment=n,this.resetTransmuxer(),this.flushBufferGap(n),this.fragmentTracker.removeFragment(n),this.fragPrevious=null,this.nextLoadPosition=n.start,this.state=Be.IDLE}checkFragmentChanged(){const n=this.media;let o=null;if(n&&n.readyState>1&&n.seeking===!1){const a=n.currentTime;if(kr.isBuffered(n,a)?o=this.getAppendedFrag(a):kr.isBuffered(n,a+.1)&&(o=this.getAppendedFrag(a+.1)),o){this.backtrackFragment=null;const c=this.fragPlaying,d=o.level;(!c||o.sn!==c.sn||c.level!==d||o.urlId!==c.urlId)&&(this.fragPlaying=o,this.hls.trigger(P.FRAG_CHANGED,{frag:o}),(!c||c.level!==d)&&this.hls.trigger(P.LEVEL_SWITCHED,{level:d}))}}}get nextLevel(){const n=this.nextBufferedFrag;return n?n.level:-1}get currentFrag(){const n=this.media;return n?this.fragPlaying||this.getAppendedFrag(n.currentTime):null}get currentProgramDateTime(){const n=this.media;if(n){const o=n.currentTime,a=this.currentFrag;if(a&&fe(o)&&fe(a.programDateTime)){const c=a.programDateTime+(o-a.start)*1e3;return new Date(c)}}return null}get currentLevel(){const n=this.currentFrag;return n?n.level:-1}get nextBufferedFrag(){const n=this.currentFrag;return n?this.followingBufferedFrag(n):null}get forceStartLoad(){return this._forceStartLoad}}class go{constructor(n,o=0,a=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=n,this.alpha_=n?Math.exp(Math.log(.5)/n):0,this.estimate_=o,this.totalWeight_=a}sample(n,o){const a=Math.pow(this.alpha_,n);this.estimate_=o*(1-a)+a*this.estimate_,this.totalWeight_+=n}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const n=1-Math.pow(this.alpha_,this.totalWeight_);if(n)return this.estimate_/n}return this.estimate_}}class Zl{constructor(n,o,a,c=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new go(n),this.fast_=new go(o),this.defaultTTFB_=c,this.ttfb_=new go(n)}update(n,o){const{slow_:a,fast_:c,ttfb_:d}=this;a.halfLife!==n&&(this.slow_=new go(n,a.getEstimate(),a.getTotalWeight())),c.halfLife!==o&&(this.fast_=new go(o,c.getEstimate(),c.getTotalWeight())),d.halfLife!==n&&(this.ttfb_=new go(n,d.getEstimate(),d.getTotalWeight()))}sample(n,o){n=Math.max(n,this.minDelayMs_);const a=8*o,c=n/1e3,d=a/c;this.fast_.sample(c,d),this.slow_.sample(c,d)}sampleTTFB(n){const o=n/1e3,a=Math.sqrt(2)*Math.exp(-Math.pow(o,2)/2);this.ttfb_.sample(a,Math.max(n,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class Pa{constructor(n){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=n;const o=n.config;this.bwEstimator=new Zl(o.abrEwmaSlowVoD,o.abrEwmaFastVoD,o.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:n}=this;n.on(P.FRAG_LOADING,this.onFragLoading,this),n.on(P.FRAG_LOADED,this.onFragLoaded,this),n.on(P.FRAG_BUFFERED,this.onFragBuffered,this),n.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),n.on(P.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:n}=this;n.off(P.FRAG_LOADING,this.onFragLoading,this),n.off(P.FRAG_LOADED,this.onFragLoaded,this),n.off(P.FRAG_BUFFERED,this.onFragBuffered,this),n.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),n.off(P.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(n,o){var a;const c=o.frag;this.ignoreFragment(c)||(this.fragCurrent=c,this.partCurrent=(a=o.part)!=null?a:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(n,o){this.clearTimer()}getTimeToLoadFrag(n,o,a,c){const d=n+a/o,p=c?this.lastLevelLoadSec:0;return d+p}onLevelLoaded(n,o){const a=this.hls.config,{total:c,bwEstimate:d}=o.stats;fe(c)&&fe(d)&&(this.lastLevelLoadSec=8*c/d),o.details.live?this.bwEstimator.update(a.abrEwmaSlowLive,a.abrEwmaFastLive):this.bwEstimator.update(a.abrEwmaSlowVoD,a.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:n,partCurrent:o,hls:a}=this,{autoLevelEnabled:c,media:d}=a;if(!n||!d)return;const p=performance.now(),v=o?o.stats:n.stats,E=o?o.duration:n.duration,w=p-v.loading.start;if(v.aborted||v.loaded&&v.loaded===v.total||n.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!c||d.paused||!d.playbackRate||!d.readyState)return;const I=a.mainForwardBufferInfo;if(I===null)return;const T=this.bwEstimator.getEstimateTTFB(),$=Math.abs(d.playbackRate);if(w<=Math.max(T,1e3*(E/($*2))))return;const H=I.len/$;if(H>=2*E/$)return;const V=v.loading.first?v.loading.first-v.loading.start:-1,U=v.loaded&&V>-1,z=this.bwEstimator.getEstimate(),{levels:se,minAutoLevel:Ee}=a,de=se[n.level],ke=v.total||Math.max(v.loaded,Math.round(E*de.maxBitrate/8));let Ie=w-V;Ie<1&&U&&(Ie=Math.min(w,v.loaded*8/z));const it=U?v.loaded*1e3/Ie:0,$e=it?(ke-v.loaded)/it:ke*8/z+T/1e3;if($e<=H)return;const ot=it?it*8:z;let ut=Number.POSITIVE_INFINITY,Oe;for(Oe=n.level-1;Oe>Ee;Oe--){const Ot=se[Oe].maxBitrate;if(ut=this.getTimeToLoadFrag(T/1e3,ot,E*Ot,!se[Oe].details),ut<H)break}ut>=$e||ut>E*10||(a.nextLoadLevel=Oe,U?this.bwEstimator.sample(w-Math.min(T,V),v.loaded):this.bwEstimator.sampleTTFB(w),this.clearTimer(),K.warn(`[abr] Fragment ${n.sn}${o?" part "+o.index:""} of level ${n.level} is loading too slowly;
      Time to underbuffer: ${H.toFixed(3)} s
      Estimated load time for current fragment: ${$e.toFixed(3)} s
      Estimated load time for down switch fragment: ${ut.toFixed(3)} s
      TTFB estimate: ${V}
      Current BW estimate: ${fe(z)?(z/1024).toFixed(3):"Unknown"} Kb/s
      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s
      Aborting and switching to level ${Oe}`),n.loader&&(this.fragCurrent=this.partCurrent=null,n.abortRequests()),a.trigger(P.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:o,stats:v}))}onFragLoaded(n,{frag:o,part:a}){const c=a?a.stats:o.stats;if(o.type===bt.MAIN&&this.bwEstimator.sampleTTFB(c.loading.first-c.loading.start),!this.ignoreFragment(o)){if(this.clearTimer(),this.lastLoadedFragLevel=o.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const d=a?a.duration:o.duration,p=this.hls.levels[o.level],v=(p.loaded?p.loaded.bytes:0)+c.loaded,E=(p.loaded?p.loaded.duration:0)+d;p.loaded={bytes:v,duration:E},p.realBitrate=Math.round(8*v/E)}if(o.bitrateTest){const d={stats:c,frag:o,part:a,id:o.type};this.onFragBuffered(P.FRAG_BUFFERED,d),o.bitrateTest=!1}}}onFragBuffered(n,o){const{frag:a,part:c}=o,d=c!=null&&c.stats.loaded?c.stats:a.stats;if(d.aborted||this.ignoreFragment(a))return;const p=d.parsing.end-d.loading.start-Math.min(d.loading.first-d.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(p,d.loaded),d.bwEstimate=this.bwEstimator.getEstimate(),a.bitrateTest?this.bitrateTestDelay=p/1e3:this.bitrateTestDelay=0}ignoreFragment(n){return n.type!==bt.MAIN||n.sn==="initSegment"}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const n=this._nextAutoLevel,o=this.bwEstimator;if(n!==-1&&!o.canEstimate())return n;let a=this.getNextABRAutoLevel();if(n!==-1){const c=this.hls.levels;if(c.length>Math.max(n,a)&&c[n].loadError<=c[a].loadError)return n}return n!==-1&&(a=Math.min(n,a)),a}getNextABRAutoLevel(){const{fragCurrent:n,partCurrent:o,hls:a}=this,{maxAutoLevel:c,config:d,minAutoLevel:p,media:v}=a,E=o?o.duration:n?n.duration:0,w=v&&v.playbackRate!==0?Math.abs(v.playbackRate):1,I=this.bwEstimator?this.bwEstimator.getEstimate():d.abrEwmaDefaultEstimate,T=a.mainForwardBufferInfo,$=(T?T.len:0)/w;let H=this.findBestLevel(I,p,c,$,d.abrBandWidthFactor,d.abrBandWidthUpFactor);if(H>=0)return H;K.trace(`[abr] ${$?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let V=E?Math.min(E,d.maxStarvationDelay):d.maxStarvationDelay,U=d.abrBandWidthFactor,z=d.abrBandWidthUpFactor;if(!$){const se=this.bitrateTestDelay;se&&(V=(E?Math.min(E,d.maxLoadingDelay):d.maxLoadingDelay)-se,K.trace(`[abr] bitrate test took ${Math.round(1e3*se)}ms, set first fragment max fetchDuration to ${Math.round(1e3*V)} ms`),U=z=1)}return H=this.findBestLevel(I,p,c,$+V,U,z),Math.max(H,0)}findBestLevel(n,o,a,c,d,p){var v;const{fragCurrent:E,partCurrent:w,lastLoadedFragLevel:I}=this,{levels:T}=this.hls,$=T[I],H=!!($!=null&&(v=$.details)!=null&&v.live),V=$?.codecSet,U=w?w.duration:E?E.duration:0,z=this.bwEstimator.getEstimateTTFB()/1e3;let se=o,Ee=-1;for(let de=a;de>=o;de--){const ke=T[de];if(!ke||V&&ke.codecSet!==V){ke&&(se=Math.min(de,se),Ee=Math.max(de,Ee));continue}Ee!==-1&&K.trace(`[abr] Skipped level(s) ${se}-${Ee} with CODECS:"${T[Ee].attrs.CODECS}"; not compatible with "${$.attrs.CODECS}"`);const Ie=ke.details,it=(w?Ie?.partTarget:Ie?.averagetargetduration)||U;let $e;de<=I?$e=d*n:$e=p*n;const ot=T[de].maxBitrate,ut=this.getTimeToLoadFrag(z,$e,ot*it,Ie===void 0);if(K.trace(`[abr] level:${de} adjustedbw-bitrate:${Math.round($e-ot)} avgDuration:${it.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${ut.toFixed(1)}`),$e>ot&&(ut===0||!fe(ut)||H&&!this.bitrateTestDelay||ut<c))return de}return-1}set nextAutoLevel(n){this._nextAutoLevel=n}}class g1{constructor(){this.chunks=[],this.dataLength=0}push(n){this.chunks.push(n),this.dataLength+=n.length}flush(){const{chunks:n,dataLength:o}=this;let a;if(n.length)n.length===1?a=n[0]:a=zl(n,o);else return new Uint8Array(0);return this.reset(),a}reset(){this.chunks.length=0,this.dataLength=0}}function zl(m,n){const o=new Uint8Array(n);let a=0;for(let c=0;c<m.length;c++){const d=m[c];o.set(d,a),a+=d.length}return o}const m1=100;class Gl extends Gi{constructor(n,o,a){super(n,o,a,"[audio-stream-controller]",bt.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:n}=this;n.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(P.MANIFEST_LOADING,this.onManifestLoading,this),n.on(P.LEVEL_LOADED,this.onLevelLoaded,this),n.on(P.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),n.on(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.on(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.on(P.ERROR,this.onError,this),n.on(P.BUFFER_RESET,this.onBufferReset,this),n.on(P.BUFFER_CREATED,this.onBufferCreated,this),n.on(P.BUFFER_FLUSHED,this.onBufferFlushed,this),n.on(P.INIT_PTS_FOUND,this.onInitPtsFound,this),n.on(P.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:n}=this;n.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(P.MANIFEST_LOADING,this.onManifestLoading,this),n.off(P.LEVEL_LOADED,this.onLevelLoaded,this),n.off(P.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),n.off(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.off(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.off(P.ERROR,this.onError,this),n.off(P.BUFFER_RESET,this.onBufferReset,this),n.off(P.BUFFER_CREATED,this.onBufferCreated,this),n.off(P.BUFFER_FLUSHED,this.onBufferFlushed,this),n.off(P.INIT_PTS_FOUND,this.onInitPtsFound,this),n.off(P.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(n,{frag:o,id:a,initPTS:c,timescale:d}){if(a==="main"){const p=o.cc;this.initPTS[o.cc]={baseTime:c,timescale:d},this.log(`InitPTS for cc: ${p} found from main: ${c}`),this.videoTrackCC=p,this.state===Be.WAITING_INIT_PTS&&this.tick()}}startLoad(n){if(!this.levels){this.startPosition=n,this.state=Be.STOPPED;return}const o=this.lastCurrentTime;this.stopLoad(),this.setInterval(m1),o>0&&n===-1?(this.log(`Override startPosition with lastCurrentTime @${o.toFixed(3)}`),n=o,this.state=Be.IDLE):(this.loadedmetadata=!1,this.state=Be.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()}doTick(){switch(this.state){case Be.IDLE:this.doTickIdle();break;case Be.WAITING_TRACK:{var n;const{levels:a,trackId:c}=this,d=a==null||(n=a[c])==null?void 0:n.details;if(d){if(this.waitForCdnTuneIn(d))break;this.state=Be.WAITING_INIT_PTS}break}case Be.FRAG_LOADING_WAITING_RETRY:{var o;const a=performance.now(),c=this.retryDate;(!c||a>=c||(o=this.media)!=null&&o.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=Be.IDLE);break}case Be.WAITING_INIT_PTS:{const a=this.waitingData;if(a){const{frag:c,part:d,cache:p,complete:v}=a;if(this.initPTS[c.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=Be.FRAG_LOADING;const E=p.flush(),w={frag:c,part:d,payload:E,networkDetails:null};this._handleFragmentLoadProgress(w),v&&super._handleFragmentLoadComplete(w)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${c.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const E=this.getLoadPosition(),w=kr.bufferInfo(this.mediaBuffer,E,this.config.maxBufferHole);co(w.end,this.config.maxFragLookUpTolerance,c)<0&&(this.log(`Waiting fragment cc (${c.cc}) @ ${c.start} cancelled because another fragment at ${w.end} is needed`),this.clearWaitingFragment())}}else this.state=Be.IDLE}}this.onTickEnd()}clearWaitingFragment(){const n=this.waitingData;n&&(this.fragmentTracker.removeFragment(n.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Be.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:n}=this;!(n!=null&&n.readyState)||(this.lastCurrentTime=n.currentTime)}doTickIdle(){const{hls:n,levels:o,media:a,trackId:c}=this,d=n.config;if(!(o!=null&&o[c])||!a&&(this.startFragRequested||!d.startFragPrefetch))return;const p=o[c],v=p.details;if(!v||v.live&&this.levelLastLoaded!==c||this.waitForCdnTuneIn(v)){this.state=Be.WAITING_TRACK;return}const E=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&E&&(this.bufferFlushed=!1,this.afterBufferFlushed(E,wt.AUDIO,bt.AUDIO));const w=this.getFwdBufferInfo(E,bt.AUDIO);if(w===null)return;const{bufferedTrack:I,switchingTrack:T}=this;if(!T&&this._streamEnded(w,v)){n.trigger(P.BUFFER_EOS,{type:"audio"}),this.state=Be.ENDED;return}const $=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,bt.MAIN),H=w.len,V=this.getMaxBufferLength($?.len);if(H>=V&&!T)return;const z=v.fragments[0].start;let se=w.end;if(T&&a){const Ie=this.getLoadPosition();I&&T.attrs!==I.attrs&&(se=Ie),v.PTSKnown&&Ie<z&&(w.end>z||w.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),a.currentTime=z+.05)}let Ee=this.getNextFragment(se,v),de=!1;if(Ee&&this.isLoopLoading(Ee,se)&&(de=!!Ee.gap,Ee=this.getNextFragmentLoopLoading(Ee,v,w,bt.MAIN,V)),!Ee){this.bufferFlushed=!0;return}const ke=$&&Ee.start>$.end+v.targetduration;if(ke||!($!=null&&$.len)&&w.len){const Ie=this.fragmentTracker.getBufferedFrag(Ee.start,bt.MAIN);if(Ie===null||(de||(de=!!Ie.gap||!!ke&&$.len===0),ke&&!de||de&&w.nextStart&&w.nextStart<Ie.end))return}this.loadFragment(Ee,p,se)}getMaxBufferLength(n){const o=super.getMaxBufferLength();return n?Math.min(Math.max(o,n),this.config.maxMaxBufferLength):o}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(n,{audioTracks:o}){this.resetTransmuxer(),this.levels=o.map(a=>new Ui(a))}onAudioTrackSwitching(n,o){const a=!!o.url;this.trackId=o.id;const{fragCurrent:c}=this;c&&(c.abortRequests(),this.removeUnbufferedFrags(c.start)),this.resetLoadingState(),a?this.setInterval(m1):this.resetTransmuxer(),a?(this.switchingTrack=o,this.state=Be.IDLE):(this.switchingTrack=null,this.bufferedTrack=o,this.state=Be.STOPPED),this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.bufferedTrack=null,this.switchingTrack=null}onLevelLoaded(n,o){this.mainDetails=o.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(P.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(n,o){var a;if(this.mainDetails==null){this.cachedTrackLoadedData=o;return}const{levels:c}=this,{details:d,id:p}=o;if(!c){this.warn(`Audio tracks were reset while loading level ${p}`);return}this.log(`Track ${p} loaded [${d.startSN},${d.endSN}],duration:${d.totalduration}`);const v=c[p];let E=0;if(d.live||(a=v.details)!=null&&a.live){const w=this.mainDetails;if(d.fragments[0]||(d.deltaUpdateFailed=!0),d.deltaUpdateFailed||!w)return;!v.details&&d.hasProgramDateTime&&w.hasProgramDateTime?(ps(d,w),E=d.fragments[0].start):E=this.alignPlaylists(d,v.details)}v.details=d,this.levelLastLoaded=p,!this.startFragRequested&&(this.mainDetails||!d.live)&&this.setStartPosition(v.details,E),this.state===Be.WAITING_TRACK&&!this.waitForCdnTuneIn(d)&&(this.state=Be.IDLE),this.tick()}_handleFragmentLoadProgress(n){var o;const{frag:a,part:c,payload:d}=n,{config:p,trackId:v,levels:E}=this;if(!E){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${a.sn} of level ${a.level} will not be buffered`);return}const w=E[v];if(!w){this.warn("Audio track is undefined on fragment load progress");return}const I=w.details;if(!I){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(a.start);return}const T=p.defaultAudioCodec||w.audioCodec||"mp4a.40.2";let $=this.transmuxer;$||($=this.transmuxer=new p1(this.hls,bt.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const H=this.initPTS[a.cc],V=(o=a.initSegment)==null?void 0:o.data;if(H!==void 0){const z=c?c.index:-1,se=z!==-1,Ee=new Ho(a.level,a.sn,a.stats.chunkCount,d.byteLength,z,se);$.push(d,V,T,"",a,c,I.totalduration,!1,Ee,H)}else{this.log(`Unknown video PTS for cc ${a.cc}, waiting for video PTS before demuxing audio frag ${a.sn} of [${I.startSN} ,${I.endSN}],track ${v}`);const{cache:U}=this.waitingData=this.waitingData||{frag:a,part:c,cache:new g1,complete:!1};U.push(new Uint8Array(d)),this.waitingVideoCC=this.videoTrackCC,this.state=Be.WAITING_INIT_PTS}}_handleFragmentLoadComplete(n){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(n)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(n,o){const a=o.tracks.audio;a&&(this.mediaBuffer=a.buffer||null),o.tracks.video&&(this.videoBuffer=o.tracks.video.buffer||null)}onFragBuffered(n,o){const{frag:a,part:c}=o;if(a.type!==bt.AUDIO){if(!this.loadedmetadata&&a.type===bt.MAIN){var d;(d=this.videoBuffer||this.media)!=null&&d.buffered.length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(a)){this.warn(`Fragment ${a.sn}${c?" p: "+c.index:""} of level ${a.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(a.sn!=="initSegment"){this.fragPrevious=a;const p=this.switchingTrack;p&&(this.bufferedTrack=p,this.switchingTrack=null,this.hls.trigger(P.AUDIO_TRACK_SWITCHED,xe({},p)))}this.fragBufferedComplete(a,c)}onError(n,o){var a;if(o.fatal){this.state=Be.ERROR;return}switch(o.details){case Z.FRAG_GAP:case Z.FRAG_PARSING_ERROR:case Z.FRAG_DECRYPT_ERROR:case Z.FRAG_LOAD_ERROR:case Z.FRAG_LOAD_TIMEOUT:case Z.KEY_LOAD_ERROR:case Z.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(bt.AUDIO,o);break;case Z.AUDIO_TRACK_LOAD_ERROR:case Z.AUDIO_TRACK_LOAD_TIMEOUT:case Z.LEVEL_PARSING_ERROR:!o.levelRetry&&this.state===Be.WAITING_TRACK&&((a=o.context)==null?void 0:a.type)===At.AUDIO_TRACK&&(this.state=Be.IDLE);break;case Z.BUFFER_FULL_ERROR:if(!o.parent||o.parent!=="audio")return;this.reduceLengthAndFlushBuffer(o)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Z.INTERNAL_EXCEPTION:this.recoverWorkerError(o);break}}onBufferFlushed(n,{type:o}){o===wt.AUDIO&&(this.bufferFlushed=!0,this.state===Be.ENDED&&(this.state=Be.IDLE))}_handleTransmuxComplete(n){var o;const a="audio",{hls:c}=this,{remuxResult:d,chunkMeta:p}=n,v=this.getCurrentContext(p);if(!v){this.resetWhenMissingContext(p);return}const{frag:E,part:w,level:I}=v,{details:T}=I,{audio:$,text:H,id3:V,initSegment:U}=d;if(this.fragContextChanged(E)||!T){this.fragmentTracker.removeFragment(E);return}if(this.state=Be.PARSING,this.switchingTrack&&$&&this.completeAudioSwitch(this.switchingTrack),U!=null&&U.tracks&&(this._bufferInitSegment(U.tracks,E,p),c.trigger(P.FRAG_PARSING_INIT_SEGMENT,{frag:E,id:a,tracks:U.tracks})),$){const{startPTS:z,endPTS:se,startDTS:Ee,endDTS:de}=$;w&&(w.elementaryStreams[wt.AUDIO]={startPTS:z,endPTS:se,startDTS:Ee,endDTS:de}),E.setElementaryStreamInfo(wt.AUDIO,z,se,Ee,de),this.bufferFragmentData($,E,w,p)}if(V!=null&&(o=V.samples)!=null&&o.length){const z=ae({id:a,frag:E,details:T},V);c.trigger(P.FRAG_PARSING_METADATA,z)}if(H){const z=ae({id:a,frag:E,details:T},H);c.trigger(P.FRAG_PARSING_USERDATA,z)}}_bufferInitSegment(n,o,a){if(this.state!==Be.PARSING)return;n.video&&delete n.video;const c=n.audio;if(!c)return;c.levelCodec=c.codec,c.id="audio",this.log(`Init audio buffer, container:${c.container}, codecs[parsed]=[${c.codec}]`),this.hls.trigger(P.BUFFER_CODECS,n);const d=c.initSegment;if(d!=null&&d.byteLength){const p={type:"audio",frag:o,part:null,chunkMeta:a,parent:o.type,data:d};this.hls.trigger(P.BUFFER_APPENDING,p)}this.tick()}loadFragment(n,o,a){const c=this.fragmentTracker.getState(n);if(this.fragCurrent=n,this.switchingTrack||c===ln.NOT_LOADED||c===ln.PARTIAL){var d;n.sn==="initSegment"?this._loadInitSegment(n,o):(d=o.details)!=null&&d.live&&!this.initPTS[n.cc]?(this.log(`Waiting for video PTS in continuity counter ${n.cc} of live stream before loading audio fragment ${n.sn} of level ${this.trackId}`),this.state=Be.WAITING_INIT_PTS):(this.startFragRequested=!0,super.loadFragment(n,o,a))}else this.clearTrackerIfNeeded(n)}completeAudioSwitch(n){const{hls:o,media:a,bufferedTrack:c}=this,d=c?.attrs,p=n.attrs;a&&d&&(d.CHANNELS!==p.CHANNELS||d.NAME!==p.NAME||d.LANGUAGE!==p.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=n,this.switchingTrack=null,o.trigger(P.AUDIO_TRACK_SWITCHED,xe({},n))}}class Wl extends fo{constructor(n){super(n,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:n}=this;n.on(P.MANIFEST_LOADING,this.onManifestLoading,this),n.on(P.MANIFEST_PARSED,this.onManifestParsed,this),n.on(P.LEVEL_LOADING,this.onLevelLoading,this),n.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),n.on(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:n}=this;n.off(P.MANIFEST_LOADING,this.onManifestLoading,this),n.off(P.MANIFEST_PARSED,this.onManifestParsed,this),n.off(P.LEVEL_LOADING,this.onLevelLoading,this),n.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),n.off(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.off(P.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(n,o){this.tracks=o.audioTracks||[]}onAudioTrackLoaded(n,o){const{id:a,groupId:c,details:d}=o,p=this.tracksInGroup[a];if(!p||p.groupId!==c){this.warn(`Track with id:${a} and group:${c} not found in active group ${p.groupId}`);return}const v=p.details;p.details=o.details,this.log(`audio-track ${a} "${p.name}" lang:${p.lang} group:${c} loaded [${d.startSN}-${d.endSN}]`),a===this.trackId&&this.playlistLoaded(a,o,v)}onLevelLoading(n,o){this.switchLevel(o.level)}onLevelSwitching(n,o){this.switchLevel(o.level)}switchLevel(n){const o=this.hls.levels[n];if(!(o!=null&&o.audioGroupIds))return;const a=o.audioGroupIds[o.urlId];if(this.groupId!==a){this.groupId=a||null;const c=this.tracks.filter(p=>!a||p.groupId===a);this.selectDefaultTrack&&!c.some(p=>p.default)&&(this.selectDefaultTrack=!1),this.tracksInGroup=c;const d={audioTracks:c};this.log(`Updating audio tracks, ${c.length} track(s) found in group:${a}`),this.hls.trigger(P.AUDIO_TRACKS_UPDATED,d),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(n,o){o.fatal||!o.context||o.context.type===At.AUDIO_TRACK&&o.context.id===this.trackId&&o.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(o))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(n){this.selectDefaultTrack=!1,this.setAudioTrack(n)}setAudioTrack(n){const o=this.tracksInGroup;if(n<0||n>=o.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();const a=this.currentTrack;o[this.trackId];const c=o[n],{groupId:d,name:p}=c;if(this.log(`Switching to audio-track ${n} "${p}" lang:${c.lang} group:${d}`),this.trackId=n,this.currentTrack=c,this.selectDefaultTrack=!1,this.hls.trigger(P.AUDIO_TRACK_SWITCHING,xe({},c)),c.details&&!c.details.live)return;const v=this.switchParams(c.url,a?.details);this.loadPlaylist(v)}selectInitialTrack(){const n=this.tracksInGroup,o=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(o!==-1)this.setAudioTrack(o);else{const a=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${n.length}`);this.warn(a.message),this.hls.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:a})}}findTrackId(n){const o=this.tracksInGroup;for(let a=0;a<o.length;a++){const c=o[a];if((!this.selectDefaultTrack||c.default)&&(!n||n.attrs["STABLE-RENDITION-ID"]===c.attrs["STABLE-RENDITION-ID"]||n.name===c.name&&n.lang===c.lang))return c.id}return-1}loadPlaylist(n){super.loadPlaylist();const o=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(o)){const a=o.id,c=o.groupId;let d=o.url;if(n)try{d=n.addDirectives(d)}catch(p){this.warn(`Could not construct new URL with HLS Delivery Directives: ${p}`)}this.log(`loading audio-track playlist ${a} "${o.name}" lang:${o.lang} group:${c}`),this.clearTimer(),this.hls.trigger(P.AUDIO_TRACK_LOADING,{url:d,id:a,groupId:c,deliveryDirectives:n||null})}}}function v1(m,n){if(m.length!==n.length)return!1;for(let o=0;o<m.length;o++)if(!Kl(m[o].attrs,n[o].attrs))return!1;return!0}function Kl(m,n){const o=m["STABLE-RENDITION-ID"];return o?o===n["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(a=>m[a]!==n[a])}const C1=500;class Yl extends Gi{constructor(n,o,a){super(n,o,a,"[subtitle-stream-controller]",bt.SUBTITLE),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:n}=this;n.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(P.MANIFEST_LOADING,this.onManifestLoading,this),n.on(P.LEVEL_LOADED,this.onLevelLoaded,this),n.on(P.ERROR,this.onError,this),n.on(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.on(P.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),n.on(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.on(P.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),n.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),n.on(P.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:n}=this;n.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(P.MANIFEST_LOADING,this.onManifestLoading,this),n.off(P.LEVEL_LOADED,this.onLevelLoaded,this),n.off(P.ERROR,this.onError,this),n.off(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.off(P.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),n.off(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.off(P.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),n.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),n.off(P.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(n){this.stopLoad(),this.state=Be.IDLE,this.setInterval(C1),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(n,o){this.mainDetails=o.details}onSubtitleFragProcessed(n,o){const{frag:a,success:c}=o;if(this.fragPrevious=a,this.state=Be.IDLE,!c)return;const d=this.tracksBuffered[this.currentTrackId];if(!d)return;let p;const v=a.start;for(let w=0;w<d.length;w++)if(v>=d[w].start&&v<=d[w].end){p=d[w];break}const E=a.start+a.duration;p?p.end=E:(p={start:v,end:E},d.push(p)),this.fragmentTracker.fragBuffered(a)}onBufferFlushing(n,o){const{startOffset:a,endOffset:c}=o;if(a===0&&c!==Number.POSITIVE_INFINITY){const{currentTrackId:d,levels:p}=this;if(!p.length||!p[d]||!p[d].details)return;const E=p[d].details.targetduration,w=c-E;if(w<=0)return;o.endOffsetSubtitles=Math.max(0,w),this.tracksBuffered.forEach(I=>{for(let T=0;T<I.length;){if(I[T].end<=w){I.shift();continue}else if(I[T].start<w)I[T].start=w;else break;T++}}),this.fragmentTracker.removeFragmentsInRange(a,w,bt.SUBTITLE)}}onFragBuffered(n,o){if(!this.loadedmetadata&&o.frag.type===bt.MAIN){var a;(a=this.media)!=null&&a.buffered.length&&(this.loadedmetadata=!0)}}onError(n,o){const a=o.frag;a?.type===bt.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Be.STOPPED&&(this.state=Be.IDLE))}onSubtitleTracksUpdated(n,{subtitleTracks:o}){if(v1(this.levels,o)){this.levels=o.map(a=>new Ui(a));return}this.tracksBuffered=[],this.levels=o.map(a=>{const c=new Ui(a);return this.tracksBuffered[c.id]=[],c}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,bt.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(n,o){if(this.currentTrackId=o.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}const a=this.levels[this.currentTrackId];a!=null&&a.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,a&&this.setInterval(C1)}onSubtitleTrackLoaded(n,o){var a;const{details:c,id:d}=o,{currentTrackId:p,levels:v}=this;if(!v.length)return;const E=v[p];if(d>=v.length||d!==p||!E)return;this.mediaBuffer=this.mediaBufferTimeRanges;let w=0;if(c.live||(a=E.details)!=null&&a.live){const I=this.mainDetails;if(c.deltaUpdateFailed||!I)return;const T=I.fragments[0];E.details?(w=this.alignPlaylists(c,E.details),w===0&&T&&(w=T.start,Nn(c,w))):c.hasProgramDateTime&&I.hasProgramDateTime?(ps(c,I),w=c.fragments[0].start):T&&(w=T.start,Nn(c,w))}E.details=c,this.levelLastLoaded=d,!this.startFragRequested&&(this.mainDetails||!c.live)&&this.setStartPosition(E.details,w),this.tick(),c.live&&!this.fragCurrent&&this.media&&this.state===Be.IDLE&&(Vn(null,c.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),E.details=void 0))}_handleFragmentLoadComplete(n){const{frag:o,payload:a}=n,c=o.decryptdata,d=this.hls;if(!this.fragContextChanged(o)&&a&&a.byteLength>0&&c&&c.key&&c.iv&&c.method==="AES-128"){const p=performance.now();this.decrypter.decrypt(new Uint8Array(a),c.key.buffer,c.iv.buffer).catch(v=>{throw d.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.FRAG_DECRYPT_ERROR,fatal:!1,error:v,reason:v.message,frag:o}),v}).then(v=>{const E=performance.now();d.trigger(P.FRAG_DECRYPTED,{frag:o,payload:v,stats:{tstart:p,tdecrypt:E}})}).catch(v=>{this.warn(`${v.name}: ${v.message}`),this.state=Be.IDLE})}}doTick(){if(!this.media){this.state=Be.IDLE;return}if(this.state===Be.IDLE){const{currentTrackId:n,levels:o}=this,a=o[n];if(!o.length||!a||!a.details)return;const c=a.details,d=c.targetduration,{config:p}=this,v=this.getLoadPosition(),E=kr.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],v-d,p.maxBufferHole),{end:w,len:I}=E,T=this.getFwdBufferInfo(this.media,bt.MAIN),$=this.getMaxBufferLength(T?.len)+d;if(I>$)return;const H=c.fragments,V=H.length,U=c.edge;let z=null;const se=this.fragPrevious;if(w<U){const{maxFragLookUpTolerance:Ee}=p;z=Vn(se,H,Math.max(H[0].start,w),Ee),!z&&se&&se.start<H[0].start&&(z=H[0])}else z=H[V-1];if(!z)return;z=this.mapToInitFragWhenRequired(z),this.fragmentTracker.getState(z)===ln.NOT_LOADED&&this.loadFragment(z,a,w)}}getMaxBufferLength(n){const o=super.getMaxBufferLength();return n?Math.max(o,n):o}loadFragment(n,o,a){this.fragCurrent=n,n.sn==="initSegment"?this._loadInitSegment(n,o):(this.startFragRequested=!0,super.loadFragment(n,o,a))}get mediaBufferTimeRanges(){return new Xl(this.tracksBuffered[this.currentTrackId]||[])}}class Xl{constructor(n){this.buffered=void 0;const o=(a,c,d)=>{if(c=c>>>0,c>d-1)throw new DOMException(`Failed to execute '${a}' on 'TimeRanges': The index provided (${c}) is greater than the maximum bound (${d})`);return n[c][a]};this.buffered={get length(){return n.length},end(a){return o("end",a,n.length)},start(a){return o("start",a,n.length)}}}}class ql extends fo{constructor(n){super(n,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(n){this._subtitleDisplay=n,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:n}=this;n.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(P.MANIFEST_LOADING,this.onManifestLoading,this),n.on(P.MANIFEST_PARSED,this.onManifestParsed,this),n.on(P.LEVEL_LOADING,this.onLevelLoading,this),n.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),n.on(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:n}=this;n.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(P.MANIFEST_LOADING,this.onManifestLoading,this),n.off(P.MANIFEST_PARSED,this.onManifestParsed,this),n.off(P.LEVEL_LOADING,this.onLevelLoading,this),n.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),n.off(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.off(P.ERROR,this.onError,this)}onMediaAttached(n,o){this.media=o.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(n){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,n)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Ma(this.media.textTracks).forEach(o=>{Qn(o)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(n,o){this.tracks=o.subtitleTracks}onSubtitleTrackLoaded(n,o){const{id:a,details:c}=o,{trackId:d}=this,p=this.tracksInGroup[d];if(!p){this.warn(`Invalid subtitle track id ${a}`);return}const v=p.details;p.details=o.details,this.log(`subtitle track ${a} loaded [${c.startSN}-${c.endSN}]`),a===this.trackId&&this.playlistLoaded(a,o,v)}onLevelLoading(n,o){this.switchLevel(o.level)}onLevelSwitching(n,o){this.switchLevel(o.level)}switchLevel(n){const o=this.hls.levels[n];if(!(o!=null&&o.textGroupIds))return;const a=o.textGroupIds[o.urlId],c=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==a){const d=this.tracks.filter(E=>!a||E.groupId===a);this.tracksInGroup=d;const p=this.findTrackId(c?.name)||this.findTrackId();this.groupId=a||null;const v={subtitleTracks:d};this.log(`Updating subtitle tracks, ${d.length} track(s) found in "${a}" group-id`),this.hls.trigger(P.SUBTITLE_TRACKS_UPDATED,v),p!==-1&&this.setSubtitleTrack(p,c)}else this.shouldReloadPlaylist(c)&&this.setSubtitleTrack(this.trackId,c)}findTrackId(n){const o=this.tracksInGroup;for(let a=0;a<o.length;a++){const c=o[a];if((!this.selectDefaultTrack||c.default)&&(!n||n===c.name))return c.id}return-1}onError(n,o){o.fatal||!o.context||o.context.type===At.SUBTITLE_TRACK&&o.context.id===this.trackId&&o.context.groupId===this.groupId&&this.checkRetry(o)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(n){this.selectDefaultTrack=!1;const o=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(n,o)}loadPlaylist(n){super.loadPlaylist();const o=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(o)){const a=o.id,c=o.groupId;let d=o.url;if(n)try{d=n.addDirectives(d)}catch(p){this.warn(`Could not construct new URL with HLS Delivery Directives: ${p}`)}this.log(`Loading subtitle playlist for id ${a}`),this.hls.trigger(P.SUBTITLE_TRACK_LOADING,{url:d,id:a,groupId:c,deliveryDirectives:n||null})}}toggleTrackModes(n){const{media:o,trackId:a}=this;if(!o)return;const c=Ma(o.textTracks),d=c.filter(v=>v.groupId===this.groupId);if(n===-1)[].slice.call(c).forEach(v=>{v.mode="disabled"});else{const v=d[a];v&&(v.mode="disabled")}const p=d[n];p&&(p.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(n,o){var a;const c=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=n;return}if(this.trackId!==n&&this.toggleTrackModes(n),this.trackId===n&&(n===-1||(a=c[n])!=null&&a.details)||n<-1||n>=c.length)return;this.clearTimer();const d=c[n];if(this.log(`Switching to subtitle-track ${n}`+(d?` "${d.name}" lang:${d.lang} group:${d.groupId}`:"")),this.trackId=n,d){const{id:p,groupId:v="",name:E,type:w,url:I}=d;this.hls.trigger(P.SUBTITLE_TRACK_SWITCH,{id:p,groupId:v,name:E,type:w,url:I});const T=this.switchParams(d.url,o?.details);this.loadPlaylist(T)}else this.hls.trigger(P.SUBTITLE_TRACK_SWITCH,{id:n})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=-1;const o=Ma(this.media.textTracks);for(let a=0;a<o.length;a++)if(o[a].mode==="hidden")n=a;else if(o[a].mode==="showing"){n=a;break}this.subtitleTrack!==n&&(this.subtitleTrack=n)}}function Ma(m){const n=[];for(let o=0;o<m.length;o++){const a=m[o];(a.kind==="subtitles"||a.kind==="captions")&&a.label&&n.push(m[o])}return n}class Jl{constructor(n){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=n}append(n,o){const a=this.queues[o];a.push(n),a.length===1&&this.buffers[o]&&this.executeNext(o)}insertAbort(n,o){this.queues[o].unshift(n),this.executeNext(o)}appendBlocker(n){let o;const a=new Promise(d=>{o=d}),c={execute:o,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(c,n),a}executeNext(n){const{buffers:o,queues:a}=this,c=o[n],d=a[n];if(d.length){const p=d[0];try{p.execute()}catch(v){K.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),p.onError(v),c!=null&&c.updating||(d.shift(),this.executeNext(n))}}}shiftAndExecuteNext(n){this.queues[n].shift(),this.executeNext(n)}current(n){return this.queues[n][0]}}const E1=jo(),Wr=/([ha]vc.)(?:\.[^.,]+)+/;class wu{constructor(n){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:o,mediaSource:a}=this;K.log("[buffer-controller]: Media source opened"),o&&(o.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(P.MEDIA_ATTACHED,{media:o})),a&&a.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{K.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{K.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:o,_objectUrl:a}=this;o&&o.src!==a&&K.error(`Media element src was set while attaching MediaSource (${a} > ${o.src})`)},this.hls=n,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:n}=this;n.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),n.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(P.MANIFEST_PARSED,this.onManifestParsed,this),n.on(P.BUFFER_RESET,this.onBufferReset,this),n.on(P.BUFFER_APPENDING,this.onBufferAppending,this),n.on(P.BUFFER_CODECS,this.onBufferCodecs,this),n.on(P.BUFFER_EOS,this.onBufferEos,this),n.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),n.on(P.LEVEL_UPDATED,this.onLevelUpdated,this),n.on(P.FRAG_PARSED,this.onFragParsed,this),n.on(P.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:n}=this;n.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),n.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(P.MANIFEST_PARSED,this.onManifestParsed,this),n.off(P.BUFFER_RESET,this.onBufferReset,this),n.off(P.BUFFER_APPENDING,this.onBufferAppending,this),n.off(P.BUFFER_CODECS,this.onBufferCodecs,this),n.off(P.BUFFER_EOS,this.onBufferEos,this),n.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),n.off(P.LEVEL_UPDATED,this.onLevelUpdated,this),n.off(P.FRAG_PARSED,this.onFragParsed,this),n.off(P.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new Jl(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestParsed(n,o){let a=2;(o.audio&&!o.video||!o.altAudio)&&(a=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=a,this.details=null,K.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(n,o){const a=this.media=o.media;if(a&&E1){const c=this.mediaSource=new E1;c.addEventListener("sourceopen",this._onMediaSourceOpen),c.addEventListener("sourceended",this._onMediaSourceEnded),c.addEventListener("sourceclose",this._onMediaSourceClose),a.src=self.URL.createObjectURL(c),this._objectUrl=a.src,a.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:n,mediaSource:o,_objectUrl:a}=this;if(o){if(K.log("[buffer-controller]: media source detaching"),o.readyState==="open")try{o.endOfStream()}catch(c){K.warn(`[buffer-controller]: onMediaDetaching: ${c.message} while calling endOfStream`)}this.onBufferReset(),o.removeEventListener("sourceopen",this._onMediaSourceOpen),o.removeEventListener("sourceended",this._onMediaSourceEnded),o.removeEventListener("sourceclose",this._onMediaSourceClose),n&&(n.removeEventListener("emptied",this._onMediaEmptied),a&&self.URL.revokeObjectURL(a),n.src===a?(n.removeAttribute("src"),n.load()):K.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(P.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(n=>{const o=this.sourceBuffer[n];try{o&&(this.removeBufferListeners(n),this.mediaSource&&this.mediaSource.removeSourceBuffer(o),this.sourceBuffer[n]=void 0)}catch(a){K.warn(`[buffer-controller]: Failed to reset the ${n} buffer`,a)}}),this._initSourceBuffer()}onBufferCodecs(n,o){const a=this.getSourceBufferTypes().length;Object.keys(o).forEach(c=>{if(a){const d=this.tracks[c];if(d&&typeof d.buffer.changeType=="function"){const{id:p,codec:v,levelCodec:E,container:w,metadata:I}=o[c],T=(d.levelCodec||d.codec).replace(Wr,"$1"),$=(E||v).replace(Wr,"$1");if(T!==$){const H=`${w};codecs=${E||v}`;this.appendChangeType(c,H),K.log(`[buffer-controller]: switching codec ${T} to ${$}`),this.tracks[c]={buffer:d.buffer,codec:v,container:w,levelCodec:E,metadata:I,id:p}}}}else this.pendingTracks[c]=o[c]}),!a&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())}appendChangeType(n,o){const{operationQueue:a}=this,c={execute:()=>{const d=this.sourceBuffer[n];d&&(K.log(`[buffer-controller]: changing ${n} sourceBuffer type to ${o}`),d.changeType(o)),a.shiftAndExecuteNext(n)},onStart:()=>{},onComplete:()=>{},onError:d=>{K.warn(`[buffer-controller]: Failed to change ${n} SourceBuffer type`,d)}};a.append(c,n)}onBufferAppending(n,o){const{hls:a,operationQueue:c,tracks:d}=this,{data:p,type:v,frag:E,part:w,chunkMeta:I}=o,T=I.buffering[v],$=self.performance.now();T.start=$;const H=E.stats.buffering,V=w?w.stats.buffering:null;H.start===0&&(H.start=$),V&&V.start===0&&(V.start=$);const U=d.audio;let z=!1;v==="audio"&&U?.container==="audio/mpeg"&&(z=!this.lastMpegAudioChunk||I.id===1||this.lastMpegAudioChunk.sn!==I.sn,this.lastMpegAudioChunk=I);const se=E.start,Ee={execute:()=>{if(T.executeStart=self.performance.now(),z){const de=this.sourceBuffer[v];if(de){const ke=se-de.timestampOffset;Math.abs(ke)>=.1&&(K.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${se} (delta: ${ke}) sn: ${E.sn})`),de.timestampOffset=se)}}this.appendExecutor(p,v)},onStart:()=>{},onComplete:()=>{const de=self.performance.now();T.executeEnd=T.end=de,H.first===0&&(H.first=de),V&&V.first===0&&(V.first=de);const{sourceBuffer:ke}=this,Ie={};for(const it in ke)Ie[it]=kr.getBuffered(ke[it]);this.appendError=0,this.hls.trigger(P.BUFFER_APPENDED,{type:v,frag:E,part:w,chunkMeta:I,parent:E.type,timeRanges:Ie})},onError:de=>{K.error(`[buffer-controller]: Error encountered while trying to append to the ${v} SourceBuffer`,de);const ke={type:be.MEDIA_ERROR,parent:E.type,details:Z.BUFFER_APPEND_ERROR,frag:E,part:w,chunkMeta:I,error:de,err:de,fatal:!1};de.code===DOMException.QUOTA_EXCEEDED_ERR?ke.details=Z.BUFFER_FULL_ERROR:(this.appendError++,ke.details=Z.BUFFER_APPEND_ERROR,this.appendError>a.config.appendErrorMaxRetry&&(K.error(`[buffer-controller]: Failed ${a.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),ke.fatal=!0)),a.trigger(P.ERROR,ke)}};c.append(Ee,v)}onBufferFlushing(n,o){const{operationQueue:a}=this,c=d=>({execute:this.removeExecutor.bind(this,d,o.startOffset,o.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(P.BUFFER_FLUSHED,{type:d})},onError:p=>{K.warn(`[buffer-controller]: Failed to remove from ${d} SourceBuffer`,p)}});o.type?a.append(c(o.type),o.type):this.getSourceBufferTypes().forEach(d=>{a.append(c(d),d)})}onFragParsed(n,o){const{frag:a,part:c}=o,d=[],p=c?c.elementaryStreams:a.elementaryStreams;p[wt.AUDIOVIDEO]?d.push("audiovideo"):(p[wt.AUDIO]&&d.push("audio"),p[wt.VIDEO]&&d.push("video"));const v=()=>{const E=self.performance.now();a.stats.buffering.end=E,c&&(c.stats.buffering.end=E);const w=c?c.stats:a.stats;this.hls.trigger(P.FRAG_BUFFERED,{frag:a,part:c,stats:w,id:a.type})};d.length===0&&K.warn(`Fragments must have at least one ElementaryStreamType set. type: ${a.type} level: ${a.level} sn: ${a.sn}`),this.blockBuffers(v,d)}onFragChanged(n,o){this.flushBackBuffer()}onBufferEos(n,o){this.getSourceBufferTypes().reduce((c,d)=>{const p=this.sourceBuffer[d];return p&&(!o.type||o.type===d)&&(p.ending=!0,p.ended||(p.ended=!0,K.log(`[buffer-controller]: ${d} sourceBuffer now EOS`))),c&&!!(!p||p.ended)},!0)&&(K.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(d=>{const p=this.sourceBuffer[d];p&&(p.ending=!1)});const{mediaSource:c}=this;if(!c||c.readyState!=="open"){c&&K.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${c.readyState}`);return}K.log("[buffer-controller]: Calling mediaSource.endOfStream()"),c.endOfStream()}))}onLevelUpdated(n,{details:o}){!o.fragments.length||(this.details=o,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:n,details:o,media:a,sourceBuffer:c}=this;if(!a||o===null)return;const d=this.getSourceBufferTypes();if(!d.length)return;const p=o.live&&n.config.liveBackBufferLength!==null?n.config.liveBackBufferLength:n.config.backBufferLength;if(!fe(p)||p<0)return;const v=a.currentTime,E=o.levelTargetDuration,w=Math.max(p,E),I=Math.floor(v/E)*E-w;d.forEach(T=>{const $=c[T];if($){const H=kr.getBuffered($);if(H.length>0&&I>H.start(0)){if(n.trigger(P.BACK_BUFFER_REACHED,{bufferEnd:I}),o.live)n.trigger(P.LIVE_BACK_BUFFER_REACHED,{bufferEnd:I});else if($.ended&&H.end(H.length-1)-v<E*2){K.info(`[buffer-controller]: Cannot flush ${T} back buffer while SourceBuffer is in ended state`);return}n.trigger(P.BUFFER_FLUSHING,{startOffset:0,endOffset:I,type:T})}}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:n,hls:o,media:a,mediaSource:c}=this,d=n.fragments[0].start+n.totalduration,p=a.duration,v=fe(c.duration)?c.duration:0;n.live&&o.config.liveDurationInfinity?(K.log("[buffer-controller]: Media Source duration is set to Infinity"),c.duration=1/0,this.updateSeekableRange(n)):(d>v&&d>p||!fe(p))&&(K.log(`[buffer-controller]: Updating Media Source duration to ${d.toFixed(3)}`),c.duration=d)}updateSeekableRange(n){const o=this.mediaSource,a=n.fragments;if(a.length&&n.live&&o!=null&&o.setLiveSeekableRange){const d=Math.max(0,a[0].start),p=Math.max(d,d+n.totalduration);o.setLiveSeekableRange(d,p)}}checkPendingTracks(){const{bufferCodecEventsExpected:n,operationQueue:o,pendingTracks:a}=this,c=Object.keys(a).length;if(c&&!n||c===2){this.createSourceBuffers(a),this.pendingTracks={};const d=this.getSourceBufferTypes();if(d.length)this.hls.trigger(P.BUFFER_CREATED,{tracks:this.tracks}),d.forEach(p=>{o.executeNext(p)});else{const p=new Error("could not create source buffer for media codec(s)");this.hls.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:p,reason:p.message})}}}createSourceBuffers(n){const{sourceBuffer:o,mediaSource:a}=this;if(!a)throw Error("createSourceBuffers called when mediaSource was null");for(const c in n)if(!o[c]){const d=n[c];if(!d)throw Error(`source buffer exists for track ${c}, however track does not`);const p=d.levelCodec||d.codec,v=`${d.container};codecs=${p}`;K.log(`[buffer-controller]: creating sourceBuffer(${v})`);try{const E=o[c]=a.addSourceBuffer(v),w=c;this.addBufferListener(w,"updatestart",this._onSBUpdateStart),this.addBufferListener(w,"updateend",this._onSBUpdateEnd),this.addBufferListener(w,"error",this._onSBUpdateError),this.tracks[c]={buffer:E,codec:p,container:d.container,levelCodec:d.levelCodec,metadata:d.metadata,id:d.id}}catch(E){K.error(`[buffer-controller]: error while trying to add sourceBuffer: ${E.message}`),this.hls.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:E,mimeType:v})}}}_onSBUpdateStart(n){const{operationQueue:o}=this;o.current(n).onStart()}_onSBUpdateEnd(n){const{operationQueue:o}=this;o.current(n).onComplete(),o.shiftAndExecuteNext(n)}_onSBUpdateError(n,o){const a=new Error(`${n} SourceBuffer error`);K.error(`[buffer-controller]: ${a}`,o),this.hls.trigger(P.ERROR,{type:be.MEDIA_ERROR,details:Z.BUFFER_APPENDING_ERROR,error:a,fatal:!1});const c=this.operationQueue.current(n);c&&c.onError(o)}removeExecutor(n,o,a){const{media:c,mediaSource:d,operationQueue:p,sourceBuffer:v}=this,E=v[n];if(!c||!d||!E){K.warn(`[buffer-controller]: Attempting to remove from the ${n} SourceBuffer, but it does not exist`),p.shiftAndExecuteNext(n);return}const w=fe(c.duration)?c.duration:1/0,I=fe(d.duration)?d.duration:1/0,T=Math.max(0,o),$=Math.min(a,w,I);$>T&&!E.ending?(E.ended=!1,K.log(`[buffer-controller]: Removing [${T},${$}] from the ${n} SourceBuffer`),E.remove(T,$)):p.shiftAndExecuteNext(n)}appendExecutor(n,o){const{operationQueue:a,sourceBuffer:c}=this,d=c[o];if(!d){K.warn(`[buffer-controller]: Attempting to append to the ${o} SourceBuffer, but it does not exist`),a.shiftAndExecuteNext(o);return}d.ended=!1,d.appendBuffer(n)}blockBuffers(n,o=this.getSourceBufferTypes()){if(!o.length){K.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(n);return}const{operationQueue:a}=this,c=o.map(d=>a.appendBlocker(d));Promise.all(c).then(()=>{n(),o.forEach(d=>{const p=this.sourceBuffer[d];p!=null&&p.updating||a.shiftAndExecuteNext(d)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(n,o,a){const c=this.sourceBuffer[n];if(!c)return;const d=a.bind(this,n);this.listeners[n].push({event:o,listener:d}),c.addEventListener(o,d)}removeBufferListeners(n){const o=this.sourceBuffer[n];!o||this.listeners[n].forEach(a=>{o.removeEventListener(a.event,a.listener)})}}const y1={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},w1=function(n){let o=n;return y1.hasOwnProperty(n)&&(o=y1[n]),String.fromCharCode(o)},oi=15,zn=100,Oa={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Ql={17:2,18:4,21:6,22:8,23:10,19:13,20:15},et={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},bu={25:2,26:4,29:6,30:8,31:10,27:13,28:15},e0=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Ba{constructor(){this.time=null,this.verboseLevel=0}log(n,o){if(this.verboseLevel>=n){const a=typeof o=="function"?o():o;K.log(`${this.time} [${n}] ${a}`)}}}const mo=function(n){const o=[];for(let a=0;a<n.length;a++)o.push(n[a].toString(16));return o};class b1{constructor(n,o,a,c,d){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=n||"white",this.underline=o||!1,this.italics=a||!1,this.background=c||"black",this.flash=d||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(n){const o=["foreground","underline","italics","background","flash"];for(let a=0;a<o.length;a++){const c=o[a];n.hasOwnProperty(c)&&(this[c]=n[c])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(n){return this.foreground===n.foreground&&this.underline===n.underline&&this.italics===n.italics&&this.background===n.background&&this.flash===n.flash}copy(n){this.foreground=n.foreground,this.underline=n.underline,this.italics=n.italics,this.background=n.background,this.flash=n.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class t0{constructor(n,o,a,c,d,p){this.uchar=void 0,this.penState=void 0,this.uchar=n||" ",this.penState=new b1(o,a,c,d,p)}reset(){this.uchar=" ",this.penState.reset()}setChar(n,o){this.uchar=n,this.penState.copy(o)}setPenState(n){this.penState.copy(n)}equals(n){return this.uchar===n.uchar&&this.penState.equals(n.penState)}copy(n){this.uchar=n.uchar,this.penState.copy(n.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class r0{constructor(n){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let o=0;o<zn;o++)this.chars.push(new t0);this.logger=n,this.pos=0,this.currPenState=new b1}equals(n){let o=!0;for(let a=0;a<zn;a++)if(!this.chars[a].equals(n.chars[a])){o=!1;break}return o}copy(n){for(let o=0;o<zn;o++)this.chars[o].copy(n.chars[o])}isEmpty(){let n=!0;for(let o=0;o<zn;o++)if(!this.chars[o].isEmpty()){n=!1;break}return n}setCursor(n){this.pos!==n&&(this.pos=n),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>zn&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=zn)}moveCursor(n){const o=this.pos+n;if(n>1)for(let a=this.pos+1;a<o+1;a++)this.chars[a].setPenState(this.currPenState);this.setCursor(o)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(n){n>=144&&this.backSpace();const o=w1(n);if(this.pos>=zn){this.logger.log(0,()=>"Cannot insert "+n.toString(16)+" ("+o+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(o,this.currPenState),this.moveCursor(1)}clearFromPos(n){let o;for(o=n;o<zn;o++)this.chars[o].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const n=[];let o=!0;for(let a=0;a<zn;a++){const c=this.chars[a].uchar;c!==" "&&(o=!1),n.push(c)}return o?"":n.join("")}setPenStyles(n){this.currPenState.setStyles(n),this.chars[this.pos].setPenState(this.currPenState)}}class x1{constructor(n){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let o=0;o<oi;o++)this.rows.push(new r0(n));this.logger=n,this.currRow=oi-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let n=0;n<oi;n++)this.rows[n].clear();this.currRow=oi-1}equals(n){let o=!0;for(let a=0;a<oi;a++)if(!this.rows[a].equals(n.rows[a])){o=!1;break}return o}copy(n){for(let o=0;o<oi;o++)this.rows[o].copy(n.rows[o])}isEmpty(){let n=!0;for(let o=0;o<oi;o++)if(!this.rows[o].isEmpty()){n=!1;break}return n}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(n){this.rows[this.currRow].insertChar(n)}setPen(n){this.rows[this.currRow].setPenStyles(n)}moveCursor(n){this.rows[this.currRow].moveCursor(n)}setCursor(n){this.logger.log(2,"setCursor: "+n),this.rows[this.currRow].setCursor(n)}setPAC(n){this.logger.log(2,()=>"pacData = "+JSON.stringify(n));let o=n.row-1;if(this.nrRollUpRows&&o<this.nrRollUpRows-1&&(o=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==o){for(let v=0;v<oi;v++)this.rows[v].clear();const d=this.currRow+1-this.nrRollUpRows,p=this.lastOutputScreen;if(p){const v=p.rows[d].cueStartTime,E=this.logger.time;if(v&&E!==null&&v<E)for(let w=0;w<this.nrRollUpRows;w++)this.rows[o-this.nrRollUpRows+w+1].copy(p.rows[d+w])}}this.currRow=o;const a=this.rows[this.currRow];if(n.indent!==null){const d=n.indent,p=Math.max(d-1,0);a.setCursor(n.indent),n.color=a.chars[p].penState.foreground}const c={foreground:n.color,underline:n.underline,italics:n.italics,background:"black",flash:!1};this.setPen(c)}setBkgData(n){this.logger.log(2,()=>"bkgData = "+JSON.stringify(n)),this.backSpace(),this.setPen(n),this.insertChar(32)}setRollUpRows(n){this.nrRollUpRows=n}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const n=this.currRow+1-this.nrRollUpRows,o=this.rows.splice(n,1)[0];o.clear(),this.rows.splice(this.currRow,0,o),this.logger.log(2,"Rolling up")}getDisplayText(n){n=n||!1;const o=[];let a="",c=-1;for(let d=0;d<oi;d++){const p=this.rows[d].getTextString();p&&(c=d+1,n?o.push("Row "+c+": '"+p+"'"):o.push(p.trim()))}return o.length>0&&(n?a="["+o.join(" | ")+"]":a=o.join(`
`)),a}getTextAndFormat(){return this.rows}}class n0{constructor(n,o,a){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=n,this.outputFilter=o,this.mode=null,this.verbose=0,this.displayedMemory=new x1(a),this.nonDisplayedMemory=new x1(a),this.lastOutputScreen=new x1(a),this.currRollUpRow=this.displayedMemory.rows[oi-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=a}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[oi-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(n){this.outputFilter=n}setPAC(n){this.writeScreen.setPAC(n)}setBkgData(n){this.writeScreen.setBkgData(n)}setMode(n){n!==this.mode&&(this.mode=n,this.logger.log(2,()=>"MODE="+n),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=n)}insertChars(n){for(let a=0;a<n.length;a++)this.writeScreen.insertChar(n[a]);const o=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>o+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(n){this.logger.log(2,"RU("+n+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(n)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const n=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=n,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(n){this.logger.log(2,"TO("+n+") - Tab Offset"),this.writeScreen.moveCursor(n)}ccMIDROW(n){const o={flash:!1};if(o.underline=n%2===1,o.italics=n>=46,o.italics)o.foreground="white";else{const a=Math.floor(n/2)-16,c=["white","green","blue","cyan","red","yellow","magenta"];o.foreground=c[a]}this.logger.log(2,"MIDROW: "+JSON.stringify(o)),this.writeScreen.setPen(o)}outputDataUpdate(n=!1){const o=this.logger.time;o!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=o:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,o,this.lastOutputScreen),n&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:o),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(n){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,n,this.displayedMemory),this.cueStartTime=n))}}class i0{constructor(n,o,a){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const c=new Ba;this.channels=[null,new n0(n,o,c),new n0(n+1,a,c)],this.cmdHistory=s0(),this.logger=c}getHandler(n){return this.channels[n].getHandler()}setHandler(n,o){this.channels[n].setHandler(o)}addData(n,o){let a,c,d,p=!1;this.logger.time=n;for(let v=0;v<o.length;v+=2)if(c=o[v]&127,d=o[v+1]&127,!(c===0&&d===0)){if(this.logger.log(3,"["+mo([o[v],o[v+1]])+"] -> ("+mo([c,d])+")"),a=this.parseCmd(c,d),a||(a=this.parseMidrow(c,d)),a||(a=this.parsePAC(c,d)),a||(a=this.parseBackgroundAttributes(c,d)),!a&&(p=this.parseChars(c,d),p)){const E=this.currentChannel;E&&E>0?this.channels[E].insertChars(p):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!p&&this.logger.log(2,"Couldn't parse cleaned data "+mo([c,d])+" orig: "+mo([o[v],o[v+1]]))}}parseCmd(n,o){const{cmdHistory:a}=this,c=(n===20||n===28||n===21||n===29)&&o>=32&&o<=47,d=(n===23||n===31)&&o>=33&&o<=35;if(!(c||d))return!1;if(o0(n,o,a))return Wo(null,null,a),this.logger.log(3,"Repeated command ("+mo([n,o])+") is dropped"),!0;const p=n===20||n===21||n===23?1:2,v=this.channels[p];return n===20||n===21||n===28||n===29?o===32?v.ccRCL():o===33?v.ccBS():o===34?v.ccAOF():o===35?v.ccAON():o===36?v.ccDER():o===37?v.ccRU(2):o===38?v.ccRU(3):o===39?v.ccRU(4):o===40?v.ccFON():o===41?v.ccRDC():o===42?v.ccTR():o===43?v.ccRTD():o===44?v.ccEDM():o===45?v.ccCR():o===46?v.ccENM():o===47&&v.ccEOC():v.ccTO(o-32),Wo(n,o,a),this.currentChannel=p,!0}parseMidrow(n,o){let a=0;if((n===17||n===25)&&o>=32&&o<=47){if(n===17?a=1:a=2,a!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const c=this.channels[a];return c?(c.ccMIDROW(o),this.logger.log(3,"MIDROW ("+mo([n,o])+")"),!0):!1}return!1}parsePAC(n,o){let a;const c=this.cmdHistory,d=(n>=17&&n<=23||n>=25&&n<=31)&&o>=64&&o<=127,p=(n===16||n===24)&&o>=64&&o<=95;if(!(d||p))return!1;if(o0(n,o,c))return Wo(null,null,c),!0;const v=n<=23?1:2;o>=64&&o<=95?a=v===1?Oa[n]:et[n]:a=v===1?Ql[n]:bu[n];const E=this.channels[v];return E?(E.setPAC(this.interpretPAC(a,o)),Wo(n,o,c),this.currentChannel=v,!0):!1}interpretPAC(n,o){let a;const c={color:null,italics:!1,indent:null,underline:!1,row:n};return o>95?a=o-96:a=o-64,c.underline=(a&1)===1,a<=13?c.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(a/2)]:a<=15?(c.italics=!0,c.color="white"):c.indent=Math.floor((a-16)/2)*4,c}parseChars(n,o){let a,c=null,d=null;if(n>=25?(a=2,d=n-8):(a=1,d=n),d>=17&&d<=19){let p;d===17?p=o+80:d===18?p=o+112:p=o+144,this.logger.log(2,"Special char '"+w1(p)+"' in channel "+a),c=[p]}else n>=32&&n<=127&&(c=o===0?[n]:[n,o]);if(c){const p=mo(c);this.logger.log(3,"Char codes =  "+p.join(",")),Wo(n,o,this.cmdHistory)}return c}parseBackgroundAttributes(n,o){const a=(n===16||n===24)&&o>=32&&o<=47,c=(n===23||n===31)&&o>=45&&o<=47;if(!(a||c))return!1;let d;const p={};n===16||n===24?(d=Math.floor((o-32)/2),p.background=e0[d],o%2===1&&(p.background=p.background+"_semi")):o===45?p.background="transparent":(p.foreground="black",o===47&&(p.underline=!0));const v=n<=23?1:2;return this.channels[v].setBkgData(p),Wo(n,o,this.cmdHistory),!0}reset(){for(let n=0;n<Object.keys(this.channels).length;n++){const o=this.channels[n];o&&o.reset()}this.cmdHistory=s0()}cueSplitAtTime(n){for(let o=0;o<this.channels.length;o++){const a=this.channels[o];a&&a.cueSplitAtTime(n)}}}function Wo(m,n,o){o.a=m,o.b=n}function o0(m,n,o){return o.a===m&&o.b===n}function s0(){return{a:null,b:null}}class Gs{constructor(n,o){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=n,this.trackName=o}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(n,o,a){(this.startTime===null||this.startTime>n)&&(this.startTime=n),this.endTime=o,this.screen=a,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var _1=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;const m=["","lr","rl"],n=["start","middle","end","left","right"];function o(v,E){if(typeof E!="string"||!Array.isArray(v))return!1;const w=E.toLowerCase();return~v.indexOf(w)?w:!1}function a(v){return o(m,v)}function c(v){return o(n,v)}function d(v,...E){let w=1;for(;w<arguments.length;w++){const I=arguments[w];for(const T in I)v[T]=I[T]}return v}function p(v,E,w){const I=this,T={enumerable:!0};I.hasBeenReset=!1;let $="",H=!1,V=v,U=E,z=w,se=null,Ee="",de=!0,ke="auto",Ie="start",it=50,$e="middle",ot=50,ut="middle";Object.defineProperty(I,"id",d({},T,{get:function(){return $},set:function(Oe){$=""+Oe}})),Object.defineProperty(I,"pauseOnExit",d({},T,{get:function(){return H},set:function(Oe){H=!!Oe}})),Object.defineProperty(I,"startTime",d({},T,{get:function(){return V},set:function(Oe){if(typeof Oe!="number")throw new TypeError("Start time must be set to a number.");V=Oe,this.hasBeenReset=!0}})),Object.defineProperty(I,"endTime",d({},T,{get:function(){return U},set:function(Oe){if(typeof Oe!="number")throw new TypeError("End time must be set to a number.");U=Oe,this.hasBeenReset=!0}})),Object.defineProperty(I,"text",d({},T,{get:function(){return z},set:function(Oe){z=""+Oe,this.hasBeenReset=!0}})),Object.defineProperty(I,"region",d({},T,{get:function(){return se},set:function(Oe){se=Oe,this.hasBeenReset=!0}})),Object.defineProperty(I,"vertical",d({},T,{get:function(){return Ee},set:function(Oe){const Ot=a(Oe);if(Ot===!1)throw new SyntaxError("An invalid or illegal string was specified.");Ee=Ot,this.hasBeenReset=!0}})),Object.defineProperty(I,"snapToLines",d({},T,{get:function(){return de},set:function(Oe){de=!!Oe,this.hasBeenReset=!0}})),Object.defineProperty(I,"line",d({},T,{get:function(){return ke},set:function(Oe){if(typeof Oe!="number"&&Oe!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");ke=Oe,this.hasBeenReset=!0}})),Object.defineProperty(I,"lineAlign",d({},T,{get:function(){return Ie},set:function(Oe){const Ot=c(Oe);if(!Ot)throw new SyntaxError("An invalid or illegal string was specified.");Ie=Ot,this.hasBeenReset=!0}})),Object.defineProperty(I,"position",d({},T,{get:function(){return it},set:function(Oe){if(Oe<0||Oe>100)throw new Error("Position must be between 0 and 100.");it=Oe,this.hasBeenReset=!0}})),Object.defineProperty(I,"positionAlign",d({},T,{get:function(){return $e},set:function(Oe){const Ot=c(Oe);if(!Ot)throw new SyntaxError("An invalid or illegal string was specified.");$e=Ot,this.hasBeenReset=!0}})),Object.defineProperty(I,"size",d({},T,{get:function(){return ot},set:function(Oe){if(Oe<0||Oe>100)throw new Error("Size must be between 0 and 100.");ot=Oe,this.hasBeenReset=!0}})),Object.defineProperty(I,"align",d({},T,{get:function(){return ut},set:function(Oe){const Ot=c(Oe);if(!Ot)throw new SyntaxError("An invalid or illegal string was specified.");ut=Ot,this.hasBeenReset=!0}})),I.displayState=void 0}return p.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},p}();class xu{decode(n,o){if(!n)return"";if(typeof n!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}function a0(m){function n(a,c,d,p){return(a|0)*3600+(c|0)*60+(d|0)+parseFloat(p||0)}const o=m.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return o?parseFloat(o[2])>59?n(o[2],o[3],0,o[4]):n(o[1],o[2],o[3],o[4]):null}class S1{constructor(){this.values=Object.create(null)}set(n,o){!this.get(n)&&o!==""&&(this.values[n]=o)}get(n,o,a){return a?this.has(n)?this.values[n]:o[a]:this.has(n)?this.values[n]:o}has(n){return n in this.values}alt(n,o,a){for(let c=0;c<a.length;++c)if(o===a[c]){this.set(n,o);break}}integer(n,o){/^-?\d+$/.test(o)&&this.set(n,parseInt(o,10))}percent(n,o){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(o)){const a=parseFloat(o);if(a>=0&&a<=100)return this.set(n,a),!0}return!1}}function rr(m,n,o,a){const c=a?m.split(a):[m];for(const d in c){if(typeof c[d]!="string")continue;const p=c[d].split(o);if(p.length!==2)continue;const v=p[0],E=p[1];n(v,E)}}const Cr=new _1(0,0,""),Di=Cr.align==="middle"?"middle":"center";function L1(m,n,o){const a=m;function c(){const v=a0(m);if(v===null)throw new Error("Malformed timestamp: "+a);return m=m.replace(/^[^\sa-zA-Z-]+/,""),v}function d(v,E){const w=new S1;rr(v,function($,H){let V;switch($){case"region":for(let U=o.length-1;U>=0;U--)if(o[U].id===H){w.set($,o[U].region);break}break;case"vertical":w.alt($,H,["rl","lr"]);break;case"line":V=H.split(","),w.integer($,V[0]),w.percent($,V[0])&&w.set("snapToLines",!1),w.alt($,V[0],["auto"]),V.length===2&&w.alt("lineAlign",V[1],["start",Di,"end"]);break;case"position":V=H.split(","),w.percent($,V[0]),V.length===2&&w.alt("positionAlign",V[1],["start",Di,"end","line-left","line-right","auto"]);break;case"size":w.percent($,H);break;case"align":w.alt($,H,["start",Di,"end","left","right"]);break}},/:/,/\s/),E.region=w.get("region",null),E.vertical=w.get("vertical","");let I=w.get("line","auto");I==="auto"&&Cr.line===-1&&(I=-1),E.line=I,E.lineAlign=w.get("lineAlign","start"),E.snapToLines=w.get("snapToLines",!0),E.size=w.get("size",100),E.align=w.get("align",Di);let T=w.get("position","auto");T==="auto"&&Cr.position===50&&(T=E.align==="start"||E.align==="left"?0:E.align==="end"||E.align==="right"?100:50),E.position=T}function p(){m=m.replace(/^\s+/,"")}if(p(),n.startTime=c(),p(),m.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+a);m=m.slice(3),p(),n.endTime=c(),p(),d(m,n)}function R1(m){return m.replace(/<br(?: \/)?>/gi,`
`)}class I1{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new xu,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(n){const o=this;n&&(o.buffer+=o.decoder.decode(n,{stream:!0}));function a(){let d=o.buffer,p=0;for(d=R1(d);p<d.length&&d[p]!=="\r"&&d[p]!==`
`;)++p;const v=d.slice(0,p);return d[p]==="\r"&&++p,d[p]===`
`&&++p,o.buffer=d.slice(p),v}function c(d){rr(d,function(p,v){},/:/)}try{let d="";if(o.state==="INITIAL"){if(!/\r\n|\n/.test(o.buffer))return this;d=a();const v=d.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(v!=null&&v[0]))throw new Error("Malformed WebVTT signature.");o.state="HEADER"}let p=!1;for(;o.buffer;){if(!/\r\n|\n/.test(o.buffer))return this;switch(p?p=!1:d=a(),o.state){case"HEADER":/:/.test(d)?c(d):d||(o.state="ID");continue;case"NOTE":d||(o.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(d)){o.state="NOTE";break}if(!d)continue;if(o.cue=new _1(0,0,""),o.state="CUE",d.indexOf("-->")===-1){o.cue.id=d;continue}case"CUE":if(!o.cue){o.state="BADCUE";continue}try{L1(d,o.cue,o.regionList)}catch{o.cue=null,o.state="BADCUE";continue}o.state="CUETEXT";continue;case"CUETEXT":{const v=d.indexOf("-->")!==-1;if(!d||v&&(p=!0)){o.oncue&&o.cue&&o.oncue(o.cue),o.cue=null,o.state="ID";continue}if(o.cue===null)continue;o.cue.text&&(o.cue.text+=`
`),o.cue.text+=d}continue;case"BADCUE":d||(o.state="ID")}}}catch{o.state==="CUETEXT"&&o.cue&&o.oncue&&o.oncue(o.cue),o.cue=null,o.state=o.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const n=this;try{if((n.cue||n.state==="HEADER")&&(n.buffer+=`

`,n.parse()),n.state==="INITIAL"||n.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(o){n.onparsingerror&&n.onparsingerror(o)}return n.onflush&&n.onflush(),this}}const T1=/\r\n|\n\r|\n|\r/g,Ws=function(n,o,a=0){return n.slice(a,a+o.length)===o},D1=function(n){let o=parseInt(n.slice(-3));const a=parseInt(n.slice(-6,-4)),c=parseInt(n.slice(-9,-7)),d=n.length>9?parseInt(n.substring(0,n.indexOf(":"))):0;if(!fe(o)||!fe(a)||!fe(c)||!fe(d))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${n}`);return o+=1e3*a,o+=60*1e3*c,o+=60*60*1e3*d,o},Ks=function(n){let o=5381,a=n.length;for(;a;)o=o*33^n.charCodeAt(--a);return(o>>>0).toString()};function $a(m,n,o){return Ks(m.toString())+Ks(n.toString())+Ks(o)}const A1=function(n,o,a){let c=n[o],d=n[c.prevCC];if(!d||!d.new&&c.new){n.ccOffset=n.presentationOffset=c.start,c.new=!1;return}for(;(p=d)!=null&&p.new;){var p;n.ccOffset+=c.start-d.start,c.new=!1,c=d,d=n[c.prevCC]}n.presentationOffset=a};function k1(m,n,o,a,c,d,p){const v=new I1,E=lr(new Uint8Array(m)).trim().replace(T1,`
`).split(`
`),w=[],I=l1(n.baseTime,n.timescale);let T="00:00.000",$=0,H=0,V,U=!0;v.oncue=function(z){const se=o[a];let Ee=o.ccOffset;const de=($-I)/9e4;se!=null&&se.new&&(H!==void 0?Ee=o.ccOffset=se.start:A1(o,a,de)),de&&(Ee=de-o.presentationOffset);const ke=z.endTime-z.startTime,Ie=Zn((z.startTime+Ee-H)*9e4,c*9e4)/9e4;z.startTime=Math.max(Ie,0),z.endTime=Math.max(Ie+ke,0);const it=z.text.trim();z.text=decodeURIComponent(encodeURIComponent(it)),z.id||(z.id=$a(z.startTime,z.endTime,it)),z.endTime>0&&w.push(z)},v.onparsingerror=function(z){V=z},v.onflush=function(){if(V){p(V);return}d(w)},E.forEach(z=>{if(U)if(Ws(z,"X-TIMESTAMP-MAP=")){U=!1,z.slice(16).split(",").forEach(se=>{Ws(se,"LOCAL:")?T=se.slice(6):Ws(se,"MPEGTS:")&&($=parseInt(se.slice(7)))});try{H=D1(T)/1e3}catch(se){V=se}return}else z===""&&(U=!1);v.parse(z+`
`)}),v.flush()}const bs="stpp.ttml.im1t",l0=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,u0=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,P1={left:"start",center:"center",right:"end",start:"start",end:"end"};function c0(m,n,o,a){const c=er(new Uint8Array(m),["mdat"]);if(c.length===0){a(new Error("Could not parse IMSC1 mdat"));return}const d=c.map(v=>lr(v)),p=Il(n.baseTime,1,n.timescale);try{d.forEach(v=>o(d0(v,p)))}catch(v){a(v)}}function d0(m,n){const c=new DOMParser().parseFromString(m,"text/xml").getElementsByTagName("tt")[0];if(!c)throw new Error("Invalid ttml");const d={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},p=Object.keys(d).reduce((T,$)=>(T[$]=c.getAttribute(`ttp:${$}`)||d[$],T),{}),v=c.getAttribute("xml:space")!=="preserve",E=M1(Fa(c,"styling","style")),w=M1(Fa(c,"layout","region")),I=Fa(c,"body","[begin]");return[].map.call(I,T=>{const $=O1(T,v);if(!$||!T.hasAttribute("begin"))return null;const H=Na(T.getAttribute("begin"),p),V=Na(T.getAttribute("dur"),p);let U=Na(T.getAttribute("end"),p);if(H===null)throw Ha(T);if(U===null){if(V===null)throw Ha(T);U=H+V}const z=new _1(H-n,U-n,$);z.id=$a(z.startTime,z.endTime,z.text);const se=w[T.getAttribute("region")],Ee=E[T.getAttribute("style")],de=h0(se,Ee,E),{textAlign:ke}=de;if(ke){const Ie=P1[ke];Ie&&(z.lineAlign=Ie),z.align=ke}return ae(z,de),z}).filter(T=>T!==null)}function Fa(m,n,o){const a=m.getElementsByTagName(n)[0];return a?[].slice.call(a.querySelectorAll(o)):[]}function M1(m){return m.reduce((n,o)=>{const a=o.getAttribute("xml:id");return a&&(n[a]=o),n},{})}function O1(m,n){return[].slice.call(m.childNodes).reduce((o,a,c)=>{var d;return a.nodeName==="br"&&c?o+`
`:(d=a.childNodes)!=null&&d.length?O1(a,n):n?o+a.textContent.trim().replace(/\s+/g," "):o+a.textContent},"")}function h0(m,n,o){const a="http://www.w3.org/ns/ttml#styling";let c=null;const d=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],p=m!=null&&m.hasAttribute("style")?m.getAttribute("style"):null;return p&&o.hasOwnProperty(p)&&(c=o[p]),d.reduce((v,E)=>{const w=Ys(n,a,E)||Ys(m,a,E)||Ys(c,a,E);return w&&(v[E]=w),v},{})}function Ys(m,n,o){return m&&m.hasAttributeNS(n,o)?m.getAttributeNS(n,o):null}function Ha(m){return new Error(`Could not parse ttml timestamp ${m}`)}function Na(m,n){if(!m)return null;let o=a0(m);return o===null&&(l0.test(m)?o=B1(m,n):u0.test(m)&&(o=$1(m,n))),o}function B1(m,n){const o=l0.exec(m),a=(o[4]|0)+(o[5]|0)/n.subFrameRate;return(o[1]|0)*3600+(o[2]|0)*60+(o[3]|0)+a/n.frameRate}function $1(m,n){const o=u0.exec(m),a=Number(o[1]);switch(o[2]){case"h":return a*3600;case"m":return a*60;case"ms":return a*1e3;case"f":return a/n.frameRate;case"t":return a/n.tickRate}return a}class F1{constructor(n){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=N1(),this.captionsProperties=void 0,this.hls=n,this.config=n.config,this.Cues=n.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const o=new Gs(this,"textTrack1"),a=new Gs(this,"textTrack2"),c=new Gs(this,"textTrack3"),d=new Gs(this,"textTrack4");this.cea608Parser1=new i0(1,o,a),this.cea608Parser2=new i0(3,c,d)}n.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),n.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(P.MANIFEST_LOADING,this.onManifestLoading,this),n.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),n.on(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.on(P.FRAG_LOADING,this.onFragLoading,this),n.on(P.FRAG_LOADED,this.onFragLoaded,this),n.on(P.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),n.on(P.FRAG_DECRYPTED,this.onFragDecrypted,this),n.on(P.INIT_PTS_FOUND,this.onInitPtsFound,this),n.on(P.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),n.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:n}=this;n.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),n.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(P.MANIFEST_LOADING,this.onManifestLoading,this),n.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),n.off(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.off(P.FRAG_LOADING,this.onFragLoading,this),n.off(P.FRAG_LOADED,this.onFragLoaded,this),n.off(P.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),n.off(P.FRAG_DECRYPTED,this.onFragDecrypted,this),n.off(P.INIT_PTS_FOUND,this.onInitPtsFound,this),n.off(P.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),n.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(n,o,a,c,d){let p=!1;for(let v=d.length;v--;){const E=d[v],w=H1(E[0],E[1],o,a);if(w>=0&&(E[0]=Math.min(E[0],o),E[1]=Math.max(E[1],a),p=!0,w/(a-o)>.5))return}if(p||d.push([o,a]),this.config.renderTextTracksNatively){const v=this.captionsTracks[n];this.Cues.newCue(v,o,a,c)}else{const v=this.Cues.newCue(null,o,a,c);this.hls.trigger(P.CUES_PARSED,{type:"captions",cues:v,track:n})}}onInitPtsFound(n,{frag:o,id:a,initPTS:c,timescale:d}){const{unparsedVttFrags:p}=this;a==="main"&&(this.initPTS[o.cc]={baseTime:c,timescale:d}),p.length&&(this.unparsedVttFrags=[],p.forEach(v=>{this.onFragLoaded(P.FRAG_LOADED,v)}))}getExistingTrack(n){const{media:o}=this;if(o)for(let a=0;a<o.textTracks.length;a++){const c=o.textTracks[a];if(c[n])return c}return null}createCaptionsTrack(n){this.config.renderTextTracksNatively?this.createNativeTrack(n):this.createNonNativeTrack(n)}createNativeTrack(n){if(this.captionsTracks[n])return;const{captionsProperties:o,captionsTracks:a,media:c}=this,{label:d,languageCode:p}=o[n],v=this.getExistingTrack(n);if(v)a[n]=v,Qn(a[n]),hi(a[n],c);else{const E=this.createTextTrack("captions",d,p);E&&(E[n]=!0,a[n]=E)}}createNonNativeTrack(n){if(this.nonNativeCaptionsTracks[n])return;const o=this.captionsProperties[n];if(!o)return;const a=o.label,c={_id:n,label:a,kind:"captions",default:o.media?!!o.media.default:!1,closedCaptions:o.media};this.nonNativeCaptionsTracks[n]=c,this.hls.trigger(P.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[c]})}createTextTrack(n,o,a){const c=this.media;if(!!c)return c.addTextTrack(n,o,a)}onMediaAttaching(n,o){this.media=o.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:n}=this;Object.keys(n).forEach(o=>{Qn(n[o]),delete n[o]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=N1(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:n}=this;if(!n)return;const o=n.textTracks;if(o)for(let a=0;a<o.length;a++)Qn(o[a])}onSubtitleTracksUpdated(n,o){const a=o.subtitleTracks||[],c=a.some(d=>d.textCodec===bs);if(this.config.enableWebVTT||c&&this.config.enableIMSC1){if(v1(this.tracks,a)){this.tracks=a;return}if(this.textTracks=[],this.tracks=a,this.config.renderTextTracksNatively){const p=this.media?this.media.textTracks:null;this.tracks.forEach((v,E)=>{let w;if(p&&E<p.length){let I=null;for(let T=0;T<p.length;T++)if(f0(p[T],v)){I=p[T];break}I&&(w=I)}if(w)Qn(w);else{const I=this._captionsOrSubtitlesFromCharacteristics(v);w=this.createTextTrack(I,v.name,v.lang),w&&(w.mode="disabled")}w&&(w.groupId=v.groupId,this.textTracks.push(w))})}else if(this.tracks.length){const p=this.tracks.map(v=>({label:v.name,kind:v.type.toLowerCase(),default:v.default,subtitleTrack:v}));this.hls.trigger(P.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:p})}}}_captionsOrSubtitlesFromCharacteristics(n){if(n.attrs.CHARACTERISTICS){const o=/transcribes-spoken-dialog/gi.test(n.attrs.CHARACTERISTICS),a=/describes-music-and-sound/gi.test(n.attrs.CHARACTERISTICS);if(o&&a)return"captions"}return"subtitles"}onManifestLoaded(n,o){this.config.enableCEA708Captions&&o.captions&&o.captions.forEach(a=>{const c=/(?:CC|SERVICE)([1-4])/.exec(a.instreamId);if(!c)return;const d=`textTrack${c[1]}`,p=this.captionsProperties[d];!p||(p.label=a.name,a.lang&&(p.languageCode=a.lang),p.media=a)})}closedCaptionsForLevel(n){const o=this.hls.levels[n.level];return o?.attrs["CLOSED-CAPTIONS"]}onFragLoading(n,o){const{cea608Parser1:a,cea608Parser2:c,lastSn:d,lastPartIndex:p}=this;if(!(!this.enabled||!(a&&c))&&o.frag.type===bt.MAIN){var v,E;const w=o.frag.sn,I=(v=o==null||(E=o.part)==null?void 0:E.index)!=null?v:-1;w===d+1||w===d&&I===p+1||(a.reset(),c.reset()),this.lastSn=w,this.lastPartIndex=I}}onFragLoaded(n,o){const{frag:a,payload:c}=o,{initPTS:d,unparsedVttFrags:p}=this;if(a.type===bt.SUBTITLE)if(c.byteLength){if(!d[a.cc]){p.push(o),d.length&&this.hls.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:a,error:new Error("Missing initial subtitle PTS")});return}const v=a.decryptdata,E="stats"in o;if(v==null||!v.encrypted||E){const w=this.tracks[a.level],I=this.vttCCs;I[a.cc]||(I[a.cc]={start:a.start,prevCC:this.prevCC,new:!0},this.prevCC=a.cc),w&&w.textCodec===bs?this._parseIMSC1(a,c):this._parseVTTs(a,c,I)}}else this.hls.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:a,error:new Error("Empty subtitle payload")})}_parseIMSC1(n,o){const a=this.hls;c0(o,this.initPTS[n.cc],c=>{this._appendCues(c,n.level),a.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},c=>{K.log(`Failed to parse IMSC1: ${c}`),a.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:c})})}_parseVTTs(n,o,a){var c;const d=this.hls,p=(c=n.initSegment)!=null&&c.data?Jn(n.initSegment.data,new Uint8Array(o)):o;k1(p,this.initPTS[n.cc],a,n.cc,n.start,v=>{this._appendCues(v,n.level),d.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},v=>{this._fallbackToIMSC1(n,o),K.log(`Failed to parse VTT cue: ${v}`),d.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:v})})}_fallbackToIMSC1(n,o){const a=this.tracks[n.level];a.textCodec||c0(o,this.initPTS[n.cc],()=>{a.textCodec=bs,this._parseIMSC1(n,o)},()=>{a.textCodec="wvtt"})}_appendCues(n,o){const a=this.hls;if(this.config.renderTextTracksNatively){const c=this.textTracks[o];if(!c||c.mode==="disabled")return;n.forEach(d=>lo(c,d))}else{const c=this.tracks[o];if(!c)return;const d=c.default?"default":"subtitles"+o;a.trigger(P.CUES_PARSED,{type:"subtitles",cues:n,track:d})}}onFragDecrypted(n,o){const{frag:a}=o;if(a.type===bt.SUBTITLE){if(!this.initPTS[a.cc]){this.unparsedVttFrags.push(o);return}this.onFragLoaded(P.FRAG_LOADED,o)}}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(n,o){const{cea608Parser1:a,cea608Parser2:c}=this;if(!this.enabled||!(a&&c))return;const{frag:d,samples:p}=o;if(!(d.type===bt.MAIN&&this.closedCaptionsForLevel(d)==="NONE"))for(let v=0;v<p.length;v++){const E=p[v].bytes;if(E){const w=this.extractCea608Data(E);a.addData(p[v].pts,w[0]),c.addData(p[v].pts,w[1])}}}onBufferFlushing(n,{startOffset:o,endOffset:a,endOffsetSubtitles:c,type:d}){const{media:p}=this;if(!(!p||p.currentTime<a)){if(!d||d==="video"){const{captionsTracks:v}=this;Object.keys(v).forEach(E=>Vi(v[E],o,a))}if(this.config.renderTextTracksNatively&&o===0&&c!==void 0){const{textTracks:v}=this;Object.keys(v).forEach(E=>Vi(v[E],o,c))}}}extractCea608Data(n){const o=[[],[]],a=n[0]&31;let c=2;for(let d=0;d<a;d++){const p=n[c++],v=127&n[c++],E=127&n[c++];if(v===0&&E===0)continue;if((4&p)!==0){const I=3&p;(I===0||I===1)&&(o[I].push(v),o[I].push(E))}}return o}}function f0(m,n){return!!m&&m.label===n.name&&!(m.textTrack1||m.textTrack2)}function H1(m,n,o,a){return Math.min(n,a)-Math.max(m,o)}function N1(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class Ko{constructor(n){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=n,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(n){this.streamController=n}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:n}=this;n.on(P.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),n.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),n.on(P.MANIFEST_PARSED,this.onManifestParsed,this),n.on(P.BUFFER_CODECS,this.onBufferCodecs,this),n.on(P.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:n}=this;n.off(P.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),n.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),n.off(P.MANIFEST_PARSED,this.onManifestParsed,this),n.off(P.BUFFER_CODECS,this.onBufferCodecs,this),n.off(P.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(n,o){const a=this.hls.levels[o.droppedLevel];this.isLevelAllowed(a)&&this.restrictedLevels.push({bitrate:a.bitrate,height:a.height,width:a.width})}onMediaAttaching(n,o){this.media=o.media instanceof HTMLVideoElement?o.media:null,this.clientRect=null}onManifestParsed(n,o){const a=this.hls;this.restrictedLevels=[],this.firstLevel=o.firstLevel,a.config.capLevelToPlayerSize&&o.video&&this.startCapping()}onBufferCodecs(n,o){this.hls.config.capLevelToPlayerSize&&o.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const n=this.hls.levels;if(n.length){const o=this.hls;o.autoLevelCapping=this.getMaxLevel(n.length-1),o.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=o.autoLevelCapping}}}getMaxLevel(n){const o=this.hls.levels;if(!o.length)return-1;const a=o.filter((c,d)=>this.isLevelAllowed(c)&&d<=n);return this.clientRect=null,Ko.getMaxLevelByMediaSize(a,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const n=this.media,o={width:0,height:0};if(n){const a=n.getBoundingClientRect();o.width=a.width,o.height=a.height,!o.width&&!o.height&&(o.width=a.right-a.left||n.width||0,o.height=a.bottom-a.top||n.height||0)}return this.clientRect=o,o}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let n=1;if(!this.hls.config.ignoreDevicePixelRatio)try{n=self.devicePixelRatio}catch{}return n}isLevelAllowed(n){return!this.restrictedLevels.some(a=>n.bitrate===a.bitrate&&n.width===a.width&&n.height===a.height)}static getMaxLevelByMediaSize(n,o,a){if(!(n!=null&&n.length))return-1;const c=(p,v)=>v?p.width!==v.width||p.height!==v.height:!0;let d=n.length-1;for(let p=0;p<n.length;p+=1){const v=n[p];if((v.width>=o||v.height>=a)&&c(v,n[p+1])){d=p;break}}return d}}class p0{constructor(n){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=n,this.registerListeners()}setStreamController(n){this.streamController=n}registerListeners(){this.hls.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(n,o){const a=this.hls.config;if(a.capLevelOnFPSDrop){const c=o.media instanceof self.HTMLVideoElement?o.media:null;this.media=c,c&&typeof c.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),a.fpsDroppedMonitoringPeriod)}}checkFPS(n,o,a){const c=performance.now();if(o){if(this.lastTime){const d=c-this.lastTime,p=a-this.lastDroppedFrames,v=o-this.lastDecodedFrames,E=1e3*p/d,w=this.hls;if(w.trigger(P.FPS_DROP,{currentDropped:p,currentDecoded:v,totalDroppedFrames:a}),E>0&&p>w.config.fpsDroppedMonitoringThreshold*v){let I=w.currentLevel;K.warn("drop FPS ratio greater than max allowed value for currentLevel: "+I),I>0&&(w.autoLevelCapping===-1||w.autoLevelCapping>=I)&&(I=I-1,w.trigger(P.FPS_DROP_LEVEL_CAPPING,{level:I,droppedLevel:w.currentLevel}),w.autoLevelCapping=I,this.streamController.nextLevelSwitch())}}this.lastTime=c,this.lastDroppedFrames=a,this.lastDecodedFrames=o}}checkFPSInterval(){const n=this.media;if(n)if(this.isVideoPlaybackQualityAvailable){const o=n.getVideoPlaybackQuality();this.checkFPS(n,o.totalVideoFrames,o.droppedVideoFrames)}else this.checkFPS(n,n.webkitDecodedFrameCount,n.webkitDroppedFrameCount)}}const Xs="[eme]";class qi{constructor(n){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=qi.CDMCleanupPromise?[qi.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=K.debug.bind(K,Xs),this.log=K.log.bind(K,Xs),this.warn=K.warn.bind(K,Xs),this.error=K.error.bind(K,Xs),this.hls=n,this.config=n.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const n=this.config;n.requestMediaKeySystemAccessFunc=null,n.licenseXhrSetup=n.licenseResponseCallback=void 0,n.drmSystems=n.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(P.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(P.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(P.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(P.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(n){const{drmSystems:o,widevineLicenseUrl:a}=this.config,c=o[n];if(c)return c.licenseUrl;if(n===pe.WIDEVINE&&a)return a;throw new Error(`no license server URL configured for key-system "${n}"`)}getServerCertificateUrl(n){const{drmSystems:o}=this.config,a=o[n];if(a)return a.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${n}"]`)}attemptKeySystemAccess(n){const o=this.hls.levels,a=(p,v,E)=>!!p&&E.indexOf(p)===v,c=o.map(p=>p.audioCodec).filter(a),d=o.map(p=>p.videoCodec).filter(a);return c.length+d.length===0&&d.push("avc1.42e01e"),new Promise((p,v)=>{const E=w=>{const I=w.shift();this.getMediaKeysPromise(I,c,d).then(T=>p({keySystem:I,mediaKeys:T})).catch(T=>{w.length?E(w):T instanceof Gn?v(T):v(new Gn({type:be.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_NO_ACCESS,error:T,fatal:!0},T.message))})};E(n)})}requestMediaKeySystemAccess(n,o){const{requestMediaKeySystemAccessFunc:a}=this.config;if(typeof a!="function"){let c=`Configured requestMediaKeySystemAccess is not a function ${a}`;return Pt===null&&self.location.protocol==="http:"&&(c=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(c))}return a(n,o)}getMediaKeysPromise(n,o,a){const c=jt(n,o,a,this.config.drmSystemOptions),d=this.keySystemAccessPromises[n];let p=d?.keySystemAccess;if(!p){this.log(`Requesting encrypted media "${n}" key-system access with config: ${JSON.stringify(c)}`),p=this.requestMediaKeySystemAccess(n,c);const v=this.keySystemAccessPromises[n]={keySystemAccess:p};return p.catch(E=>{this.log(`Failed to obtain access to key-system "${n}": ${E}`)}),p.then(E=>{this.log(`Access for key-system "${E.keySystem}" obtained`);const w=this.fetchServerCertificate(n);return this.log(`Create media-keys for "${n}"`),v.mediaKeys=E.createMediaKeys().then(I=>(this.log(`Media-keys created for "${n}"`),w.then(T=>T?this.setMediaKeysServerCertificate(I,n,T):I))),v.mediaKeys.catch(I=>{this.error(`Failed to create media-keys for "${n}"}: ${I}`)}),v.mediaKeys})}return p.then(()=>d.mediaKeys)}createMediaKeySessionContext({decryptdata:n,keySystem:o,mediaKeys:a}){this.log(`Creating key-system session "${o}" keyId: ${Vr.hexDump(n.keyId||[])}`);const c=a.createSession(),d={decryptdata:n,keySystem:o,mediaKeys:a,mediaKeysSession:c,keyStatus:"status-pending"};return this.mediaKeySessions.push(d),d}renewKeySession(n){const o=n.decryptdata;if(o.pssh){const a=this.createMediaKeySessionContext(n),c=this.getKeyIdString(o),d="cenc";this.keyIdToKeySessionPromise[c]=this.generateRequestWithPreferredKeySession(a,d,o.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(n)}getKeyIdString(n){if(!n)throw new Error("Could not read keyId of undefined decryptdata");if(n.keyId===null)throw new Error("keyId is null");return Vr.hexDump(n.keyId)}updateKeySession(n,o){var a;const c=n.mediaKeysSession;return this.log(`Updating key-session "${c.sessionId}" for keyID ${Vr.hexDump(((a=n.decryptdata)==null?void 0:a.keyId)||[])}
      } (data length: ${o&&o.byteLength})`),c.update(o)}selectKeySystemFormat(n){const o=Object.keys(n.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${n.sn} ${n.type}: ${n.level}) key formats ${o.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(o)),this.keyFormatPromise}getKeyFormatPromise(n){return new Promise((o,a)=>{const c=ht(this.config),d=n.map(je).filter(p=>!!p&&c.indexOf(p)!==-1);return this.getKeySystemSelectionPromise(d).then(({keySystem:p})=>{const v=dt(p);v?o(v):a(new Error(`Unable to find format for key-system "${p}"`))}).catch(a)})}loadKey(n){const o=n.keyInfo.decryptdata,a=this.getKeyIdString(o),c=`(keyId: ${a} format: "${o.keyFormat}" method: ${o.method} uri: ${o.uri})`;this.log(`Starting session for key ${c}`);let d=this.keyIdToKeySessionPromise[a];return d||(d=this.keyIdToKeySessionPromise[a]=this.getKeySystemForKeyPromise(o).then(({keySystem:p,mediaKeys:v})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${n.frag.sn} ${n.frag.type}: ${n.frag.level} using key ${c}`),this.attemptSetMediaKeys(p,v).then(()=>{this.throwIfDestroyed();const E=this.createMediaKeySessionContext({keySystem:p,mediaKeys:v,decryptdata:o}),w="cenc";return this.generateRequestWithPreferredKeySession(E,w,o.pssh,"playlist-key")}))),d.catch(p=>this.handleError(p))),d}throwIfDestroyed(n="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(n){!this.hls||(this.error(n.message),n instanceof Gn?this.hls.trigger(P.ERROR,n.data):this.hls.trigger(P.ERROR,{type:be.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_NO_KEYS,error:n,fatal:!0}))}getKeySystemForKeyPromise(n){const o=this.getKeyIdString(n),a=this.keyIdToKeySessionPromise[o];if(!a){const c=je(n.keyFormat),d=c?[c]:ht(this.config);return this.attemptKeySystemAccess(d)}return a}getKeySystemSelectionPromise(n){if(n.length||(n=ht(this.config)),n.length===0)throw new Gn({type:be.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(n)}_onMediaEncrypted(n){const{initDataType:o,initData:a}=n;if(this.debug(`"${n.type}" event: init data type: "${o}"`),a===null)return;let c,d;if(o==="sinf"&&this.config.drmSystems[pe.FAIRPLAY]){const I=Ir(new Uint8Array(a));try{const T=Fe(JSON.parse(I).sinf),$=Bi(new Uint8Array(T));if(!$)return;c=$.subarray(8,24),d=pe.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const I=ns(a);if(I===null)return;I.version===0&&I.systemId===Ue.WIDEVINE&&I.data&&(c=I.data.subarray(8,24)),d=Xe(I.systemId)}if(!d||!c)return;const p=Vr.hexDump(c),{keyIdToKeySessionPromise:v,mediaKeySessions:E}=this;let w=v[p];for(let I=0;I<E.length;I++){const T=E[I],$=T.decryptdata;if($.pssh||!$.keyId)continue;const H=Vr.hexDump($.keyId);if(p===H||$.uri.replace(/-/g,"").indexOf(p)!==-1){w=v[H],delete v[H],$.pssh=new Uint8Array(a),$.keyId=c,w=v[p]=w.then(()=>this.generateRequestWithPreferredKeySession(T,o,a,"encrypted-event-key-match"));break}}w||(w=v[p]=this.getKeySystemSelectionPromise([d]).then(({keySystem:I,mediaKeys:T})=>{var $;this.throwIfDestroyed();const H=new Hn("ISO-23001-7",p,($=dt(I))!=null?$:"");return H.pssh=new Uint8Array(a),H.keyId=c,this.attemptSetMediaKeys(I,T).then(()=>{this.throwIfDestroyed();const V=this.createMediaKeySessionContext({decryptdata:H,keySystem:I,mediaKeys:T});return this.generateRequestWithPreferredKeySession(V,o,a,"encrypted-event-no-match")})})),w.catch(I=>this.handleError(I))}_onWaitingForKey(n){this.log(`"${n.type}" event`)}attemptSetMediaKeys(n,o){const a=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${n}"`);const c=Promise.all(a).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(o)});return this.setMediaKeysQueue.push(c),c.then(()=>{this.log(`Media-keys set for "${n}"`),a.push(c),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(d=>a.indexOf(d)===-1)})}generateRequestWithPreferredKeySession(n,o,a,c){var d,p;const v=(d=this.config.drmSystems)==null||(p=d[n.keySystem])==null?void 0:p.generateRequest;if(v)try{const $=v.call(this.hls,o,a,n);if(!$)throw new Error("Invalid response from configured generateRequest filter");o=$.initDataType,a=n.decryptdata.pssh=$.initData?new Uint8Array($.initData):null}catch($){var E;if(this.warn($.message),(E=this.hls)!=null&&E.config.debug)throw $}if(a===null)return this.log(`Skipping key-session request for "${c}" (no initData)`),Promise.resolve(n);const w=this.getKeyIdString(n.decryptdata);this.log(`Generating key-session request for "${c}": ${w} (init data type: ${o} length: ${a?a.byteLength:null})`);const I=new ws;n.mediaKeysSession.onmessage=$=>{const H=n.mediaKeysSession;if(!H){I.emit("error",new Error("invalid state"));return}const{messageType:V,message:U}=$;this.log(`"${V}" message event for session "${H.sessionId}" message size: ${U.byteLength}`),V==="license-request"||V==="license-renewal"?this.renewLicense(n,U).catch(z=>{this.handleError(z),I.emit("error",z)}):V==="license-release"?n.keySystem===pe.FAIRPLAY&&(this.updateKeySession(n,Zt("acknowledged")),this.removeSession(n)):this.warn(`unhandled media key message type "${V}"`)},n.mediaKeysSession.onkeystatuseschange=$=>{if(!n.mediaKeysSession){I.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(n);const V=n.keyStatus;I.emit("keyStatus",V),V==="expired"&&(this.warn(`${n.keySystem} expired for key ${w}`),this.renewKeySession(n))};const T=new Promise(($,H)=>{I.on("error",H),I.on("keyStatus",V=>{V.startsWith("usable")?$():V==="output-restricted"?H(new Gn({type:be.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):V==="internal-error"?H(new Gn({type:be.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${V}"`)):V==="expired"?H(new Error("key expired while generating request")):this.warn(`unhandled key status change "${V}"`)})});return n.mediaKeysSession.generateRequest(o,a).then(()=>{var $;this.log(`Request generated for key-session "${($=n.mediaKeysSession)==null?void 0:$.sessionId}" keyId: ${w}`)}).catch($=>{throw new Gn({type:be.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_NO_SESSION,error:$,fatal:!1},`Error generating key-session request: ${$}`)}).then(()=>T).catch($=>{throw I.removeAllListeners(),this.removeSession(n),$}).then(()=>(I.removeAllListeners(),n))}onKeyStatusChange(n){n.mediaKeysSession.keyStatuses.forEach((o,a)=>{this.log(`key status change "${o}" for keyStatuses keyId: ${Vr.hexDump("buffer"in a?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a))} session keyId: ${Vr.hexDump(new Uint8Array(n.decryptdata.keyId||[]))} uri: ${n.decryptdata.uri}`),n.keyStatus=o})}fetchServerCertificate(n){const o=this.config,a=o.loader,c=new a(o),d=this.getServerCertificateUrl(n);return d?(this.log(`Fetching serverCertificate for "${n}"`),new Promise((p,v)=>{const E={responseType:"arraybuffer",url:d},w=o.certLoadPolicy.default,I={loadPolicy:w,timeout:w.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},T={onSuccess:($,H,V,U)=>{p($.data)},onError:($,H,V,U)=>{v(new Gn({type:be.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:V,response:xe({url:E.url,data:void 0},$)},`"${n}" certificate request failed (${d}). Status: ${$.code} (${$.text})`))},onTimeout:($,H,V)=>{v(new Gn({type:be.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:V,response:{url:E.url,data:void 0}},`"${n}" certificate request timed out (${d})`))},onAbort:($,H,V)=>{v(new Error("aborted"))}};c.load(E,I,T)})):Promise.resolve()}setMediaKeysServerCertificate(n,o,a){return new Promise((c,d)=>{n.setServerCertificate(a).then(p=>{this.log(`setServerCertificate ${p?"success":"not supported by CDM"} (${a?.byteLength}) on "${o}"`),c(n)}).catch(p=>{d(new Gn({type:be.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:p,fatal:!0},p.message))})})}renewLicense(n,o){return this.requestLicense(n,new Uint8Array(o)).then(a=>this.updateKeySession(n,new Uint8Array(a)).catch(c=>{throw new Gn({type:be.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:c,fatal:!0},c.message)}))}setupLicenseXHR(n,o,a,c){const d=this.config.licenseXhrSetup;return d?Promise.resolve().then(()=>{if(!a.decryptdata)throw new Error("Key removed");return d.call(this.hls,n,o,a,c)}).catch(p=>{if(!a.decryptdata)throw p;return n.open("POST",o,!0),d.call(this.hls,n,o,a,c)}).then(p=>(n.readyState||n.open("POST",o,!0),{xhr:n,licenseChallenge:p||c})):(n.open("POST",o,!0),Promise.resolve({xhr:n,licenseChallenge:c}))}requestLicense(n,o){const a=this.config.keyLoadPolicy.default;return new Promise((c,d)=>{const p=this.getLicenseServerUrl(n.keySystem);this.log(`Sending license request to URL: ${p}`);const v=new XMLHttpRequest;v.responseType="arraybuffer",v.onreadystatechange=()=>{if(!this.hls||!n.mediaKeysSession)return d(new Error("invalid state"));if(v.readyState===4)if(v.status===200){this._requestLicenseFailureCount=0;let E=v.response;this.log(`License received ${E instanceof ArrayBuffer?E.byteLength:E}`);const w=this.config.licenseResponseCallback;if(w)try{E=w.call(this.hls,v,p,n)}catch(I){this.error(I)}c(E)}else{const E=a.errorRetry,w=E?E.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>w||v.status>=400&&v.status<500)d(new Gn({type:be.KEY_SYSTEM_ERROR,details:Z.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:{url:p,data:void 0,code:v.status,text:v.statusText}},`License Request XHR failed (${p}). Status: ${v.status} (${v.statusText})`));else{const I=w-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${I} attempts left`),this.requestLicense(n,o).then(c,d)}}},n.licenseXhr&&n.licenseXhr.readyState!==XMLHttpRequest.DONE&&n.licenseXhr.abort(),n.licenseXhr=v,this.setupLicenseXHR(v,p,n,o).then(({xhr:E,licenseChallenge:w})=>{E.send(w)})})}onMediaAttached(n,o){if(!this.config.emeEnabled)return;const a=o.media;this.media=a,a.addEventListener("encrypted",this.onMediaEncrypted),a.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const n=this.media,o=this.mediaKeySessions;n&&(n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Hn.clearKeyUriToKeyIdMap();const a=o.length;qi.CDMCleanupPromise=Promise.all(o.map(c=>this.removeSession(c)).concat(n?.setMediaKeys(null).catch(c=>{this.log(`Could not clear media keys: ${c}. media.src: ${n?.src}`)}))).then(()=>{a&&(this.log("finished closing key sessions and clearing media keys"),o.length=0)}).catch(c=>{this.log(`Could not close sessions and clear media keys: ${c}. media.src: ${n?.src}`)})}onManifestLoaded(n,{sessionKeys:o}){if(!(!o||!this.config.emeEnabled)&&!this.keyFormatPromise){const a=o.reduce((c,d)=>(c.indexOf(d.keyFormat)===-1&&c.push(d.keyFormat),c),[]);this.log(`Selecting key-system from session-keys ${a.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(a)}}removeSession(n){const{mediaKeysSession:o,licenseXhr:a}=n;if(o){this.log(`Remove licenses and keys and close session ${o.sessionId}`),o.onmessage=null,o.onkeystatuseschange=null,a&&a.readyState!==XMLHttpRequest.DONE&&a.abort(),n.mediaKeysSession=n.decryptdata=n.licenseXhr=void 0;const c=this.mediaKeySessions.indexOf(n);return c>-1&&this.mediaKeySessions.splice(c,1),o.remove().catch(d=>{this.log(`Could not remove session: ${d}`)}).then(()=>o.close()).catch(d=>{this.log(`Could not close session: ${d}`)})}}}qi.CDMCleanupPromise=void 0;class Gn extends Error{constructor(n,o){super(o),this.data=void 0,n.error||(n.error=new Error(o)),this.data=n,n.err=n.error}}const g0=1;var Nt={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"};const m0="h";class Ji{constructor(n){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=c=>{try{this.apply(c,{ot:Nt.MANIFEST,su:!this.initialized})}catch(d){K.warn("Could not generate manifest CMCD data.",d)}},this.applyFragmentData=c=>{try{const d=c.frag,p=this.hls.levels[d.level],v=this.getObjectType(d),E={d:d.duration*1e3,ot:v};(v===Nt.VIDEO||v===Nt.AUDIO||v==Nt.MUXED)&&(E.br=p.bitrate/1e3,E.tb=this.getTopBandwidth(v)/1e3,E.bl=this.getBufferLength(v)),this.apply(c,E)}catch(d){K.warn("Could not generate segment CMCD data.",d)}},this.hls=n;const o=this.config=n.config,{cmcd:a}=o;a!=null&&(o.pLoader=this.createPlaylistLoader(),o.fLoader=this.createFragmentLoader(),this.sid=a.sessionId||Ji.uuid(),this.cid=a.contentId,this.useHeaders=a.useHeaders===!0,this.registerListeners())}registerListeners(){const n=this.hls;n.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(P.MEDIA_DETACHED,this.onMediaDetached,this),n.on(P.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const n=this.hls;n.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(P.MEDIA_DETACHED,this.onMediaDetached,this),n.off(P.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(n,o){this.media=o.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(n,o){var a,c;this.audioBuffer=(a=o.tracks.audio)==null?void 0:a.buffer,this.videoBuffer=(c=o.tracks.video)==null?void 0:c.buffer}createData(){var n;return{v:g0,sf:m0,sid:this.sid,cid:this.cid,pr:(n=this.media)==null?void 0:n.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(n,o={}){ae(o,this.createData());const a=o.ot===Nt.INIT||o.ot===Nt.VIDEO||o.ot===Nt.MUXED;if(this.starved&&a&&(o.bs=!0,o.su=!0,this.starved=!1),o.su==null&&(o.su=this.buffering),this.useHeaders){const c=Ji.toHeaders(o);if(!Object.keys(c).length)return;n.headers||(n.headers={}),ae(n.headers,c)}else{const c=Ji.toQuery(o);if(!c)return;n.url=Ji.appendQueryToUri(n.url,c)}}getObjectType(n){const{type:o}=n;if(o==="subtitle")return Nt.TIMED_TEXT;if(n.sn==="initSegment")return Nt.INIT;if(o==="audio")return Nt.AUDIO;if(o==="main")return this.hls.audioTracks.length?Nt.VIDEO:Nt.MUXED}getTopBandwidth(n){let o=0,a;const c=this.hls;if(n===Nt.AUDIO)a=c.audioTracks;else{const d=c.maxAutoLevel,p=d>-1?d+1:c.levels.length;a=c.levels.slice(0,p)}for(const d of a)d.bitrate>o&&(o=d.bitrate);return o>0?o:NaN}getBufferLength(n){const o=this.hls.media,a=n===Nt.AUDIO?this.audioBuffer:this.videoBuffer;return!a||!o?NaN:kr.bufferInfo(a,o.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:n}=this.config,o=this.applyPlaylistData,a=n||this.config.loader;return class{constructor(d){this.loader=void 0,this.loader=new a(d)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(d,p,v){o(d),this.loader.load(d,p,v)}}}createFragmentLoader(){const{fLoader:n}=this.config,o=this.applyFragmentData,a=n||this.config.loader;return class{constructor(d){this.loader=void 0,this.loader=new a(d)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(d,p,v){o(d),this.loader.load(d,p,v)}}}static uuid(){const n=URL.createObjectURL(new Blob),o=n.toString();return URL.revokeObjectURL(n),o.slice(o.lastIndexOf("/")+1)}static serialize(n){const o=[],a=w=>!Number.isNaN(w)&&w!=null&&w!==""&&w!==!1,c=w=>Math.round(w),d=w=>c(w/100)*100,v={br:c,d:c,bl:d,dl:d,mtp:d,nor:w=>encodeURIComponent(w),rtp:d,tb:c},E=Object.keys(n||{}).sort();for(const w of E){let I=n[w];if(!a(I)||w==="v"&&I===1||w=="pr"&&I===1)continue;const T=v[w];T&&(I=T(I));const $=typeof I;let H;w==="ot"||w==="sf"||w==="st"?H=`${w}=${I}`:$==="boolean"?H=w:$==="number"?H=`${w}=${I}`:H=`${w}=${JSON.stringify(I)}`,o.push(H)}return o.join(",")}static toHeaders(n){const o=Object.keys(n),a={},c=["Object","Request","Session","Status"],d=[{},{},{},{}],p={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const v of o){const E=p[v]!=null?p[v]:1;d[E][v]=n[v]}for(let v=0;v<d.length;v++){const E=Ji.serialize(d[v]);E&&(a[`CMCD-${c[v]}`]=E)}return a}static toQuery(n){return`CMCD=${encodeURIComponent(Ji.serialize(n))}`}static appendQueryToUri(n,o){if(!o)return n;const a=n.includes("?")?"&":"?";return`${n}${a}${o}`}}const v0=3e5;class C0{constructor(n){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=n,this.log=K.log.bind(K,"[content-steering]:"),this.registerListeners()}registerListeners(){const n=this.hls;n.on(P.MANIFEST_LOADING,this.onManifestLoading,this),n.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),n.on(P.MANIFEST_PARSED,this.onManifestParsed,this),n.on(P.ERROR,this.onError,this)}unregisterListeners(){const n=this.hls;!n||(n.off(P.MANIFEST_LOADING,this.onManifestLoading,this),n.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),n.off(P.MANIFEST_PARSED,this.onManifestParsed,this),n.off(P.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const n=Math.max(this.timeToLoad*1e3-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,n)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(n){const o=this.levels;o&&(this.levels=o.filter(a=>a!==n))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(n,o){const{contentSteering:a}=o;a!==null&&(this.pathwayId=a.pathwayId,this.uri=a.uri,this.started&&this.startLoad())}onManifestParsed(n,o){this.audioTracks=o.audioTracks,this.subtitleTracks=o.subtitleTracks}onError(n,o){const{errorAction:a}=o;if(a?.action===fn.SendAlternateToPenaltyBox&&a.flags===Cn.MoveAllAlternatesMatchingHost){let c=this.pathwayPriority;const d=this.pathwayId;this.penalizedPathways[d]||(this.penalizedPathways[d]=performance.now()),!c&&this.levels&&(c=this.levels.reduce((p,v)=>(p.indexOf(v.pathwayId)===-1&&p.push(v.pathwayId),p),[])),c&&c.length>1&&(this.updatePathwayPriority(c),a.resolved=this.pathwayId!==d)}}filterParsedLevels(n){this.levels=n;let o=this.getLevelsForPathway(this.pathwayId);if(o.length===0){const a=n[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${a}"`),o=this.getLevelsForPathway(a),this.pathwayId=a}return o.length!==n.length?(this.log(`Found ${o.length}/${n.length} levels in Pathway "${this.pathwayId}"`),o):n}getLevelsForPathway(n){return this.levels===null?[]:this.levels.filter(o=>n===o.pathwayId)}updatePathwayPriority(n){this.pathwayPriority=n;let o;const a=this.penalizedPathways,c=performance.now();Object.keys(a).forEach(d=>{c-a[d]>v0&&delete a[d]});for(let d=0;d<n.length;d++){const p=n[d];if(a[p])continue;if(p===this.pathwayId)return;const v=this.hls.nextLoadLevel,E=this.hls.levels[v];if(o=this.getLevelsForPathway(p),o.length>0){this.log(`Setting Pathway to "${p}"`),this.pathwayId=p,this.hls.trigger(P.LEVELS_UPDATED,{levels:o});const w=this.hls.levels[v];E&&w&&this.levels&&(w.attrs["STABLE-VARIANT-ID"]!==E.attrs["STABLE-VARIANT-ID"]&&w.bitrate!==E.bitrate&&this.log(`Unstable Pathways change from bitrate ${E.bitrate} to ${w.bitrate}`),this.hls.nextLoadLevel=v);break}}}clonePathways(n){const o=this.levels;if(!o)return;const a={},c={};n.forEach(d=>{const{ID:p,"BASE-ID":v,"URI-REPLACEMENT":E}=d;if(o.some(I=>I.pathwayId===p))return;const w=this.getLevelsForPathway(v).map(I=>{const T=ae({},I);T.details=void 0,T.url=j1(I.uri,I.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",E);const $=new He(I.attrs);$["PATHWAY-ID"]=p;const H=$.AUDIO&&`${$.AUDIO}_clone_${p}`,V=$.SUBTITLES&&`${$.SUBTITLES}_clone_${p}`;H&&(a[$.AUDIO]=H,$.AUDIO=H),V&&(c[$.SUBTITLES]=V,$.SUBTITLES=V),T.attrs=$;const U=new Ui(T);return Fo(U,"audio",H),Fo(U,"text",V),U});o.push(...w),V1(this.audioTracks,a,E,p),V1(this.subtitleTracks,c,E,p)})}loadSteeringManifest(n){const o=this.hls.config,a=o.loader;this.loader&&this.loader.destroy(),this.loader=new a(o);let c;try{c=new self.URL(n)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${n}`);return}if(c.protocol!=="data:"){const I=(this.hls.bandwidthEstimate||o.abrEwmaDefaultEstimate)|0;c.searchParams.set("_HLS_pathway",this.pathwayId),c.searchParams.set("_HLS_throughput",""+I)}const d={responseType:"json",url:c.href},p=o.steeringManifestLoadPolicy.default,v=p.errorRetry||p.timeoutRetry||{},E={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:v.maxNumRetry||0,retryDelay:v.retryDelayMs||0,maxRetryDelay:v.maxRetryDelayMs||0},w={onSuccess:(I,T,$,H)=>{this.log(`Loaded steering manifest: "${c}"`);const V=I.data;if(V.VERSION!==1){this.log(`Steering VERSION ${V.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=V.TTL;const{"RELOAD-URI":U,"PATHWAY-CLONES":z,"PATHWAY-PRIORITY":se}=V;if(U)try{this.uri=new self.URL(U,c).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${U}`);return}this.scheduleRefresh(this.uri||$.url),z&&this.clonePathways(z),se&&this.updatePathwayPriority(se)},onError:(I,T,$,H)=>{if(this.log(`Error loading steering manifest: ${I.code} ${I.text} (${T.url})`),this.stopLoad(),I.code===410){this.enabled=!1,this.log(`Steering manifest ${T.url} no longer available`);return}let V=this.timeToLoad*1e3;if(I.code===429){const U=this.loader;if(typeof U?.getResponseHeader=="function"){const z=U.getResponseHeader("Retry-After");z&&(V=parseFloat(z)*1e3)}this.log(`Steering manifest ${T.url} rate limited`);return}this.scheduleRefresh(this.uri||T.url,V)},onTimeout:(I,T,$)=>{this.log(`Timeout loading steering manifest (${T.url})`),this.scheduleRefresh(this.uri||T.url)}};this.log(`Requesting steering manifest: ${c}`),this.loader.load(d,E,w)}scheduleRefresh(n,o=this.timeToLoad*1e3){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout(()=>{this.loadSteeringManifest(n)},o)}}function V1(m,n,o,a){!m||Object.keys(n).forEach(c=>{const d=m.filter(p=>p.groupId===c).map(p=>{const v=ae({},p);return v.details=void 0,v.attrs=new He(v.attrs),v.url=v.attrs.URI=j1(p.url,p.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",o),v.groupId=v.attrs["GROUP-ID"]=n[c],v.attrs["PATHWAY-ID"]=a,v});m.push(...d)})}function j1(m,n,o,a){const{HOST:c,PARAMS:d,[o]:p}=a;let v;n&&(v=p?.[n],v&&(m=v));const E=new self.URL(m);return c&&!v&&(E.host=c),d&&Object.keys(d).sort().forEach(w=>{w&&E.searchParams.set(w,d[w])}),E.href}const E0=/^age:\s*[\d.]+\s*$/im;class U1{constructor(n){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=n&&n.xhrSetup||null,this.stats=new Ut,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const n=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),n&&(n.onreadystatechange=null,n.onprogress=null,n.readyState!==4&&(this.stats.aborted=!0,n.abort()))}abort(){var n;this.abortInternal(),(n=this.callbacks)!=null&&n.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(n,o,a){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=n,this.config=o,this.callbacks=a,this.loadInternal()}loadInternal(){const{config:n,context:o}=this;if(!n)return;const a=this.loader=new self.XMLHttpRequest,c=this.stats;c.loading.first=0,c.loaded=0;const d=this.xhrSetup;d?Promise.resolve().then(()=>{if(!this.stats.aborted)return d(a,o.url)}).catch(p=>(a.open("GET",o.url,!0),d(a,o.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(a,o,n)}).catch(p=>{this.callbacks.onError({code:a.status,text:p.message},o,a,c)}):this.openAndSendXhr(a,o,n)}openAndSendXhr(n,o,a){n.readyState||n.open("GET",o.url,!0);const c=this.context.headers,{maxTimeToFirstByteMs:d,maxLoadTimeMs:p}=a.loadPolicy;if(c)for(const v in c)n.setRequestHeader(v,c[v]);o.rangeEnd&&n.setRequestHeader("Range","bytes="+o.rangeStart+"-"+(o.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=o.responseType,self.clearTimeout(this.requestTimeout),a.timeout=d&&fe(d)?d:p,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout),n.send()}readystatechange(){const{context:n,loader:o,stats:a}=this;if(!n||!o)return;const c=o.readyState,d=this.config;if(!a.aborted&&c>=2&&(a.loading.first===0&&(a.loading.first=Math.max(self.performance.now(),a.loading.start),d.timeout!==d.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),d.timeout=d.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),d.loadPolicy.maxLoadTimeMs-(a.loading.first-a.loading.start)))),c===4)){self.clearTimeout(this.requestTimeout),o.onreadystatechange=null,o.onprogress=null;const p=o.status,v=o.responseType!=="text";if(p>=200&&p<300&&(v&&o.response||o.responseText!==null)){a.loading.end=Math.max(self.performance.now(),a.loading.first);const E=v?o.response:o.responseText,w=o.responseType==="arraybuffer"?E.byteLength:E.length;if(a.loaded=a.total=w,a.bwEstimate=a.total*8e3/(a.loading.end-a.loading.first),!this.callbacks)return;const I=this.callbacks.onProgress;if(I&&I(a,n,E,o),!this.callbacks)return;const T={url:o.responseURL,data:E,code:p};this.callbacks.onSuccess(T,a,n,o)}else{const E=d.loadPolicy.errorRetry,w=a.retry;In(E,w,!1,p)?this.retry(E):(K.error(`${p} while loading ${n.url}`),this.callbacks.onError({code:p,text:o.statusText},n,o,a))}}}loadtimeout(){var n;const o=(n=this.config)==null?void 0:n.loadPolicy.timeoutRetry,a=this.stats.retry;if(In(o,a,!0))this.retry(o);else{K.warn(`timeout while loading ${this.context.url}`);const c=this.callbacks;c&&(this.abortInternal(),c.onTimeout(this.stats,this.context,this.loader))}}retry(n){const{context:o,stats:a}=this;this.retryDelay=ri(n,a.retry),a.retry++,K.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${o.url}, retrying ${a.retry}/${n.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(n){const o=this.stats;o.loaded=n.loaded,n.lengthComputable&&(o.total=n.total)}getCacheAge(){let n=null;if(this.loader&&E0.test(this.loader.getAllResponseHeaders())){const o=this.loader.getResponseHeader("age");n=o?parseFloat(o):null}return n}getResponseHeader(n){return this.loader&&new RegExp(`^${n}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(n):null}}function Va(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const y0=/(\d+)-(\d+)\/(\d+)/;class ja{constructor(n){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=n.fetchSetup||w0,this.controller=new self.AbortController,this.stats=new Ut}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const n=this.response;n!=null&&n.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var n;this.abortInternal(),(n=this.callbacks)!=null&&n.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(n,o,a){const c=this.stats;if(c.loading.start)throw new Error("Loader can only be used once.");c.loading.start=self.performance.now();const d=Ua(n,this.controller.signal),p=a.onProgress,v=n.responseType==="arraybuffer",E=v?"byteLength":"length",{maxTimeToFirstByteMs:w,maxLoadTimeMs:I}=o.loadPolicy;this.context=n,this.config=o,this.callbacks=a,this.request=this.fetchSetup(n,d),self.clearTimeout(this.requestTimeout),o.timeout=w&&fe(w)?w:I,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),a.onTimeout(c,n,this.response)},o.timeout),self.fetch(this.request).then(T=>{this.response=this.loader=T;const $=Math.max(self.performance.now(),c.loading.start);if(self.clearTimeout(this.requestTimeout),o.timeout=I,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),a.onTimeout(c,n,this.response)},I-($-c.loading.start)),!T.ok){const{status:H,statusText:V}=T;throw new b0(V||"fetch, bad network response",H,T)}return c.loading.first=$,c.total=z1(T.headers)||c.total,p&&fe(o.highWaterMark)?this.loadProgressively(T,c,n,o.highWaterMark,p):v?T.arrayBuffer():n.responseType==="json"?T.json():T.text()}).then(T=>{const{response:$}=this;self.clearTimeout(this.requestTimeout),c.loading.end=Math.max(self.performance.now(),c.loading.first);const H=T[E];H&&(c.loaded=c.total=H);const V={url:$.url,data:T,code:$.status};p&&!fe(o.highWaterMark)&&p(c,n,T,$),a.onSuccess(V,c,n,$)}).catch(T=>{if(self.clearTimeout(this.requestTimeout),c.aborted)return;const $=T&&T.code||0,H=T?T.message:null;a.onError({code:$,text:H},n,T?T.details:null,c)})}getCacheAge(){let n=null;if(this.response){const o=this.response.headers.get("age");n=o?parseFloat(o):null}return n}getResponseHeader(n){return this.response?this.response.headers.get(n):null}loadProgressively(n,o,a,c=0,d){const p=new g1,v=n.body.getReader(),E=()=>v.read().then(w=>{if(w.done)return p.dataLength&&d(o,a,p.flush(),n),Promise.resolve(new ArrayBuffer(0));const I=w.value,T=I.length;return o.loaded+=T,T<c||p.dataLength?(p.push(I),p.dataLength>=c&&d(o,a,p.flush(),n)):d(o,a,I,n),E()}).catch(()=>Promise.reject());return E()}}function Ua(m,n){const o={method:"GET",mode:"cors",credentials:"same-origin",signal:n,headers:new self.Headers(ae({},m.headers))};return m.rangeEnd&&o.headers.set("Range","bytes="+m.rangeStart+"-"+String(m.rangeEnd-1)),o}function Z1(m){const n=y0.exec(m);if(n)return parseInt(n[2])-parseInt(n[1])+1}function z1(m){const n=m.get("Content-Range");if(n){const a=Z1(n);if(fe(a))return a}const o=m.get("Content-Length");if(o)return parseInt(o)}function w0(m,n){return new self.Request(m.url,n)}class b0 extends Error{constructor(n,o,a){super(n),this.code=void 0,this.details=void 0,this.code=o,this.details=a}}const G1=/\s/,Za={newCue(m,n,o,a){const c=[];let d,p,v,E,w;const I=self.VTTCue||self.TextTrackCue;for(let $=0;$<a.rows.length;$++)if(d=a.rows[$],v=!0,E=0,w="",!d.isEmpty()){var T;for(let U=0;U<d.chars.length;U++)G1.test(d.chars[U].uchar)&&v?E++:(w+=d.chars[U].uchar,v=!1);d.cueStartTime=n,n===o&&(o+=1e-4),E>=16?E--:E++;const H=R1(w.trim()),V=$a(n,o,H);m!=null&&(T=m.cues)!=null&&T.getCueById(V)||(p=new I(n,o,H),p.id=V,p.line=$+1,p.align="left",p.position=10+Math.min(80,Math.floor(E*8/32)*10),c.push(p))}return m&&c.length&&(c.sort(($,H)=>$.line==="auto"||H.line==="auto"?0:$.line>8&&H.line>8?H.line-$.line:$.line-H.line),c.forEach($=>lo(m,$))),c}},W1={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},x0=xe(xe({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:U1,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Pa,bufferController:wu,capLevelController:Ko,errorController:ma,fpsController:p0,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Pt,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:W1},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},za()),{},{subtitleStreamController:Yl,subtitleTrackController:ql,timelineController:F1,audioStreamController:Gl,audioTrackController:Wl,emeController:qi,cmcdController:Ji,contentSteeringController:C0});function za(){return{cueHandler:Za,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function _0(m,n){if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(n.liveMaxLatencyDurationCount!==void 0&&(n.liveSyncDurationCount===void 0||n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(n.liveMaxLatencyDuration!==void 0&&(n.liveSyncDuration===void 0||n.liveMaxLatencyDuration<=n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const o=Ga(m),a=["manifest","level","frag"],c=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return a.forEach(d=>{const p=`${d==="level"?"playlist":d}LoadPolicy`,v=n[p]===void 0,E=[];c.forEach(w=>{const I=`${d}Loading${w}`,T=n[I];if(T!==void 0&&v){E.push(I);const $=o[p].default;switch(n[p]={default:$},w){case"TimeOut":$.maxLoadTimeMs=T,$.maxTimeToFirstByteMs=T;break;case"MaxRetry":$.errorRetry.maxNumRetry=T,$.timeoutRetry.maxNumRetry=T;break;case"RetryDelay":$.errorRetry.retryDelayMs=T,$.timeoutRetry.retryDelayMs=T;break;case"MaxRetryTimeout":$.errorRetry.maxRetryDelayMs=T,$.timeoutRetry.maxRetryDelayMs=T;break}}}),E.length&&K.warn(`hls.js config: "${E.join('", "')}" setting(s) are deprecated, use "${p}": ${JSON.stringify(n[p])}`)}),xe(xe({},o),n)}function Ga(m){return m&&typeof m=="object"?Array.isArray(m)?m.map(Ga):Object.keys(m).reduce((n,o)=>(n[o]=Ga(m[o]),n),{}):m}function K1(m){const n=m.loader;n!==ja&&n!==U1?(K.log("[config]: Custom loader detected, cannot enable progressive streaming"),m.progressive=!1):Va()&&(m.loader=ja,m.progressive=!0,m.enableSoftwareAES=!0,K.log("[config]: Progressive streaming enabled, using FetchLoader"))}class vo{static get version(){return"1.4.0"}static isSupported(){return ms()}static get Events(){return P}static get ErrorTypes(){return be}static get ErrorDetails(){return Z}static get DefaultConfig(){return vo.defaultConfig?vo.defaultConfig:x0}static set DefaultConfig(n){vo.defaultConfig=n}constructor(n={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new ws,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,rt(n.debug||!1,"Hls instance");const o=this.config=_0(vo.DefaultConfig,n);this.userConfig=n,this._autoLevelCapping=-1,o.progressive&&K1(o);const{abrController:a,bufferController:c,capLevelController:d,errorController:p,fpsController:v}=o,E=new p(this),w=this.abrController=new a(this),I=this.bufferController=new c(this),T=this.capLevelController=new d(this),$=new v(this),H=new bn(this),V=new os(this),U=o.contentSteeringController,z=U?new U(this):null,se=this.levelController=new cs(this,z),Ee=new Os(this),de=new Ca(this.config),ke=this.streamController=new Ul(this,Ee,de);T.setStreamController(ke),$.setStreamController(ke);const Ie=[H,se,ke];z&&Ie.splice(1,0,z),this.networkControllers=Ie;const it=[w,I,T,$,V,Ee];this.audioTrackController=this.createController(o.audioTrackController,Ie);const $e=o.audioStreamController;$e&&Ie.push(new $e(this,Ee,de)),this.subtitleTrackController=this.createController(o.subtitleTrackController,Ie);const ot=o.subtitleStreamController;ot&&Ie.push(new ot(this,Ee,de)),this.createController(o.timelineController,it),de.emeController=this.emeController=this.createController(o.emeController,it),this.cmcdController=this.createController(o.cmcdController,it),this.latencyController=this.createController(ji,it),this.coreComponents=it,Ie.push(E);const ut=E.onErrorOut;typeof ut=="function"&&this.on(P.ERROR,ut,E)}createController(n,o){if(n){const a=new n(this);return o&&o.push(a),a}return null}on(n,o,a=this){this._emitter.on(n,o,a)}once(n,o,a=this){this._emitter.once(n,o,a)}removeAllListeners(n){this._emitter.removeAllListeners(n)}off(n,o,a=this,c){this._emitter.off(n,o,a,c)}listeners(n){return this._emitter.listeners(n)}emit(n,o,a){return this._emitter.emit(n,o,a)}trigger(n,o){if(this.config.debug)return this.emit(n,n,o);try{return this.emit(n,n,o)}catch(a){K.error("An internal error happened while handling event "+n+'. Error message: "'+a.message+'". Here is a stacktrace:',a),this.trigger(P.ERROR,{type:be.OTHER_ERROR,details:Z.INTERNAL_EXCEPTION,fatal:!1,event:n,error:a})}return!1}listenerCount(n){return this._emitter.listenerCount(n)}destroy(){K.log("destroy"),this.trigger(P.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(o=>o.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(o=>o.destroy()),this.coreComponents.length=0;const n=this.config;n.xhrSetup=n.fetchSetup=void 0,this.userConfig=null}attachMedia(n){K.log("attachMedia"),this._media=n,this.trigger(P.MEDIA_ATTACHING,{media:n})}detachMedia(){K.log("detachMedia"),this.trigger(P.MEDIA_DETACHING,void 0),this._media=null}loadSource(n){this.stopLoad();const o=this.media,a=this.url,c=this.url=W.buildAbsoluteURL(self.location.href,n,{alwaysNormalize:!0});K.log(`loadSource:${c}`),o&&a&&a!==c&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(o)),this.trigger(P.MANIFEST_LOADING,{url:n})}startLoad(n=-1){K.log(`startLoad(${n})`),this.networkControllers.forEach(o=>{o.startLoad(n)})}stopLoad(){K.log("stopLoad"),this.networkControllers.forEach(n=>{n.stopLoad()})}swapAudioCodec(){K.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){K.log("recoverMediaError");const n=this._media;this.detachMedia(),n&&this.attachMedia(n)}removeLevel(n,o=0){this.levelController.removeLevel(n,o)}get levels(){const n=this.levelController.levels;return n||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(n){K.log(`set currentLevel:${n}`),this.loadLevel=n,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(n){K.log(`set nextLevel:${n}`),this.levelController.manualLevel=n,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(n){K.log(`set loadLevel:${n}`),this.levelController.manualLevel=n}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(n){this.levelController.nextLoadLevel=n}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(n){K.log(`set firstLevel:${n}`),this.levelController.firstLevel=n}get startLevel(){return this.levelController.startLevel}set startLevel(n){K.log(`set startLevel:${n}`),n!==-1&&(n=Math.max(n,this.minAutoLevel)),this.levelController.startLevel=n}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(n){const o=!!n;o!==this.config.capLevelToPlayerSize&&(o?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=o)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:n}=this.abrController;return n?n.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:n}=this.abrController;return n?n.getEstimateTTFB():NaN}set autoLevelCapping(n){this._autoLevelCapping!==n&&(K.log(`set autoLevelCapping:${n}`),this._autoLevelCapping=n)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(n){ss.indexOf(n)>-1&&(this._maxHdcpLevel=n)}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:n,config:{minAutoBitrate:o}}=this;if(!n)return 0;const a=n.length;for(let c=0;c<a;c++)if(n[c].maxBitrate>=o)return c;return 0}get maxAutoLevel(){const{levels:n,autoLevelCapping:o,maxHdcpLevel:a}=this;let c;if(o===-1&&n&&n.length?c=n.length-1:c=o,a)for(let d=c;d--;){const p=n[d].attrs["HDCP-LEVEL"];if(p&&p<=a)return d}return c}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(n){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,n)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const n=this.audioTrackController;return n?n.audioTracks:[]}get audioTrack(){const n=this.audioTrackController;return n?n.audioTrack:-1}set audioTrack(n){const o=this.audioTrackController;o&&(o.audioTrack=n)}get subtitleTracks(){const n=this.subtitleTrackController;return n?n.subtitleTracks:[]}get subtitleTrack(){const n=this.subtitleTrackController;return n?n.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(n){const o=this.subtitleTrackController;o&&(o.subtitleTrack=n)}get subtitleDisplay(){const n=this.subtitleTrackController;return n?n.subtitleDisplay:!1}set subtitleDisplay(n){const o=this.subtitleTrackController;o&&(o.subtitleDisplay=n)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(n){this.config.lowLatencyMode=n}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}vo.defaultConfig=void 0}}]);

//# sourceMappingURL=21.acb70671.js.map